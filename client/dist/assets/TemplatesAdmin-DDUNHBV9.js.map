{"version":3,"file":"TemplatesAdmin-DDUNHBV9.js","sources":["../../src/features/templates/TemplatesAdmin.jsx"],"sourcesContent":["import React from 'react';\r\nimport { serverList, serverAdd, serverDelete, serverImport, serverUpdate, serverBulkDelete } from '../examples/library.js';\r\n\r\nexport default function TemplatesAdmin() {\r\n  const [list, setList] = React.useState([]);\r\n  const [q, setQ] = React.useState('');\r\n  const [typeFilter, setTypeFilter] = React.useState('');\r\n  const [busy, setBusy] = React.useState(false);\r\n  const [selected, setSelected] = React.useState(new Set());\r\n  const [editing, setEditing] = React.useState({}); // id -> {name,type,tags}\r\n  const [creating, setCreating] = React.useState({ name: '', type: 'rest', tags: '', config: '{\\n  \"baseUrl\": \"https://example.com\"\\n}' });\r\n  const importRef = React.useRef(null);\r\n\r\n  const load = React.useCallback(async () => {\r\n    setBusy(true);\r\n    try { setList(await serverList()); } finally { setBusy(false); }\r\n  }, []);\r\n\r\n  React.useEffect(() => { load(); }, [load]);\r\n\r\n  const filtered = React.useMemo(() => {\r\n    const needle = q.trim().toLowerCase();\r\n    return (list || []).filter(t => {\r\n      if (typeFilter && String(t.type).toLowerCase() !== typeFilter) return false;\r\n      if (!needle) return true;\r\n      const hay = `${t.name} ${t.type} ${(t.tags||[]).join(' ')}`.toLowerCase();\r\n      return hay.includes(needle);\r\n    });\r\n  }, [list, q, typeFilter]);\r\n\r\n  async function onCreate() {\r\n    try {\r\n      const cfg = JSON.parse(creating.config || '{}');\r\n      const tags = creating.tags.split(',').map(s=>s.trim()).filter(Boolean);\r\n      await serverAdd({ name: creating.name.trim(), type: creating.type, config: cfg, tags });\r\n      setCreating({ name: '', type: creating.type, tags: '', config: '{\\n}\\n' });\r\n      await load();\r\n    } catch (e) { alert(e.message || 'Create failed'); }\r\n  }\r\n\r\n  async function onDelete(id) { if (!confirm('Delete template?')) return; await serverDelete(id); await load(); }\r\n  async function onBulkDelete() { if (!selected.size) return; if (!confirm(`Delete ${selected.size} templates?`)) return; await serverBulkDelete(Array.from(selected)); setSelected(new Set()); await load(); }\r\n  function toggle(id) { setSelected(prev => { const n = new Set(prev); if (n.has(id)) n.delete(id); else n.add(id); return n; }); }\r\n  function toggleAll() { const all = filtered.map(t=>t.id); const allSelected = all.every(id => selected.has(id)); setSelected(new Set(allSelected ? [] : all)); }\r\n  function startEdit(t){\r\n    let cfg = '';\r\n    try { cfg = JSON.stringify(t.config ?? {}, null, 2); } catch { cfg = '{}'; }\r\n    setEditing(prev => ({ ...prev, [t.id]: { name: t.name, type: t.type, tags: (t.tags||[]).join(', '), config: cfg, configError: '' } }));\r\n  }\r\n  function cancelEdit(id){ setEditing(prev => { const n = { ...prev }; delete n[id]; return n; }); }\r\n  function onEditKey(id, e){\r\n    if (e.key === 'Escape') { e.preventDefault(); cancelEdit(id); return; }\r\n    if (e.key === 'Enter') {\r\n      const tag = (e.target?.tagName||'').toUpperCase();\r\n      // Save on Enter for single-line fields; for textarea require Ctrl/Cmd+Enter\r\n      if (tag === 'TEXTAREA') { if (e.ctrlKey || e.metaKey) { e.preventDefault(); saveEdit(id); } }\r\n      else { e.preventDefault(); saveEdit(id); }\r\n    }\r\n  }\r\n  async function saveEdit(id){\r\n    try {\r\n      const e = editing[id];\r\n      const tags = String(e.tags||'').split(',').map(s=>s.trim()).filter(Boolean);\r\n      let cfg = undefined;\r\n      if (e.config != null) {\r\n        try { cfg = JSON.parse(e.config || '{}'); }\r\n        catch (parseErr) { setEditing(p=>({...p,[id]:{...p[id], configError: String(parseErr.message||'Invalid JSON')}})); return; }\r\n      }\r\n      await serverUpdate(id, { name: e.name, type: e.type, tags, ...(cfg!==undefined?{config:cfg}:{}) });\r\n      cancelEdit(id); await load();\r\n    } catch (er){ alert(er.message||'Update failed'); }\r\n  }\r\n  async function onClone(t) {\r\n    try {\r\n      const name = `${t.name} (copy)`;\r\n      const created = await serverAdd({ name, type: t.type, tags: Array.isArray(t.tags)?t.tags:[], config: t.config || {} });\r\n      // Pre-open edit mode for the clone\r\n      let cfg = '{}'; try { cfg = JSON.stringify(created.config ?? {}, null, 2); } catch { cfg = '{}'; }\r\n      setEditing(prev => ({ ...prev, [created.id]: { name: created.name, type: created.type, tags: (created.tags||[]).join(', '), config: cfg, configError: '' } }));\r\n      await load();\r\n    } catch (e) { alert(e.message || 'Clone failed'); }\r\n  }\r\n\r\n  async function onImport(file) {\r\n    try {\r\n      const text = await file.text();\r\n      const payload = JSON.parse(text);\r\n      const arr = Array.isArray(payload) ? payload : (payload.templates||[]);\r\n      await serverImport(arr);\r\n      await load();\r\n    } catch (e) { alert(e.message || 'Import failed'); }\r\n  }\r\n\r\n  const types = React.useMemo(() => Array.from(new Set((list||[]).map(t=>String(t.type||'').toLowerCase()))), [list]);\r\n  const allTags = React.useMemo(() => {\r\n    const s = new Set(); (list||[]).forEach(t => (t.tags||[]).forEach(tag => s.add(tag)));\r\n    return Array.from(s).sort();\r\n  }, [list]);\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h2 className=\"text-lg font-semibold\">Templates (Server)</h2>\r\n        <div className=\"flex items-center gap-2\">\r\n          <button className=\"px-3 py-1.5 border rounded\" onClick={load} disabled={busy}>{busy ? 'Syncingâ€¦' : 'Sync'}</button>\r\n          <button className=\"px-3 py-1.5 border rounded\" onClick={()=>importRef.current?.click()}>Import</button>\r\n          <a className=\"px-3 py-1.5 border rounded\" href=\"/unicon/api/templates/export\">Export</a>\r\n          <input ref={importRef} type=\"file\" accept=\"application/json\" className=\"hidden\" onChange={e=>{ const f=e.target.files?.[0]; if (f) onImport(f); e.target.value=''; }} />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex items-center gap-2\">\r\n        <input type=\"checkbox\" aria-label=\"Select all\" onChange={toggleAll} checked={filtered.length>0 && filtered.every(t=>selected.has(t.id))} />\r\n        <button className=\"px-3 py-1.5 border rounded\" onClick={onBulkDelete} disabled={!selected.size}>Delete selected</button>\r\n        <input className=\"border rounded px-3 py-1.5 flex-1\" placeholder=\"Search by name/type/tag\" value={q} onChange={e=>setQ(e.target.value)} />\r\n        <select className=\"border rounded px-2 py-1.5\" value={typeFilter} onChange={e=>setTypeFilter(e.target.value)}>\r\n          <option value=\"\">All types</option>\r\n          {types.map(t => <option key={t} value={t}>{t.toUpperCase()}</option>)}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\r\n        {filtered.map(t => (\r\n          <div key={t.id} className={`border rounded p-3 ${selected.has(t.id)?'bg-blue-50':''}`}>\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"mr-2\"><input type=\"checkbox\" checked={selected.has(t.id)} onChange={()=>toggle(t.id)} /></div>\r\n              <div className=\"flex-1\">\r\n                {editing[t.id] ? (\r\n                  <div className=\"grid grid-cols-3 gap-2 items-center\">\r\n                    <input className=\"border rounded px-2 py-1 text-sm\" value={editing[t.id].name} onKeyDown={e=>onEditKey(t.id, e)} onChange={e=>setEditing(p=>({...p,[t.id]:{...p[t.id], name:e.target.value}}))} />\r\n                    <select className=\"border rounded px-2 py-1 text-sm\" value={editing[t.id].type} onKeyDown={e=>onEditKey(t.id, e)} onChange={e=>setEditing(p=>({...p,[t.id]:{...p[t.id], type:e.target.value}}))}>\r\n                      {['rest','websocket','opc-ua','sql','grpc','cpd','ssh','ftp','sftp','k8s'].map(x=>(<option key={x} value={x}>{x}</option>))}\r\n                    </select>\r\n                    <div>\r\n                      <input className=\"border rounded px-2 py-1 text-sm w-full\" placeholder=\"tag1, tag2\" value={editing[t.id].tags} onKeyDown={e=>onEditKey(t.id, e)} onChange={e=>setEditing(p=>({...p,[t.id]:{...p[t.id], tags:e.target.value}}))} />\r\n                      {allTags.length>0 && (\r\n                        <div className=\"mt-1 flex flex-wrap gap-1\">\r\n                          {allTags.filter(tag => !String(editing[t.id].tags||'').toLowerCase().split(',').map(s=>s.trim()).includes(tag.toLowerCase())).slice(0,8).map(tag => (\r\n                            <button key={tag} className=\"text-xs px-2 py-0.5 border rounded hover:bg-gray-50\" onClick={()=>{\r\n                              setEditing(p=>{ const cur = p[t.id]; const curTags = String(cur.tags||'').split(',').map(s=>s.trim()).filter(Boolean); if (!curTags.includes(tag)) curTags.push(tag); return { ...p, [t.id]: { ...cur, tags: curTags.join(', ') } }; });\r\n                            }}>{tag}</button>\r\n                          ))}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <>\r\n                    <div className=\"font-medium\">{t.name}</div>\r\n                    <div className=\"text-xs text-gray-500\">{String(t.type).toUpperCase()}</div>\r\n                  </>\r\n                )}\r\n              </div>\r\n              {editing[t.id] ? (\r\n                <div className=\"flex items-center gap-2\">\r\n                  <button className=\"px-2 py-1 text-sm border rounded bg-blue-600 text-white\" onClick={()=>saveEdit(t.id)} disabled={!!editing[t.id].configError}>Save</button>\r\n                  <button className=\"px-2 py-1 text-sm border rounded\" onClick={()=>cancelEdit(t.id)}>Cancel</button>\r\n                </div>\r\n              ) : (\r\n                <div className=\"flex items-center gap-2\">\r\n                  <button className=\"px-2 py-1 text-sm border rounded\" onClick={()=>startEdit(t)}>Edit</button>\r\n                  <button className=\"px-2 py-1 text-sm border rounded\" onClick={()=>onClone(t)}>Clone</button>\r\n                  <button className=\"px-2 py-1 text-sm border rounded\" onClick={()=>onDelete(t.id)}>Delete</button>\r\n                </div>\r\n              )}\r\n            </div>\r\n            {editing[t.id] ? (\r\n              <div className=\"mt-3\">\r\n                <div className=\"text-xs text-gray-600 mb-1\">Config (JSON)</div>\r\n                <textarea rows={8} className={`w-full border rounded px-2 py-1 font-mono text-xs ${editing[t.id].configError ? 'border-red-500' : ''}`} value={editing[t.id].config}\r\n                  onKeyDown={e=>onEditKey(t.id, e)}\r\n                  onChange={e=>setEditing(p=>({...p,[t.id]:{...p[t.id], config:e.target.value, configError:''}}))} />\r\n                <div className=\"mt-1 flex items-center gap-2 text-xs\">\r\n                  <button className=\"px-2 py-0.5 border rounded\" onClick={()=>{\r\n                    try { const pretty = JSON.stringify(JSON.parse(editing[t.id].config||'{}'), null, 2); setEditing(p=>({...p,[t.id]:{...p[t.id], config: pretty, configError:''}})); }\r\n                    catch (e){ setEditing(p=>({...p,[t.id]:{...p[t.id], configError: String(e.message||'Invalid JSON')}})); }\r\n                  }}>Format</button>\r\n                  {editing[t.id].configError && <span className=\"text-red-600\">{editing[t.id].configError}</span>}\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <>\r\n                {Array.isArray(t.tags) && t.tags.length>0 && (\r\n                  <div className=\"mt-2 text-xs text-gray-600\">Tags: {t.tags.join(', ')}</div>\r\n                )}\r\n                <div className=\"mt-2 text-xs text-gray-500\">Updated: {new Date(t.ts || Date.now()).toLocaleString()}</div>\r\n              </>\r\n            )}\r\n          </div>\r\n        ))}\r\n        {filtered.length === 0 && (\r\n          <div className=\"text-gray-500\">No templates</div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"border rounded p-3\">\r\n        <div className=\"font-medium mb-2\">Create new template</div>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n          <div>\r\n            <label className=\"block text-sm mb-1\">Name</label>\r\n            <input className=\"w-full border rounded px-3 py-1.5\" value={creating.name} onChange={e=>setCreating(p=>({...p,name:e.target.value}))} />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm mb-1\">Type</label>\r\n            <select className=\"w-full border rounded px-3 py-1.5\" value={creating.type} onChange={e=>setCreating(p=>({...p,type:e.target.value}))}>\r\n              {['rest','websocket','opc-ua','sql','grpc','cpd','ssh','ftp','sftp','k8s'].map(t=>(<option key={t} value={t}>{t}</option>))}\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm mb-1\">Tags (comma-separated)</label>\r\n            <input className=\"w-full border rounded px-3 py-1.5\" value={creating.tags} onChange={e=>setCreating(p=>({...p,tags:e.target.value}))} />\r\n          </div>\r\n          <div className=\"md:col-span-2\">\r\n            <label className=\"block text-sm mb-1\">Config (JSON)</label>\r\n            <textarea rows={8} className=\"w-full border rounded px-3 py-2 font-mono text-sm\" value={creating.config} onChange={e=>setCreating(p=>({...p,config:e.target.value}))} />\r\n          </div>\r\n        </div>\r\n        <div className=\"mt-3\">\r\n          <button className=\"px-3 py-1.5 border rounded bg-blue-600 text-white\" onClick={onCreate}>Create</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":["TemplatesAdmin","list","setList","React","q","setQ","typeFilter","setTypeFilter","busy","setBusy","selected","setSelected","editing","setEditing","creating","setCreating","importRef","load","serverList","filtered","needle","t","onCreate","cfg","tags","s","serverAdd","onDelete","id","serverDelete","onBulkDelete","serverBulkDelete","toggle","prev","n","toggleAll","all","allSelected","startEdit","cancelEdit","onEditKey","e","_a","saveEdit","parseErr","p","serverUpdate","er","onClone","name","created","onImport","file","text","payload","arr","serverImport","types","allTags","tag","jsxs","jsx","f","x","cur","curTags","Fragment","pretty"],"mappings":"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"}