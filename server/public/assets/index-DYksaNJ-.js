const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-xILZGz6R.js","assets/vendor-CnGqnXYo.js","assets/icons-oCSk50xQ.js","assets/ConnectionsExamples-DCHT8LYl.js","assets/Commander-DVDzaJ4d.js","assets/NetworkTools-DDd-rVm4.js","assets/FormatTools-Bdf_IWpG.js","assets/TemplatesAdmin-C5x3FNN5.js"])))=>i.map(i=>d[i]);
import{r as M,a as a0,g as n0,R as ge}from"./vendor-CnGqnXYo.js";import{X as Ur,O as l0,C as zi,T as Yi,a as Ua,U as Rd,L as o0,S as Gn,P as $f,D as ac,b as c0,E as u0,c as nc,G as lc,d as Gl,e as Kl,R as js,f as Hi,g as xu,Z as Kn,h as wa,A as ii,i as d0,j as Ld,M as oc,k as Ff,l as h0,m as $a,F as Od,n as qf,o as f0,p as m0,q as p0,r as g0,s as Su,t as v0,u as _0,v as y0,w as b0,x as x0,y as hi,B as Wl,z as os,H as Md,I as S0,J as Gf,K as w0,N as C0,Q as cc,V as Wn,W as Kf,Y as j0,_ as E0,$ as N0,a0 as k0,a1 as A0,a2 as T0,a3 as D0,a4 as R0,a5 as L0,a6 as O0,a7 as M0,a8 as B0,a9 as I0,aa as P0,ab as Bd}from"./icons-oCSk50xQ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const m of n.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function s(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(a){if(a.ep)return;a.ep=!0;const n=s(a);fetch(a.href,n)}})();var Wf={exports:{}},Yl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0=Symbol.for("react.transitional.element"),H0=Symbol.for("react.fragment");function Yf(e,t,s){var i=null;if(s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),"key"in t){s={};for(var a in t)a!=="key"&&(s[a]=t[a])}else s=t;return t=s.ref,{$$typeof:z0,type:e,key:i,ref:t!==void 0?t:null,props:s}}Yl.Fragment=H0;Yl.jsx=Yf;Yl.jsxs=Yf;Wf.exports=Yl;var r=Wf.exports,Vf={exports:{}},Vl={},Xf={exports:{}},Jf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,W){var N=z.length;z.push(W);e:for(;0<N;){var L=N-1>>>1,I=z[L];if(0<a(I,W))z[L]=W,z[N]=I,N=L;else break e}}function s(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var W=z[0],N=z.pop();if(N!==W){z[0]=N;e:for(var L=0,I=z.length,U=I>>>1;L<U;){var se=2*(L+1)-1,ce=z[se],Q=se+1,re=z[Q];if(0>a(ce,N))Q<I&&0>a(re,ce)?(z[L]=re,z[Q]=N,L=Q):(z[L]=ce,z[se]=N,L=se);else if(Q<I&&0>a(re,N))z[L]=re,z[Q]=N,L=Q;else break e}}return W}function a(z,W){var N=z.sortIndex-W.sortIndex;return N!==0?N:z.id-W.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var n=performance;e.unstable_now=function(){return n.now()}}else{var m=Date,l=m.now();e.unstable_now=function(){return m.now()-l}}var h=[],p=[],b=1,f=null,v=3,y=!1,w=!1,S=!1,o=!1,u=typeof setTimeout=="function"?setTimeout:null,c=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;function g(z){for(var W=s(p);W!==null;){if(W.callback===null)i(p);else if(W.startTime<=z)i(p),W.sortIndex=W.expirationTime,t(h,W);else break;W=s(p)}}function _(z){if(S=!1,g(z),!w)if(s(h)!==null)w=!0,C||(C=!0,T());else{var W=s(p);W!==null&&G(_,W.startTime-z)}}var C=!1,j=-1,x=5,E=-1;function D(){return o?!0:!(e.unstable_now()-E<x)}function A(){if(o=!1,C){var z=e.unstable_now();E=z;var W=!0;try{e:{w=!1,S&&(S=!1,c(j),j=-1),y=!0;var N=v;try{t:{for(g(z),f=s(h);f!==null&&!(f.expirationTime>z&&D());){var L=f.callback;if(typeof L=="function"){f.callback=null,v=f.priorityLevel;var I=L(f.expirationTime<=z);if(z=e.unstable_now(),typeof I=="function"){f.callback=I,g(z),W=!0;break t}f===s(h)&&i(h),g(z)}else i(h);f=s(h)}if(f!==null)W=!0;else{var U=s(p);U!==null&&G(_,U.startTime-z),W=!1}}break e}finally{f=null,v=N,y=!1}W=void 0}}finally{W?T():C=!1}}}var T;if(typeof d=="function")T=function(){d(A)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,q=R.port2;R.port1.onmessage=A,T=function(){q.postMessage(null)}}else T=function(){u(A,0)};function G(z,W){j=u(function(){z(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(z){switch(v){case 1:case 2:case 3:var W=3;break;default:W=v}var N=v;v=W;try{return z()}finally{v=N}},e.unstable_requestPaint=function(){o=!0},e.unstable_runWithPriority=function(z,W){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var N=v;v=z;try{return W()}finally{v=N}},e.unstable_scheduleCallback=function(z,W,N){var L=e.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?L+N:L):N=L,z){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=N+I,z={id:b++,callback:W,priorityLevel:z,startTime:N,expirationTime:I,sortIndex:-1},N>L?(z.sortIndex=N,t(p,z),s(h)===null&&z===s(p)&&(S?(c(j),j=-1):S=!0,G(_,N-L))):(z.sortIndex=I,t(h,z),w||y||(w=!0,C||(C=!0,T()))),z},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(z){var W=v;return function(){var N=v;v=W;try{return z.apply(this,arguments)}finally{v=N}}}})(Jf);Xf.exports=Jf;var U0=Xf.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pt=U0,Qf=M,$0=a0;function oe(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Zf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function on(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function em(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Id(e){if(on(e)!==e)throw Error(oe(188))}function F0(e){var t=e.alternate;if(!t){if(t=on(e),t===null)throw Error(oe(188));return t!==e?null:e}for(var s=e,i=t;;){var a=s.return;if(a===null)break;var n=a.alternate;if(n===null){if(i=a.return,i!==null){s=i;continue}break}if(a.child===n.child){for(n=a.child;n;){if(n===s)return Id(a),e;if(n===i)return Id(a),t;n=n.sibling}throw Error(oe(188))}if(s.return!==i.return)s=a,i=n;else{for(var m=!1,l=a.child;l;){if(l===s){m=!0,s=a,i=n;break}if(l===i){m=!0,i=a,s=n;break}l=l.sibling}if(!m){for(l=n.child;l;){if(l===s){m=!0,s=n,i=a;break}if(l===i){m=!0,i=n,s=a;break}l=l.sibling}if(!m)throw Error(oe(189))}}if(s.alternate!==i)throw Error(oe(190))}if(s.tag!==3)throw Error(oe(188));return s.stateNode.current===s?e:t}function tm(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=tm(e),t!==null)return t;e=e.sibling}return null}var et=Object.assign,q0=Symbol.for("react.element"),An=Symbol.for("react.transitional.element"),_a=Symbol.for("react.portal"),yr=Symbol.for("react.fragment"),sm=Symbol.for("react.strict_mode"),uc=Symbol.for("react.profiler"),G0=Symbol.for("react.provider"),im=Symbol.for("react.consumer"),Ms=Symbol.for("react.context"),wu=Symbol.for("react.forward_ref"),dc=Symbol.for("react.suspense"),hc=Symbol.for("react.suspense_list"),Cu=Symbol.for("react.memo"),ti=Symbol.for("react.lazy"),fc=Symbol.for("react.activity"),K0=Symbol.for("react.memo_cache_sentinel"),Pd=Symbol.iterator;function ua(e){return e===null||typeof e!="object"?null:(e=Pd&&e[Pd]||e["@@iterator"],typeof e=="function"?e:null)}var W0=Symbol.for("react.client.reference");function mc(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===W0?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yr:return"Fragment";case uc:return"Profiler";case sm:return"StrictMode";case dc:return"Suspense";case hc:return"SuspenseList";case fc:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _a:return"Portal";case Ms:return(e.displayName||"Context")+".Provider";case im:return(e._context.displayName||"Context")+".Consumer";case wu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Cu:return t=e.displayName||null,t!==null?t:mc(e.type)||"Memo";case ti:t=e._payload,e=e._init;try{return mc(e(t))}catch{}}return null}var ya=Array.isArray,ke=Qf.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$e=$0.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ui={pending:!1,data:null,method:null,action:null},pc=[],br=-1;function Ns(e){return{current:e}}function bt(e){0>br||(e.current=pc[br],pc[br]=null,br--)}function rt(e,t){br++,pc[br]=e.current,e.current=t}var xs=Ns(null),Fa=Ns(null),fi=Ns(null),hl=Ns(null);function fl(e,t){switch(rt(fi,t),rt(Fa,e),rt(xs,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Fh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Fh(t),e=bg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}bt(xs),rt(xs,e)}function $r(){bt(xs),bt(Fa),bt(fi)}function gc(e){e.memoizedState!==null&&rt(hl,e);var t=xs.current,s=bg(t,e.type);t!==s&&(rt(Fa,e),rt(xs,s))}function ml(e){Fa.current===e&&(bt(xs),bt(Fa)),hl.current===e&&(bt(hl),Za._currentValue=Ui)}var vc=Object.prototype.hasOwnProperty,ju=pt.unstable_scheduleCallback,_o=pt.unstable_cancelCallback,Y0=pt.unstable_shouldYield,V0=pt.unstable_requestPaint,Ss=pt.unstable_now,X0=pt.unstable_getCurrentPriorityLevel,rm=pt.unstable_ImmediatePriority,am=pt.unstable_UserBlockingPriority,pl=pt.unstable_NormalPriority,J0=pt.unstable_LowPriority,nm=pt.unstable_IdlePriority,Q0=pt.log,Z0=pt.unstable_setDisableYieldValue,cn=null,Ht=null;function oi(e){if(typeof Q0=="function"&&Z0(e),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(cn,e)}catch{}}var Ut=Math.clz32?Math.clz32:s_,e_=Math.log,t_=Math.LN2;function s_(e){return e>>>=0,e===0?32:31-(e_(e)/t_|0)|0}var Tn=256,Dn=4194304;function Oi(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Xl(e,t,s){var i=e.pendingLanes;if(i===0)return 0;var a=0,n=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~n,i!==0?a=Oi(i):(m&=l,m!==0?a=Oi(m):s||(s=l&~e,s!==0&&(a=Oi(s))))):(l=i&~n,l!==0?a=Oi(l):m!==0?a=Oi(m):s||(s=i&~e,s!==0&&(a=Oi(s)))),a===0?0:t!==0&&t!==a&&!(t&n)&&(n=a&-a,s=t&-t,n>=s||n===32&&(s&4194048)!==0)?t:a}function un(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function i_(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lm(){var e=Tn;return Tn<<=1,!(Tn&4194048)&&(Tn=256),e}function om(){var e=Dn;return Dn<<=1,!(Dn&62914560)&&(Dn=4194304),e}function yo(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function dn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function r_(e,t,s,i,a,n){var m=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var l=e.entanglements,h=e.expirationTimes,p=e.hiddenUpdates;for(s=m&~s;0<s;){var b=31-Ut(s),f=1<<b;l[b]=0,h[b]=-1;var v=p[b];if(v!==null)for(p[b]=null,b=0;b<v.length;b++){var y=v[b];y!==null&&(y.lane&=-536870913)}s&=~f}i!==0&&cm(e,i,0),n!==0&&a===0&&e.tag!==0&&(e.suspendedLanes|=n&~(m&~t))}function cm(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Ut(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|s&4194090}function um(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var i=31-Ut(s),a=1<<i;a&t|e[i]&t&&(e[i]|=t),s&=~a}}function Eu(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Nu(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function dm(){var e=$e.p;return e!==0?e:(e=window.event,e===void 0?32:Tg(e.type))}function a_(e,t){var s=$e.p;try{return $e.p=e,t()}finally{$e.p=s}}var ki=Math.random().toString(36).slice(2),Et="__reactFiber$"+ki,Rt="__reactProps$"+ki,ta="__reactContainer$"+ki,_c="__reactEvents$"+ki,n_="__reactListeners$"+ki,l_="__reactHandles$"+ki,zd="__reactResources$"+ki,hn="__reactMarker$"+ki;function ku(e){delete e[Et],delete e[Rt],delete e[_c],delete e[n_],delete e[l_]}function xr(e){var t=e[Et];if(t)return t;for(var s=e.parentNode;s;){if(t=s[ta]||s[Et]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Kh(e);e!==null;){if(s=e[Et])return s;e=Kh(e)}return t}e=s,s=e.parentNode}return null}function sa(e){if(e=e[Et]||e[ta]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function ba(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(oe(33))}function Rr(e){var t=e[zd];return t||(t=e[zd]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function _t(e){e[hn]=!0}var hm=new Set,fm={};function tr(e,t){Fr(e,t),Fr(e+"Capture",t)}function Fr(e,t){for(fm[e]=t,e=0;e<t.length;e++)hm.add(t[e])}var o_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hd={},Ud={};function c_(e){return vc.call(Ud,e)?!0:vc.call(Hd,e)?!1:o_.test(e)?Ud[e]=!0:(Hd[e]=!0,!1)}function Yn(e,t,s){if(c_(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function Rn(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function As(e,t,s,i){if(i===null)e.removeAttribute(s);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+i)}}var bo,$d;function pr(e){if(bo===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);bo=t&&t[1]||"",$d=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bo+e+$d}var xo=!1;function So(e,t){if(!e||xo)return"";xo=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(y){var v=y}Reflect.construct(e,[],f)}else{try{f.call()}catch(y){v=y}e.call(f.prototype)}}else{try{throw Error()}catch(y){v=y}(f=e())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(y){if(y&&v&&typeof y.stack=="string")return[y.stack,v.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var n=i.DetermineComponentFrameRoot(),m=n[0],l=n[1];if(m&&l){var h=m.split(`
`),p=l.split(`
`);for(a=i=0;i<h.length&&!h[i].includes("DetermineComponentFrameRoot");)i++;for(;a<p.length&&!p[a].includes("DetermineComponentFrameRoot");)a++;if(i===h.length||a===p.length)for(i=h.length-1,a=p.length-1;1<=i&&0<=a&&h[i]!==p[a];)a--;for(;1<=i&&0<=a;i--,a--)if(h[i]!==p[a]){if(i!==1||a!==1)do if(i--,a--,0>a||h[i]!==p[a]){var b=`
`+h[i].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=i&&0<=a);break}}}finally{xo=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?pr(s):""}function u_(e){switch(e.tag){case 26:case 27:case 5:return pr(e.type);case 16:return pr("Lazy");case 13:return pr("Suspense");case 19:return pr("SuspenseList");case 0:case 15:return So(e.type,!1);case 11:return So(e.type.render,!1);case 1:return So(e.type,!0);case 31:return pr("Activity");default:return""}}function Fd(e){try{var t="";do t+=u_(e),e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function Vt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function mm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function d_(e){var t=mm(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,n=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(m){i=""+m,n.call(this,m)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return i},setValue:function(m){i=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gl(e){e._valueTracker||(e._valueTracker=d_(e))}function pm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),i="";return e&&(i=mm(e)?e.checked?"true":"false":e.value),e=i,e!==s?(t.setValue(e),!0):!1}function vl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var h_=/[\n"\\]/g;function Zt(e){return e.replace(h_,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function yc(e,t,s,i,a,n,m,l){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Vt(t)):e.value!==""+Vt(t)&&(e.value=""+Vt(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?bc(e,m,Vt(t)):s!=null?bc(e,m,Vt(s)):i!=null&&e.removeAttribute("value"),a==null&&n!=null&&(e.defaultChecked=!!n),a!=null&&(e.checked=a&&typeof a!="function"&&typeof a!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+Vt(l):e.removeAttribute("name")}function gm(e,t,s,i,a,n,m,l){if(n!=null&&typeof n!="function"&&typeof n!="symbol"&&typeof n!="boolean"&&(e.type=n),t!=null||s!=null){if(!(n!=="submit"&&n!=="reset"||t!=null))return;s=s!=null?""+Vt(s):"",t=t!=null?""+Vt(t):s,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??a,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m)}function bc(e,t,s){t==="number"&&vl(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Lr(e,t,s,i){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&i&&(e[s].defaultSelected=!0)}else{for(s=""+Vt(s),t=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function vm(e,t,s){if(t!=null&&(t=""+Vt(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+Vt(s):""}function _m(e,t,s,i){if(t==null){if(i!=null){if(s!=null)throw Error(oe(92));if(ya(i)){if(1<i.length)throw Error(oe(93));i=i[0]}s=i}s==null&&(s=""),t=s}s=Vt(t),e.defaultValue=s,i=e.textContent,i===s&&i!==""&&i!==null&&(e.value=i)}function qr(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var f_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qd(e,t,s){var i=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,s):typeof s!="number"||s===0||f_.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function ym(e,t,s){if(t!=null&&typeof t!="object")throw Error(oe(62));if(e=e.style,s!=null){for(var i in s)!s.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var a in t)i=t[a],t.hasOwnProperty(a)&&s[a]!==i&&qd(e,a,i)}else for(var n in t)t.hasOwnProperty(n)&&qd(e,n,t[n])}function Au(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var m_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),p_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vn(e){return p_.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var xc=null;function Tu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Sr=null,Or=null;function Gd(e){var t=sa(e);if(t&&(e=t.stateNode)){var s=e[Rt]||null;e:switch(e=t.stateNode,t.type){case"input":if(yc(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Zt(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var i=s[t];if(i!==e&&i.form===e.form){var a=i[Rt]||null;if(!a)throw Error(oe(90));yc(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<s.length;t++)i=s[t],i.form===e.form&&pm(i)}break e;case"textarea":vm(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&Lr(e,!!s.multiple,t,!1)}}}var wo=!1;function bm(e,t,s){if(wo)return e(t,s);wo=!0;try{var i=e(t);return i}finally{if(wo=!1,(Sr!==null||Or!==null)&&(no(),Sr&&(t=Sr,e=Or,Or=Sr=null,Gd(t),e)))for(t=0;t<e.length;t++)Gd(e[t])}}function qa(e,t){var s=e.stateNode;if(s===null)return null;var i=s[Rt]||null;if(i===null)return null;s=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(oe(231,t,typeof s));return s}var $s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sc=!1;if($s)try{var da={};Object.defineProperty(da,"passive",{get:function(){Sc=!0}}),window.addEventListener("test",da,da),window.removeEventListener("test",da,da)}catch{Sc=!1}var ci=null,Du=null,Xn=null;function xm(){if(Xn)return Xn;var e,t=Du,s=t.length,i,a="value"in ci?ci.value:ci.textContent,n=a.length;for(e=0;e<s&&t[e]===a[e];e++);var m=s-e;for(i=1;i<=m&&t[s-i]===a[n-i];i++);return Xn=a.slice(e,1<i?1-i:void 0)}function Jn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ln(){return!0}function Kd(){return!1}function Lt(e){function t(s,i,a,n,m){this._reactName=s,this._targetInst=a,this.type=i,this.nativeEvent=n,this.target=m,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(s=e[l],this[l]=s?s(n):n[l]);return this.isDefaultPrevented=(n.defaultPrevented!=null?n.defaultPrevented:n.returnValue===!1)?Ln:Kd,this.isPropagationStopped=Kd,this}return et(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Ln)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Ln)},persist:function(){},isPersistent:Ln}),t}var sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jl=Lt(sr),fn=et({},sr,{view:0,detail:0}),g_=Lt(fn),Co,jo,ha,Ql=et({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ru,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ha&&(ha&&e.type==="mousemove"?(Co=e.screenX-ha.screenX,jo=e.screenY-ha.screenY):jo=Co=0,ha=e),Co)},movementY:function(e){return"movementY"in e?e.movementY:jo}}),Wd=Lt(Ql),v_=et({},Ql,{dataTransfer:0}),__=Lt(v_),y_=et({},fn,{relatedTarget:0}),Eo=Lt(y_),b_=et({},sr,{animationName:0,elapsedTime:0,pseudoElement:0}),x_=Lt(b_),S_=et({},sr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),w_=Lt(S_),C_=et({},sr,{data:0}),Yd=Lt(C_),j_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},E_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function k_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=N_[e])?!!t[e]:!1}function Ru(){return k_}var A_=et({},fn,{key:function(e){if(e.key){var t=j_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?E_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ru,charCode:function(e){return e.type==="keypress"?Jn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),T_=Lt(A_),D_=et({},Ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vd=Lt(D_),R_=et({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ru}),L_=Lt(R_),O_=et({},sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),M_=Lt(O_),B_=et({},Ql,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),I_=Lt(B_),P_=et({},sr,{newState:0,oldState:0}),z_=Lt(P_),H_=[9,13,27,32],Lu=$s&&"CompositionEvent"in window,Ca=null;$s&&"documentMode"in document&&(Ca=document.documentMode);var U_=$s&&"TextEvent"in window&&!Ca,Sm=$s&&(!Lu||Ca&&8<Ca&&11>=Ca),Xd=" ",Jd=!1;function wm(e,t){switch(e){case"keyup":return H_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var wr=!1;function $_(e,t){switch(e){case"compositionend":return Cm(t);case"keypress":return t.which!==32?null:(Jd=!0,Xd);case"textInput":return e=t.data,e===Xd&&Jd?null:e;default:return null}}function F_(e,t){if(wr)return e==="compositionend"||!Lu&&wm(e,t)?(e=xm(),Xn=Du=ci=null,wr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sm&&t.locale!=="ko"?null:t.data;default:return null}}var q_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!q_[e.type]:t==="textarea"}function jm(e,t,s,i){Sr?Or?Or.push(i):Or=[i]:Sr=i,t=Ml(t,"onChange"),0<t.length&&(s=new Jl("onChange","change",null,s,i),e.push({event:s,listeners:t}))}var ja=null,Ga=null;function G_(e){vg(e,0)}function Zl(e){var t=ba(e);if(pm(t))return e}function Zd(e,t){if(e==="change")return t}var Em=!1;if($s){var No;if($s){var ko="oninput"in document;if(!ko){var eh=document.createElement("div");eh.setAttribute("oninput","return;"),ko=typeof eh.oninput=="function"}No=ko}else No=!1;Em=No&&(!document.documentMode||9<document.documentMode)}function th(){ja&&(ja.detachEvent("onpropertychange",Nm),Ga=ja=null)}function Nm(e){if(e.propertyName==="value"&&Zl(Ga)){var t=[];jm(t,Ga,e,Tu(e)),bm(G_,t)}}function K_(e,t,s){e==="focusin"?(th(),ja=t,Ga=s,ja.attachEvent("onpropertychange",Nm)):e==="focusout"&&th()}function W_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zl(Ga)}function Y_(e,t){if(e==="click")return Zl(t)}function V_(e,t){if(e==="input"||e==="change")return Zl(t)}function X_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qt=typeof Object.is=="function"?Object.is:X_;function Ka(e,t){if(qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),i=Object.keys(t);if(s.length!==i.length)return!1;for(i=0;i<s.length;i++){var a=s[i];if(!vc.call(t,a)||!qt(e[a],t[a]))return!1}return!0}function sh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ih(e,t){var s=sh(e);e=0;for(var i;s;){if(s.nodeType===3){if(i=e+s.textContent.length,e<=t&&i>=t)return{node:s,offset:t-e};e=i}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=sh(s)}}function km(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?km(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Am(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=vl(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=vl(e.document)}return t}function Ou(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var J_=$s&&"documentMode"in document&&11>=document.documentMode,Cr=null,wc=null,Ea=null,Cc=!1;function rh(e,t,s){var i=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Cc||Cr==null||Cr!==vl(i)||(i=Cr,"selectionStart"in i&&Ou(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ea&&Ka(Ea,i)||(Ea=i,i=Ml(wc,"onSelect"),0<i.length&&(t=new Jl("onSelect","select",null,t,s),e.push({event:t,listeners:i}),t.target=Cr)))}function Li(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var jr={animationend:Li("Animation","AnimationEnd"),animationiteration:Li("Animation","AnimationIteration"),animationstart:Li("Animation","AnimationStart"),transitionrun:Li("Transition","TransitionRun"),transitionstart:Li("Transition","TransitionStart"),transitioncancel:Li("Transition","TransitionCancel"),transitionend:Li("Transition","TransitionEnd")},Ao={},Tm={};$s&&(Tm=document.createElement("div").style,"AnimationEvent"in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),"TransitionEvent"in window||delete jr.transitionend.transition);function ir(e){if(Ao[e])return Ao[e];if(!jr[e])return e;var t=jr[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Tm)return Ao[e]=t[s];return e}var Dm=ir("animationend"),Rm=ir("animationiteration"),Lm=ir("animationstart"),Q_=ir("transitionrun"),Z_=ir("transitionstart"),ey=ir("transitioncancel"),Om=ir("transitionend"),Mm=new Map,jc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jc.push("scrollEnd");function fs(e,t){Mm.set(e,t),tr(t,[e])}var ah=new WeakMap;function es(e,t){if(typeof e=="object"&&e!==null){var s=ah.get(e);return s!==void 0?s:(t={value:e,source:t,stack:Fd(t)},ah.set(e,t),t)}return{value:e,source:t,stack:Fd(t)}}var Yt=[],Er=0,Mu=0;function eo(){for(var e=Er,t=Mu=Er=0;t<e;){var s=Yt[t];Yt[t++]=null;var i=Yt[t];Yt[t++]=null;var a=Yt[t];Yt[t++]=null;var n=Yt[t];if(Yt[t++]=null,i!==null&&a!==null){var m=i.pending;m===null?a.next=a:(a.next=m.next,m.next=a),i.pending=a}n!==0&&Bm(s,a,n)}}function to(e,t,s,i){Yt[Er++]=e,Yt[Er++]=t,Yt[Er++]=s,Yt[Er++]=i,Mu|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Bu(e,t,s,i){return to(e,t,s,i),_l(e)}function ia(e,t){return to(e,null,null,t),_l(e)}function Bm(e,t,s){e.lanes|=s;var i=e.alternate;i!==null&&(i.lanes|=s);for(var a=!1,n=e.return;n!==null;)n.childLanes|=s,i=n.alternate,i!==null&&(i.childLanes|=s),n.tag===22&&(e=n.stateNode,e===null||e._visibility&1||(a=!0)),e=n,n=n.return;return e.tag===3?(n=e.stateNode,a&&t!==null&&(a=31-Ut(s),e=n.hiddenUpdates,i=e[a],i===null?e[a]=[t]:i.push(t),t.lane=s|536870912),n):null}function _l(e){if(50<Ba)throw Ba=0,Kc=null,Error(oe(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Nr={};function ty(e,t,s,i){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(e,t,s,i){return new ty(e,t,s,i)}function Iu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Hs(e,t){var s=e.alternate;return s===null?(s=zt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Im(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Qn(e,t,s,i,a,n){var m=0;if(i=e,typeof e=="function")Iu(e)&&(m=1);else if(typeof e=="string")m=ib(e,s,xs.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case fc:return e=zt(31,s,t,a),e.elementType=fc,e.lanes=n,e;case yr:return $i(s.children,a,n,t);case sm:m=8,a|=24;break;case uc:return e=zt(12,s,t,a|2),e.elementType=uc,e.lanes=n,e;case dc:return e=zt(13,s,t,a),e.elementType=dc,e.lanes=n,e;case hc:return e=zt(19,s,t,a),e.elementType=hc,e.lanes=n,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case G0:case Ms:m=10;break e;case im:m=9;break e;case wu:m=11;break e;case Cu:m=14;break e;case ti:m=16,i=null;break e}m=29,s=Error(oe(130,e===null?"null":typeof e,"")),i=null}return t=zt(m,s,t,a),t.elementType=e,t.type=i,t.lanes=n,t}function $i(e,t,s,i){return e=zt(7,e,i,t),e.lanes=s,e}function To(e,t,s){return e=zt(6,e,null,t),e.lanes=s,e}function Do(e,t,s){return t=zt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var kr=[],Ar=0,yl=null,bl=0,Xt=[],Jt=0,Fi=null,Bs=1,Is="";function Mi(e,t){kr[Ar++]=bl,kr[Ar++]=yl,yl=e,bl=t}function Pm(e,t,s){Xt[Jt++]=Bs,Xt[Jt++]=Is,Xt[Jt++]=Fi,Fi=e;var i=Bs;e=Is;var a=32-Ut(i)-1;i&=~(1<<a),s+=1;var n=32-Ut(t)+a;if(30<n){var m=a-a%5;n=(i&(1<<m)-1).toString(32),i>>=m,a-=m,Bs=1<<32-Ut(t)+a|s<<a|i,Is=n+e}else Bs=1<<n|s<<a|i,Is=e}function Pu(e){e.return!==null&&(Mi(e,1),Pm(e,1,0))}function zu(e){for(;e===yl;)yl=kr[--Ar],kr[Ar]=null,bl=kr[--Ar],kr[Ar]=null;for(;e===Fi;)Fi=Xt[--Jt],Xt[Jt]=null,Is=Xt[--Jt],Xt[Jt]=null,Bs=Xt[--Jt],Xt[Jt]=null}var kt=null,nt=null,Ue=!1,qi=null,_s=!1,Ec=Error(oe(519));function Vi(e){var t=Error(oe(418,""));throw Wa(es(t,e)),Ec}function nh(e){var t=e.stateNode,s=e.type,i=e.memoizedProps;switch(t[Et]=e,t[Rt]=i,s){case"dialog":Be("cancel",t),Be("close",t);break;case"iframe":case"object":case"embed":Be("load",t);break;case"video":case"audio":for(s=0;s<Xa.length;s++)Be(Xa[s],t);break;case"source":Be("error",t);break;case"img":case"image":case"link":Be("error",t),Be("load",t);break;case"details":Be("toggle",t);break;case"input":Be("invalid",t),gm(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),gl(t);break;case"select":Be("invalid",t);break;case"textarea":Be("invalid",t),_m(t,i.value,i.defaultValue,i.children),gl(t)}s=i.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||i.suppressHydrationWarning===!0||yg(t.textContent,s)?(i.popover!=null&&(Be("beforetoggle",t),Be("toggle",t)),i.onScroll!=null&&Be("scroll",t),i.onScrollEnd!=null&&Be("scrollend",t),i.onClick!=null&&(t.onclick=co),t=!0):t=!1,t||Vi(e)}function lh(e){for(kt=e.return;kt;)switch(kt.tag){case 5:case 13:_s=!1;return;case 27:case 3:_s=!0;return;default:kt=kt.return}}function fa(e){if(e!==kt)return!1;if(!Ue)return lh(e),Ue=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Qc(e.type,e.memoizedProps)),s=!s),s&&nt&&Vi(e),lh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(oe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(s=e.data,s==="/$"){if(t===0){nt=us(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++;e=e.nextSibling}nt=null}}else t===27?(t=nt,Ai(e.type)?(e=tu,tu=null,nt=e):nt=t):nt=kt?us(e.stateNode.nextSibling):null;return!0}function mn(){nt=kt=null,Ue=!1}function oh(){var e=qi;return e!==null&&(Dt===null?Dt=e:Dt.push.apply(Dt,e),qi=null),e}function Wa(e){qi===null?qi=[e]:qi.push(e)}var Nc=Ns(null),rr=null,Ps=null;function ri(e,t,s){rt(Nc,t._currentValue),t._currentValue=s}function Us(e){e._currentValue=Nc.current,bt(Nc)}function kc(e,t,s){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===s)break;e=e.return}}function Ac(e,t,s,i){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var n=a.dependencies;if(n!==null){var m=a.child;n=n.firstContext;e:for(;n!==null;){var l=n;n=a;for(var h=0;h<t.length;h++)if(l.context===t[h]){n.lanes|=s,l=n.alternate,l!==null&&(l.lanes|=s),kc(n.return,s,e),i||(m=null);break e}n=l.next}}else if(a.tag===18){if(m=a.return,m===null)throw Error(oe(341));m.lanes|=s,n=m.alternate,n!==null&&(n.lanes|=s),kc(m,s,e),m=null}else m=a.child;if(m!==null)m.return=a;else for(m=a;m!==null;){if(m===e){m=null;break}if(a=m.sibling,a!==null){a.return=m.return,m=a;break}m=m.return}a=m}}function pn(e,t,s,i){e=null;for(var a=t,n=!1;a!==null;){if(!n){if(a.flags&524288)n=!0;else if(a.flags&262144)break}if(a.tag===10){var m=a.alternate;if(m===null)throw Error(oe(387));if(m=m.memoizedProps,m!==null){var l=a.type;qt(a.pendingProps.value,m.value)||(e!==null?e.push(l):e=[l])}}else if(a===hl.current){if(m=a.alternate,m===null)throw Error(oe(387));m.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e!==null?e.push(Za):e=[Za])}a=a.return}e!==null&&Ac(t,e,s,i),t.flags|=262144}function xl(e){for(e=e.firstContext;e!==null;){if(!qt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Xi(e){rr=e,Ps=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Nt(e){return zm(rr,e)}function On(e,t){return rr===null&&Xi(e),zm(e,t)}function zm(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},Ps===null){if(e===null)throw Error(oe(308));Ps=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ps=Ps.next=t;return s}var sy=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},iy=pt.unstable_scheduleCallback,ry=pt.unstable_NormalPriority,ft={$$typeof:Ms,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hu(){return{controller:new sy,data:new Map,refCount:0}}function gn(e){e.refCount--,e.refCount===0&&iy(ry,function(){e.controller.abort()})}var Na=null,Tc=0,Gr=0,Mr=null;function ay(e,t){if(Na===null){var s=Na=[];Tc=0,Gr=cd(),Mr={status:"pending",value:void 0,then:function(i){s.push(i)}}}return Tc++,t.then(ch,ch),t}function ch(){if(--Tc===0&&Na!==null){Mr!==null&&(Mr.status="fulfilled");var e=Na;Na=null,Gr=0,Mr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ny(e,t){var s=[],i={status:"pending",value:null,reason:null,then:function(a){s.push(a)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var a=0;a<s.length;a++)(0,s[a])(t)},function(a){for(i.status="rejected",i.reason=a,a=0;a<s.length;a++)(0,s[a])(void 0)}),i}var uh=ke.S;ke.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&ay(e,t),uh!==null&&uh(e,t)};var Gi=Ns(null);function Uu(){var e=Gi.current;return e!==null?e:Qe.pooledCache}function Zn(e,t){t===null?rt(Gi,Gi.current):rt(Gi,t.pool)}function Hm(){var e=Uu();return e===null?null:{parent:ft._currentValue,pool:e}}var vn=Error(oe(460)),Um=Error(oe(474)),so=Error(oe(542)),Dc={then:function(){}};function dh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Mn(){}function $m(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(Mn,Mn),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,fh(e),e;default:if(typeof t.status=="string")t.then(Mn,Mn);else{if(e=Qe,e!==null&&100<e.shellSuspendCounter)throw Error(oe(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var a=t;a.status="fulfilled",a.value=i}},function(i){if(t.status==="pending"){var a=t;a.status="rejected",a.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,fh(e),e}throw ka=t,vn}}var ka=null;function hh(){if(ka===null)throw Error(oe(459));var e=ka;return ka=null,e}function fh(e){if(e===vn||e===so)throw Error(oe(483))}var si=!1;function $u(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function mi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function pi(e,t,s){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Ge&2){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,t=_l(e),Bm(e,null,s),t}return to(e,i,t,s),_l(e)}function Aa(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,s|=i,t.lanes=s,um(e,s)}}function Ro(e,t){var s=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,s===i)){var a=null,n=null;if(s=s.firstBaseUpdate,s!==null){do{var m={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};n===null?a=n=m:n=n.next=m,s=s.next}while(s!==null);n===null?a=n=t:n=n.next=t}else a=n=t;s={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:n,shared:i.shared,callbacks:i.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var Lc=!1;function Ta(){if(Lc){var e=Mr;if(e!==null)throw e}}function Da(e,t,s,i){Lc=!1;var a=e.updateQueue;si=!1;var n=a.firstBaseUpdate,m=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var h=l,p=h.next;h.next=null,m===null?n=p:m.next=p,m=h;var b=e.alternate;b!==null&&(b=b.updateQueue,l=b.lastBaseUpdate,l!==m&&(l===null?b.firstBaseUpdate=p:l.next=p,b.lastBaseUpdate=h))}if(n!==null){var f=a.baseState;m=0,b=p=h=null,l=n;do{var v=l.lane&-536870913,y=v!==l.lane;if(y?(ze&v)===v:(i&v)===v){v!==0&&v===Gr&&(Lc=!0),b!==null&&(b=b.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var w=e,S=l;v=t;var o=s;switch(S.tag){case 1:if(w=S.payload,typeof w=="function"){f=w.call(o,f,v);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=S.payload,v=typeof w=="function"?w.call(o,f,v):w,v==null)break e;f=et({},f,v);break e;case 2:si=!0}}v=l.callback,v!==null&&(e.flags|=64,y&&(e.flags|=8192),y=a.callbacks,y===null?a.callbacks=[v]:y.push(v))}else y={lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},b===null?(p=b=y,h=f):b=b.next=y,m|=v;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;y=l,l=y.next,y.next=null,a.lastBaseUpdate=y,a.shared.pending=null}}while(!0);b===null&&(h=f),a.baseState=h,a.firstBaseUpdate=p,a.lastBaseUpdate=b,n===null&&(a.shared.lanes=0),wi|=m,e.lanes=m,e.memoizedState=f}}function Fm(e,t){if(typeof e!="function")throw Error(oe(191,e));e.call(t)}function qm(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Fm(s[e],t)}var Kr=Ns(null),Sl=Ns(0);function mh(e,t){e=Gs,rt(Sl,e),rt(Kr,t),Gs=e|t.baseLanes}function Oc(){rt(Sl,Gs),rt(Kr,Kr.current)}function Fu(){Gs=Sl.current,bt(Kr),bt(Sl)}var xi=0,Re=null,Ve=null,dt=null,wl=!1,Br=!1,Ji=!1,Cl=0,Ya=0,Ir=null,ly=0;function ct(){throw Error(oe(321))}function qu(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!qt(e[s],t[s]))return!1;return!0}function Gu(e,t,s,i,a,n){return xi=n,Re=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ke.H=e===null||e.memoizedState===null?xp:Sp,Ji=!1,n=s(i,a),Ji=!1,Br&&(n=Km(t,s,i,a)),Gm(e),n}function Gm(e){ke.H=jl;var t=Ve!==null&&Ve.next!==null;if(xi=0,dt=Ve=Re=null,wl=!1,Ya=0,Ir=null,t)throw Error(oe(300));e===null||yt||(e=e.dependencies,e!==null&&xl(e)&&(yt=!0))}function Km(e,t,s,i){Re=e;var a=0;do{if(Br&&(Ir=null),Ya=0,Br=!1,25<=a)throw Error(oe(301));if(a+=1,dt=Ve=null,e.updateQueue!=null){var n=e.updateQueue;n.lastEffect=null,n.events=null,n.stores=null,n.memoCache!=null&&(n.memoCache.index=0)}ke.H=my,n=t(s,i)}while(Br);return n}function oy(){var e=ke.H,t=e.useState()[0];return t=typeof t.then=="function"?_n(t):t,e=e.useState()[0],(Ve!==null?Ve.memoizedState:null)!==e&&(Re.flags|=1024),t}function Ku(){var e=Cl!==0;return Cl=0,e}function Wu(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function Yu(e){if(wl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}wl=!1}xi=0,dt=Ve=Re=null,Br=!1,Ya=Cl=0,Ir=null}function At(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Re.memoizedState=dt=e:dt=dt.next=e,dt}function ht(){if(Ve===null){var e=Re.alternate;e=e!==null?e.memoizedState:null}else e=Ve.next;var t=dt===null?Re.memoizedState:dt.next;if(t!==null)dt=t,Ve=e;else{if(e===null)throw Re.alternate===null?Error(oe(467)):Error(oe(310));Ve=e,e={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},dt===null?Re.memoizedState=dt=e:dt=dt.next=e}return dt}function Vu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _n(e){var t=Ya;return Ya+=1,Ir===null&&(Ir=[]),e=$m(Ir,e,t),t=Re,(dt===null?t.memoizedState:dt.next)===null&&(t=t.alternate,ke.H=t===null||t.memoizedState===null?xp:Sp),e}function io(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return _n(e);if(e.$$typeof===Ms)return Nt(e)}throw Error(oe(438,String(e)))}function Xu(e){var t=null,s=Re.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var i=Re.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(a){return a.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=Vu(),Re.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),i=0;i<e;i++)s[i]=K0;return t.index++,s}function Fs(e,t){return typeof t=="function"?t(e):t}function el(e){var t=ht();return Ju(t,Ve,e)}function Ju(e,t,s){var i=e.queue;if(i===null)throw Error(oe(311));i.lastRenderedReducer=s;var a=e.baseQueue,n=i.pending;if(n!==null){if(a!==null){var m=a.next;a.next=n.next,n.next=m}t.baseQueue=a=n,i.pending=null}if(n=e.baseState,a===null)e.memoizedState=n;else{t=a.next;var l=m=null,h=null,p=t,b=!1;do{var f=p.lane&-536870913;if(f!==p.lane?(ze&f)===f:(xi&f)===f){var v=p.revertLane;if(v===0)h!==null&&(h=h.next={lane:0,revertLane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),f===Gr&&(b=!0);else if((xi&v)===v){p=p.next,v===Gr&&(b=!0);continue}else f={lane:0,revertLane:p.revertLane,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null},h===null?(l=h=f,m=n):h=h.next=f,Re.lanes|=v,wi|=v;f=p.action,Ji&&s(n,f),n=p.hasEagerState?p.eagerState:s(n,f)}else v={lane:f,revertLane:p.revertLane,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null},h===null?(l=h=v,m=n):h=h.next=v,Re.lanes|=f,wi|=f;p=p.next}while(p!==null&&p!==t);if(h===null?m=n:h.next=l,!qt(n,e.memoizedState)&&(yt=!0,b&&(s=Mr,s!==null)))throw s;e.memoizedState=n,e.baseState=m,e.baseQueue=h,i.lastRenderedState=n}return a===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Lo(e){var t=ht(),s=t.queue;if(s===null)throw Error(oe(311));s.lastRenderedReducer=e;var i=s.dispatch,a=s.pending,n=t.memoizedState;if(a!==null){s.pending=null;var m=a=a.next;do n=e(n,m.action),m=m.next;while(m!==a);qt(n,t.memoizedState)||(yt=!0),t.memoizedState=n,t.baseQueue===null&&(t.baseState=n),s.lastRenderedState=n}return[n,i]}function Wm(e,t,s){var i=Re,a=ht(),n=Ue;if(n){if(s===void 0)throw Error(oe(407));s=s()}else s=t();var m=!qt((Ve||a).memoizedState,s);m&&(a.memoizedState=s,yt=!0),a=a.queue;var l=Xm.bind(null,i,a,e);if(yn(2048,8,l,[e]),a.getSnapshot!==t||m||dt!==null&&dt.memoizedState.tag&1){if(i.flags|=2048,Wr(9,ro(),Vm.bind(null,i,a,s,t),null),Qe===null)throw Error(oe(349));n||xi&124||Ym(i,t,s)}return s}function Ym(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Re.updateQueue,t===null?(t=Vu(),Re.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Vm(e,t,s,i){t.value=s,t.getSnapshot=i,Jm(t)&&Qm(e)}function Xm(e,t,s){return s(function(){Jm(t)&&Qm(e)})}function Jm(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!qt(e,s)}catch{return!0}}function Qm(e){var t=ia(e,2);t!==null&&Ft(t,e,2)}function Mc(e){var t=At();if(typeof e=="function"){var s=e;if(e=s(),Ji){oi(!0);try{s()}finally{oi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:e},t}function Zm(e,t,s,i){return e.baseState=s,Ju(e,Ve,typeof i=="function"?i:Fs)}function cy(e,t,s,i,a){if(ao(e))throw Error(oe(485));if(e=t.action,e!==null){var n={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){n.listeners.push(m)}};ke.T!==null?s(!0):n.isTransition=!1,i(n),s=t.pending,s===null?(n.next=t.pending=n,ep(t,n)):(n.next=s.next,t.pending=s.next=n)}}function ep(e,t){var s=t.action,i=t.payload,a=e.state;if(t.isTransition){var n=ke.T,m={};ke.T=m;try{var l=s(a,i),h=ke.S;h!==null&&h(m,l),ph(e,t,l)}catch(p){Bc(e,t,p)}finally{ke.T=n}}else try{n=s(a,i),ph(e,t,n)}catch(p){Bc(e,t,p)}}function ph(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(i){gh(e,t,i)},function(i){return Bc(e,t,i)}):gh(e,t,s)}function gh(e,t,s){t.status="fulfilled",t.value=s,tp(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,ep(e,s)))}function Bc(e,t,s){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=s,tp(t),t=t.next;while(t!==i)}e.action=null}function tp(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function sp(e,t){return t}function vh(e,t){if(Ue){var s=Qe.formState;if(s!==null){e:{var i=Re;if(Ue){if(nt){t:{for(var a=nt,n=_s;a.nodeType!==8;){if(!n){a=null;break t}if(a=us(a.nextSibling),a===null){a=null;break t}}n=a.data,a=n==="F!"||n==="F"?a:null}if(a){nt=us(a.nextSibling),i=a.data==="F!";break e}}Vi(i)}i=!1}i&&(t=s[0])}}return s=At(),s.memoizedState=s.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sp,lastRenderedState:t},s.queue=i,s=_p.bind(null,Re,i),i.dispatch=s,i=Mc(!1),n=td.bind(null,Re,!1,i.queue),i=At(),a={state:t,dispatch:null,action:e,pending:null},i.queue=a,s=cy.bind(null,Re,a,n,s),a.dispatch=s,i.memoizedState=e,[t,s,!1]}function _h(e){var t=ht();return ip(t,Ve,e)}function ip(e,t,s){if(t=Ju(e,t,sp)[0],e=el(Fs)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=_n(t)}catch(m){throw m===vn?so:m}else i=t;t=ht();var a=t.queue,n=a.dispatch;return s!==t.memoizedState&&(Re.flags|=2048,Wr(9,ro(),uy.bind(null,a,s),null)),[i,n,e]}function uy(e,t){e.action=t}function yh(e){var t=ht(),s=Ve;if(s!==null)return ip(t,s,e);ht(),t=t.memoizedState,s=ht();var i=s.queue.dispatch;return s.memoizedState=e,[t,i,!1]}function Wr(e,t,s,i){return e={tag:e,create:s,deps:i,inst:t,next:null},t=Re.updateQueue,t===null&&(t=Vu(),Re.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(i=s.next,s.next=e,e.next=i,t.lastEffect=e),e}function ro(){return{destroy:void 0,resource:void 0}}function rp(){return ht().memoizedState}function tl(e,t,s,i){var a=At();i=i===void 0?null:i,Re.flags|=e,a.memoizedState=Wr(1|t,ro(),s,i)}function yn(e,t,s,i){var a=ht();i=i===void 0?null:i;var n=a.memoizedState.inst;Ve!==null&&i!==null&&qu(i,Ve.memoizedState.deps)?a.memoizedState=Wr(t,n,s,i):(Re.flags|=e,a.memoizedState=Wr(1|t,n,s,i))}function bh(e,t){tl(8390656,8,e,t)}function ap(e,t){yn(2048,8,e,t)}function np(e,t){return yn(4,2,e,t)}function lp(e,t){return yn(4,4,e,t)}function op(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cp(e,t,s){s=s!=null?s.concat([e]):null,yn(4,4,op.bind(null,t,e),s)}function Qu(){}function up(e,t){var s=ht();t=t===void 0?null:t;var i=s.memoizedState;return t!==null&&qu(t,i[1])?i[0]:(s.memoizedState=[e,t],e)}function dp(e,t){var s=ht();t=t===void 0?null:t;var i=s.memoizedState;if(t!==null&&qu(t,i[1]))return i[0];if(i=e(),Ji){oi(!0);try{e()}finally{oi(!1)}}return s.memoizedState=[i,t],i}function Zu(e,t,s){return s===void 0||xi&1073741824?e.memoizedState=t:(e.memoizedState=s,e=tg(),Re.lanes|=e,wi|=e,s)}function hp(e,t,s,i){return qt(s,t)?s:Kr.current!==null?(e=Zu(e,s,i),qt(e,t)||(yt=!0),e):xi&42?(e=tg(),Re.lanes|=e,wi|=e,t):(yt=!0,e.memoizedState=s)}function fp(e,t,s,i,a){var n=$e.p;$e.p=n!==0&&8>n?n:8;var m=ke.T,l={};ke.T=l,td(e,!1,t,s);try{var h=a(),p=ke.S;if(p!==null&&p(l,h),h!==null&&typeof h=="object"&&typeof h.then=="function"){var b=ny(h,i);Ra(e,t,b,$t(e))}else Ra(e,t,i,$t(e))}catch(f){Ra(e,t,{then:function(){},status:"rejected",reason:f},$t())}finally{$e.p=n,ke.T=m}}function dy(){}function Ic(e,t,s,i){if(e.tag!==5)throw Error(oe(476));var a=mp(e).queue;fp(e,a,t,Ui,s===null?dy:function(){return pp(e),s(i)})}function mp(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Ui,baseState:Ui,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:Ui},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function pp(e){var t=mp(e).next.queue;Ra(e,t,{},$t())}function ed(){return Nt(Za)}function gp(){return ht().memoizedState}function vp(){return ht().memoizedState}function hy(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=$t();e=mi(s);var i=pi(t,e,s);i!==null&&(Ft(i,t,s),Aa(i,t,s)),t={cache:Hu()},e.payload=t;return}t=t.return}}function fy(e,t,s){var i=$t();s={lane:i,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},ao(e)?yp(t,s):(s=Bu(e,t,s,i),s!==null&&(Ft(s,e,i),bp(s,t,i)))}function _p(e,t,s){var i=$t();Ra(e,t,s,i)}function Ra(e,t,s,i){var a={lane:i,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(ao(e))yp(t,a);else{var n=e.alternate;if(e.lanes===0&&(n===null||n.lanes===0)&&(n=t.lastRenderedReducer,n!==null))try{var m=t.lastRenderedState,l=n(m,s);if(a.hasEagerState=!0,a.eagerState=l,qt(l,m))return to(e,t,a,0),Qe===null&&eo(),!1}catch{}finally{}if(s=Bu(e,t,a,i),s!==null)return Ft(s,e,i),bp(s,t,i),!0}return!1}function td(e,t,s,i){if(i={lane:2,revertLane:cd(),action:i,hasEagerState:!1,eagerState:null,next:null},ao(e)){if(t)throw Error(oe(479))}else t=Bu(e,s,i,2),t!==null&&Ft(t,e,2)}function ao(e){var t=e.alternate;return e===Re||t!==null&&t===Re}function yp(e,t){Br=wl=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function bp(e,t,s){if(s&4194048){var i=t.lanes;i&=e.pendingLanes,s|=i,t.lanes=s,um(e,s)}}var jl={readContext:Nt,use:io,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useInsertionEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useSyncExternalStore:ct,useId:ct,useHostTransitionStatus:ct,useFormState:ct,useActionState:ct,useOptimistic:ct,useMemoCache:ct,useCacheRefresh:ct},xp={readContext:Nt,use:io,useCallback:function(e,t){return At().memoizedState=[e,t===void 0?null:t],e},useContext:Nt,useEffect:bh,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,tl(4194308,4,op.bind(null,t,e),s)},useLayoutEffect:function(e,t){return tl(4194308,4,e,t)},useInsertionEffect:function(e,t){tl(4,2,e,t)},useMemo:function(e,t){var s=At();t=t===void 0?null:t;var i=e();if(Ji){oi(!0);try{e()}finally{oi(!1)}}return s.memoizedState=[i,t],i},useReducer:function(e,t,s){var i=At();if(s!==void 0){var a=s(t);if(Ji){oi(!0);try{s(t)}finally{oi(!1)}}}else a=t;return i.memoizedState=i.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},i.queue=e,e=e.dispatch=fy.bind(null,Re,e),[i.memoizedState,e]},useRef:function(e){var t=At();return e={current:e},t.memoizedState=e},useState:function(e){e=Mc(e);var t=e.queue,s=_p.bind(null,Re,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:Qu,useDeferredValue:function(e,t){var s=At();return Zu(s,e,t)},useTransition:function(){var e=Mc(!1);return e=fp.bind(null,Re,e.queue,!0,!1),At().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var i=Re,a=At();if(Ue){if(s===void 0)throw Error(oe(407));s=s()}else{if(s=t(),Qe===null)throw Error(oe(349));ze&124||Ym(i,t,s)}a.memoizedState=s;var n={value:s,getSnapshot:t};return a.queue=n,bh(Xm.bind(null,i,n,e),[e]),i.flags|=2048,Wr(9,ro(),Vm.bind(null,i,n,s,t),null),s},useId:function(){var e=At(),t=Qe.identifierPrefix;if(Ue){var s=Is,i=Bs;s=(i&~(1<<32-Ut(i)-1)).toString(32)+s,t=""+t+"R"+s,s=Cl++,0<s&&(t+="H"+s.toString(32)),t+=""}else s=ly++,t=""+t+"r"+s.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:ed,useFormState:vh,useActionState:vh,useOptimistic:function(e){var t=At();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=td.bind(null,Re,!0,s),s.dispatch=t,[e,t]},useMemoCache:Xu,useCacheRefresh:function(){return At().memoizedState=hy.bind(null,Re)}},Sp={readContext:Nt,use:io,useCallback:up,useContext:Nt,useEffect:ap,useImperativeHandle:cp,useInsertionEffect:np,useLayoutEffect:lp,useMemo:dp,useReducer:el,useRef:rp,useState:function(){return el(Fs)},useDebugValue:Qu,useDeferredValue:function(e,t){var s=ht();return hp(s,Ve.memoizedState,e,t)},useTransition:function(){var e=el(Fs)[0],t=ht().memoizedState;return[typeof e=="boolean"?e:_n(e),t]},useSyncExternalStore:Wm,useId:gp,useHostTransitionStatus:ed,useFormState:_h,useActionState:_h,useOptimistic:function(e,t){var s=ht();return Zm(s,Ve,e,t)},useMemoCache:Xu,useCacheRefresh:vp},my={readContext:Nt,use:io,useCallback:up,useContext:Nt,useEffect:ap,useImperativeHandle:cp,useInsertionEffect:np,useLayoutEffect:lp,useMemo:dp,useReducer:Lo,useRef:rp,useState:function(){return Lo(Fs)},useDebugValue:Qu,useDeferredValue:function(e,t){var s=ht();return Ve===null?Zu(s,e,t):hp(s,Ve.memoizedState,e,t)},useTransition:function(){var e=Lo(Fs)[0],t=ht().memoizedState;return[typeof e=="boolean"?e:_n(e),t]},useSyncExternalStore:Wm,useId:gp,useHostTransitionStatus:ed,useFormState:yh,useActionState:yh,useOptimistic:function(e,t){var s=ht();return Ve!==null?Zm(s,Ve,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Xu,useCacheRefresh:vp},Pr=null,Va=0;function Bn(e){var t=Va;return Va+=1,Pr===null&&(Pr=[]),$m(Pr,e,t)}function ma(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function In(e,t){throw t.$$typeof===q0?Error(oe(525)):(e=Object.prototype.toString.call(t),Error(oe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function xh(e){var t=e._init;return t(e._payload)}function wp(e){function t(u,c){if(e){var d=u.deletions;d===null?(u.deletions=[c],u.flags|=16):d.push(c)}}function s(u,c){if(!e)return null;for(;c!==null;)t(u,c),c=c.sibling;return null}function i(u){for(var c=new Map;u!==null;)u.key!==null?c.set(u.key,u):c.set(u.index,u),u=u.sibling;return c}function a(u,c){return u=Hs(u,c),u.index=0,u.sibling=null,u}function n(u,c,d){return u.index=d,e?(d=u.alternate,d!==null?(d=d.index,d<c?(u.flags|=67108866,c):d):(u.flags|=67108866,c)):(u.flags|=1048576,c)}function m(u){return e&&u.alternate===null&&(u.flags|=67108866),u}function l(u,c,d,g){return c===null||c.tag!==6?(c=To(d,u.mode,g),c.return=u,c):(c=a(c,d),c.return=u,c)}function h(u,c,d,g){var _=d.type;return _===yr?b(u,c,d.props.children,g,d.key):c!==null&&(c.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ti&&xh(_)===c.type)?(c=a(c,d.props),ma(c,d),c.return=u,c):(c=Qn(d.type,d.key,d.props,null,u.mode,g),ma(c,d),c.return=u,c)}function p(u,c,d,g){return c===null||c.tag!==4||c.stateNode.containerInfo!==d.containerInfo||c.stateNode.implementation!==d.implementation?(c=Do(d,u.mode,g),c.return=u,c):(c=a(c,d.children||[]),c.return=u,c)}function b(u,c,d,g,_){return c===null||c.tag!==7?(c=$i(d,u.mode,g,_),c.return=u,c):(c=a(c,d),c.return=u,c)}function f(u,c,d){if(typeof c=="string"&&c!==""||typeof c=="number"||typeof c=="bigint")return c=To(""+c,u.mode,d),c.return=u,c;if(typeof c=="object"&&c!==null){switch(c.$$typeof){case An:return d=Qn(c.type,c.key,c.props,null,u.mode,d),ma(d,c),d.return=u,d;case _a:return c=Do(c,u.mode,d),c.return=u,c;case ti:var g=c._init;return c=g(c._payload),f(u,c,d)}if(ya(c)||ua(c))return c=$i(c,u.mode,d,null),c.return=u,c;if(typeof c.then=="function")return f(u,Bn(c),d);if(c.$$typeof===Ms)return f(u,On(u,c),d);In(u,c)}return null}function v(u,c,d,g){var _=c!==null?c.key:null;if(typeof d=="string"&&d!==""||typeof d=="number"||typeof d=="bigint")return _!==null?null:l(u,c,""+d,g);if(typeof d=="object"&&d!==null){switch(d.$$typeof){case An:return d.key===_?h(u,c,d,g):null;case _a:return d.key===_?p(u,c,d,g):null;case ti:return _=d._init,d=_(d._payload),v(u,c,d,g)}if(ya(d)||ua(d))return _!==null?null:b(u,c,d,g,null);if(typeof d.then=="function")return v(u,c,Bn(d),g);if(d.$$typeof===Ms)return v(u,c,On(u,d),g);In(u,d)}return null}function y(u,c,d,g,_){if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return u=u.get(d)||null,l(c,u,""+g,_);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case An:return u=u.get(g.key===null?d:g.key)||null,h(c,u,g,_);case _a:return u=u.get(g.key===null?d:g.key)||null,p(c,u,g,_);case ti:var C=g._init;return g=C(g._payload),y(u,c,d,g,_)}if(ya(g)||ua(g))return u=u.get(d)||null,b(c,u,g,_,null);if(typeof g.then=="function")return y(u,c,d,Bn(g),_);if(g.$$typeof===Ms)return y(u,c,d,On(c,g),_);In(c,g)}return null}function w(u,c,d,g){for(var _=null,C=null,j=c,x=c=0,E=null;j!==null&&x<d.length;x++){j.index>x?(E=j,j=null):E=j.sibling;var D=v(u,j,d[x],g);if(D===null){j===null&&(j=E);break}e&&j&&D.alternate===null&&t(u,j),c=n(D,c,x),C===null?_=D:C.sibling=D,C=D,j=E}if(x===d.length)return s(u,j),Ue&&Mi(u,x),_;if(j===null){for(;x<d.length;x++)j=f(u,d[x],g),j!==null&&(c=n(j,c,x),C===null?_=j:C.sibling=j,C=j);return Ue&&Mi(u,x),_}for(j=i(j);x<d.length;x++)E=y(j,u,x,d[x],g),E!==null&&(e&&E.alternate!==null&&j.delete(E.key===null?x:E.key),c=n(E,c,x),C===null?_=E:C.sibling=E,C=E);return e&&j.forEach(function(A){return t(u,A)}),Ue&&Mi(u,x),_}function S(u,c,d,g){if(d==null)throw Error(oe(151));for(var _=null,C=null,j=c,x=c=0,E=null,D=d.next();j!==null&&!D.done;x++,D=d.next()){j.index>x?(E=j,j=null):E=j.sibling;var A=v(u,j,D.value,g);if(A===null){j===null&&(j=E);break}e&&j&&A.alternate===null&&t(u,j),c=n(A,c,x),C===null?_=A:C.sibling=A,C=A,j=E}if(D.done)return s(u,j),Ue&&Mi(u,x),_;if(j===null){for(;!D.done;x++,D=d.next())D=f(u,D.value,g),D!==null&&(c=n(D,c,x),C===null?_=D:C.sibling=D,C=D);return Ue&&Mi(u,x),_}for(j=i(j);!D.done;x++,D=d.next())D=y(j,u,x,D.value,g),D!==null&&(e&&D.alternate!==null&&j.delete(D.key===null?x:D.key),c=n(D,c,x),C===null?_=D:C.sibling=D,C=D);return e&&j.forEach(function(T){return t(u,T)}),Ue&&Mi(u,x),_}function o(u,c,d,g){if(typeof d=="object"&&d!==null&&d.type===yr&&d.key===null&&(d=d.props.children),typeof d=="object"&&d!==null){switch(d.$$typeof){case An:e:{for(var _=d.key;c!==null;){if(c.key===_){if(_=d.type,_===yr){if(c.tag===7){s(u,c.sibling),g=a(c,d.props.children),g.return=u,u=g;break e}}else if(c.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ti&&xh(_)===c.type){s(u,c.sibling),g=a(c,d.props),ma(g,d),g.return=u,u=g;break e}s(u,c);break}else t(u,c);c=c.sibling}d.type===yr?(g=$i(d.props.children,u.mode,g,d.key),g.return=u,u=g):(g=Qn(d.type,d.key,d.props,null,u.mode,g),ma(g,d),g.return=u,u=g)}return m(u);case _a:e:{for(_=d.key;c!==null;){if(c.key===_)if(c.tag===4&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){s(u,c.sibling),g=a(c,d.children||[]),g.return=u,u=g;break e}else{s(u,c);break}else t(u,c);c=c.sibling}g=Do(d,u.mode,g),g.return=u,u=g}return m(u);case ti:return _=d._init,d=_(d._payload),o(u,c,d,g)}if(ya(d))return w(u,c,d,g);if(ua(d)){if(_=ua(d),typeof _!="function")throw Error(oe(150));return d=_.call(d),S(u,c,d,g)}if(typeof d.then=="function")return o(u,c,Bn(d),g);if(d.$$typeof===Ms)return o(u,c,On(u,d),g);In(u,d)}return typeof d=="string"&&d!==""||typeof d=="number"||typeof d=="bigint"?(d=""+d,c!==null&&c.tag===6?(s(u,c.sibling),g=a(c,d),g.return=u,u=g):(s(u,c),g=To(d,u.mode,g),g.return=u,u=g),m(u)):s(u,c)}return function(u,c,d,g){try{Va=0;var _=o(u,c,d,g);return Pr=null,_}catch(j){if(j===vn||j===so)throw j;var C=zt(29,j,null,u.mode);return C.lanes=g,C.return=u,C}finally{}}}var Yr=wp(!0),Cp=wp(!1),ss=Ns(null),ws=null;function ai(e){var t=e.alternate;rt(mt,mt.current&1),rt(ss,e),ws===null&&(t===null||Kr.current!==null||t.memoizedState!==null)&&(ws=e)}function jp(e){if(e.tag===22){if(rt(mt,mt.current),rt(ss,e),ws===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(ws=e)}}else ni()}function ni(){rt(mt,mt.current),rt(ss,ss.current)}function zs(e){bt(ss),ws===e&&(ws=null),bt(mt)}var mt=Ns(0);function El(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||eu(s)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Oo(e,t,s,i){t=e.memoizedState,s=s(i,t),s=s==null?t:et({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Pc={enqueueSetState:function(e,t,s){e=e._reactInternals;var i=$t(),a=mi(i);a.payload=t,s!=null&&(a.callback=s),t=pi(e,a,i),t!==null&&(Ft(t,e,i),Aa(t,e,i))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var i=$t(),a=mi(i);a.tag=1,a.payload=t,s!=null&&(a.callback=s),t=pi(e,a,i),t!==null&&(Ft(t,e,i),Aa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=$t(),i=mi(s);i.tag=2,t!=null&&(i.callback=t),t=pi(e,i,s),t!==null&&(Ft(t,e,s),Aa(t,e,s))}};function Sh(e,t,s,i,a,n,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,n,m):t.prototype&&t.prototype.isPureReactComponent?!Ka(s,i)||!Ka(a,n):!0}function wh(e,t,s,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,i),t.state!==e&&Pc.enqueueReplaceState(t,t.state,null)}function Qi(e,t){var s=t;if("ref"in t){s={};for(var i in t)i!=="ref"&&(s[i]=t[i])}if(e=e.defaultProps){s===t&&(s=et({},s));for(var a in e)s[a]===void 0&&(s[a]=e[a])}return s}var Nl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Ep(e){Nl(e)}function Np(e){console.error(e)}function kp(e){Nl(e)}function kl(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Ch(e,t,s){try{var i=e.onCaughtError;i(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function zc(e,t,s){return s=mi(s),s.tag=3,s.payload={element:null},s.callback=function(){kl(e,t)},s}function Ap(e){return e=mi(e),e.tag=3,e}function Tp(e,t,s,i){var a=s.type.getDerivedStateFromError;if(typeof a=="function"){var n=i.value;e.payload=function(){return a(n)},e.callback=function(){Ch(t,s,i)}}var m=s.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){Ch(t,s,i),typeof a!="function"&&(gi===null?gi=new Set([this]):gi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function py(e,t,s,i,a){if(s.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=s.alternate,t!==null&&pn(t,s,a,!0),s=ss.current,s!==null){switch(s.tag){case 13:return ws===null?Wc():s.alternate===null&&ot===0&&(ot=3),s.flags&=-257,s.flags|=65536,s.lanes=a,i===Dc?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([i]):t.add(i),Go(e,i,a)),!1;case 22:return s.flags|=65536,i===Dc?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([i]):s.add(i)),Go(e,i,a)),!1}throw Error(oe(435,s.tag))}return Go(e,i,a),Wc(),!1}if(Ue)return t=ss.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,i!==Ec&&(e=Error(oe(422),{cause:i}),Wa(es(e,s)))):(i!==Ec&&(t=Error(oe(423),{cause:i}),Wa(es(t,s))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,i=es(i,s),a=zc(e.stateNode,i,a),Ro(e,a),ot!==4&&(ot=2)),!1;var n=Error(oe(520),{cause:i});if(n=es(n,s),Ma===null?Ma=[n]:Ma.push(n),ot!==4&&(ot=2),t===null)return!0;i=es(i,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=a&-a,s.lanes|=e,e=zc(s.stateNode,i,e),Ro(s,e),!1;case 1:if(t=s.type,n=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||n!==null&&typeof n.componentDidCatch=="function"&&(gi===null||!gi.has(n))))return s.flags|=65536,a&=-a,s.lanes|=a,a=Ap(a),Tp(a,e,s,i),Ro(s,a),!1}s=s.return}while(s!==null);return!1}var Dp=Error(oe(461)),yt=!1;function St(e,t,s,i){t.child=e===null?Cp(t,null,s,i):Yr(t,e.child,s,i)}function jh(e,t,s,i,a){s=s.render;var n=t.ref;if("ref"in i){var m={};for(var l in i)l!=="ref"&&(m[l]=i[l])}else m=i;return Xi(t),i=Gu(e,t,s,m,n,a),l=Ku(),e!==null&&!yt?(Wu(e,t,a),qs(e,t,a)):(Ue&&l&&Pu(t),t.flags|=1,St(e,t,i,a),t.child)}function Eh(e,t,s,i,a){if(e===null){var n=s.type;return typeof n=="function"&&!Iu(n)&&n.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=n,Rp(e,t,n,i,a)):(e=Qn(s.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(n=e.child,!sd(e,a)){var m=n.memoizedProps;if(s=s.compare,s=s!==null?s:Ka,s(m,i)&&e.ref===t.ref)return qs(e,t,a)}return t.flags|=1,e=Hs(n,i),e.ref=t.ref,e.return=t,t.child=e}function Rp(e,t,s,i,a){if(e!==null){var n=e.memoizedProps;if(Ka(n,i)&&e.ref===t.ref)if(yt=!1,t.pendingProps=i=n,sd(e,a))e.flags&131072&&(yt=!0);else return t.lanes=e.lanes,qs(e,t,a)}return Hc(e,t,s,i,a)}function Lp(e,t,s){var i=t.pendingProps,a=i.children,n=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=n!==null?n.baseLanes|s:s,e!==null){for(a=t.child=e.child,n=0;a!==null;)n=n|a.lanes|a.childLanes,a=a.sibling;t.childLanes=n&~i}else t.childLanes=0,t.child=null;return Nh(e,t,i,s)}if(s&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Zn(t,n!==null?n.cachePool:null),n!==null?mh(t,n):Oc(),jp(t);else return t.lanes=t.childLanes=536870912,Nh(e,t,n!==null?n.baseLanes|s:s,s)}else n!==null?(Zn(t,n.cachePool),mh(t,n),ni(),t.memoizedState=null):(e!==null&&Zn(t,null),Oc(),ni());return St(e,t,a,s),t.child}function Nh(e,t,s,i){var a=Uu();return a=a===null?null:{parent:ft._currentValue,pool:a},t.memoizedState={baseLanes:s,cachePool:a},e!==null&&Zn(t,null),Oc(),jp(t),e!==null&&pn(e,t,i,!0),null}function sl(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(oe(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function Hc(e,t,s,i,a){return Xi(t),s=Gu(e,t,s,i,void 0,a),i=Ku(),e!==null&&!yt?(Wu(e,t,a),qs(e,t,a)):(Ue&&i&&Pu(t),t.flags|=1,St(e,t,s,a),t.child)}function kh(e,t,s,i,a,n){return Xi(t),t.updateQueue=null,s=Km(t,i,s,a),Gm(e),i=Ku(),e!==null&&!yt?(Wu(e,t,n),qs(e,t,n)):(Ue&&i&&Pu(t),t.flags|=1,St(e,t,s,n),t.child)}function Ah(e,t,s,i,a){if(Xi(t),t.stateNode===null){var n=Nr,m=s.contextType;typeof m=="object"&&m!==null&&(n=Nt(m)),n=new s(i,n),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Pc,t.stateNode=n,n._reactInternals=t,n=t.stateNode,n.props=i,n.state=t.memoizedState,n.refs={},$u(t),m=s.contextType,n.context=typeof m=="object"&&m!==null?Nt(m):Nr,n.state=t.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(Oo(t,s,m,i),n.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(m=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),m!==n.state&&Pc.enqueueReplaceState(n,n.state,null),Da(t,i,n,a),Ta(),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){n=t.stateNode;var l=t.memoizedProps,h=Qi(s,l);n.props=h;var p=n.context,b=s.contextType;m=Nr,typeof b=="object"&&b!==null&&(m=Nt(b));var f=s.getDerivedStateFromProps;b=typeof f=="function"||typeof n.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,b||typeof n.UNSAFE_componentWillReceiveProps!="function"&&typeof n.componentWillReceiveProps!="function"||(l||p!==m)&&wh(t,n,i,m),si=!1;var v=t.memoizedState;n.state=v,Da(t,i,n,a),Ta(),p=t.memoizedState,l||v!==p||si?(typeof f=="function"&&(Oo(t,s,f,i),p=t.memoizedState),(h=si||Sh(t,s,h,i,v,p,m))?(b||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount()),typeof n.componentDidMount=="function"&&(t.flags|=4194308)):(typeof n.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=p),n.props=i,n.state=p,n.context=m,i=h):(typeof n.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{n=t.stateNode,Rc(e,t),m=t.memoizedProps,b=Qi(s,m),n.props=b,f=t.pendingProps,v=n.context,p=s.contextType,h=Nr,typeof p=="object"&&p!==null&&(h=Nt(p)),l=s.getDerivedStateFromProps,(p=typeof l=="function"||typeof n.getSnapshotBeforeUpdate=="function")||typeof n.UNSAFE_componentWillReceiveProps!="function"&&typeof n.componentWillReceiveProps!="function"||(m!==f||v!==h)&&wh(t,n,i,h),si=!1,v=t.memoizedState,n.state=v,Da(t,i,n,a),Ta();var y=t.memoizedState;m!==f||v!==y||si||e!==null&&e.dependencies!==null&&xl(e.dependencies)?(typeof l=="function"&&(Oo(t,s,l,i),y=t.memoizedState),(b=si||Sh(t,s,b,i,v,y,h)||e!==null&&e.dependencies!==null&&xl(e.dependencies))?(p||typeof n.UNSAFE_componentWillUpdate!="function"&&typeof n.componentWillUpdate!="function"||(typeof n.componentWillUpdate=="function"&&n.componentWillUpdate(i,y,h),typeof n.UNSAFE_componentWillUpdate=="function"&&n.UNSAFE_componentWillUpdate(i,y,h)),typeof n.componentDidUpdate=="function"&&(t.flags|=4),typeof n.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof n.componentDidUpdate!="function"||m===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof n.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=y),n.props=i,n.state=y,n.context=h,i=b):(typeof n.componentDidUpdate!="function"||m===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof n.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),i=!1)}return n=i,sl(e,t),i=(t.flags&128)!==0,n||i?(n=t.stateNode,s=i&&typeof s.getDerivedStateFromError!="function"?null:n.render(),t.flags|=1,e!==null&&i?(t.child=Yr(t,e.child,null,a),t.child=Yr(t,null,s,a)):St(e,t,s,a),t.memoizedState=n.state,e=t.child):e=qs(e,t,a),e}function Th(e,t,s,i){return mn(),t.flags|=256,St(e,t,s,i),t.child}var Mo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bo(e){return{baseLanes:e,cachePool:Hm()}}function Io(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=ts),e}function Op(e,t,s){var i=t.pendingProps,a=!1,n=(t.flags&128)!==0,m;if((m=n)||(m=e!==null&&e.memoizedState===null?!1:(mt.current&2)!==0),m&&(a=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ue){if(a?ai(t):ni(),Ue){var l=nt,h;if(h=l){e:{for(h=l,l=_s;h.nodeType!==8;){if(!l){l=null;break e}if(h=us(h.nextSibling),h===null){l=null;break e}}l=h}l!==null?(t.memoizedState={dehydrated:l,treeContext:Fi!==null?{id:Bs,overflow:Is}:null,retryLane:536870912,hydrationErrors:null},h=zt(18,null,null,0),h.stateNode=l,h.return=t,t.child=h,kt=t,nt=null,h=!0):h=!1}h||Vi(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return eu(l)?t.lanes=32:t.lanes=536870912,null;zs(t)}return l=i.children,i=i.fallback,a?(ni(),a=t.mode,l=Al({mode:"hidden",children:l},a),i=$i(i,a,s,null),l.return=t,i.return=t,l.sibling=i,t.child=l,a=t.child,a.memoizedState=Bo(s),a.childLanes=Io(e,m,s),t.memoizedState=Mo,i):(ai(t),Uc(t,l))}if(h=e.memoizedState,h!==null&&(l=h.dehydrated,l!==null)){if(n)t.flags&256?(ai(t),t.flags&=-257,t=Po(e,t,s)):t.memoizedState!==null?(ni(),t.child=e.child,t.flags|=128,t=null):(ni(),a=i.fallback,l=t.mode,i=Al({mode:"visible",children:i.children},l),a=$i(a,l,s,null),a.flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,Yr(t,e.child,null,s),i=t.child,i.memoizedState=Bo(s),i.childLanes=Io(e,m,s),t.memoizedState=Mo,t=a);else if(ai(t),eu(l)){if(m=l.nextSibling&&l.nextSibling.dataset,m)var p=m.dgst;m=p,i=Error(oe(419)),i.stack="",i.digest=m,Wa({value:i,source:null,stack:null}),t=Po(e,t,s)}else if(yt||pn(e,t,s,!1),m=(s&e.childLanes)!==0,yt||m){if(m=Qe,m!==null&&(i=s&-s,i=i&42?1:Eu(i),i=i&(m.suspendedLanes|s)?0:i,i!==0&&i!==h.retryLane))throw h.retryLane=i,ia(e,i),Ft(m,e,i),Dp;l.data==="$?"||Wc(),t=Po(e,t,s)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=h.treeContext,nt=us(l.nextSibling),kt=t,Ue=!0,qi=null,_s=!1,e!==null&&(Xt[Jt++]=Bs,Xt[Jt++]=Is,Xt[Jt++]=Fi,Bs=e.id,Is=e.overflow,Fi=t),t=Uc(t,i.children),t.flags|=4096);return t}return a?(ni(),a=i.fallback,l=t.mode,h=e.child,p=h.sibling,i=Hs(h,{mode:"hidden",children:i.children}),i.subtreeFlags=h.subtreeFlags&65011712,p!==null?a=Hs(p,a):(a=$i(a,l,s,null),a.flags|=2),a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=e.child.memoizedState,l===null?l=Bo(s):(h=l.cachePool,h!==null?(p=ft._currentValue,h=h.parent!==p?{parent:p,pool:p}:h):h=Hm(),l={baseLanes:l.baseLanes|s,cachePool:h}),a.memoizedState=l,a.childLanes=Io(e,m,s),t.memoizedState=Mo,i):(ai(t),s=e.child,e=s.sibling,s=Hs(s,{mode:"visible",children:i.children}),s.return=t,s.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=s,t.memoizedState=null,s)}function Uc(e,t){return t=Al({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Al(e,t){return e=zt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Po(e,t,s){return Yr(t,e.child,null,s),e=Uc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Dh(e,t,s){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),kc(e.return,t,s)}function zo(e,t,s,i,a){var n=e.memoizedState;n===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:s,tailMode:a}:(n.isBackwards=t,n.rendering=null,n.renderingStartTime=0,n.last=i,n.tail=s,n.tailMode=a)}function Mp(e,t,s){var i=t.pendingProps,a=i.revealOrder,n=i.tail;if(St(e,t,i.children,s),i=mt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dh(e,s,t);else if(e.tag===19)Dh(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(rt(mt,i),a){case"forwards":for(s=t.child,a=null;s!==null;)e=s.alternate,e!==null&&El(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),zo(t,!1,a,s,n);break;case"backwards":for(s=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&El(e)===null){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}zo(t,!0,s,null,n);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qs(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),wi|=t.lanes,!(s&t.childLanes))if(e!==null){if(pn(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(oe(153));if(t.child!==null){for(e=t.child,s=Hs(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Hs(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function sd(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&xl(e)))}function gy(e,t,s){switch(t.tag){case 3:fl(t,t.stateNode.containerInfo),ri(t,ft,e.memoizedState.cache),mn();break;case 27:case 5:gc(t);break;case 4:fl(t,t.stateNode.containerInfo);break;case 10:ri(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(ai(t),t.flags|=128,null):s&t.child.childLanes?Op(e,t,s):(ai(t),e=qs(e,t,s),e!==null?e.sibling:null);ai(t);break;case 19:var a=(e.flags&128)!==0;if(i=(s&t.childLanes)!==0,i||(pn(e,t,s,!1),i=(s&t.childLanes)!==0),a){if(i)return Mp(e,t,s);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),rt(mt,mt.current),i)break;return null;case 22:case 23:return t.lanes=0,Lp(e,t,s);case 24:ri(t,ft,e.memoizedState.cache)}return qs(e,t,s)}function Bp(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)yt=!0;else{if(!sd(e,s)&&!(t.flags&128))return yt=!1,gy(e,t,s);yt=!!(e.flags&131072)}else yt=!1,Ue&&t.flags&1048576&&Pm(t,bl,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,a=i._init;if(i=a(i._payload),t.type=i,typeof i=="function")Iu(i)?(e=Qi(i,e),t.tag=1,t=Ah(null,t,i,e,s)):(t.tag=0,t=Hc(null,t,i,e,s));else{if(i!=null){if(a=i.$$typeof,a===wu){t.tag=11,t=jh(null,t,i,e,s);break e}else if(a===Cu){t.tag=14,t=Eh(null,t,i,e,s);break e}}throw t=mc(i)||i,Error(oe(306,t,""))}}return t;case 0:return Hc(e,t,t.type,t.pendingProps,s);case 1:return i=t.type,a=Qi(i,t.pendingProps),Ah(e,t,i,a,s);case 3:e:{if(fl(t,t.stateNode.containerInfo),e===null)throw Error(oe(387));i=t.pendingProps;var n=t.memoizedState;a=n.element,Rc(e,t),Da(t,i,null,s);var m=t.memoizedState;if(i=m.cache,ri(t,ft,i),i!==n.cache&&Ac(t,[ft],s,!0),Ta(),i=m.element,n.isDehydrated)if(n={element:i,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=n,t.memoizedState=n,t.flags&256){t=Th(e,t,i,s);break e}else if(i!==a){a=es(Error(oe(424)),t),Wa(a),t=Th(e,t,i,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(nt=us(e.firstChild),kt=t,Ue=!0,qi=null,_s=!0,s=Cp(t,null,i,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(mn(),i===a){t=qs(e,t,s);break e}St(e,t,i,s)}t=t.child}return t;case 26:return sl(e,t),e===null?(s=Yh(t.type,null,t.pendingProps,null))?t.memoizedState=s:Ue||(s=t.type,e=t.pendingProps,i=Bl(fi.current).createElement(s),i[Et]=t,i[Rt]=e,Ct(i,s,e),_t(i),t.stateNode=i):t.memoizedState=Yh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return gc(t),e===null&&Ue&&(i=t.stateNode=Sg(t.type,t.pendingProps,fi.current),kt=t,_s=!0,a=nt,Ai(t.type)?(tu=a,nt=us(i.firstChild)):nt=a),St(e,t,t.pendingProps.children,s),sl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ue&&((a=i=nt)&&(i=qy(i,t.type,t.pendingProps,_s),i!==null?(t.stateNode=i,kt=t,nt=us(i.firstChild),_s=!1,a=!0):a=!1),a||Vi(t)),gc(t),a=t.type,n=t.pendingProps,m=e!==null?e.memoizedProps:null,i=n.children,Qc(a,n)?i=null:m!==null&&Qc(a,m)&&(t.flags|=32),t.memoizedState!==null&&(a=Gu(e,t,oy,null,null,s),Za._currentValue=a),sl(e,t),St(e,t,i,s),t.child;case 6:return e===null&&Ue&&((e=s=nt)&&(s=Gy(s,t.pendingProps,_s),s!==null?(t.stateNode=s,kt=t,nt=null,e=!0):e=!1),e||Vi(t)),null;case 13:return Op(e,t,s);case 4:return fl(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Yr(t,null,i,s):St(e,t,i,s),t.child;case 11:return jh(e,t,t.type,t.pendingProps,s);case 7:return St(e,t,t.pendingProps,s),t.child;case 8:return St(e,t,t.pendingProps.children,s),t.child;case 12:return St(e,t,t.pendingProps.children,s),t.child;case 10:return i=t.pendingProps,ri(t,t.type,i.value),St(e,t,i.children,s),t.child;case 9:return a=t.type._context,i=t.pendingProps.children,Xi(t),a=Nt(a),i=i(a),t.flags|=1,St(e,t,i,s),t.child;case 14:return Eh(e,t,t.type,t.pendingProps,s);case 15:return Rp(e,t,t.type,t.pendingProps,s);case 19:return Mp(e,t,s);case 31:return i=t.pendingProps,s=t.mode,i={mode:i.mode,children:i.children},e===null?(s=Al(i,s),s.ref=t.ref,t.child=s,s.return=t,t=s):(s=Hs(e.child,i),s.ref=t.ref,t.child=s,s.return=t,t=s),t;case 22:return Lp(e,t,s);case 24:return Xi(t),i=Nt(ft),e===null?(a=Uu(),a===null&&(a=Qe,n=Hu(),a.pooledCache=n,n.refCount++,n!==null&&(a.pooledCacheLanes|=s),a=n),t.memoizedState={parent:i,cache:a},$u(t),ri(t,ft,a)):(e.lanes&s&&(Rc(e,t),Da(t,null,null,s),Ta()),a=e.memoizedState,n=t.memoizedState,a.parent!==i?(a={parent:i,cache:i},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),ri(t,ft,i)):(i=n.cache,ri(t,ft,i),i!==a.cache&&Ac(t,[ft],s,!0))),St(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(oe(156,t.tag))}function Ts(e){e.flags|=4}function Rh(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!jg(t)){if(t=ss.current,t!==null&&((ze&4194048)===ze?ws!==null:(ze&62914560)!==ze&&!(ze&536870912)||t!==ws))throw ka=Dc,Um;e.flags|=8192}}function Pn(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?om():536870912,e.lanes|=t,Vr|=t)}function pa(e,t){if(!Ue)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function at(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,i=0;if(t)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,i|=a.subtreeFlags&65011712,i|=a.flags&65011712,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=s,t}function vy(e,t,s){var i=t.pendingProps;switch(zu(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(t),null;case 1:return at(t),null;case 3:return s=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Us(ft),$r(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(fa(t)?Ts(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,oh())),at(t),null;case 26:return s=t.memoizedState,e===null?(Ts(t),s!==null?(at(t),Rh(t,s)):(at(t),t.flags&=-16777217)):s?s!==e.memoizedState?(Ts(t),at(t),Rh(t,s)):(at(t),t.flags&=-16777217):(e.memoizedProps!==i&&Ts(t),at(t),t.flags&=-16777217),null;case 27:ml(t),s=fi.current;var a=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Ts(t);else{if(!i){if(t.stateNode===null)throw Error(oe(166));return at(t),null}e=xs.current,fa(t)?nh(t):(e=Sg(a,i,s),t.stateNode=e,Ts(t))}return at(t),null;case 5:if(ml(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Ts(t);else{if(!i){if(t.stateNode===null)throw Error(oe(166));return at(t),null}if(e=xs.current,fa(t))nh(t);else{switch(a=Bl(fi.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?a.createElement("select",{is:i.is}):a.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?a.createElement(s,{is:i.is}):a.createElement(s)}}e[Et]=t,e[Rt]=i;e:for(a=t.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(Ct(e,s,i),s){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ts(t)}}return at(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Ts(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(oe(166));if(e=fi.current,fa(t)){if(e=t.stateNode,s=t.memoizedProps,i=null,a=kt,a!==null)switch(a.tag){case 27:case 5:i=a.memoizedProps}e[Et]=t,e=!!(e.nodeValue===s||i!==null&&i.suppressHydrationWarning===!0||yg(e.nodeValue,s)),e||Vi(t)}else e=Bl(e).createTextNode(i),e[Et]=t,t.stateNode=e}return at(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=fa(t),i!==null&&i.dehydrated!==null){if(e===null){if(!a)throw Error(oe(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(oe(317));a[Et]=t}else mn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;at(t),a=!1}else a=oh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(zs(t),t):(zs(t),null)}if(zs(t),t.flags&128)return t.lanes=s,t;if(s=i!==null,e=e!==null&&e.memoizedState!==null,s){i=t.child,a=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(a=i.alternate.memoizedState.cachePool.pool);var n=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(i.flags|=2048)}return s!==e&&s&&(t.child.flags|=8192),Pn(t,t.updateQueue),at(t),null;case 4:return $r(),e===null&&ud(t.stateNode.containerInfo),at(t),null;case 10:return Us(t.type),at(t),null;case 19:if(bt(mt),a=t.memoizedState,a===null)return at(t),null;if(i=(t.flags&128)!==0,n=a.rendering,n===null)if(i)pa(a,!1);else{if(ot!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(n=El(e),n!==null){for(t.flags|=128,pa(a,!1),e=n.updateQueue,t.updateQueue=e,Pn(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)Im(s,e),s=s.sibling;return rt(mt,mt.current&1|2),t.child}e=e.sibling}a.tail!==null&&Ss()>Dl&&(t.flags|=128,i=!0,pa(a,!1),t.lanes=4194304)}else{if(!i)if(e=El(n),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Pn(t,e),pa(a,!0),a.tail===null&&a.tailMode==="hidden"&&!n.alternate&&!Ue)return at(t),null}else 2*Ss()-a.renderingStartTime>Dl&&s!==536870912&&(t.flags|=128,i=!0,pa(a,!1),t.lanes=4194304);a.isBackwards?(n.sibling=t.child,t.child=n):(e=a.last,e!==null?e.sibling=n:t.child=n,a.last=n)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ss(),t.sibling=null,e=mt.current,rt(mt,i?e&1|2:e&1),t):(at(t),null);case 22:case 23:return zs(t),Fu(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?s&536870912&&!(t.flags&128)&&(at(t),t.subtreeFlags&6&&(t.flags|=8192)):at(t),s=t.updateQueue,s!==null&&Pn(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==s&&(t.flags|=2048),e!==null&&bt(Gi),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Us(ft),at(t),null;case 25:return null;case 30:return null}throw Error(oe(156,t.tag))}function _y(e,t){switch(zu(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Us(ft),$r(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ml(t),null;case 13:if(zs(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(oe(340));mn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return bt(mt),null;case 4:return $r(),null;case 10:return Us(t.type),null;case 22:case 23:return zs(t),Fu(),e!==null&&bt(Gi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Us(ft),null;case 25:return null;default:return null}}function Ip(e,t){switch(zu(t),t.tag){case 3:Us(ft),$r();break;case 26:case 27:case 5:ml(t);break;case 4:$r();break;case 13:zs(t);break;case 19:bt(mt);break;case 10:Us(t.type);break;case 22:case 23:zs(t),Fu(),e!==null&&bt(Gi);break;case 24:Us(ft)}}function bn(e,t){try{var s=t.updateQueue,i=s!==null?s.lastEffect:null;if(i!==null){var a=i.next;s=a;do{if((s.tag&e)===e){i=void 0;var n=s.create,m=s.inst;i=n(),m.destroy=i}s=s.next}while(s!==a)}}catch(l){Je(t,t.return,l)}}function Si(e,t,s){try{var i=t.updateQueue,a=i!==null?i.lastEffect:null;if(a!==null){var n=a.next;i=n;do{if((i.tag&e)===e){var m=i.inst,l=m.destroy;if(l!==void 0){m.destroy=void 0,a=t;var h=s,p=l;try{p()}catch(b){Je(a,h,b)}}}i=i.next}while(i!==n)}}catch(b){Je(t,t.return,b)}}function Pp(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{qm(t,s)}catch(i){Je(e,e.return,i)}}}function zp(e,t,s){s.props=Qi(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(i){Je(e,t,i)}}function La(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof s=="function"?e.refCleanup=s(i):s.current=i}}catch(a){Je(e,t,a)}}function ys(e,t){var s=e.ref,i=e.refCleanup;if(s!==null)if(typeof i=="function")try{i()}catch(a){Je(e,t,a)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(a){Je(e,t,a)}else s.current=null}function Hp(e){var t=e.type,s=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&i.focus();break e;case"img":s.src?i.src=s.src:s.srcSet&&(i.srcset=s.srcSet)}}catch(a){Je(e,e.return,a)}}function Ho(e,t,s){try{var i=e.stateNode;zy(i,e.type,s,t),i[Rt]=t}catch(a){Je(e,e.return,a)}}function Up(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ai(e.type)||e.tag===4}function Uo(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Up(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ai(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $c(e,t,s){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=co));else if(i!==4&&(i===27&&Ai(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for($c(e,t,s),e=e.sibling;e!==null;)$c(e,t,s),e=e.sibling}function Tl(e,t,s){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(i!==4&&(i===27&&Ai(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Tl(e,t,s),e=e.sibling;e!==null;)Tl(e,t,s),e=e.sibling}function $p(e){var t=e.stateNode,s=e.memoizedProps;try{for(var i=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Ct(t,i,s),t[Et]=e,t[Rt]=s}catch(n){Je(e,e.return,n)}}var Os=!1,ut=!1,$o=!1,Lh=typeof WeakSet=="function"?WeakSet:Set,vt=null;function yy(e,t){if(e=e.containerInfo,Xc=Hl,e=Am(e),Ou(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var i=s.getSelection&&s.getSelection();if(i&&i.rangeCount!==0){s=i.anchorNode;var a=i.anchorOffset,n=i.focusNode;i=i.focusOffset;try{s.nodeType,n.nodeType}catch{s=null;break e}var m=0,l=-1,h=-1,p=0,b=0,f=e,v=null;t:for(;;){for(var y;f!==s||a!==0&&f.nodeType!==3||(l=m+a),f!==n||i!==0&&f.nodeType!==3||(h=m+i),f.nodeType===3&&(m+=f.nodeValue.length),(y=f.firstChild)!==null;)v=f,f=y;for(;;){if(f===e)break t;if(v===s&&++p===a&&(l=m),v===n&&++b===i&&(h=m),(y=f.nextSibling)!==null)break;f=v,v=f.parentNode}f=y}s=l===-1||h===-1?null:{start:l,end:h}}else s=null}s=s||{start:0,end:0}}else s=null;for(Jc={focusedElem:e,selectionRange:s},Hl=!1,vt=t;vt!==null;)if(t=vt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,vt=e;else for(;vt!==null;){switch(t=vt,n=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&n!==null){e=void 0,s=t,a=n.memoizedProps,n=n.memoizedState,i=s.stateNode;try{var w=Qi(s.type,a,s.elementType===s.type);e=i.getSnapshotBeforeUpdate(w,n),i.__reactInternalSnapshotBeforeUpdate=e}catch(S){Je(s,s.return,S)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)Zc(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Zc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(oe(163))}if(e=t.sibling,e!==null){e.return=t.return,vt=e;break}vt=t.return}}function Fp(e,t,s){var i=s.flags;switch(s.tag){case 0:case 11:case 15:Zs(e,s),i&4&&bn(5,s);break;case 1:if(Zs(e,s),i&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(m){Je(s,s.return,m)}else{var a=Qi(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){Je(s,s.return,m)}}i&64&&Pp(s),i&512&&La(s,s.return);break;case 3:if(Zs(e,s),i&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{qm(e,t)}catch(m){Je(s,s.return,m)}}break;case 27:t===null&&i&4&&$p(s);case 26:case 5:Zs(e,s),t===null&&i&4&&Hp(s),i&512&&La(s,s.return);break;case 12:Zs(e,s);break;case 13:Zs(e,s),i&4&&Kp(e,s),i&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=ky.bind(null,s),Ky(e,s))));break;case 22:if(i=s.memoizedState!==null||Os,!i){t=t!==null&&t.memoizedState!==null||ut,a=Os;var n=ut;Os=i,(ut=t)&&!n?ei(e,s,(s.subtreeFlags&8772)!==0):Zs(e,s),Os=a,ut=n}break;case 30:break;default:Zs(e,s)}}function qp(e){var t=e.alternate;t!==null&&(e.alternate=null,qp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ku(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var it=null,Tt=!1;function Ds(e,t,s){for(s=s.child;s!==null;)Gp(e,t,s),s=s.sibling}function Gp(e,t,s){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(cn,s)}catch{}switch(s.tag){case 26:ut||ys(s,t),Ds(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:ut||ys(s,t);var i=it,a=Tt;Ai(s.type)&&(it=s.stateNode,Tt=!1),Ds(e,t,s),Ia(s.stateNode),it=i,Tt=a;break;case 5:ut||ys(s,t);case 6:if(i=it,a=Tt,it=null,Ds(e,t,s),it=i,Tt=a,it!==null)if(Tt)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(s.stateNode)}catch(n){Je(s,t,n)}else try{it.removeChild(s.stateNode)}catch(n){Je(s,t,n)}break;case 18:it!==null&&(Tt?(e=it,Gh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),sn(e)):Gh(it,s.stateNode));break;case 4:i=it,a=Tt,it=s.stateNode.containerInfo,Tt=!0,Ds(e,t,s),it=i,Tt=a;break;case 0:case 11:case 14:case 15:ut||Si(2,s,t),ut||Si(4,s,t),Ds(e,t,s);break;case 1:ut||(ys(s,t),i=s.stateNode,typeof i.componentWillUnmount=="function"&&zp(s,t,i)),Ds(e,t,s);break;case 21:Ds(e,t,s);break;case 22:ut=(i=ut)||s.memoizedState!==null,Ds(e,t,s),ut=i;break;default:Ds(e,t,s)}}function Kp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{sn(e)}catch(s){Je(t,t.return,s)}}function by(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Lh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Lh),t;default:throw Error(oe(435,e.tag))}}function Fo(e,t){var s=by(e);t.forEach(function(i){var a=Ay.bind(null,e,i);s.has(i)||(s.add(i),i.then(a,a))})}function Bt(e,t){var s=t.deletions;if(s!==null)for(var i=0;i<s.length;i++){var a=s[i],n=e,m=t,l=m;e:for(;l!==null;){switch(l.tag){case 27:if(Ai(l.type)){it=l.stateNode,Tt=!1;break e}break;case 5:it=l.stateNode,Tt=!1;break e;case 3:case 4:it=l.stateNode.containerInfo,Tt=!0;break e}l=l.return}if(it===null)throw Error(oe(160));Gp(n,m,a),it=null,Tt=!1,n=a.alternate,n!==null&&(n.return=null),a.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Wp(t,e),t=t.sibling}var ls=null;function Wp(e,t){var s=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Bt(t,e),It(e),i&4&&(Si(3,e,e.return),bn(3,e),Si(5,e,e.return));break;case 1:Bt(t,e),It(e),i&512&&(ut||s===null||ys(s,s.return)),i&64&&Os&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?i:s.concat(i))));break;case 26:var a=ls;if(Bt(t,e),It(e),i&512&&(ut||s===null||ys(s,s.return)),i&4){var n=s!==null?s.memoizedState:null;if(i=e.memoizedState,s===null)if(i===null)if(e.stateNode===null){e:{i=e.type,s=e.memoizedProps,a=a.ownerDocument||a;t:switch(i){case"title":n=a.getElementsByTagName("title")[0],(!n||n[hn]||n[Et]||n.namespaceURI==="http://www.w3.org/2000/svg"||n.hasAttribute("itemprop"))&&(n=a.createElement(i),a.head.insertBefore(n,a.querySelector("head > title"))),Ct(n,i,s),n[Et]=e,_t(n),i=n;break e;case"link":var m=Xh("link","href",a).get(i+(s.href||""));if(m){for(var l=0;l<m.length;l++)if(n=m[l],n.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&n.getAttribute("rel")===(s.rel==null?null:s.rel)&&n.getAttribute("title")===(s.title==null?null:s.title)&&n.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){m.splice(l,1);break t}}n=a.createElement(i),Ct(n,i,s),a.head.appendChild(n);break;case"meta":if(m=Xh("meta","content",a).get(i+(s.content||""))){for(l=0;l<m.length;l++)if(n=m[l],n.getAttribute("content")===(s.content==null?null:""+s.content)&&n.getAttribute("name")===(s.name==null?null:s.name)&&n.getAttribute("property")===(s.property==null?null:s.property)&&n.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&n.getAttribute("charset")===(s.charSet==null?null:s.charSet)){m.splice(l,1);break t}}n=a.createElement(i),Ct(n,i,s),a.head.appendChild(n);break;default:throw Error(oe(468,i))}n[Et]=e,_t(n),i=n}e.stateNode=i}else Jh(a,e.type,e.stateNode);else e.stateNode=Vh(a,i,e.memoizedProps);else n!==i?(n===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):n.count--,i===null?Jh(a,e.type,e.stateNode):Vh(a,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Ho(e,e.memoizedProps,s.memoizedProps)}break;case 27:Bt(t,e),It(e),i&512&&(ut||s===null||ys(s,s.return)),s!==null&&i&4&&Ho(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Bt(t,e),It(e),i&512&&(ut||s===null||ys(s,s.return)),e.flags&32){a=e.stateNode;try{qr(a,"")}catch(y){Je(e,e.return,y)}}i&4&&e.stateNode!=null&&(a=e.memoizedProps,Ho(e,a,s!==null?s.memoizedProps:a)),i&1024&&($o=!0);break;case 6:if(Bt(t,e),It(e),i&4){if(e.stateNode===null)throw Error(oe(162));i=e.memoizedProps,s=e.stateNode;try{s.nodeValue=i}catch(y){Je(e,e.return,y)}}break;case 3:if(al=null,a=ls,ls=Il(t.containerInfo),Bt(t,e),ls=a,It(e),i&4&&s!==null&&s.memoizedState.isDehydrated)try{sn(t.containerInfo)}catch(y){Je(e,e.return,y)}$o&&($o=!1,Yp(e));break;case 4:i=ls,ls=Il(e.stateNode.containerInfo),Bt(t,e),It(e),ls=i;break;case 12:Bt(t,e),It(e);break;case 13:Bt(t,e),It(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(ld=Ss()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Fo(e,i)));break;case 22:a=e.memoizedState!==null;var h=s!==null&&s.memoizedState!==null,p=Os,b=ut;if(Os=p||a,ut=b||h,Bt(t,e),ut=b,Os=p,It(e),i&8192)e:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(s===null||h||Os||ut||Bi(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){h=s=t;try{if(n=h.stateNode,a)m=n.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{l=h.stateNode;var f=h.memoizedProps.style,v=f!=null&&f.hasOwnProperty("display")?f.display:null;l.style.display=v==null||typeof v=="boolean"?"":(""+v).trim()}}catch(y){Je(h,h.return,y)}}}else if(t.tag===6){if(s===null){h=t;try{h.stateNode.nodeValue=a?"":h.memoizedProps}catch(y){Je(h,h.return,y)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(s=i.retryQueue,s!==null&&(i.retryQueue=null,Fo(e,s))));break;case 19:Bt(t,e),It(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Fo(e,i)));break;case 30:break;case 21:break;default:Bt(t,e),It(e)}}function It(e){var t=e.flags;if(t&2){try{for(var s,i=e.return;i!==null;){if(Up(i)){s=i;break}i=i.return}if(s==null)throw Error(oe(160));switch(s.tag){case 27:var a=s.stateNode,n=Uo(e);Tl(e,n,a);break;case 5:var m=s.stateNode;s.flags&32&&(qr(m,""),s.flags&=-33);var l=Uo(e);Tl(e,l,m);break;case 3:case 4:var h=s.stateNode.containerInfo,p=Uo(e);$c(e,p,h);break;default:throw Error(oe(161))}}catch(b){Je(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Yp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Yp(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Zs(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Fp(e,t.alternate,t),t=t.sibling}function Bi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Si(4,t,t.return),Bi(t);break;case 1:ys(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&zp(t,t.return,s),Bi(t);break;case 27:Ia(t.stateNode);case 26:case 5:ys(t,t.return),Bi(t);break;case 22:t.memoizedState===null&&Bi(t);break;case 30:Bi(t);break;default:Bi(t)}e=e.sibling}}function ei(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,a=e,n=t,m=n.flags;switch(n.tag){case 0:case 11:case 15:ei(a,n,s),bn(4,n);break;case 1:if(ei(a,n,s),i=n,a=i.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(p){Je(i,i.return,p)}if(i=n,a=i.updateQueue,a!==null){var l=i.stateNode;try{var h=a.shared.hiddenCallbacks;if(h!==null)for(a.shared.hiddenCallbacks=null,a=0;a<h.length;a++)Fm(h[a],l)}catch(p){Je(i,i.return,p)}}s&&m&64&&Pp(n),La(n,n.return);break;case 27:$p(n);case 26:case 5:ei(a,n,s),s&&i===null&&m&4&&Hp(n),La(n,n.return);break;case 12:ei(a,n,s);break;case 13:ei(a,n,s),s&&m&4&&Kp(a,n);break;case 22:n.memoizedState===null&&ei(a,n,s),La(n,n.return);break;case 30:break;default:ei(a,n,s)}t=t.sibling}}function id(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&gn(s))}function rd(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gn(e))}function vs(e,t,s,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Vp(e,t,s,i),t=t.sibling}function Vp(e,t,s,i){var a=t.flags;switch(t.tag){case 0:case 11:case 15:vs(e,t,s,i),a&2048&&bn(9,t);break;case 1:vs(e,t,s,i);break;case 3:vs(e,t,s,i),a&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gn(e)));break;case 12:if(a&2048){vs(e,t,s,i),e=t.stateNode;try{var n=t.memoizedProps,m=n.id,l=n.onPostCommit;typeof l=="function"&&l(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(h){Je(t,t.return,h)}}else vs(e,t,s,i);break;case 13:vs(e,t,s,i);break;case 23:break;case 22:n=t.stateNode,m=t.alternate,t.memoizedState!==null?n._visibility&2?vs(e,t,s,i):Oa(e,t):n._visibility&2?vs(e,t,s,i):(n._visibility|=2,gr(e,t,s,i,(t.subtreeFlags&10256)!==0)),a&2048&&id(m,t);break;case 24:vs(e,t,s,i),a&2048&&rd(t.alternate,t);break;default:vs(e,t,s,i)}}function gr(e,t,s,i,a){for(a=a&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var n=e,m=t,l=s,h=i,p=m.flags;switch(m.tag){case 0:case 11:case 15:gr(n,m,l,h,a),bn(8,m);break;case 23:break;case 22:var b=m.stateNode;m.memoizedState!==null?b._visibility&2?gr(n,m,l,h,a):Oa(n,m):(b._visibility|=2,gr(n,m,l,h,a)),a&&p&2048&&id(m.alternate,m);break;case 24:gr(n,m,l,h,a),a&&p&2048&&rd(m.alternate,m);break;default:gr(n,m,l,h,a)}t=t.sibling}}function Oa(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,i=t,a=i.flags;switch(i.tag){case 22:Oa(s,i),a&2048&&id(i.alternate,i);break;case 24:Oa(s,i),a&2048&&rd(i.alternate,i);break;default:Oa(s,i)}t=t.sibling}}var xa=8192;function dr(e){if(e.subtreeFlags&xa)for(e=e.child;e!==null;)Xp(e),e=e.sibling}function Xp(e){switch(e.tag){case 26:dr(e),e.flags&xa&&e.memoizedState!==null&&ab(ls,e.memoizedState,e.memoizedProps);break;case 5:dr(e);break;case 3:case 4:var t=ls;ls=Il(e.stateNode.containerInfo),dr(e),ls=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=xa,xa=16777216,dr(e),xa=t):dr(e));break;default:dr(e)}}function Jp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ga(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var s=0;s<t.length;s++){var i=t[s];vt=i,Zp(i,e)}Jp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Qp(e),e=e.sibling}function Qp(e){switch(e.tag){case 0:case 11:case 15:ga(e),e.flags&2048&&Si(9,e,e.return);break;case 3:ga(e);break;case 12:ga(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,il(e)):ga(e);break;default:ga(e)}}function il(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var s=0;s<t.length;s++){var i=t[s];vt=i,Zp(i,e)}Jp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Si(8,t,t.return),il(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,il(t));break;default:il(t)}e=e.sibling}}function Zp(e,t){for(;vt!==null;){var s=vt;switch(s.tag){case 0:case 11:case 15:Si(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var i=s.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:gn(s.memoizedState.cache)}if(i=s.child,i!==null)i.return=s,vt=i;else e:for(s=e;vt!==null;){i=vt;var a=i.sibling,n=i.return;if(qp(i),i===s){vt=null;break e}if(a!==null){a.return=n,vt=a;break e}vt=n}}}var xy={getCacheForType:function(e){var t=Nt(ft),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s}},Sy=typeof WeakMap=="function"?WeakMap:Map,Ge=0,Qe=null,Ie=null,ze=0,qe=0,Pt=null,ui=!1,ra=!1,ad=!1,Gs=0,ot=0,wi=0,Ki=0,nd=0,ts=0,Vr=0,Ma=null,Dt=null,Fc=!1,ld=0,Dl=1/0,Rl=null,gi=null,wt=0,vi=null,Xr=null,zr=0,qc=0,Gc=null,eg=null,Ba=0,Kc=null;function $t(){if(Ge&2&&ze!==0)return ze&-ze;if(ke.T!==null){var e=Gr;return e!==0?e:cd()}return dm()}function tg(){ts===0&&(ts=!(ze&536870912)||Ue?lm():536870912);var e=ss.current;return e!==null&&(e.flags|=32),ts}function Ft(e,t,s){(e===Qe&&(qe===2||qe===9)||e.cancelPendingCommit!==null)&&(Jr(e,0),di(e,ze,ts,!1)),dn(e,s),(!(Ge&2)||e!==Qe)&&(e===Qe&&(!(Ge&2)&&(Ki|=s),ot===4&&di(e,ze,ts,!1)),ks(e))}function sg(e,t,s){if(Ge&6)throw Error(oe(327));var i=!s&&(t&124)===0&&(t&e.expiredLanes)===0||un(e,t),a=i?jy(e,t):qo(e,t,!0),n=i;do{if(a===0){ra&&!i&&di(e,t,0,!1);break}else{if(s=e.current.alternate,n&&!wy(s)){a=qo(e,t,!1),n=!1;continue}if(a===2){if(n=t,e.errorRecoveryDisabledLanes&n)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var l=e;a=Ma;var h=l.current.memoizedState.isDehydrated;if(h&&(Jr(l,m).flags|=256),m=qo(l,m,!1),m!==2){if(ad&&!h){l.errorRecoveryDisabledLanes|=n,Ki|=n,a=4;break e}n=Dt,Dt=a,n!==null&&(Dt===null?Dt=n:Dt.push.apply(Dt,n))}a=m}if(n=!1,a!==2)continue}}if(a===1){Jr(e,0),di(e,t,0,!0);break}e:{switch(i=e,n=a,n){case 0:case 1:throw Error(oe(345));case 4:if((t&4194048)!==t)break;case 6:di(i,t,ts,!ui);break e;case 2:Dt=null;break;case 3:case 5:break;default:throw Error(oe(329))}if((t&62914560)===t&&(a=ld+300-Ss(),10<a)){if(di(i,t,ts,!ui),Xl(i,0,!0)!==0)break e;i.timeoutHandle=xg(Oh.bind(null,i,s,Dt,Rl,Fc,t,ts,Ki,Vr,ui,n,2,-0,0),a);break e}Oh(i,s,Dt,Rl,Fc,t,ts,Ki,Vr,ui,n,0,-0,0)}}break}while(!0);ks(e)}function Oh(e,t,s,i,a,n,m,l,h,p,b,f,v,y){if(e.timeoutHandle=-1,f=t.subtreeFlags,(f&8192||(f&16785408)===16785408)&&(Qa={stylesheets:null,count:0,unsuspend:rb},Xp(t),f=nb(),f!==null)){e.cancelPendingCommit=f(Bh.bind(null,e,t,n,s,i,a,m,l,h,b,1,v,y)),di(e,n,m,!p);return}Bh(e,t,n,s,i,a,m,l,h)}function wy(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var i=0;i<s.length;i++){var a=s[i],n=a.getSnapshot;a=a.value;try{if(!qt(n(),a))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function di(e,t,s,i){t&=~nd,t&=~Ki,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var a=t;0<a;){var n=31-Ut(a),m=1<<n;i[n]=-1,a&=~m}s!==0&&cm(e,s,t)}function no(){return Ge&6?!0:(xn(0),!1)}function od(){if(Ie!==null){if(qe===0)var e=Ie.return;else e=Ie,Ps=rr=null,Yu(e),Pr=null,Va=0,e=Ie;for(;e!==null;)Ip(e.alternate,e),e=e.return;Ie=null}}function Jr(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,Uy(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),od(),Qe=e,Ie=s=Hs(e.current,null),ze=t,qe=0,Pt=null,ui=!1,ra=un(e,t),ad=!1,Vr=ts=nd=Ki=wi=ot=0,Dt=Ma=null,Fc=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var a=31-Ut(i),n=1<<a;t|=e[a],i&=~n}return Gs=t,eo(),s}function ig(e,t){Re=null,ke.H=jl,t===vn||t===so?(t=hh(),qe=3):t===Um?(t=hh(),qe=4):qe=t===Dp?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Pt=t,Ie===null&&(ot=1,kl(e,es(t,e.current)))}function rg(){var e=ke.H;return ke.H=jl,e===null?jl:e}function ag(){var e=ke.A;return ke.A=xy,e}function Wc(){ot=4,ui||(ze&4194048)!==ze&&ss.current!==null||(ra=!0),!(wi&134217727)&&!(Ki&134217727)||Qe===null||di(Qe,ze,ts,!1)}function qo(e,t,s){var i=Ge;Ge|=2;var a=rg(),n=ag();(Qe!==e||ze!==t)&&(Rl=null,Jr(e,t)),t=!1;var m=ot;e:do try{if(qe!==0&&Ie!==null){var l=Ie,h=Pt;switch(qe){case 8:od(),m=6;break e;case 3:case 2:case 9:case 6:ss.current===null&&(t=!0);var p=qe;if(qe=0,Pt=null,Tr(e,l,h,p),s&&ra){m=0;break e}break;default:p=qe,qe=0,Pt=null,Tr(e,l,h,p)}}Cy(),m=ot;break}catch(b){ig(e,b)}while(!0);return t&&e.shellSuspendCounter++,Ps=rr=null,Ge=i,ke.H=a,ke.A=n,Ie===null&&(Qe=null,ze=0,eo()),m}function Cy(){for(;Ie!==null;)ng(Ie)}function jy(e,t){var s=Ge;Ge|=2;var i=rg(),a=ag();Qe!==e||ze!==t?(Rl=null,Dl=Ss()+500,Jr(e,t)):ra=un(e,t);e:do try{if(qe!==0&&Ie!==null){t=Ie;var n=Pt;t:switch(qe){case 1:qe=0,Pt=null,Tr(e,t,n,1);break;case 2:case 9:if(dh(n)){qe=0,Pt=null,Mh(t);break}t=function(){qe!==2&&qe!==9||Qe!==e||(qe=7),ks(e)},n.then(t,t);break e;case 3:qe=7;break e;case 4:qe=5;break e;case 7:dh(n)?(qe=0,Pt=null,Mh(t)):(qe=0,Pt=null,Tr(e,t,n,7));break;case 5:var m=null;switch(Ie.tag){case 26:m=Ie.memoizedState;case 5:case 27:var l=Ie;if(!m||jg(m)){qe=0,Pt=null;var h=l.sibling;if(h!==null)Ie=h;else{var p=l.return;p!==null?(Ie=p,lo(p)):Ie=null}break t}}qe=0,Pt=null,Tr(e,t,n,5);break;case 6:qe=0,Pt=null,Tr(e,t,n,6);break;case 8:od(),ot=6;break e;default:throw Error(oe(462))}}Ey();break}catch(b){ig(e,b)}while(!0);return Ps=rr=null,ke.H=i,ke.A=a,Ge=s,Ie!==null?0:(Qe=null,ze=0,eo(),ot)}function Ey(){for(;Ie!==null&&!Y0();)ng(Ie)}function ng(e){var t=Bp(e.alternate,e,Gs);e.memoizedProps=e.pendingProps,t===null?lo(e):Ie=t}function Mh(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=kh(s,t,t.pendingProps,t.type,void 0,ze);break;case 11:t=kh(s,t,t.pendingProps,t.type.render,t.ref,ze);break;case 5:Yu(t);default:Ip(s,t),t=Ie=Im(t,Gs),t=Bp(s,t,Gs)}e.memoizedProps=e.pendingProps,t===null?lo(e):Ie=t}function Tr(e,t,s,i){Ps=rr=null,Yu(t),Pr=null,Va=0;var a=t.return;try{if(py(e,a,t,s,ze)){ot=1,kl(e,es(s,e.current)),Ie=null;return}}catch(n){if(a!==null)throw Ie=a,n;ot=1,kl(e,es(s,e.current)),Ie=null;return}t.flags&32768?(Ue||i===1?e=!0:ra||ze&536870912?e=!1:(ui=e=!0,(i===2||i===9||i===3||i===6)&&(i=ss.current,i!==null&&i.tag===13&&(i.flags|=16384))),lg(t,e)):lo(t)}function lo(e){var t=e;do{if(t.flags&32768){lg(t,ui);return}e=t.return;var s=vy(t.alternate,t,Gs);if(s!==null){Ie=s;return}if(t=t.sibling,t!==null){Ie=t;return}Ie=t=e}while(t!==null);ot===0&&(ot=5)}function lg(e,t){do{var s=_y(e.alternate,e);if(s!==null){s.flags&=32767,Ie=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){Ie=e;return}Ie=e=s}while(e!==null);ot=6,Ie=null}function Bh(e,t,s,i,a,n,m,l,h){e.cancelPendingCommit=null;do oo();while(wt!==0);if(Ge&6)throw Error(oe(327));if(t!==null){if(t===e.current)throw Error(oe(177));if(n=t.lanes|t.childLanes,n|=Mu,r_(e,s,n,m,l,h),e===Qe&&(Ie=Qe=null,ze=0),Xr=t,vi=e,zr=s,qc=n,Gc=a,eg=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Ty(pl,function(){return hg(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=ke.T,ke.T=null,a=$e.p,$e.p=2,m=Ge,Ge|=4;try{yy(e,t,s)}finally{Ge=m,$e.p=a,ke.T=i}}wt=1,og(),cg(),ug()}}function og(){if(wt===1){wt=0;var e=vi,t=Xr,s=(t.flags&13878)!==0;if(t.subtreeFlags&13878||s){s=ke.T,ke.T=null;var i=$e.p;$e.p=2;var a=Ge;Ge|=4;try{Wp(t,e);var n=Jc,m=Am(e.containerInfo),l=n.focusedElem,h=n.selectionRange;if(m!==l&&l&&l.ownerDocument&&km(l.ownerDocument.documentElement,l)){if(h!==null&&Ou(l)){var p=h.start,b=h.end;if(b===void 0&&(b=p),"selectionStart"in l)l.selectionStart=p,l.selectionEnd=Math.min(b,l.value.length);else{var f=l.ownerDocument||document,v=f&&f.defaultView||window;if(v.getSelection){var y=v.getSelection(),w=l.textContent.length,S=Math.min(h.start,w),o=h.end===void 0?S:Math.min(h.end,w);!y.extend&&S>o&&(m=o,o=S,S=m);var u=ih(l,S),c=ih(l,o);if(u&&c&&(y.rangeCount!==1||y.anchorNode!==u.node||y.anchorOffset!==u.offset||y.focusNode!==c.node||y.focusOffset!==c.offset)){var d=f.createRange();d.setStart(u.node,u.offset),y.removeAllRanges(),S>o?(y.addRange(d),y.extend(c.node,c.offset)):(d.setEnd(c.node,c.offset),y.addRange(d))}}}}for(f=[],y=l;y=y.parentNode;)y.nodeType===1&&f.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<f.length;l++){var g=f[l];g.element.scrollLeft=g.left,g.element.scrollTop=g.top}}Hl=!!Xc,Jc=Xc=null}finally{Ge=a,$e.p=i,ke.T=s}}e.current=t,wt=2}}function cg(){if(wt===2){wt=0;var e=vi,t=Xr,s=(t.flags&8772)!==0;if(t.subtreeFlags&8772||s){s=ke.T,ke.T=null;var i=$e.p;$e.p=2;var a=Ge;Ge|=4;try{Fp(e,t.alternate,t)}finally{Ge=a,$e.p=i,ke.T=s}}wt=3}}function ug(){if(wt===4||wt===3){wt=0,V0();var e=vi,t=Xr,s=zr,i=eg;t.subtreeFlags&10256||t.flags&10256?wt=5:(wt=0,Xr=vi=null,dg(e,e.pendingLanes));var a=e.pendingLanes;if(a===0&&(gi=null),Nu(s),t=t.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(cn,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=ke.T,a=$e.p,$e.p=2,ke.T=null;try{for(var n=e.onRecoverableError,m=0;m<i.length;m++){var l=i[m];n(l.value,{componentStack:l.stack})}}finally{ke.T=t,$e.p=a}}zr&3&&oo(),ks(e),a=e.pendingLanes,s&4194090&&a&42?e===Kc?Ba++:(Ba=0,Kc=e):Ba=0,xn(0)}}function dg(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,gn(t)))}function oo(e){return og(),cg(),ug(),hg()}function hg(){if(wt!==5)return!1;var e=vi,t=qc;qc=0;var s=Nu(zr),i=ke.T,a=$e.p;try{$e.p=32>s?32:s,ke.T=null,s=Gc,Gc=null;var n=vi,m=zr;if(wt=0,Xr=vi=null,zr=0,Ge&6)throw Error(oe(331));var l=Ge;if(Ge|=4,Qp(n.current),Vp(n,n.current,m,s),Ge=l,xn(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(cn,n)}catch{}return!0}finally{$e.p=a,ke.T=i,dg(e,t)}}function Ih(e,t,s){t=es(s,t),t=zc(e.stateNode,t,2),e=pi(e,t,2),e!==null&&(dn(e,2),ks(e))}function Je(e,t,s){if(e.tag===3)Ih(e,e,s);else for(;t!==null;){if(t.tag===3){Ih(t,e,s);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(gi===null||!gi.has(i))){e=es(s,e),s=Ap(2),i=pi(t,s,2),i!==null&&(Tp(s,i,t,e),dn(i,2),ks(i));break}}t=t.return}}function Go(e,t,s){var i=e.pingCache;if(i===null){i=e.pingCache=new Sy;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(s)||(ad=!0,a.add(s),e=Ny.bind(null,e,t,s),t.then(e,e))}function Ny(e,t,s){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Qe===e&&(ze&s)===s&&(ot===4||ot===3&&(ze&62914560)===ze&&300>Ss()-ld?!(Ge&2)&&Jr(e,0):nd|=s,Vr===ze&&(Vr=0)),ks(e)}function fg(e,t){t===0&&(t=om()),e=ia(e,t),e!==null&&(dn(e,t),ks(e))}function ky(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),fg(e,s)}function Ay(e,t){var s=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(oe(314))}i!==null&&i.delete(t),fg(e,s)}function Ty(e,t){return ju(e,t)}var Ll=null,vr=null,Yc=!1,Ol=!1,Ko=!1,Wi=0;function ks(e){e!==vr&&e.next===null&&(vr===null?Ll=vr=e:vr=vr.next=e),Ol=!0,Yc||(Yc=!0,Ry())}function xn(e,t){if(!Ko&&Ol){Ko=!0;do for(var s=!1,i=Ll;i!==null;){if(e!==0){var a=i.pendingLanes;if(a===0)var n=0;else{var m=i.suspendedLanes,l=i.pingedLanes;n=(1<<31-Ut(42|e)+1)-1,n&=a&~(m&~l),n=n&201326741?n&201326741|1:n?n|2:0}n!==0&&(s=!0,Ph(i,n))}else n=ze,n=Xl(i,i===Qe?n:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(n&3)||un(i,n)||(s=!0,Ph(i,n));i=i.next}while(s);Ko=!1}}function Dy(){mg()}function mg(){Ol=Yc=!1;var e=0;Wi!==0&&(Hy()&&(e=Wi),Wi=0);for(var t=Ss(),s=null,i=Ll;i!==null;){var a=i.next,n=pg(i,t);n===0?(i.next=null,s===null?Ll=a:s.next=a,a===null&&(vr=s)):(s=i,(e!==0||n&3)&&(Ol=!0)),i=a}xn(e)}function pg(e,t){for(var s=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,n=e.pendingLanes&-62914561;0<n;){var m=31-Ut(n),l=1<<m,h=a[m];h===-1?(!(l&s)||l&i)&&(a[m]=i_(l,t)):h<=t&&(e.expiredLanes|=l),n&=~l}if(t=Qe,s=ze,s=Xl(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,s===0||e===t&&(qe===2||qe===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&_o(i),e.callbackNode=null,e.callbackPriority=0;if(!(s&3)||un(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(i!==null&&_o(i),Nu(s)){case 2:case 8:s=am;break;case 32:s=pl;break;case 268435456:s=nm;break;default:s=pl}return i=gg.bind(null,e),s=ju(s,i),e.callbackPriority=t,e.callbackNode=s,t}return i!==null&&i!==null&&_o(i),e.callbackPriority=2,e.callbackNode=null,2}function gg(e,t){if(wt!==0&&wt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(oo()&&e.callbackNode!==s)return null;var i=ze;return i=Xl(e,e===Qe?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(sg(e,i,t),pg(e,Ss()),e.callbackNode!=null&&e.callbackNode===s?gg.bind(null,e):null)}function Ph(e,t){if(oo())return null;sg(e,t,!0)}function Ry(){$y(function(){Ge&6?ju(rm,Dy):mg()})}function cd(){return Wi===0&&(Wi=lm()),Wi}function zh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Vn(""+e)}function Hh(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function Ly(e,t,s,i,a){if(t==="submit"&&s&&s.stateNode===a){var n=zh((a[Rt]||null).action),m=i.submitter;m&&(t=(t=m[Rt]||null)?zh(t.formAction):m.getAttribute("formAction"),t!==null&&(n=t,m=null));var l=new Jl("action","action",null,i,a);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Wi!==0){var h=m?Hh(a,m):new FormData(a);Ic(s,{pending:!0,data:h,method:a.method,action:n},null,h)}}else typeof n=="function"&&(l.preventDefault(),h=m?Hh(a,m):new FormData(a),Ic(s,{pending:!0,data:h,method:a.method,action:n},n,h))},currentTarget:a}]})}}for(var Wo=0;Wo<jc.length;Wo++){var Yo=jc[Wo],Oy=Yo.toLowerCase(),My=Yo[0].toUpperCase()+Yo.slice(1);fs(Oy,"on"+My)}fs(Dm,"onAnimationEnd");fs(Rm,"onAnimationIteration");fs(Lm,"onAnimationStart");fs("dblclick","onDoubleClick");fs("focusin","onFocus");fs("focusout","onBlur");fs(Q_,"onTransitionRun");fs(Z_,"onTransitionStart");fs(ey,"onTransitionCancel");fs(Om,"onTransitionEnd");Fr("onMouseEnter",["mouseout","mouseover"]);Fr("onMouseLeave",["mouseout","mouseover"]);Fr("onPointerEnter",["pointerout","pointerover"]);Fr("onPointerLeave",["pointerout","pointerover"]);tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tr("onBeforeInput",["compositionend","keypress","textInput","paste"]);tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),By=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xa));function vg(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var i=e[s],a=i.event;i=i.listeners;e:{var n=void 0;if(t)for(var m=i.length-1;0<=m;m--){var l=i[m],h=l.instance,p=l.currentTarget;if(l=l.listener,h!==n&&a.isPropagationStopped())break e;n=l,a.currentTarget=p;try{n(a)}catch(b){Nl(b)}a.currentTarget=null,n=h}else for(m=0;m<i.length;m++){if(l=i[m],h=l.instance,p=l.currentTarget,l=l.listener,h!==n&&a.isPropagationStopped())break e;n=l,a.currentTarget=p;try{n(a)}catch(b){Nl(b)}a.currentTarget=null,n=h}}}}function Be(e,t){var s=t[_c];s===void 0&&(s=t[_c]=new Set);var i=e+"__bubble";s.has(i)||(_g(t,e,2,!1),s.add(i))}function Vo(e,t,s){var i=0;t&&(i|=4),_g(s,e,i,t)}var zn="_reactListening"+Math.random().toString(36).slice(2);function ud(e){if(!e[zn]){e[zn]=!0,hm.forEach(function(s){s!=="selectionchange"&&(By.has(s)||Vo(s,!1,e),Vo(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zn]||(t[zn]=!0,Vo("selectionchange",!1,t))}}function _g(e,t,s,i){switch(Tg(t)){case 2:var a=cb;break;case 8:a=ub;break;default:a=md}s=a.bind(null,t,s,e),a=void 0,!Sc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):a!==void 0?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function Xo(e,t,s,i,a){var n=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var m=i.tag;if(m===3||m===4){var l=i.stateNode.containerInfo;if(l===a)break;if(m===4)for(m=i.return;m!==null;){var h=m.tag;if((h===3||h===4)&&m.stateNode.containerInfo===a)return;m=m.return}for(;l!==null;){if(m=xr(l),m===null)return;if(h=m.tag,h===5||h===6||h===26||h===27){i=n=m;continue e}l=l.parentNode}}i=i.return}bm(function(){var p=n,b=Tu(s),f=[];e:{var v=Mm.get(e);if(v!==void 0){var y=Jl,w=e;switch(e){case"keypress":if(Jn(s)===0)break e;case"keydown":case"keyup":y=T_;break;case"focusin":w="focus",y=Eo;break;case"focusout":w="blur",y=Eo;break;case"beforeblur":case"afterblur":y=Eo;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Wd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=__;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=L_;break;case Dm:case Rm:case Lm:y=x_;break;case Om:y=M_;break;case"scroll":case"scrollend":y=g_;break;case"wheel":y=I_;break;case"copy":case"cut":case"paste":y=w_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Vd;break;case"toggle":case"beforetoggle":y=z_}var S=(t&4)!==0,o=!S&&(e==="scroll"||e==="scrollend"),u=S?v!==null?v+"Capture":null:v;S=[];for(var c=p,d;c!==null;){var g=c;if(d=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||d===null||u===null||(g=qa(c,u),g!=null&&S.push(Ja(c,g,d))),o)break;c=c.return}0<S.length&&(v=new y(v,w,null,s,b),f.push({event:v,listeners:S}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",v&&s!==xc&&(w=s.relatedTarget||s.fromElement)&&(xr(w)||w[ta]))break e;if((y||v)&&(v=b.window===b?b:(v=b.ownerDocument)?v.defaultView||v.parentWindow:window,y?(w=s.relatedTarget||s.toElement,y=p,w=w?xr(w):null,w!==null&&(o=on(w),S=w.tag,w!==o||S!==5&&S!==27&&S!==6)&&(w=null)):(y=null,w=p),y!==w)){if(S=Wd,g="onMouseLeave",u="onMouseEnter",c="mouse",(e==="pointerout"||e==="pointerover")&&(S=Vd,g="onPointerLeave",u="onPointerEnter",c="pointer"),o=y==null?v:ba(y),d=w==null?v:ba(w),v=new S(g,c+"leave",y,s,b),v.target=o,v.relatedTarget=d,g=null,xr(b)===p&&(S=new S(u,c+"enter",w,s,b),S.target=d,S.relatedTarget=o,g=S),o=g,y&&w)t:{for(S=y,u=w,c=0,d=S;d;d=hr(d))c++;for(d=0,g=u;g;g=hr(g))d++;for(;0<c-d;)S=hr(S),c--;for(;0<d-c;)u=hr(u),d--;for(;c--;){if(S===u||u!==null&&S===u.alternate)break t;S=hr(S),u=hr(u)}S=null}else S=null;y!==null&&Uh(f,v,y,S,!1),w!==null&&o!==null&&Uh(f,o,w,S,!0)}}e:{if(v=p?ba(p):window,y=v.nodeName&&v.nodeName.toLowerCase(),y==="select"||y==="input"&&v.type==="file")var _=Zd;else if(Qd(v))if(Em)_=V_;else{_=W_;var C=K_}else y=v.nodeName,!y||y.toLowerCase()!=="input"||v.type!=="checkbox"&&v.type!=="radio"?p&&Au(p.elementType)&&(_=Zd):_=Y_;if(_&&(_=_(e,p))){jm(f,_,s,b);break e}C&&C(e,v,p),e==="focusout"&&p&&v.type==="number"&&p.memoizedProps.value!=null&&bc(v,"number",v.value)}switch(C=p?ba(p):window,e){case"focusin":(Qd(C)||C.contentEditable==="true")&&(Cr=C,wc=p,Ea=null);break;case"focusout":Ea=wc=Cr=null;break;case"mousedown":Cc=!0;break;case"contextmenu":case"mouseup":case"dragend":Cc=!1,rh(f,s,b);break;case"selectionchange":if(J_)break;case"keydown":case"keyup":rh(f,s,b)}var j;if(Lu)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else wr?wm(e,s)&&(x="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(x="onCompositionStart");x&&(Sm&&s.locale!=="ko"&&(wr||x!=="onCompositionStart"?x==="onCompositionEnd"&&wr&&(j=xm()):(ci=b,Du="value"in ci?ci.value:ci.textContent,wr=!0)),C=Ml(p,x),0<C.length&&(x=new Yd(x,e,null,s,b),f.push({event:x,listeners:C}),j?x.data=j:(j=Cm(s),j!==null&&(x.data=j)))),(j=U_?$_(e,s):F_(e,s))&&(x=Ml(p,"onBeforeInput"),0<x.length&&(C=new Yd("onBeforeInput","beforeinput",null,s,b),f.push({event:C,listeners:x}),C.data=j)),Ly(f,e,p,s,b)}vg(f,t)})}function Ja(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Ml(e,t){for(var s=t+"Capture",i=[];e!==null;){var a=e,n=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||n===null||(a=qa(e,s),a!=null&&i.unshift(Ja(e,a,n)),a=qa(e,t),a!=null&&i.push(Ja(e,a,n))),e.tag===3)return i;e=e.return}return[]}function hr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Uh(e,t,s,i,a){for(var n=t._reactName,m=[];s!==null&&s!==i;){var l=s,h=l.alternate,p=l.stateNode;if(l=l.tag,h!==null&&h===i)break;l!==5&&l!==26&&l!==27||p===null||(h=p,a?(p=qa(s,n),p!=null&&m.unshift(Ja(s,p,h))):a||(p=qa(s,n),p!=null&&m.push(Ja(s,p,h)))),s=s.return}m.length!==0&&e.push({event:t,listeners:m})}var Iy=/\r\n?/g,Py=/\u0000|\uFFFD/g;function $h(e){return(typeof e=="string"?e:""+e).replace(Iy,`
`).replace(Py,"")}function yg(e,t){return t=$h(t),$h(e)===t}function co(){}function Ye(e,t,s,i,a,n){switch(s){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||qr(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&qr(e,""+i);break;case"className":Rn(e,"class",i);break;case"tabIndex":Rn(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Rn(e,s,i);break;case"style":ym(e,i,n);break;case"data":if(t!=="object"){Rn(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(s);break}i=Vn(""+i),e.setAttribute(s,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof n=="function"&&(s==="formAction"?(t!=="input"&&Ye(e,t,"name",a.name,a,null),Ye(e,t,"formEncType",a.formEncType,a,null),Ye(e,t,"formMethod",a.formMethod,a,null),Ye(e,t,"formTarget",a.formTarget,a,null)):(Ye(e,t,"encType",a.encType,a,null),Ye(e,t,"method",a.method,a,null),Ye(e,t,"target",a.target,a,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(s);break}i=Vn(""+i),e.setAttribute(s,i);break;case"onClick":i!=null&&(e.onclick=co);break;case"onScroll":i!=null&&Be("scroll",e);break;case"onScrollEnd":i!=null&&Be("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(oe(61));if(s=i.__html,s!=null){if(a.children!=null)throw Error(oe(60));e.innerHTML=s}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}s=Vn(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(s,""+i):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":i===!0?e.setAttribute(s,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(s,i):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(s,i):e.removeAttribute(s);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(s):e.setAttribute(s,i);break;case"popover":Be("beforetoggle",e),Be("toggle",e),Yn(e,"popover",i);break;case"xlinkActuate":As(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":As(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":As(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":As(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":As(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":As(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":As(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":As(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":As(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Yn(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=m_.get(s)||s,Yn(e,s,i))}}function Vc(e,t,s,i,a,n){switch(s){case"style":ym(e,i,n);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(oe(61));if(s=i.__html,s!=null){if(a.children!=null)throw Error(oe(60));e.innerHTML=s}}break;case"children":typeof i=="string"?qr(e,i):(typeof i=="number"||typeof i=="bigint")&&qr(e,""+i);break;case"onScroll":i!=null&&Be("scroll",e);break;case"onScrollEnd":i!=null&&Be("scrollend",e);break;case"onClick":i!=null&&(e.onclick=co);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fm.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(a=s.endsWith("Capture"),t=s.slice(2,a?s.length-7:void 0),n=e[Rt]||null,n=n!=null?n[s]:null,typeof n=="function"&&e.removeEventListener(t,n,a),typeof i=="function")){typeof n!="function"&&n!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,i,a);break e}s in e?e[s]=i:i===!0?e.setAttribute(s,""):Yn(e,s,i)}}}function Ct(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",e),Be("load",e);var i=!1,a=!1,n;for(n in s)if(s.hasOwnProperty(n)){var m=s[n];if(m!=null)switch(n){case"src":i=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(oe(137,t));default:Ye(e,t,n,m,s,null)}}a&&Ye(e,t,"srcSet",s.srcSet,s,null),i&&Ye(e,t,"src",s.src,s,null);return;case"input":Be("invalid",e);var l=n=m=a=null,h=null,p=null;for(i in s)if(s.hasOwnProperty(i)){var b=s[i];if(b!=null)switch(i){case"name":a=b;break;case"type":m=b;break;case"checked":h=b;break;case"defaultChecked":p=b;break;case"value":n=b;break;case"defaultValue":l=b;break;case"children":case"dangerouslySetInnerHTML":if(b!=null)throw Error(oe(137,t));break;default:Ye(e,t,i,b,s,null)}}gm(e,n,l,h,p,m,a,!1),gl(e);return;case"select":Be("invalid",e),i=m=n=null;for(a in s)if(s.hasOwnProperty(a)&&(l=s[a],l!=null))switch(a){case"value":n=l;break;case"defaultValue":m=l;break;case"multiple":i=l;default:Ye(e,t,a,l,s,null)}t=n,s=m,e.multiple=!!i,t!=null?Lr(e,!!i,t,!1):s!=null&&Lr(e,!!i,s,!0);return;case"textarea":Be("invalid",e),n=a=i=null;for(m in s)if(s.hasOwnProperty(m)&&(l=s[m],l!=null))switch(m){case"value":i=l;break;case"defaultValue":a=l;break;case"children":n=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(oe(91));break;default:Ye(e,t,m,l,s,null)}_m(e,i,a,n),gl(e);return;case"option":for(h in s)if(s.hasOwnProperty(h)&&(i=s[h],i!=null))switch(h){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Ye(e,t,h,i,s,null)}return;case"dialog":Be("beforetoggle",e),Be("toggle",e),Be("cancel",e),Be("close",e);break;case"iframe":case"object":Be("load",e);break;case"video":case"audio":for(i=0;i<Xa.length;i++)Be(Xa[i],e);break;case"image":Be("error",e),Be("load",e);break;case"details":Be("toggle",e);break;case"embed":case"source":case"link":Be("error",e),Be("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(p in s)if(s.hasOwnProperty(p)&&(i=s[p],i!=null))switch(p){case"children":case"dangerouslySetInnerHTML":throw Error(oe(137,t));default:Ye(e,t,p,i,s,null)}return;default:if(Au(t)){for(b in s)s.hasOwnProperty(b)&&(i=s[b],i!==void 0&&Vc(e,t,b,i,s,void 0));return}}for(l in s)s.hasOwnProperty(l)&&(i=s[l],i!=null&&Ye(e,t,l,i,s,null))}function zy(e,t,s,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,n=null,m=null,l=null,h=null,p=null,b=null;for(y in s){var f=s[y];if(s.hasOwnProperty(y)&&f!=null)switch(y){case"checked":break;case"value":break;case"defaultValue":h=f;default:i.hasOwnProperty(y)||Ye(e,t,y,null,i,f)}}for(var v in i){var y=i[v];if(f=s[v],i.hasOwnProperty(v)&&(y!=null||f!=null))switch(v){case"type":n=y;break;case"name":a=y;break;case"checked":p=y;break;case"defaultChecked":b=y;break;case"value":m=y;break;case"defaultValue":l=y;break;case"children":case"dangerouslySetInnerHTML":if(y!=null)throw Error(oe(137,t));break;default:y!==f&&Ye(e,t,v,y,i,f)}}yc(e,m,l,h,p,b,n,a);return;case"select":y=m=l=v=null;for(n in s)if(h=s[n],s.hasOwnProperty(n)&&h!=null)switch(n){case"value":break;case"multiple":y=h;default:i.hasOwnProperty(n)||Ye(e,t,n,null,i,h)}for(a in i)if(n=i[a],h=s[a],i.hasOwnProperty(a)&&(n!=null||h!=null))switch(a){case"value":v=n;break;case"defaultValue":l=n;break;case"multiple":m=n;default:n!==h&&Ye(e,t,a,n,i,h)}t=l,s=m,i=y,v!=null?Lr(e,!!s,v,!1):!!i!=!!s&&(t!=null?Lr(e,!!s,t,!0):Lr(e,!!s,s?[]:"",!1));return;case"textarea":y=v=null;for(l in s)if(a=s[l],s.hasOwnProperty(l)&&a!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Ye(e,t,l,null,i,a)}for(m in i)if(a=i[m],n=s[m],i.hasOwnProperty(m)&&(a!=null||n!=null))switch(m){case"value":v=a;break;case"defaultValue":y=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(oe(91));break;default:a!==n&&Ye(e,t,m,a,i,n)}vm(e,v,y);return;case"option":for(var w in s)if(v=s[w],s.hasOwnProperty(w)&&v!=null&&!i.hasOwnProperty(w))switch(w){case"selected":e.selected=!1;break;default:Ye(e,t,w,null,i,v)}for(h in i)if(v=i[h],y=s[h],i.hasOwnProperty(h)&&v!==y&&(v!=null||y!=null))switch(h){case"selected":e.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:Ye(e,t,h,v,i,y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var S in s)v=s[S],s.hasOwnProperty(S)&&v!=null&&!i.hasOwnProperty(S)&&Ye(e,t,S,null,i,v);for(p in i)if(v=i[p],y=s[p],i.hasOwnProperty(p)&&v!==y&&(v!=null||y!=null))switch(p){case"children":case"dangerouslySetInnerHTML":if(v!=null)throw Error(oe(137,t));break;default:Ye(e,t,p,v,i,y)}return;default:if(Au(t)){for(var o in s)v=s[o],s.hasOwnProperty(o)&&v!==void 0&&!i.hasOwnProperty(o)&&Vc(e,t,o,void 0,i,v);for(b in i)v=i[b],y=s[b],!i.hasOwnProperty(b)||v===y||v===void 0&&y===void 0||Vc(e,t,b,v,i,y);return}}for(var u in s)v=s[u],s.hasOwnProperty(u)&&v!=null&&!i.hasOwnProperty(u)&&Ye(e,t,u,null,i,v);for(f in i)v=i[f],y=s[f],!i.hasOwnProperty(f)||v===y||v==null&&y==null||Ye(e,t,f,v,i,y)}var Xc=null,Jc=null;function Bl(e){return e.nodeType===9?e:e.ownerDocument}function Fh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Qc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jo=null;function Hy(){var e=window.event;return e&&e.type==="popstate"?e===Jo?!1:(Jo=e,!0):(Jo=null,!1)}var xg=typeof setTimeout=="function"?setTimeout:void 0,Uy=typeof clearTimeout=="function"?clearTimeout:void 0,qh=typeof Promise=="function"?Promise:void 0,$y=typeof queueMicrotask=="function"?queueMicrotask:typeof qh<"u"?function(e){return qh.resolve(null).then(e).catch(Fy)}:xg;function Fy(e){setTimeout(function(){throw e})}function Ai(e){return e==="head"}function Gh(e,t){var s=t,i=0,a=0;do{var n=s.nextSibling;if(e.removeChild(s),n&&n.nodeType===8)if(s=n.data,s==="/$"){if(0<i&&8>i){s=i;var m=e.ownerDocument;if(s&1&&Ia(m.documentElement),s&2&&Ia(m.body),s&4)for(s=m.head,Ia(s),m=s.firstChild;m;){var l=m.nextSibling,h=m.nodeName;m[hn]||h==="SCRIPT"||h==="STYLE"||h==="LINK"&&m.rel.toLowerCase()==="stylesheet"||s.removeChild(m),m=l}}if(a===0){e.removeChild(n),sn(t);return}a--}else s==="$"||s==="$?"||s==="$!"?a++:i=s.charCodeAt(0)-48;else i=0;s=n}while(s);sn(t)}function Zc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Zc(s),ku(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function qy(e,t,s,i){for(;e.nodeType===1;){var a=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[hn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(n=e.getAttribute("rel"),n==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(n!==a.rel||e.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||e.getAttribute("title")!==(a.title==null?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(n=e.getAttribute("src"),(n!==(a.src==null?null:a.src)||e.getAttribute("type")!==(a.type==null?null:a.type)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&n&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var n=a.name==null?null:""+a.name;if(a.type==="hidden"&&e.getAttribute("name")===n)return e}else return e;if(e=us(e.nextSibling),e===null)break}return null}function Gy(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=us(e.nextSibling),e===null))return null;return e}function eu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Ky(e,t){var s=e.ownerDocument;if(e.data!=="$?"||s.readyState==="complete")t();else{var i=function(){t(),s.removeEventListener("DOMContentLoaded",i)};s.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function us(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var tu=null;function Kh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}function Sg(e,t,s){switch(t=Bl(s),e){case"html":if(e=t.documentElement,!e)throw Error(oe(452));return e;case"head":if(e=t.head,!e)throw Error(oe(453));return e;case"body":if(e=t.body,!e)throw Error(oe(454));return e;default:throw Error(oe(451))}}function Ia(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ku(e)}var is=new Map,Wh=new Set;function Il(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ys=$e.d;$e.d={f:Wy,r:Yy,D:Vy,C:Xy,L:Jy,m:Qy,X:eb,S:Zy,M:tb};function Wy(){var e=Ys.f(),t=no();return e||t}function Yy(e){var t=sa(e);t!==null&&t.tag===5&&t.type==="form"?pp(t):Ys.r(e)}var aa=typeof document>"u"?null:document;function wg(e,t,s){var i=aa;if(i&&typeof t=="string"&&t){var a=Zt(t);a='link[rel="'+e+'"][href="'+a+'"]',typeof s=="string"&&(a+='[crossorigin="'+s+'"]'),Wh.has(a)||(Wh.add(a),e={rel:e,crossOrigin:s,href:t},i.querySelector(a)===null&&(t=i.createElement("link"),Ct(t,"link",e),_t(t),i.head.appendChild(t)))}}function Vy(e){Ys.D(e),wg("dns-prefetch",e,null)}function Xy(e,t){Ys.C(e,t),wg("preconnect",e,t)}function Jy(e,t,s){Ys.L(e,t,s);var i=aa;if(i&&e&&t){var a='link[rel="preload"][as="'+Zt(t)+'"]';t==="image"&&s&&s.imageSrcSet?(a+='[imagesrcset="'+Zt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(a+='[imagesizes="'+Zt(s.imageSizes)+'"]')):a+='[href="'+Zt(e)+'"]';var n=a;switch(t){case"style":n=Qr(e);break;case"script":n=na(e)}is.has(n)||(e=et({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),is.set(n,e),i.querySelector(a)!==null||t==="style"&&i.querySelector(Sn(n))||t==="script"&&i.querySelector(wn(n))||(t=i.createElement("link"),Ct(t,"link",e),_t(t),i.head.appendChild(t)))}}function Qy(e,t){Ys.m(e,t);var s=aa;if(s&&e){var i=t&&typeof t.as=="string"?t.as:"script",a='link[rel="modulepreload"][as="'+Zt(i)+'"][href="'+Zt(e)+'"]',n=a;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":n=na(e)}if(!is.has(n)&&(e=et({rel:"modulepreload",href:e},t),is.set(n,e),s.querySelector(a)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(wn(n)))return}i=s.createElement("link"),Ct(i,"link",e),_t(i),s.head.appendChild(i)}}}function Zy(e,t,s){Ys.S(e,t,s);var i=aa;if(i&&e){var a=Rr(i).hoistableStyles,n=Qr(e);t=t||"default";var m=a.get(n);if(!m){var l={loading:0,preload:null};if(m=i.querySelector(Sn(n)))l.loading=5;else{e=et({rel:"stylesheet",href:e,"data-precedence":t},s),(s=is.get(n))&&dd(e,s);var h=m=i.createElement("link");_t(h),Ct(h,"link",e),h._p=new Promise(function(p,b){h.onload=p,h.onerror=b}),h.addEventListener("load",function(){l.loading|=1}),h.addEventListener("error",function(){l.loading|=2}),l.loading|=4,rl(m,t,i)}m={type:"stylesheet",instance:m,count:1,state:l},a.set(n,m)}}}function eb(e,t){Ys.X(e,t);var s=aa;if(s&&e){var i=Rr(s).hoistableScripts,a=na(e),n=i.get(a);n||(n=s.querySelector(wn(a)),n||(e=et({src:e,async:!0},t),(t=is.get(a))&&hd(e,t),n=s.createElement("script"),_t(n),Ct(n,"link",e),s.head.appendChild(n)),n={type:"script",instance:n,count:1,state:null},i.set(a,n))}}function tb(e,t){Ys.M(e,t);var s=aa;if(s&&e){var i=Rr(s).hoistableScripts,a=na(e),n=i.get(a);n||(n=s.querySelector(wn(a)),n||(e=et({src:e,async:!0,type:"module"},t),(t=is.get(a))&&hd(e,t),n=s.createElement("script"),_t(n),Ct(n,"link",e),s.head.appendChild(n)),n={type:"script",instance:n,count:1,state:null},i.set(a,n))}}function Yh(e,t,s,i){var a=(a=fi.current)?Il(a):null;if(!a)throw Error(oe(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=Qr(s.href),s=Rr(a).hoistableStyles,i=s.get(t),i||(i={type:"style",instance:null,count:0,state:null},s.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Qr(s.href);var n=Rr(a).hoistableStyles,m=n.get(e);if(m||(a=a.ownerDocument||a,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},n.set(e,m),(n=a.querySelector(Sn(e)))&&!n._p&&(m.instance=n,m.state.loading=5),is.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},is.set(e,s),n||sb(a,e,s,m.state))),t&&i===null)throw Error(oe(528,""));return m}if(t&&i!==null)throw Error(oe(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=na(s),s=Rr(a).hoistableScripts,i=s.get(t),i||(i={type:"script",instance:null,count:0,state:null},s.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(oe(444,e))}}function Qr(e){return'href="'+Zt(e)+'"'}function Sn(e){return'link[rel="stylesheet"]['+e+"]"}function Cg(e){return et({},e,{"data-precedence":e.precedence,precedence:null})}function sb(e,t,s,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Ct(t,"link",s),_t(t),e.head.appendChild(t))}function na(e){return'[src="'+Zt(e)+'"]'}function wn(e){return"script[async]"+e}function Vh(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Zt(s.href)+'"]');if(i)return t.instance=i,_t(i),i;var a=et({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),_t(i),Ct(i,"style",a),rl(i,s.precedence,e),t.instance=i;case"stylesheet":a=Qr(s.href);var n=e.querySelector(Sn(a));if(n)return t.state.loading|=4,t.instance=n,_t(n),n;i=Cg(s),(a=is.get(a))&&dd(i,a),n=(e.ownerDocument||e).createElement("link"),_t(n);var m=n;return m._p=new Promise(function(l,h){m.onload=l,m.onerror=h}),Ct(n,"link",i),t.state.loading|=4,rl(n,s.precedence,e),t.instance=n;case"script":return n=na(s.src),(a=e.querySelector(wn(n)))?(t.instance=a,_t(a),a):(i=s,(a=is.get(n))&&(i=et({},s),hd(i,a)),e=e.ownerDocument||e,a=e.createElement("script"),_t(a),Ct(a,"link",i),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(oe(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,rl(i,s.precedence,e));return t.instance}function rl(e,t,s){for(var i=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=i.length?i[i.length-1]:null,n=a,m=0;m<i.length;m++){var l=i[m];if(l.dataset.precedence===t)n=l;else if(n!==a)break}n?n.parentNode.insertBefore(e,n.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function dd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function hd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var al=null;function Xh(e,t,s){if(al===null){var i=new Map,a=al=new Map;a.set(s,i)}else a=al,i=a.get(s),i||(i=new Map,a.set(s,i));if(i.has(e))return i;for(i.set(e,null),s=s.getElementsByTagName(e),a=0;a<s.length;a++){var n=s[a];if(!(n[hn]||n[Et]||e==="link"&&n.getAttribute("rel")==="stylesheet")&&n.namespaceURI!=="http://www.w3.org/2000/svg"){var m=n.getAttribute(t)||"";m=e+m;var l=i.get(m);l?l.push(n):i.set(m,[n])}}return i}function Jh(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function ib(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function jg(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var Qa=null;function rb(){}function ab(e,t,s){if(Qa===null)throw Error(oe(475));var i=Qa;if(t.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var a=Qr(s.href),n=e.querySelector(Sn(a));if(n){e=n._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=Pl.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=n,_t(n);return}n=e.ownerDocument||e,s=Cg(s),(a=is.get(a))&&dd(s,a),n=n.createElement("link"),_t(n);var m=n;m._p=new Promise(function(l,h){m.onload=l,m.onerror=h}),Ct(n,"link",s),t.instance=n}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=Pl.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function nb(){if(Qa===null)throw Error(oe(475));var e=Qa;return e.stylesheets&&e.count===0&&su(e,e.stylesheets),0<e.count?function(t){var s=setTimeout(function(){if(e.stylesheets&&su(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(s)}}:null}function Pl(){if(this.count--,this.count===0){if(this.stylesheets)su(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var zl=null;function su(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,zl=new Map,t.forEach(lb,e),zl=null,Pl.call(e))}function lb(e,t){if(!(t.state.loading&4)){var s=zl.get(e);if(s)var i=s.get(null);else{s=new Map,zl.set(e,s);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),n=0;n<a.length;n++){var m=a[n];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(s.set(m.dataset.precedence,m),i=m)}i&&s.set(null,i)}a=t.instance,m=a.getAttribute("data-precedence"),n=s.get(m)||i,n===i&&s.set(null,a),s.set(m,a),this.count++,i=Pl.bind(this),a.addEventListener("load",i),a.addEventListener("error",i),n?n.parentNode.insertBefore(a,n.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(a,e.firstChild)),t.state.loading|=4}}var Za={$$typeof:Ms,Provider:null,Consumer:null,_currentValue:Ui,_currentValue2:Ui,_threadCount:0};function ob(e,t,s,i,a,n,m,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yo(0),this.hiddenUpdates=yo(null),this.identifierPrefix=i,this.onUncaughtError=a,this.onCaughtError=n,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function Eg(e,t,s,i,a,n,m,l,h,p,b,f){return e=new ob(e,t,s,m,l,h,p,f),t=1,n===!0&&(t|=24),n=zt(3,null,null,t),e.current=n,n.stateNode=e,t=Hu(),t.refCount++,e.pooledCache=t,t.refCount++,n.memoizedState={element:i,isDehydrated:s,cache:t},$u(n),e}function Ng(e){return e?(e=Nr,e):Nr}function kg(e,t,s,i,a,n){a=Ng(a),i.context===null?i.context=a:i.pendingContext=a,i=mi(t),i.payload={element:s},n=n===void 0?null:n,n!==null&&(i.callback=n),s=pi(e,i,t),s!==null&&(Ft(s,e,t),Aa(s,e,t))}function Qh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function fd(e,t){Qh(e,t),(e=e.alternate)&&Qh(e,t)}function Ag(e){if(e.tag===13){var t=ia(e,67108864);t!==null&&Ft(t,e,67108864),fd(e,67108864)}}var Hl=!0;function cb(e,t,s,i){var a=ke.T;ke.T=null;var n=$e.p;try{$e.p=2,md(e,t,s,i)}finally{$e.p=n,ke.T=a}}function ub(e,t,s,i){var a=ke.T;ke.T=null;var n=$e.p;try{$e.p=8,md(e,t,s,i)}finally{$e.p=n,ke.T=a}}function md(e,t,s,i){if(Hl){var a=iu(i);if(a===null)Xo(e,t,i,Ul,s),Zh(e,i);else if(hb(a,e,t,s,i))i.stopPropagation();else if(Zh(e,i),t&4&&-1<db.indexOf(e)){for(;a!==null;){var n=sa(a);if(n!==null)switch(n.tag){case 3:if(n=n.stateNode,n.current.memoizedState.isDehydrated){var m=Oi(n.pendingLanes);if(m!==0){var l=n;for(l.pendingLanes|=2,l.entangledLanes|=2;m;){var h=1<<31-Ut(m);l.entanglements[1]|=h,m&=~h}ks(n),!(Ge&6)&&(Dl=Ss()+500,xn(0))}}break;case 13:l=ia(n,2),l!==null&&Ft(l,n,2),no(),fd(n,2)}if(n=iu(i),n===null&&Xo(e,t,i,Ul,s),n===a)break;a=n}a!==null&&i.stopPropagation()}else Xo(e,t,i,null,s)}}function iu(e){return e=Tu(e),pd(e)}var Ul=null;function pd(e){if(Ul=null,e=xr(e),e!==null){var t=on(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=em(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ul=e,null}function Tg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(X0()){case rm:return 2;case am:return 8;case pl:case J0:return 32;case nm:return 268435456;default:return 32}default:return 32}}var ru=!1,_i=null,yi=null,bi=null,en=new Map,tn=new Map,li=[],db="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Zh(e,t){switch(e){case"focusin":case"focusout":_i=null;break;case"dragenter":case"dragleave":yi=null;break;case"mouseover":case"mouseout":bi=null;break;case"pointerover":case"pointerout":en.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":tn.delete(t.pointerId)}}function va(e,t,s,i,a,n){return e===null||e.nativeEvent!==n?(e={blockedOn:t,domEventName:s,eventSystemFlags:i,nativeEvent:n,targetContainers:[a]},t!==null&&(t=sa(t),t!==null&&Ag(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function hb(e,t,s,i,a){switch(t){case"focusin":return _i=va(_i,e,t,s,i,a),!0;case"dragenter":return yi=va(yi,e,t,s,i,a),!0;case"mouseover":return bi=va(bi,e,t,s,i,a),!0;case"pointerover":var n=a.pointerId;return en.set(n,va(en.get(n)||null,e,t,s,i,a)),!0;case"gotpointercapture":return n=a.pointerId,tn.set(n,va(tn.get(n)||null,e,t,s,i,a)),!0}return!1}function Dg(e){var t=xr(e.target);if(t!==null){var s=on(t);if(s!==null){if(t=s.tag,t===13){if(t=em(s),t!==null){e.blockedOn=t,a_(e.priority,function(){if(s.tag===13){var i=$t();i=Eu(i);var a=ia(s,i);a!==null&&Ft(a,s,i),fd(s,i)}});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=iu(e.nativeEvent);if(s===null){s=e.nativeEvent;var i=new s.constructor(s.type,s);xc=i,s.target.dispatchEvent(i),xc=null}else return t=sa(s),t!==null&&Ag(t),e.blockedOn=s,!1;t.shift()}return!0}function ef(e,t,s){nl(e)&&s.delete(t)}function fb(){ru=!1,_i!==null&&nl(_i)&&(_i=null),yi!==null&&nl(yi)&&(yi=null),bi!==null&&nl(bi)&&(bi=null),en.forEach(ef),tn.forEach(ef)}function Hn(e,t){e.blockedOn===t&&(e.blockedOn=null,ru||(ru=!0,pt.unstable_scheduleCallback(pt.unstable_NormalPriority,fb)))}var Un=null;function tf(e){Un!==e&&(Un=e,pt.unstable_scheduleCallback(pt.unstable_NormalPriority,function(){Un===e&&(Un=null);for(var t=0;t<e.length;t+=3){var s=e[t],i=e[t+1],a=e[t+2];if(typeof i!="function"){if(pd(i||s)===null)continue;break}var n=sa(s);n!==null&&(e.splice(t,3),t-=3,Ic(n,{pending:!0,data:a,method:s.method,action:i},i,a))}}))}function sn(e){function t(h){return Hn(h,e)}_i!==null&&Hn(_i,e),yi!==null&&Hn(yi,e),bi!==null&&Hn(bi,e),en.forEach(t),tn.forEach(t);for(var s=0;s<li.length;s++){var i=li[s];i.blockedOn===e&&(i.blockedOn=null)}for(;0<li.length&&(s=li[0],s.blockedOn===null);)Dg(s),s.blockedOn===null&&li.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(i=0;i<s.length;i+=3){var a=s[i],n=s[i+1],m=a[Rt]||null;if(typeof n=="function")m||tf(s);else if(m){var l=null;if(n&&n.hasAttribute("formAction")){if(a=n,m=n[Rt]||null)l=m.formAction;else if(pd(a)!==null)continue}else l=m.action;typeof l=="function"?s[i+1]=l:(s.splice(i,3),i-=3),tf(s)}}}function gd(e){this._internalRoot=e}uo.prototype.render=gd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(oe(409));var s=t.current,i=$t();kg(s,i,e,t,null,null)};uo.prototype.unmount=gd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;kg(e.current,2,null,e,null,null),no(),t[ta]=null}};function uo(e){this._internalRoot=e}uo.prototype.unstable_scheduleHydration=function(e){if(e){var t=dm();e={blockedOn:null,target:e,priority:t};for(var s=0;s<li.length&&t!==0&&t<li[s].priority;s++);li.splice(s,0,e),s===0&&Dg(e)}};var sf=Qf.version;if(sf!=="19.1.0")throw Error(oe(527,sf,"19.1.0"));$e.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(oe(188)):(e=Object.keys(e).join(","),Error(oe(268,e)));return e=F0(t),e=e!==null?tm(e):null,e=e===null?null:e.stateNode,e};var mb={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ke,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $n=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$n.isDisabled&&$n.supportsFiber)try{cn=$n.inject(mb),Ht=$n}catch{}}Vl.createRoot=function(e,t){if(!Zf(e))throw Error(oe(299));var s=!1,i="",a=Ep,n=Np,m=kp,l=null;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(a=t.onUncaughtError),t.onCaughtError!==void 0&&(n=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=Eg(e,1,!1,null,null,s,i,a,n,m,l,null),e[ta]=t.current,ud(e),new gd(t)};Vl.hydrateRoot=function(e,t,s){if(!Zf(e))throw Error(oe(299));var i=!1,a="",n=Ep,m=Np,l=kp,h=null,p=null;return s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onUncaughtError!==void 0&&(n=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(l=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(h=s.unstable_transitionCallbacks),s.formState!==void 0&&(p=s.formState)),t=Eg(e,1,!0,t,s??null,i,a,n,m,l,h,p),t.context=Ng(null),s=t.current,i=$t(),i=Eu(i),a=mi(i),a.callback=null,pi(s,a,i),s=i,t.current.lanes=s,dn(t,s),ks(t),e[ta]=t.current,ud(e),new uo(t)};Vl.version="19.1.0";function Rg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rg)}catch(e){console.error(e)}}Rg(),Vf.exports=Vl;var pb=Vf.exports;const gb=n0(pb);function vb({children:e}){return ge.useEffect(()=>{let t,s=!1,i=null;const a={current:!1};try{a.current=localStorage.getItem("unicon_ws_paused")==="1"}catch{}const n=()=>{var c,d,g,_;if(a.current){window.dispatchEvent(new CustomEvent("unicon-ws-status",{detail:{connected:!1,paused:!0}}));return}const h=location.protocol==="https:"?"wss":"ws",p=`${h}://${location.host}/ws`,b=((d=(c=import.meta)==null?void 0:c.env)==null?void 0:d.VITE_WS_URL)||null,f=((_=(g=import.meta)==null?void 0:g.env)==null?void 0:_.VITE_WS_PORT)||8080,v=`${h}://localhost:${f}`,y=`${h}://127.0.0.1:${f}`,w=`${h}://${location.hostname}:${f}`,S=[b,p,w,v,y].filter(Boolean);let o=0;const u=()=>{if(o>=S.length){const E=Date.now()+1500;window.dispatchEvent(new CustomEvent("unicon-ws-status",{detail:{connected:!1,nextRetryTs:E,paused:a.current}})),!s&&!a.current&&(i=setTimeout(n,1500));return}const C=S[o++];try{t=new WebSocket(C)}catch{return u()}let j=!1;const x=setTimeout(()=>{if(!j)try{t.close()}catch{}},800);t.onopen=()=>{j=!0,clearTimeout(x),window.dispatchEvent(new CustomEvent("unicon-ws-status",{detail:{connected:!0,url:t.url,paused:!1}}))},t.onmessage=E=>{try{const D=JSON.parse(E.data);window.dispatchEvent(new CustomEvent("unicon-ws",{detail:D}))}catch{}},t.onclose=()=>{if(!j)return u();const E=Date.now()+1500;window.dispatchEvent(new CustomEvent("unicon-ws-status",{detail:{connected:!1,url:t.url,nextRetryTs:E,paused:a.current}})),!s&&!a.current&&(i=setTimeout(n,1500))},t.onerror=()=>{try{t.close()}catch{}}};u()},m=()=>{if(!a.current){try{i&&(clearTimeout(i),i=null)}catch{}try{t&&t.close()}catch{}n()}},l=h=>{const p=!!(h!=null&&h.detail&&h.detail.paused);a.current=p;try{localStorage.setItem("unicon_ws_paused",p?"1":"0")}catch{}if(p){try{i&&(clearTimeout(i),i=null)}catch{}try{t&&t.close()}catch{}window.dispatchEvent(new CustomEvent("unicon-ws-status",{detail:{connected:!1,paused:!0}}))}else n()};return window.addEventListener("unicon-ws-reconnect",m),window.addEventListener("unicon-ws-toggle-pause",l),n(),()=>{s=!0,window.removeEventListener("unicon-ws-reconnect",m),window.removeEventListener("unicon-ws-toggle-pause",l);try{t&&t.close()}catch{}try{i&&clearTimeout(i)}catch{}}},[]),e}const _b="modulepreload",yb=function(e){return"/unicon/"+e},rf={},Ii=function(t,s,i){let a=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),l=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));a=Promise.allSettled(s.map(h=>{if(h=yb(h),h in rf)return;rf[h]=!0;const p=h.endsWith(".css"),b=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${b}`))return;const f=document.createElement("link");if(f.rel=p?"stylesheet":_b,p||(f.as="script"),f.crossOrigin="",f.href=h,l&&f.setAttribute("nonce",l),document.head.appendChild(f),p)return new Promise((v,y)=>{f.addEventListener("load",v),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${h}`)))})}))}function n(m){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=m,window.dispatchEvent(l),!l.defaultPrevented)throw m}return a.then(m=>{for(const l of m||[])l.status==="rejected"&&n(l.reason);return t().catch(n)})};/*!
 * Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2025 Fonticons, Inc.
 */function au(e,t){(t==null||t>e.length)&&(t=e.length);for(var s=0,i=Array(t);s<t;s++)i[s]=e[s];return i}function bb(e){if(Array.isArray(e))return e}function xb(e){if(Array.isArray(e))return au(e)}function Sb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wb(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Lg(i.key),i)}}function Cb(e,t,s){return t&&wb(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ll(e,t){var s=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!s){if(Array.isArray(e)||(s=vd(e))||t){s&&(e=s);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(h){throw h},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,m=!0,l=!1;return{s:function(){s=s.call(e)},n:function(){var h=s.next();return m=h.done,h},e:function(h){l=!0,n=h},f:function(){try{m||s.return==null||s.return()}finally{if(l)throw n}}}}function De(e,t,s){return(t=Lg(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function jb(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Eb(e,t){var s=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var i,a,n,m,l=[],h=!0,p=!1;try{if(n=(s=s.call(e)).next,t===0){if(Object(s)!==s)return;h=!1}else for(;!(h=(i=n.call(s)).done)&&(l.push(i.value),l.length!==t);h=!0);}catch(b){p=!0,a=b}finally{try{if(!h&&s.return!=null&&(m=s.return(),Object(m)!==m))return}finally{if(p)throw a}}return l}}function Nb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kb(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function af(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,i)}return s}function fe(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?af(Object(s),!0).forEach(function(i){De(e,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):af(Object(s)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(s,i))})}return e}function ho(e,t){return bb(e)||Eb(e,t)||vd(e,t)||Nb()}function ds(e){return xb(e)||jb(e)||vd(e)||kb()}function Ab(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var i=s.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lg(e){var t=Ab(e,"string");return typeof t=="symbol"?t:t+""}function $l(e){"@babel/helpers - typeof";return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$l(e)}function vd(e,t){if(e){if(typeof e=="string")return au(e,t);var s={}.toString.call(e).slice(8,-1);return s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set"?Array.from(e):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?au(e,t):void 0}}var nf=function(){},_d={},Og={},Mg=null,Bg={mark:nf,measure:nf};try{typeof window<"u"&&(_d=window),typeof document<"u"&&(Og=document),typeof MutationObserver<"u"&&(Mg=MutationObserver),typeof performance<"u"&&(Bg=performance)}catch{}var Tb=_d.navigator||{},lf=Tb.userAgent,of=lf===void 0?"":lf,Ci=_d,Ze=Og,cf=Mg,Fn=Bg;Ci.document;var Vs=!!Ze.documentElement&&!!Ze.head&&typeof Ze.addEventListener=="function"&&typeof Ze.createElement=="function",Ig=~of.indexOf("MSIE")||~of.indexOf("Trident/"),Qo,Db=/fa(k|kd|s|r|l|t|d|dr|dl|dt|b|slr|slpr|wsb|tl|ns|nds|es|jr|jfr|jdr|usb|ufsb|udsb|cr|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,Rb=/Font ?Awesome ?([567 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit|Notdog Duo|Notdog|Chisel|Etch|Thumbprint|Jelly Fill|Jelly Duo|Jelly|Utility|Utility Fill|Utility Duo|Slab Press|Slab|Whiteboard)?.*/i,Pg={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"},slab:{"fa-regular":"regular",faslr:"regular"},"slab-press":{"fa-regular":"regular",faslpr:"regular"},thumbprint:{"fa-light":"light",fatl:"light"},whiteboard:{"fa-semibold":"semibold",fawsb:"semibold"},notdog:{"fa-solid":"solid",fans:"solid"},"notdog-duo":{"fa-solid":"solid",fands:"solid"},etch:{"fa-solid":"solid",faes:"solid"},jelly:{"fa-regular":"regular",fajr:"regular"},"jelly-fill":{"fa-regular":"regular",fajfr:"regular"},"jelly-duo":{"fa-regular":"regular",fajdr:"regular"},chisel:{"fa-regular":"regular",facr:"regular"},utility:{"fa-semibold":"semibold",fausb:"semibold"},"utility-duo":{"fa-semibold":"semibold",faudsb:"semibold"},"utility-fill":{"fa-semibold":"semibold",faufsb:"semibold"}},Lb={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},zg=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-thumbprint","fa-whiteboard","fa-notdog","fa-notdog-duo","fa-chisel","fa-etch","fa-jelly","fa-jelly-fill","fa-jelly-duo","fa-slab","fa-slab-press","fa-utility","fa-utility-duo","fa-utility-fill"],jt="classic",Cn="duotone",Hg="sharp",Ug="sharp-duotone",$g="chisel",Fg="etch",qg="jelly",Gg="jelly-duo",Kg="jelly-fill",Wg="notdog",Yg="notdog-duo",Vg="slab",Xg="slab-press",Jg="thumbprint",Qg="utility",Zg="utility-duo",ev="utility-fill",tv="whiteboard",Ob="Classic",Mb="Duotone",Bb="Sharp",Ib="Sharp Duotone",Pb="Chisel",zb="Etch",Hb="Jelly",Ub="Jelly Duo",$b="Jelly Fill",Fb="Notdog",qb="Notdog Duo",Gb="Slab",Kb="Slab Press",Wb="Thumbprint",Yb="Utility",Vb="Utility Duo",Xb="Utility Fill",Jb="Whiteboard",sv=[jt,Cn,Hg,Ug,$g,Fg,qg,Gg,Kg,Wg,Yg,Vg,Xg,Jg,Qg,Zg,ev,tv];Qo={},De(De(De(De(De(De(De(De(De(De(Qo,jt,Ob),Cn,Mb),Hg,Bb),Ug,Ib),$g,Pb),Fg,zb),qg,Hb),Gg,Ub),Kg,$b),Wg,Fb),De(De(De(De(De(De(De(De(Qo,Yg,qb),Vg,Gb),Xg,Kb),Jg,Wb),Qg,Yb),Zg,Vb),ev,Xb),tv,Jb);var Qb={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"},slab:{400:"faslr"},"slab-press":{400:"faslpr"},whiteboard:{600:"fawsb"},thumbprint:{300:"fatl"},notdog:{900:"fans"},"notdog-duo":{900:"fands"},etch:{900:"faes"},chisel:{400:"facr"},jelly:{400:"fajr"},"jelly-fill":{400:"fajfr"},"jelly-duo":{400:"fajdr"},utility:{600:"fausb"},"utility-duo":{600:"faudsb"},"utility-fill":{600:"faufsb"}},Zb={"Font Awesome 7 Free":{900:"fas",400:"far"},"Font Awesome 7 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 7 Brands":{400:"fab",normal:"fab"},"Font Awesome 7 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 7 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 7 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"},"Font Awesome 7 Jelly":{400:"fajr",normal:"fajr"},"Font Awesome 7 Jelly Fill":{400:"fajfr",normal:"fajfr"},"Font Awesome 7 Jelly Duo":{400:"fajdr",normal:"fajdr"},"Font Awesome 7 Slab":{400:"faslr",normal:"faslr"},"Font Awesome 7 Slab Press":{400:"faslpr",normal:"faslpr"},"Font Awesome 7 Thumbprint":{300:"fatl",normal:"fatl"},"Font Awesome 7 Notdog":{900:"fans",normal:"fans"},"Font Awesome 7 Notdog Duo":{900:"fands",normal:"fands"},"Font Awesome 7 Etch":{900:"faes",normal:"faes"},"Font Awesome 7 Chisel":{400:"facr",normal:"facr"},"Font Awesome 7 Whiteboard":{600:"fawsb",normal:"fawsb"},"Font Awesome 7 Utility":{600:"fausb",normal:"fausb"},"Font Awesome 7 Utility Duo":{600:"faudsb",normal:"faudsb"},"Font Awesome 7 Utility Fill":{600:"faufsb",normal:"faufsb"}},ex=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["chisel",{defaultShortPrefixId:"facr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["etch",{defaultShortPrefixId:"faes",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["jelly",{defaultShortPrefixId:"fajr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["jelly-duo",{defaultShortPrefixId:"fajdr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["jelly-fill",{defaultShortPrefixId:"fajfr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["notdog",{defaultShortPrefixId:"fans",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["notdog-duo",{defaultShortPrefixId:"fands",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["slab",{defaultShortPrefixId:"faslr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["slab-press",{defaultShortPrefixId:"faslpr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["thumbprint",{defaultShortPrefixId:"fatl",defaultStyleId:"light",styleIds:["light"],futureStyleIds:[],defaultFontWeight:300}],["utility",{defaultShortPrefixId:"fausb",defaultStyleId:"semibold",styleIds:["semibold"],futureStyleIds:[],defaultFontWeight:600}],["utility-duo",{defaultShortPrefixId:"faudsb",defaultStyleId:"semibold",styleIds:["semibold"],futureStyleIds:[],defaultFontWeight:600}],["utility-fill",{defaultShortPrefixId:"faufsb",defaultStyleId:"semibold",styleIds:["semibold"],futureStyleIds:[],defaultFontWeight:600}],["whiteboard",{defaultShortPrefixId:"fawsb",defaultStyleId:"semibold",styleIds:["semibold"],futureStyleIds:[],defaultFontWeight:600}]]),tx={chisel:{regular:"facr"},classic:{brands:"fab",light:"fal",regular:"far",solid:"fas",thin:"fat"},duotone:{light:"fadl",regular:"fadr",solid:"fad",thin:"fadt"},etch:{solid:"faes"},jelly:{regular:"fajr"},"jelly-duo":{regular:"fajdr"},"jelly-fill":{regular:"fajfr"},notdog:{solid:"fans"},"notdog-duo":{solid:"fands"},sharp:{light:"fasl",regular:"fasr",solid:"fass",thin:"fast"},"sharp-duotone":{light:"fasdl",regular:"fasdr",solid:"fasds",thin:"fasdt"},slab:{regular:"faslr"},"slab-press":{regular:"faslpr"},thumbprint:{light:"fatl"},utility:{semibold:"fausb"},"utility-duo":{semibold:"faudsb"},"utility-fill":{semibold:"faufsb"},whiteboard:{semibold:"fawsb"}},iv=["fak","fa-kit","fakd","fa-kit-duotone"],uf={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},sx=["kit"],ix="kit",rx="kit-duotone",ax="Kit",nx="Kit Duotone";De(De({},ix,ax),rx,nx);var lx={kit:{"fa-kit":"fak"}},ox={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},cx={kit:{fak:"fa-kit"}},df={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},Zo,qn={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},ux=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-thumbprint","fa-whiteboard","fa-notdog","fa-notdog-duo","fa-chisel","fa-etch","fa-jelly","fa-jelly-fill","fa-jelly-duo","fa-slab","fa-slab-press","fa-utility","fa-utility-duo","fa-utility-fill"],dx="classic",hx="duotone",fx="sharp",mx="sharp-duotone",px="chisel",gx="etch",vx="jelly",_x="jelly-duo",yx="jelly-fill",bx="notdog",xx="notdog-duo",Sx="slab",wx="slab-press",Cx="thumbprint",jx="utility",Ex="utility-duo",Nx="utility-fill",kx="whiteboard",Ax="Classic",Tx="Duotone",Dx="Sharp",Rx="Sharp Duotone",Lx="Chisel",Ox="Etch",Mx="Jelly",Bx="Jelly Duo",Ix="Jelly Fill",Px="Notdog",zx="Notdog Duo",Hx="Slab",Ux="Slab Press",$x="Thumbprint",Fx="Utility",qx="Utility Duo",Gx="Utility Fill",Kx="Whiteboard";Zo={},De(De(De(De(De(De(De(De(De(De(Zo,dx,Ax),hx,Tx),fx,Dx),mx,Rx),px,Lx),gx,Ox),vx,Mx),_x,Bx),yx,Ix),bx,Px),De(De(De(De(De(De(De(De(Zo,xx,zx),Sx,Hx),wx,Ux),Cx,$x),jx,Fx),Ex,qx),Nx,Gx),kx,Kx);var Wx="kit",Yx="kit-duotone",Vx="Kit",Xx="Kit Duotone";De(De({},Wx,Vx),Yx,Xx);var Jx={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"},slab:{"fa-regular":"faslr"},"slab-press":{"fa-regular":"faslpr"},whiteboard:{"fa-semibold":"fawsb"},thumbprint:{"fa-light":"fatl"},notdog:{"fa-solid":"fans"},"notdog-duo":{"fa-solid":"fands"},etch:{"fa-solid":"faes"},jelly:{"fa-regular":"fajr"},"jelly-fill":{"fa-regular":"fajfr"},"jelly-duo":{"fa-regular":"fajdr"},chisel:{"fa-regular":"facr"},utility:{"fa-semibold":"fausb"},"utility-duo":{"fa-semibold":"faudsb"},"utility-fill":{"fa-semibold":"faufsb"}},Qx={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"],slab:["faslr"],"slab-press":["faslpr"],whiteboard:["fawsb"],thumbprint:["fatl"],notdog:["fans"],"notdog-duo":["fands"],etch:["faes"],jelly:["fajr"],"jelly-fill":["fajfr"],"jelly-duo":["fajdr"],chisel:["facr"],utility:["fausb"],"utility-duo":["faudsb"],"utility-fill":["faufsb"]},nu={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"},slab:{faslr:"fa-regular"},"slab-press":{faslpr:"fa-regular"},whiteboard:{fawsb:"fa-semibold"},thumbprint:{fatl:"fa-light"},notdog:{fans:"fa-solid"},"notdog-duo":{fands:"fa-solid"},etch:{faes:"fa-solid"},jelly:{fajr:"fa-regular"},"jelly-fill":{fajfr:"fa-regular"},"jelly-duo":{fajdr:"fa-regular"},chisel:{facr:"fa-regular"},utility:{fausb:"fa-semibold"},"utility-duo":{faudsb:"fa-semibold"},"utility-fill":{faufsb:"fa-semibold"}},Zx=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands","fa-semibold"],rv=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt","faslr","faslpr","fawsb","fatl","fans","fands","faes","fajr","fajfr","fajdr","facr","fausb","faudsb","faufsb"].concat(ux,Zx),e1=["solid","regular","light","thin","duotone","brands","semibold"],av=[1,2,3,4,5,6,7,8,9,10],t1=av.concat([11,12,13,14,15,16,17,18,19,20]),s1=["aw","fw","pull-left","pull-right"],i1=[].concat(ds(Object.keys(Qx)),e1,s1,["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","inverse","layers","layers-bottom-left","layers-bottom-right","layers-counter","layers-text","layers-top-left","layers-top-right","li","pull-end","pull-start","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul","width-auto","width-fixed",qn.GROUP,qn.SWAP_OPACITY,qn.PRIMARY,qn.SECONDARY]).concat(av.map(function(e){return"".concat(e,"x")})).concat(t1.map(function(e){return"w-".concat(e)})),r1={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}},Ks="___FONT_AWESOME___",lu=16,nv="fa",lv="svg-inline--fa",Zi="data-fa-i2svg",ou="data-fa-pseudo-element",a1="data-fa-pseudo-element-pending",yd="data-prefix",bd="data-icon",hf="fontawesome-i2svg",n1="async",l1=["HTML","HEAD","STYLE","SCRIPT"],ov=["::before","::after",":before",":after"],cv=function(){try{return!0}catch{return!1}}();function jn(e){return new Proxy(e,{get:function(s,i){return i in s?s[i]:s[jt]}})}var uv=fe({},Pg);uv[jt]=fe(fe(fe(fe({},{"fa-duotone":"duotone"}),Pg[jt]),uf.kit),uf["kit-duotone"]);var o1=jn(uv),cu=fe({},tx);cu[jt]=fe(fe(fe(fe({},{duotone:"fad"}),cu[jt]),df.kit),df["kit-duotone"]);var ff=jn(cu),uu=fe({},nu);uu[jt]=fe(fe({},uu[jt]),cx.kit);var xd=jn(uu),du=fe({},Jx);du[jt]=fe(fe({},du[jt]),lx.kit);jn(du);var c1=Db,dv="fa-layers-text",u1=Rb,d1=fe({},Qb);jn(d1);var h1=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],ec=Lb,f1=[].concat(ds(sx),ds(i1)),Pa=Ci.FontAwesomeConfig||{};function m1(e){var t=Ze.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function p1(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(Ze&&typeof Ze.querySelector=="function"){var g1=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-search-pseudo-elements","searchPseudoElements"],["data-search-pseudo-elements-warnings","searchPseudoElementsWarnings"],["data-search-pseudo-elements-full-scan","searchPseudoElementsFullScan"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];g1.forEach(function(e){var t=ho(e,2),s=t[0],i=t[1],a=p1(m1(s));a!=null&&(Pa[i]=a)})}var hv={styleDefault:"solid",familyDefault:jt,cssPrefix:nv,replacementClass:lv,autoReplaceSvg:!0,autoAddCss:!0,searchPseudoElements:!1,searchPseudoElementsWarnings:!0,searchPseudoElementsFullScan:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Pa.familyPrefix&&(Pa.cssPrefix=Pa.familyPrefix);var Zr=fe(fe({},hv),Pa);Zr.autoReplaceSvg||(Zr.observeMutations=!1);var Se={};Object.keys(hv).forEach(function(e){Object.defineProperty(Se,e,{enumerable:!0,set:function(s){Zr[e]=s,za.forEach(function(i){return i(Se)})},get:function(){return Zr[e]}})});Object.defineProperty(Se,"familyPrefix",{enumerable:!0,set:function(t){Zr.cssPrefix=t,za.forEach(function(s){return s(Se)})},get:function(){return Zr.cssPrefix}});Ci.FontAwesomeConfig=Se;var za=[];function v1(e){return za.push(e),function(){za.splice(za.indexOf(e),1)}}var fr=lu,bs={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function _1(e){if(!(!e||!Vs)){var t=Ze.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var s=Ze.head.childNodes,i=null,a=s.length-1;a>-1;a--){var n=s[a],m=(n.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(m)>-1&&(i=n)}return Ze.head.insertBefore(t,i),e}}var y1="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function mf(){for(var e=12,t="";e-- >0;)t+=y1[Math.random()*62|0];return t}function la(e){for(var t=[],s=(e||[]).length>>>0;s--;)t[s]=e[s];return t}function Sd(e){return e.classList?la(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function fv(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function b1(e){return Object.keys(e||{}).reduce(function(t,s){return t+"".concat(s,'="').concat(fv(e[s]),'" ')},"").trim()}function fo(e){return Object.keys(e||{}).reduce(function(t,s){return t+"".concat(s,": ").concat(e[s].trim(),";")},"")}function wd(e){return e.size!==bs.size||e.x!==bs.x||e.y!==bs.y||e.rotate!==bs.rotate||e.flipX||e.flipY}function x1(e){var t=e.transform,s=e.containerWidth,i=e.iconWidth,a={transform:"translate(".concat(s/2," 256)")},n="translate(".concat(t.x*32,", ").concat(t.y*32,") "),m="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),l="rotate(".concat(t.rotate," 0 0)"),h={transform:"".concat(n," ").concat(m," ").concat(l)},p={transform:"translate(".concat(i/2*-1," -256)")};return{outer:a,inner:h,path:p}}function S1(e){var t=e.transform,s=e.width,i=s===void 0?lu:s,a=e.height,n=a===void 0?lu:a,m="";return Ig?m+="translate(".concat(t.x/fr-i/2,"em, ").concat(t.y/fr-n/2,"em) "):m+="translate(calc(-50% + ".concat(t.x/fr,"em), calc(-50% + ").concat(t.y/fr,"em)) "),m+="scale(".concat(t.size/fr*(t.flipX?-1:1),", ").concat(t.size/fr*(t.flipY?-1:1),") "),m+="rotate(".concat(t.rotate,"deg) "),m}var w1=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 7 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 7 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 7 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 7 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 7 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 7 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-slab-regular: normal 400 1em/1 "Font Awesome 7 Slab";
  --fa-font-slab-press-regular: normal 400 1em/1 "Font Awesome 7 Slab Press";
  --fa-font-whiteboard-semibold: normal 600 1em/1 "Font Awesome 7 Whiteboard";
  --fa-font-thumbprint-light: normal 300 1em/1 "Font Awesome 7 Thumbprint";
  --fa-font-notdog-solid: normal 900 1em/1 "Font Awesome 7 Notdog";
  --fa-font-notdog-duo-solid: normal 900 1em/1 "Font Awesome 7 Notdog Duo";
  --fa-font-etch-solid: normal 900 1em/1 "Font Awesome 7 Etch";
  --fa-font-jelly-regular: normal 400 1em/1 "Font Awesome 7 Jelly";
  --fa-font-jelly-fill-regular: normal 400 1em/1 "Font Awesome 7 Jelly Fill";
  --fa-font-jelly-duo-regular: normal 400 1em/1 "Font Awesome 7 Jelly Duo";
  --fa-font-chisel-regular: normal 400 1em/1 "Font Awesome 7 Chisel";
  --fa-font-utility-semibold: normal 600 1em/1 "Font Awesome 7 Utility";
  --fa-font-utility-duo-semibold: normal 600 1em/1 "Font Awesome 7 Utility Duo";
  --fa-font-utility-fill-semibold: normal 600 1em/1 "Font Awesome 7 Utility Fill";
}

.svg-inline--fa {
  box-sizing: content-box;
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
  width: var(--fa-width, 1.25em);
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285714em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left,
.svg-inline--fa .fa-pull-start {
  float: inline-start;
  margin-inline-end: var(--fa-pull-margin, 0.3em);
}
.svg-inline--fa.fa-pull-right,
.svg-inline--fa .fa-pull-end {
  float: inline-end;
  margin-inline-start: var(--fa-pull-margin, 0.3em);
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  inset-inline-start: calc(-1 * var(--fa-li-width, 2em));
  inset-block-start: 0.25em; /* syncing vertical alignment with Web Font rendering */
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: var(--fa-width, 1.25em);
}
.fa-layers .svg-inline--fa {
  inset: 0;
  margin: auto;
  position: absolute;
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: calc(10 / 16 * 1em); /* converts a 10px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 10 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 10 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-xs {
  font-size: calc(12 / 16 * 1em); /* converts a 12px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 12 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 12 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-sm {
  font-size: calc(14 / 16 * 1em); /* converts a 14px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 14 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 14 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-lg {
  font-size: calc(20 / 16 * 1em); /* converts a 20px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 20 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 20 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-xl {
  font-size: calc(24 / 16 * 1em); /* converts a 24px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 24 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 24 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-2xl {
  font-size: calc(32 / 16 * 1em); /* converts a 32px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 32 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 32 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-width-auto {
  --fa-width: auto;
}

.fa-fw,
.fa-width-fixed {
  --fa-width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-inline-start: var(--fa-li-margin, 2.5em);
  padding-inline-start: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  inset-inline-start: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

/* Heads Up: Bordered Icons will not be supported in the future!
  - This feature will be deprecated in the next major release of Font Awesome (v8)!
  - You may continue to use it in this version *v7), but it will not be supported in Font Awesome v8.
*/
/* Notes:
* --@{v.$css-prefix}-border-width = 1/16 by default (to render as ~1px based on a 16px default font-size)
* --@{v.$css-prefix}-border-padding =
  ** 3/16 for vertical padding (to give ~2px of vertical whitespace around an icon considering it's vertical alignment)
  ** 4/16 for horizontal padding (to give ~4px of horizontal whitespace around an icon)
*/
.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.0625em);
  box-sizing: var(--fa-border-box-sizing, content-box);
  padding: var(--fa-border-padding, 0.1875em 0.25em);
}

.fa-pull-left,
.fa-pull-start {
  float: inline-start;
  margin-inline-end: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right,
.fa-pull-end {
  float: inline-end;
  margin-inline-start: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
  .fa-bounce,
  .fa-fade,
  .fa-beat-fade,
  .fa-flip,
  .fa-pulse,
  .fa-shake,
  .fa-spin,
  .fa-spin-pulse {
    animation: none !important;
    transition: none !important;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.svg-inline--fa.fa-inverse {
  fill: var(--fa-inverse, #fff);
}

.fa-stack {
  display: inline-block;
  height: 2em;
  line-height: 2em;
  position: relative;
  vertical-align: middle;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.svg-inline--fa.fa-stack-1x {
  --fa-width: 1.25em;
  height: 1em;
  width: var(--fa-width);
}
.svg-inline--fa.fa-stack-2x {
  --fa-width: 2.5em;
  height: 2em;
  width: var(--fa-width);
}

.fa-stack-1x,
.fa-stack-2x {
  inset: 0;
  margin: auto;
  position: absolute;
  z-index: var(--fa-stack-z-index, auto);
}`;function mv(){var e=nv,t=lv,s=Se.cssPrefix,i=Se.replacementClass,a=w1;if(s!==e||i!==t){var n=new RegExp("\\.".concat(e,"\\-"),"g"),m=new RegExp("\\--".concat(e,"\\-"),"g"),l=new RegExp("\\.".concat(t),"g");a=a.replace(n,".".concat(s,"-")).replace(m,"--".concat(s,"-")).replace(l,".".concat(i))}return a}var pf=!1;function tc(){Se.autoAddCss&&!pf&&(_1(mv()),pf=!0)}var C1={mixout:function(){return{dom:{css:mv,insertCss:tc}}},hooks:function(){return{beforeDOMElementCreation:function(){tc()},beforeI2svg:function(){tc()}}}},Ws=Ci||{};Ws[Ks]||(Ws[Ks]={});Ws[Ks].styles||(Ws[Ks].styles={});Ws[Ks].hooks||(Ws[Ks].hooks={});Ws[Ks].shims||(Ws[Ks].shims=[]);var cs=Ws[Ks],pv=[],gv=function(){Ze.removeEventListener("DOMContentLoaded",gv),Fl=1,pv.map(function(t){return t()})},Fl=!1;Vs&&(Fl=(Ze.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ze.readyState),Fl||Ze.addEventListener("DOMContentLoaded",gv));function j1(e){Vs&&(Fl?setTimeout(e,0):pv.push(e))}function En(e){var t=e.tag,s=e.attributes,i=s===void 0?{}:s,a=e.children,n=a===void 0?[]:a;return typeof e=="string"?fv(e):"<".concat(t," ").concat(b1(i),">").concat(n.map(En).join(""),"</").concat(t,">")}function gf(e,t,s){if(e&&e[t]&&e[t][s])return{prefix:t,iconName:s,icon:e[t][s]}}var sc=function(t,s,i,a){var n=Object.keys(t),m=n.length,l=s,h,p,b;for(i===void 0?(h=1,b=t[n[0]]):(h=0,b=i);h<m;h++)p=n[h],b=l(b,t[p],p,t);return b};function vv(e){return ds(e).length!==1?null:e.codePointAt(0).toString(16)}function vf(e){return Object.keys(e).reduce(function(t,s){var i=e[s],a=!!i.icon;return a?t[i.iconName]=i.icon:t[s]=i,t},{})}function hu(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=s.skipHooks,a=i===void 0?!1:i,n=vf(t);typeof cs.hooks.addPack=="function"&&!a?cs.hooks.addPack(e,vf(t)):cs.styles[e]=fe(fe({},cs.styles[e]||{}),n),e==="fas"&&hu("fa",t)}var rn=cs.styles,E1=cs.shims,_v=Object.keys(xd),N1=_v.reduce(function(e,t){return e[t]=Object.keys(xd[t]),e},{}),Cd=null,yv={},bv={},xv={},Sv={},wv={};function k1(e){return~f1.indexOf(e)}function A1(e,t){var s=t.split("-"),i=s[0],a=s.slice(1).join("-");return i===e&&a!==""&&!k1(a)?a:null}var Cv=function(){var t=function(n){return sc(rn,function(m,l,h){return m[h]=sc(l,n,{}),m},{})};yv=t(function(a,n,m){if(n[3]&&(a[n[3]]=m),n[2]){var l=n[2].filter(function(h){return typeof h=="number"});l.forEach(function(h){a[h.toString(16)]=m})}return a}),bv=t(function(a,n,m){if(a[m]=m,n[2]){var l=n[2].filter(function(h){return typeof h=="string"});l.forEach(function(h){a[h]=m})}return a}),wv=t(function(a,n,m){var l=n[2];return a[m]=m,l.forEach(function(h){a[h]=m}),a});var s="far"in rn||Se.autoFetchSvg,i=sc(E1,function(a,n){var m=n[0],l=n[1],h=n[2];return l==="far"&&!s&&(l="fas"),typeof m=="string"&&(a.names[m]={prefix:l,iconName:h}),typeof m=="number"&&(a.unicodes[m.toString(16)]={prefix:l,iconName:h}),a},{names:{},unicodes:{}});xv=i.names,Sv=i.unicodes,Cd=mo(Se.styleDefault,{family:Se.familyDefault})};v1(function(e){Cd=mo(e.styleDefault,{family:Se.familyDefault})});Cv();function jd(e,t){return(yv[e]||{})[t]}function T1(e,t){return(bv[e]||{})[t]}function Pi(e,t){return(wv[e]||{})[t]}function jv(e){return xv[e]||{prefix:null,iconName:null}}function D1(e){var t=Sv[e],s=jd("fas",e);return t||(s?{prefix:"fas",iconName:s}:null)||{prefix:null,iconName:null}}function ji(){return Cd}var Ev=function(){return{prefix:null,iconName:null,rest:[]}};function R1(e){var t=jt,s=_v.reduce(function(i,a){return i[a]="".concat(Se.cssPrefix,"-").concat(a),i},{});return sv.forEach(function(i){(e.includes(s[i])||e.some(function(a){return N1[i].includes(a)}))&&(t=i)}),t}function mo(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t.family,i=s===void 0?jt:s,a=o1[i][e];if(i===Cn&&!e)return"fad";var n=ff[i][e]||ff[i][a],m=e in cs.styles?e:null,l=n||m||null;return l}function L1(e){var t=[],s=null;return e.forEach(function(i){var a=A1(Se.cssPrefix,i);a?s=a:i&&t.push(i)}),{iconName:s,rest:t}}function _f(e){return e.sort().filter(function(t,s,i){return i.indexOf(t)===s})}var yf=rv.concat(iv);function po(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t.skipLookups,i=s===void 0?!1:s,a=null,n=_f(e.filter(function(y){return yf.includes(y)})),m=_f(e.filter(function(y){return!yf.includes(y)})),l=n.filter(function(y){return a=y,!zg.includes(y)}),h=ho(l,1),p=h[0],b=p===void 0?null:p,f=R1(n),v=fe(fe({},L1(m)),{},{prefix:mo(b,{family:f})});return fe(fe(fe({},v),I1({values:e,family:f,styles:rn,config:Se,canonical:v,givenPrefix:a})),O1(i,a,v))}function O1(e,t,s){var i=s.prefix,a=s.iconName;if(e||!i||!a)return{prefix:i,iconName:a};var n=t==="fa"?jv(a):{},m=Pi(i,a);return a=n.iconName||m||a,i=n.prefix||i,i==="far"&&!rn.far&&rn.fas&&!Se.autoFetchSvg&&(i="fas"),{prefix:i,iconName:a}}var M1=sv.filter(function(e){return e!==jt||e!==Cn}),B1=Object.keys(nu).filter(function(e){return e!==jt}).map(function(e){return Object.keys(nu[e])}).flat();function I1(e){var t=e.values,s=e.family,i=e.canonical,a=e.givenPrefix,n=a===void 0?"":a,m=e.styles,l=m===void 0?{}:m,h=e.config,p=h===void 0?{}:h,b=s===Cn,f=t.includes("fa-duotone")||t.includes("fad"),v=p.familyDefault==="duotone",y=i.prefix==="fad"||i.prefix==="fa-duotone";if(!b&&(f||v||y)&&(i.prefix="fad"),(t.includes("fa-brands")||t.includes("fab"))&&(i.prefix="fab"),!i.prefix&&M1.includes(s)){var w=Object.keys(l).find(function(o){return B1.includes(o)});if(w||p.autoFetchSvg){var S=ex.get(s).defaultShortPrefixId;i.prefix=S,i.iconName=Pi(i.prefix,i.iconName)||i.iconName}}return(i.prefix==="fa"||n==="fa")&&(i.prefix=ji()||"fas"),i}var P1=function(){function e(){Sb(this,e),this.definitions={}}return Cb(e,[{key:"add",value:function(){for(var s=this,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];var m=a.reduce(this._pullDefinitions,{});Object.keys(m).forEach(function(l){s.definitions[l]=fe(fe({},s.definitions[l]||{}),m[l]),hu(l,m[l]);var h=xd[jt][l];h&&hu(h,m[l]),Cv()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(s,i){var a=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(a).map(function(n){var m=a[n],l=m.prefix,h=m.iconName,p=m.icon,b=p[2];s[l]||(s[l]={}),b.length>0&&b.forEach(function(f){typeof f=="string"&&(s[l][f]=p)}),s[l][h]=p}),s}}])}(),bf=[],Dr={},Hr={},z1=Object.keys(Hr);function H1(e,t){var s=t.mixoutsTo;return bf=e,Dr={},Object.keys(Hr).forEach(function(i){z1.indexOf(i)===-1&&delete Hr[i]}),bf.forEach(function(i){var a=i.mixout?i.mixout():{};if(Object.keys(a).forEach(function(m){typeof a[m]=="function"&&(s[m]=a[m]),$l(a[m])==="object"&&Object.keys(a[m]).forEach(function(l){s[m]||(s[m]={}),s[m][l]=a[m][l]})}),i.hooks){var n=i.hooks();Object.keys(n).forEach(function(m){Dr[m]||(Dr[m]=[]),Dr[m].push(n[m])})}i.provides&&i.provides(Hr)}),s}function fu(e,t){for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];var n=Dr[e]||[];return n.forEach(function(m){t=m.apply(null,[t].concat(i))}),t}function er(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];var a=Dr[e]||[];a.forEach(function(n){n.apply(null,s)})}function Ei(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return Hr[e]?Hr[e].apply(null,t):void 0}function mu(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,s=e.prefix||ji();if(t)return t=Pi(s,t)||t,gf(Nv.definitions,s,t)||gf(cs.styles,s,t)}var Nv=new P1,U1=function(){Se.autoReplaceSvg=!1,Se.observeMutations=!1,er("noAuto")},$1={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Vs?(er("beforeI2svg",t),Ei("pseudoElements2svg",t),Ei("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=t.autoReplaceSvgRoot;Se.autoReplaceSvg===!1&&(Se.autoReplaceSvg=!0),Se.observeMutations=!0,j1(function(){q1({autoReplaceSvgRoot:s}),er("watch",t)})}},F1={icon:function(t){if(t===null)return null;if($l(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Pi(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var s=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],i=mo(t[0]);return{prefix:i,iconName:Pi(i,s)||s}}if(typeof t=="string"&&(t.indexOf("".concat(Se.cssPrefix,"-"))>-1||t.match(c1))){var a=po(t.split(" "),{skipLookups:!0});return{prefix:a.prefix||ji(),iconName:Pi(a.prefix,a.iconName)||a.iconName}}if(typeof t=="string"){var n=ji();return{prefix:n,iconName:Pi(n,t)||t}}}},Gt={noAuto:U1,config:Se,dom:$1,parse:F1,library:Nv,findIconDefinition:mu,toHtml:En},q1=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=t.autoReplaceSvgRoot,i=s===void 0?Ze:s;(Object.keys(cs.styles).length>0||Se.autoFetchSvg)&&Vs&&Se.autoReplaceSvg&&Gt.dom.i2svg({node:i})};function go(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(i){return En(i)})}}),Object.defineProperty(e,"node",{get:function(){if(Vs){var i=Ze.createElement("div");return i.innerHTML=e.html,i.children}}}),e}function G1(e){var t=e.children,s=e.main,i=e.mask,a=e.attributes,n=e.styles,m=e.transform;if(wd(m)&&s.found&&!i.found){var l=s.width,h=s.height,p={x:l/h/2,y:.5};a.style=fo(fe(fe({},n),{},{"transform-origin":"".concat(p.x+m.x/16,"em ").concat(p.y+m.y/16,"em")}))}return[{tag:"svg",attributes:a,children:t}]}function K1(e){var t=e.prefix,s=e.iconName,i=e.children,a=e.attributes,n=e.symbol,m=n===!0?"".concat(t,"-").concat(Se.cssPrefix,"-").concat(s):n;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:fe(fe({},a),{},{id:m}),children:i}]}]}function W1(e){var t=["aria-label","aria-labelledby","title","role"];return t.some(function(s){return s in e})}function Ed(e){var t=e.icons,s=t.main,i=t.mask,a=e.prefix,n=e.iconName,m=e.transform,l=e.symbol,h=e.maskId,p=e.extra,b=e.watchable,f=b===void 0?!1:b,v=i.found?i:s,y=v.width,w=v.height,S=[Se.replacementClass,n?"".concat(Se.cssPrefix,"-").concat(n):""].filter(function(_){return p.classes.indexOf(_)===-1}).filter(function(_){return _!==""||!!_}).concat(p.classes).join(" "),o={children:[],attributes:fe(fe({},p.attributes),{},{"data-prefix":a,"data-icon":n,class:S,role:p.attributes.role||"img",viewBox:"0 0 ".concat(y," ").concat(w)})};!W1(p.attributes)&&!p.attributes["aria-hidden"]&&(o.attributes["aria-hidden"]="true"),f&&(o.attributes[Zi]="");var u=fe(fe({},o),{},{prefix:a,iconName:n,main:s,mask:i,maskId:h,transform:m,symbol:l,styles:fe({},p.styles)}),c=i.found&&s.found?Ei("generateAbstractMask",u)||{children:[],attributes:{}}:Ei("generateAbstractIcon",u)||{children:[],attributes:{}},d=c.children,g=c.attributes;return u.children=d,u.attributes=g,l?K1(u):G1(u)}function xf(e){var t=e.content,s=e.width,i=e.height,a=e.transform,n=e.extra,m=e.watchable,l=m===void 0?!1:m,h=fe(fe({},n.attributes),{},{class:n.classes.join(" ")});l&&(h[Zi]="");var p=fe({},n.styles);wd(a)&&(p.transform=S1({transform:a,width:s,height:i}),p["-webkit-transform"]=p.transform);var b=fo(p);b.length>0&&(h.style=b);var f=[];return f.push({tag:"span",attributes:h,children:[t]}),f}function Y1(e){var t=e.content,s=e.extra,i=fe(fe({},s.attributes),{},{class:s.classes.join(" ")}),a=fo(s.styles);a.length>0&&(i.style=a);var n=[];return n.push({tag:"span",attributes:i,children:[t]}),n}var ic=cs.styles;function pu(e){var t=e[0],s=e[1],i=e.slice(4),a=ho(i,1),n=a[0],m=null;return Array.isArray(n)?m={tag:"g",attributes:{class:"".concat(Se.cssPrefix,"-").concat(ec.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Se.cssPrefix,"-").concat(ec.SECONDARY),fill:"currentColor",d:n[0]}},{tag:"path",attributes:{class:"".concat(Se.cssPrefix,"-").concat(ec.PRIMARY),fill:"currentColor",d:n[1]}}]}:m={tag:"path",attributes:{fill:"currentColor",d:n}},{found:!0,width:t,height:s,icon:m}}var V1={found:!1,width:512,height:512};function X1(e,t){!cv&&!Se.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function gu(e,t){var s=t;return t==="fa"&&Se.styleDefault!==null&&(t=ji()),new Promise(function(i,a){if(s==="fa"){var n=jv(e)||{};e=n.iconName||e,t=n.prefix||t}if(e&&t&&ic[t]&&ic[t][e]){var m=ic[t][e];return i(pu(m))}X1(e,t),i(fe(fe({},V1),{},{icon:Se.showMissingIcons&&e?Ei("missingIconAbstract")||{}:{}}))})}var Sf=function(){},vu=Se.measurePerformance&&Fn&&Fn.mark&&Fn.measure?Fn:{mark:Sf,measure:Sf},Sa='FA "7.1.0"',J1=function(t){return vu.mark("".concat(Sa," ").concat(t," begins")),function(){return kv(t)}},kv=function(t){vu.mark("".concat(Sa," ").concat(t," ends")),vu.measure("".concat(Sa," ").concat(t),"".concat(Sa," ").concat(t," begins"),"".concat(Sa," ").concat(t," ends"))},Nd={begin:J1,end:kv},ol=function(){};function wf(e){var t=e.getAttribute?e.getAttribute(Zi):null;return typeof t=="string"}function Q1(e){var t=e.getAttribute?e.getAttribute(yd):null,s=e.getAttribute?e.getAttribute(bd):null;return t&&s}function Z1(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(Se.replacementClass)}function eS(){if(Se.autoReplaceSvg===!0)return cl.replace;var e=cl[Se.autoReplaceSvg];return e||cl.replace}function tS(e){return Ze.createElementNS("http://www.w3.org/2000/svg",e)}function sS(e){return Ze.createElement(e)}function Av(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t.ceFn,i=s===void 0?e.tag==="svg"?tS:sS:s;if(typeof e=="string")return Ze.createTextNode(e);var a=i(e.tag);Object.keys(e.attributes||[]).forEach(function(m){a.setAttribute(m,e.attributes[m])});var n=e.children||[];return n.forEach(function(m){a.appendChild(Av(m,{ceFn:i}))}),a}function iS(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var cl={replace:function(t){var s=t[0];if(s.parentNode)if(t[1].forEach(function(a){s.parentNode.insertBefore(Av(a),s)}),s.getAttribute(Zi)===null&&Se.keepOriginalSource){var i=Ze.createComment(iS(s));s.parentNode.replaceChild(i,s)}else s.remove()},nest:function(t){var s=t[0],i=t[1];if(~Sd(s).indexOf(Se.replacementClass))return cl.replace(t);var a=new RegExp("".concat(Se.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var n=i[0].attributes.class.split(" ").reduce(function(l,h){return h===Se.replacementClass||h.match(a)?l.toSvg.push(h):l.toNode.push(h),l},{toNode:[],toSvg:[]});i[0].attributes.class=n.toSvg.join(" "),n.toNode.length===0?s.removeAttribute("class"):s.setAttribute("class",n.toNode.join(" "))}var m=i.map(function(l){return En(l)}).join(`
`);s.setAttribute(Zi,""),s.innerHTML=m}};function Cf(e){e()}function Tv(e,t){var s=typeof t=="function"?t:ol;if(e.length===0)s();else{var i=Cf;Se.mutateApproach===n1&&(i=Ci.requestAnimationFrame||Cf),i(function(){var a=eS(),n=Nd.begin("mutate");e.map(a),n(),s()})}}var kd=!1;function Dv(){kd=!0}function _u(){kd=!1}var ql=null;function jf(e){if(cf&&Se.observeMutations){var t=e.treeCallback,s=t===void 0?ol:t,i=e.nodeCallback,a=i===void 0?ol:i,n=e.pseudoElementsCallback,m=n===void 0?ol:n,l=e.observeMutationsRoot,h=l===void 0?Ze:l;ql=new cf(function(p){if(!kd){var b=ji();la(p).forEach(function(f){if(f.type==="childList"&&f.addedNodes.length>0&&!wf(f.addedNodes[0])&&(Se.searchPseudoElements&&m(f.target),s(f.target)),f.type==="attributes"&&f.target.parentNode&&Se.searchPseudoElements&&m([f.target],!0),f.type==="attributes"&&wf(f.target)&&~h1.indexOf(f.attributeName))if(f.attributeName==="class"&&Q1(f.target)){var v=po(Sd(f.target)),y=v.prefix,w=v.iconName;f.target.setAttribute(yd,y||b),w&&f.target.setAttribute(bd,w)}else Z1(f.target)&&a(f.target)})}}),Vs&&ql.observe(h,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function rS(){ql&&ql.disconnect()}function aS(e){var t=e.getAttribute("style"),s=[];return t&&(s=t.split(";").reduce(function(i,a){var n=a.split(":"),m=n[0],l=n.slice(1);return m&&l.length>0&&(i[m]=l.join(":").trim()),i},{})),s}function nS(e){var t=e.getAttribute("data-prefix"),s=e.getAttribute("data-icon"),i=e.innerText!==void 0?e.innerText.trim():"",a=po(Sd(e));return a.prefix||(a.prefix=ji()),t&&s&&(a.prefix=t,a.iconName=s),a.iconName&&a.prefix||(a.prefix&&i.length>0&&(a.iconName=T1(a.prefix,e.innerText)||jd(a.prefix,vv(e.innerText))),!a.iconName&&Se.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(a.iconName=e.firstChild.data)),a}function lS(e){var t=la(e.attributes).reduce(function(s,i){return s.name!=="class"&&s.name!=="style"&&(s[i.name]=i.value),s},{});return t}function oS(){return{iconName:null,prefix:null,transform:bs,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function Ef(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},s=nS(e),i=s.iconName,a=s.prefix,n=s.rest,m=lS(e),l=fu("parseNodeAttributes",{},e),h=t.styleParser?aS(e):[];return fe({iconName:i,prefix:a,transform:bs,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:n,styles:h,attributes:m}},l)}var cS=cs.styles;function Rv(e){var t=Se.autoReplaceSvg==="nest"?Ef(e,{styleParser:!1}):Ef(e);return~t.extra.classes.indexOf(dv)?Ei("generateLayersText",e,t):Ei("generateSvgReplacementMutation",e,t)}function uS(){return[].concat(ds(iv),ds(rv))}function Nf(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Vs)return Promise.resolve();var s=Ze.documentElement.classList,i=function(f){return s.add("".concat(hf,"-").concat(f))},a=function(f){return s.remove("".concat(hf,"-").concat(f))},n=Se.autoFetchSvg?uS():zg.concat(Object.keys(cS));n.includes("fa")||n.push("fa");var m=[".".concat(dv,":not([").concat(Zi,"])")].concat(n.map(function(b){return".".concat(b,":not([").concat(Zi,"])")})).join(", ");if(m.length===0)return Promise.resolve();var l=[];try{l=la(e.querySelectorAll(m))}catch{}if(l.length>0)i("pending"),a("complete");else return Promise.resolve();var h=Nd.begin("onTree"),p=l.reduce(function(b,f){try{var v=Rv(f);v&&b.push(v)}catch(y){cv||y.name==="MissingIcon"&&console.error(y)}return b},[]);return new Promise(function(b,f){Promise.all(p).then(function(v){Tv(v,function(){i("active"),i("complete"),a("pending"),typeof t=="function"&&t(),h(),b()})}).catch(function(v){h(),f(v)})})}function dS(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Rv(e).then(function(s){s&&Tv([s],t)})}function hS(e){return function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=(t||{}).icon?t:mu(t||{}),a=s.mask;return a&&(a=(a||{}).icon?a:mu(a||{})),e(i,fe(fe({},s),{},{mask:a}))}}var fS=function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.transform,a=i===void 0?bs:i,n=s.symbol,m=n===void 0?!1:n,l=s.mask,h=l===void 0?null:l,p=s.maskId,b=p===void 0?null:p,f=s.classes,v=f===void 0?[]:f,y=s.attributes,w=y===void 0?{}:y,S=s.styles,o=S===void 0?{}:S;if(t){var u=t.prefix,c=t.iconName,d=t.icon;return go(fe({type:"icon"},t),function(){return er("beforeDOMElementCreation",{iconDefinition:t,params:s}),Ed({icons:{main:pu(d),mask:h?pu(h.icon):{found:!1,width:null,height:null,icon:{}}},prefix:u,iconName:c,transform:fe(fe({},bs),a),symbol:m,maskId:b,extra:{attributes:w,styles:o,classes:v}})})}},mS={mixout:function(){return{icon:hS(fS)}},hooks:function(){return{mutationObserverCallbacks:function(s){return s.treeCallback=Nf,s.nodeCallback=dS,s}}},provides:function(t){t.i2svg=function(s){var i=s.node,a=i===void 0?Ze:i,n=s.callback,m=n===void 0?function(){}:n;return Nf(a,m)},t.generateSvgReplacementMutation=function(s,i){var a=i.iconName,n=i.prefix,m=i.transform,l=i.symbol,h=i.mask,p=i.maskId,b=i.extra;return new Promise(function(f,v){Promise.all([gu(a,n),h.iconName?gu(h.iconName,h.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(y){var w=ho(y,2),S=w[0],o=w[1];f([s,Ed({icons:{main:S,mask:o},prefix:n,iconName:a,transform:m,symbol:l,maskId:p,extra:b,watchable:!0})])}).catch(v)})},t.generateAbstractIcon=function(s){var i=s.children,a=s.attributes,n=s.main,m=s.transform,l=s.styles,h=fo(l);h.length>0&&(a.style=h);var p;return wd(m)&&(p=Ei("generateAbstractTransformGrouping",{main:n,transform:m,containerWidth:n.width,iconWidth:n.width})),i.push(p||n.icon),{children:i,attributes:a}}}},pS={mixout:function(){return{layer:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.classes,n=a===void 0?[]:a;return go({type:"layer"},function(){er("beforeDOMElementCreation",{assembler:s,params:i});var m=[];return s(function(l){Array.isArray(l)?l.map(function(h){m=m.concat(h.abstract)}):m=m.concat(l.abstract)}),[{tag:"span",attributes:{class:["".concat(Se.cssPrefix,"-layers")].concat(ds(n)).join(" ")},children:m}]})}}}},gS={mixout:function(){return{counter:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i.title;var a=i.classes,n=a===void 0?[]:a,m=i.attributes,l=m===void 0?{}:m,h=i.styles,p=h===void 0?{}:h;return go({type:"counter",content:s},function(){return er("beforeDOMElementCreation",{content:s,params:i}),Y1({content:s.toString(),extra:{attributes:l,styles:p,classes:["".concat(Se.cssPrefix,"-layers-counter")].concat(ds(n))}})})}}}},vS={mixout:function(){return{text:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.transform,n=a===void 0?bs:a,m=i.classes,l=m===void 0?[]:m,h=i.attributes,p=h===void 0?{}:h,b=i.styles,f=b===void 0?{}:b;return go({type:"text",content:s},function(){return er("beforeDOMElementCreation",{content:s,params:i}),xf({content:s,transform:fe(fe({},bs),n),extra:{attributes:p,styles:f,classes:["".concat(Se.cssPrefix,"-layers-text")].concat(ds(l))}})})}}},provides:function(t){t.generateLayersText=function(s,i){var a=i.transform,n=i.extra,m=null,l=null;if(Ig){var h=parseInt(getComputedStyle(s).fontSize,10),p=s.getBoundingClientRect();m=p.width/h,l=p.height/h}return Promise.resolve([s,xf({content:s.innerHTML,width:m,height:l,transform:a,extra:n,watchable:!0})])}}},Lv=new RegExp('"',"ug"),kf=[1105920,1112319],Af=fe(fe(fe(fe({},{FontAwesome:{normal:"fas",400:"fas"}}),Zb),r1),ox),yu=Object.keys(Af).reduce(function(e,t){return e[t.toLowerCase()]=Af[t],e},{}),_S=Object.keys(yu).reduce(function(e,t){var s=yu[t];return e[t]=s[900]||ds(Object.entries(s))[0][1],e},{});function yS(e){var t=e.replace(Lv,"");return vv(ds(t)[0]||"")}function bS(e){var t=e.getPropertyValue("font-feature-settings").includes("ss01"),s=e.getPropertyValue("content"),i=s.replace(Lv,""),a=i.codePointAt(0),n=a>=kf[0]&&a<=kf[1],m=i.length===2?i[0]===i[1]:!1;return n||m||t}function xS(e,t){var s=e.replace(/^['"]|['"]$/g,"").toLowerCase(),i=parseInt(t),a=isNaN(i)?"normal":i;return(yu[s]||{})[a]||_S[s]}function Tf(e,t){var s="".concat(a1).concat(t.replace(":","-"));return new Promise(function(i,a){if(e.getAttribute(s)!==null)return i();var n=la(e.children),m=n.filter(function(C){return C.getAttribute(ou)===t})[0],l=Ci.getComputedStyle(e,t),h=l.getPropertyValue("font-family"),p=h.match(u1),b=l.getPropertyValue("font-weight"),f=l.getPropertyValue("content");if(m&&!p)return e.removeChild(m),i();if(p&&f!=="none"&&f!==""){var v=l.getPropertyValue("content"),y=xS(h,b),w=yS(v),S=p[0].startsWith("FontAwesome"),o=bS(l),u=jd(y,w),c=u;if(S){var d=D1(w);d.iconName&&d.prefix&&(u=d.iconName,y=d.prefix)}if(u&&!o&&(!m||m.getAttribute(yd)!==y||m.getAttribute(bd)!==c)){e.setAttribute(s,c),m&&e.removeChild(m);var g=oS(),_=g.extra;_.attributes[ou]=t,gu(u,y).then(function(C){var j=Ed(fe(fe({},g),{},{icons:{main:C,mask:Ev()},prefix:y,iconName:c,extra:_,watchable:!0})),x=Ze.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(x,e.firstChild):e.appendChild(x),x.outerHTML=j.map(function(E){return En(E)}).join(`
`),e.removeAttribute(s),i()}).catch(a)}else i()}else i()})}function SS(e){return Promise.all([Tf(e,"::before"),Tf(e,"::after")])}function wS(e){return e.parentNode!==document.head&&!~l1.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(ou)&&(!e.parentNode||e.parentNode.tagName!=="svg")}var CS=function(t){return!!t&&ov.some(function(s){return t.includes(s)})},jS=function(t){if(!t)return[];var s=new Set,i=t.split(/,(?![^()]*\))/).map(function(h){return h.trim()});i=i.flatMap(function(h){return h.includes("(")?h:h.split(",").map(function(p){return p.trim()})});var a=ll(i),n;try{for(a.s();!(n=a.n()).done;){var m=n.value;if(CS(m)){var l=ov.reduce(function(h,p){return h.replace(p,"")},m);l!==""&&l!=="*"&&s.add(l)}}}catch(h){a.e(h)}finally{a.f()}return s};function Df(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Vs){var s;if(t)s=e;else if(Se.searchPseudoElementsFullScan)s=e.querySelectorAll("*");else{var i=new Set,a=ll(document.styleSheets),n;try{for(a.s();!(n=a.n()).done;){var m=n.value;try{var l=ll(m.cssRules),h;try{for(l.s();!(h=l.n()).done;){var p=h.value,b=jS(p.selectorText),f=ll(b),v;try{for(f.s();!(v=f.n()).done;){var y=v.value;i.add(y)}}catch(S){f.e(S)}finally{f.f()}}}catch(S){l.e(S)}finally{l.f()}}catch(S){Se.searchPseudoElementsWarnings&&console.warn("Font Awesome: cannot parse stylesheet: ".concat(m.href," (").concat(S.message,`)
If it declares any Font Awesome CSS pseudo-elements, they will not be rendered as SVG icons. Add crossorigin="anonymous" to the <link>, enable searchPseudoElementsFullScan for slower but more thorough DOM parsing, or suppress this warning by setting searchPseudoElementsWarnings to false.`))}}}catch(S){a.e(S)}finally{a.f()}if(!i.size)return;var w=Array.from(i).join(", ");try{s=e.querySelectorAll(w)}catch{}}return new Promise(function(S,o){var u=la(s).filter(wS).map(SS),c=Nd.begin("searchPseudoElements");Dv(),Promise.all(u).then(function(){c(),_u(),S()}).catch(function(){c(),_u(),o()})})}}var ES={hooks:function(){return{mutationObserverCallbacks:function(s){return s.pseudoElementsCallback=Df,s}}},provides:function(t){t.pseudoElements2svg=function(s){var i=s.node,a=i===void 0?Ze:i;Se.searchPseudoElements&&Df(a)}}},Rf=!1,NS={mixout:function(){return{dom:{unwatch:function(){Dv(),Rf=!0}}}},hooks:function(){return{bootstrap:function(){jf(fu("mutationObserverCallbacks",{}))},noAuto:function(){rS()},watch:function(s){var i=s.observeMutationsRoot;Rf?_u():jf(fu("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},Lf=function(t){var s={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(i,a){var n=a.toLowerCase().split("-"),m=n[0],l=n.slice(1).join("-");if(m&&l==="h")return i.flipX=!0,i;if(m&&l==="v")return i.flipY=!0,i;if(l=parseFloat(l),isNaN(l))return i;switch(m){case"grow":i.size=i.size+l;break;case"shrink":i.size=i.size-l;break;case"left":i.x=i.x-l;break;case"right":i.x=i.x+l;break;case"up":i.y=i.y-l;break;case"down":i.y=i.y+l;break;case"rotate":i.rotate=i.rotate+l;break}return i},s)},kS={mixout:function(){return{parse:{transform:function(s){return Lf(s)}}}},hooks:function(){return{parseNodeAttributes:function(s,i){var a=i.getAttribute("data-fa-transform");return a&&(s.transform=Lf(a)),s}}},provides:function(t){t.generateAbstractTransformGrouping=function(s){var i=s.main,a=s.transform,n=s.containerWidth,m=s.iconWidth,l={transform:"translate(".concat(n/2," 256)")},h="translate(".concat(a.x*32,", ").concat(a.y*32,") "),p="scale(".concat(a.size/16*(a.flipX?-1:1),", ").concat(a.size/16*(a.flipY?-1:1),") "),b="rotate(".concat(a.rotate," 0 0)"),f={transform:"".concat(h," ").concat(p," ").concat(b)},v={transform:"translate(".concat(m/2*-1," -256)")},y={outer:l,inner:f,path:v};return{tag:"g",attributes:fe({},y.outer),children:[{tag:"g",attributes:fe({},y.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:fe(fe({},i.icon.attributes),y.path)}]}]}}}},rc={x:0,y:0,width:"100%",height:"100%"};function Of(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function AS(e){return e.tag==="g"?e.children:[e]}var TS={hooks:function(){return{parseNodeAttributes:function(s,i){var a=i.getAttribute("data-fa-mask"),n=a?po(a.split(" ").map(function(m){return m.trim()})):Ev();return n.prefix||(n.prefix=ji()),s.mask=n,s.maskId=i.getAttribute("data-fa-mask-id"),s}}},provides:function(t){t.generateAbstractMask=function(s){var i=s.children,a=s.attributes,n=s.main,m=s.mask,l=s.maskId,h=s.transform,p=n.width,b=n.icon,f=m.width,v=m.icon,y=x1({transform:h,containerWidth:f,iconWidth:p}),w={tag:"rect",attributes:fe(fe({},rc),{},{fill:"white"})},S=b.children?{children:b.children.map(Of)}:{},o={tag:"g",attributes:fe({},y.inner),children:[Of(fe({tag:b.tag,attributes:fe(fe({},b.attributes),y.path)},S))]},u={tag:"g",attributes:fe({},y.outer),children:[o]},c="mask-".concat(l||mf()),d="clip-".concat(l||mf()),g={tag:"mask",attributes:fe(fe({},rc),{},{id:c,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[w,u]},_={tag:"defs",children:[{tag:"clipPath",attributes:{id:d},children:AS(v)},g]};return i.push(_,{tag:"rect",attributes:fe({fill:"currentColor","clip-path":"url(#".concat(d,")"),mask:"url(#".concat(c,")")},rc)}),{children:i,attributes:a}}}},DS={provides:function(t){var s=!1;Ci.matchMedia&&(s=Ci.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var i=[],a={fill:"currentColor"},n={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:fe(fe({},a),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var m=fe(fe({},n),{},{attributeName:"opacity"}),l={tag:"circle",attributes:fe(fe({},a),{},{cx:"256",cy:"364",r:"28"}),children:[]};return s||l.children.push({tag:"animate",attributes:fe(fe({},n),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:fe(fe({},m),{},{values:"1;0;1;1;0;1;"})}),i.push(l),i.push({tag:"path",attributes:fe(fe({},a),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:s?[]:[{tag:"animate",attributes:fe(fe({},m),{},{values:"1;0;0;0;0;1;"})}]}),s||i.push({tag:"path",attributes:fe(fe({},a),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:fe(fe({},m),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},RS={hooks:function(){return{parseNodeAttributes:function(s,i){var a=i.getAttribute("data-fa-symbol"),n=a===null?!1:a===""?!0:a;return s.symbol=n,s}}}},LS=[C1,mS,pS,gS,vS,ES,NS,kS,TS,DS,RS];H1(LS,{mixoutsTo:Gt});Gt.noAuto;var an=Gt.config;Gt.library;Gt.dom;var Ov=Gt.parse;Gt.findIconDefinition;Gt.toHtml;var OS=Gt.icon;Gt.layer;Gt.text;Gt.counter;function MS(e){return e=e-0,e===e}function Mv(e){return MS(e)?e:(e=e.replace(/[_-]+(.)?/g,(t,s)=>s?s.toUpperCase():""),e.charAt(0).toLowerCase()+e.slice(1))}function BS(e){return e.charAt(0).toUpperCase()+e.slice(1)}var mr=new Map,IS=1e3;function PS(e){if(mr.has(e))return mr.get(e);const t={};let s=0;const i=e.length;for(;s<i;){const a=e.indexOf(";",s),n=a===-1?i:a,m=e.slice(s,n).trim();if(m){const l=m.indexOf(":");if(l>0){const h=m.slice(0,l).trim(),p=m.slice(l+1).trim();if(h&&p){const b=Mv(h);t[b.startsWith("webkit")?BS(b):b]=p}}}s=n+1}if(mr.size===IS){const a=mr.keys().next().value;a&&mr.delete(a)}return mr.set(e,t),t}function Bv(e,t,s={}){if(typeof t=="string")return t;const i=(t.children||[]).map(b=>Bv(e,b)),a=t.attributes||{},n={};for(const[b,f]of Object.entries(a))switch(!0){case b==="class":{n.className=f;break}case b==="style":{n.style=PS(String(f));break}case b.startsWith("aria-"):case b.startsWith("data-"):{n[b.toLowerCase()]=f;break}default:n[Mv(b)]=f}const{style:m,role:l,"aria-label":h,...p}=s;return m&&(n.style=n.style?{...n.style,...m}:m),l&&(n.role=l),h&&(n["aria-label"]=h,n["aria-hidden"]="false"),e(t.tag,{...p,...n},...i)}var zS=Bv.bind(null,ge.createElement),Mf=(e,t)=>{const s=M.useId();return e||(t?s:void 0)},HS=class{constructor(e="react-fontawesome"){this.enabled=!1;let t=!1;try{t=typeof process<"u"&&!1}catch{}this.scope=e,this.enabled=t}log(...e){this.enabled&&console.log(`[${this.scope}]`,...e)}warn(...e){this.enabled&&console.warn(`[${this.scope}]`,...e)}error(...e){this.enabled&&console.error(`[${this.scope}]`,...e)}},US="searchPseudoElementsFullScan"in an?"7.0.0":"6.0.0",$S=Number.parseInt(US)>=7,Ha="fa",Rs={beat:"fa-beat",fade:"fa-fade",beatFade:"fa-beat-fade",bounce:"fa-bounce",shake:"fa-shake",spin:"fa-spin",spinPulse:"fa-spin-pulse",spinReverse:"fa-spin-reverse",pulse:"fa-pulse"},FS={left:"fa-pull-left",right:"fa-pull-right"},qS={90:"fa-rotate-90",180:"fa-rotate-180",270:"fa-rotate-270"},GS={"2xs":"fa-2xs",xs:"fa-xs",sm:"fa-sm",lg:"fa-lg",xl:"fa-xl","2xl":"fa-2xl","1x":"fa-1x","2x":"fa-2x","3x":"fa-3x","4x":"fa-4x","5x":"fa-5x","6x":"fa-6x","7x":"fa-7x","8x":"fa-8x","9x":"fa-9x","10x":"fa-10x"},Ls={border:"fa-border",fixedWidth:"fa-fw",flip:"fa-flip",flipHorizontal:"fa-flip-horizontal",flipVertical:"fa-flip-vertical",inverse:"fa-inverse",rotateBy:"fa-rotate-by",swapOpacity:"fa-swap-opacity",widthAuto:"fa-width-auto"};function KS(e){const t=an.cssPrefix||an.familyPrefix||Ha;return t===Ha?e:e.replace(new RegExp(String.raw`(?<=^|\s)${Ha}-`,"g"),`${t}-`)}function WS(e){const{beat:t,fade:s,beatFade:i,bounce:a,shake:n,spin:m,spinPulse:l,spinReverse:h,pulse:p,fixedWidth:b,inverse:f,border:v,flip:y,size:w,rotation:S,pull:o,swapOpacity:u,rotateBy:c,widthAuto:d,className:g}=e,_=[];return g&&_.push(...g.split(" ")),t&&_.push(Rs.beat),s&&_.push(Rs.fade),i&&_.push(Rs.beatFade),a&&_.push(Rs.bounce),n&&_.push(Rs.shake),m&&_.push(Rs.spin),h&&_.push(Rs.spinReverse),l&&_.push(Rs.spinPulse),p&&_.push(Rs.pulse),b&&_.push(Ls.fixedWidth),f&&_.push(Ls.inverse),v&&_.push(Ls.border),y===!0&&_.push(Ls.flip),(y==="horizontal"||y==="both")&&_.push(Ls.flipHorizontal),(y==="vertical"||y==="both")&&_.push(Ls.flipVertical),w!=null&&_.push(GS[w]),S!=null&&S!==0&&_.push(qS[S]),o!=null&&_.push(FS[o]),u&&_.push(Ls.swapOpacity),$S?(c&&_.push(Ls.rotateBy),d&&_.push(Ls.widthAuto),(an.cssPrefix||an.familyPrefix||Ha)===Ha?_:_.map(KS)):_}var YS=e=>typeof e=="object"&&"icon"in e&&!!e.icon;function Bf(e){if(e)return YS(e)?e:Ov.icon(e)}function VS(e){return Object.keys(e)}var If=new HS("FontAwesomeIcon"),Iv={border:!1,className:"",mask:void 0,maskId:void 0,fixedWidth:!1,inverse:!1,flip:!1,icon:void 0,listItem:!1,pull:void 0,pulse:!1,rotation:void 0,rotateBy:!1,size:void 0,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:void 0,transform:void 0,swapOpacity:!1,widthAuto:!1},XS=new Set(Object.keys(Iv)),Pv=ge.forwardRef((e,t)=>{const s={...Iv,...e},{icon:i,mask:a,symbol:n,title:m,titleId:l,maskId:h,transform:p}=s,b=Mf(h,!!a),f=Mf(l,!!m),v=Bf(i);if(!v)return If.error("Icon lookup is undefined",i),null;const y=WS(s),w=typeof p=="string"?Ov.transform(p):p,S=Bf(a),o=OS(v,{...y.length>0&&{classes:y},...w&&{transform:w},...S&&{mask:S},symbol:n,title:m,titleId:f,maskId:b});if(!o)return If.error("Could not find icon",v),null;const{abstract:u}=o,c={ref:t};for(const d of VS(s))XS.has(d)||(c[d]=s[d]);return zS(u[0],c)});Pv.displayName="FontAwesomeIcon";/*!
 * Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2025 Fonticons, Inc.
 */var JS={prefix:"fas",iconName:"message",icon:[512,512,["comment-alt"],"f27a","M0 352L0 128C0 75 43 32 96 32l320 0c53 0 96 43 96 96l0 224c0 53-43 96-96 96l-120 0c-5.2 0-10.2 1.7-14.4 4.8L166.4 539.2c-4.2 3.1-9.2 4.8-14.4 4.8-13.3 0-24-10.7-24-24l0-72-32 0c-53 0-96-43-96-96z"]},QS={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376C296.3 401.1 253.9 416 208 416 93.1 416 0 322.9 0 208S93.1 0 208 0 416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},ZS={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6-46.8 43.5-78.1 95.4-93 131.1-3.3 7.9-3.3 16.7 0 24.6 14.9 35.7 46.2 87.7 93 131.1 47.1 43.7 111.8 80.6 192.6 80.6s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1 3.3-7.9 3.3-16.7 0-24.6-14.9-35.7-46.2-87.7-93-131.1-47.1-43.7-111.8-80.6-192.6-80.6zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64-11.5 0-22.3-3-31.7-8.4-1 10.9-.1 22.1 2.9 33.2 13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-12.2-45.7-55.5-74.8-101.1-70.8 5.3 9.3 8.4 20.1 8.4 31.7z"]},e2={prefix:"fas",iconName:"paper-plane",icon:[576,512,[61913],"f1d8","M536.4-26.3c9.8-3.5 20.6-1 28 6.3s9.8 18.2 6.3 28l-178 496.9c-5 13.9-18.1 23.1-32.8 23.1-14.2 0-27-8.6-32.3-21.7l-64.2-158c-4.5-11-2.5-23.6 5.2-32.6l94.5-112.4c5.1-6.1 4.7-15-.9-20.6s-14.6-6-20.6-.9L229.2 276.1c-9.1 7.6-21.6 9.6-32.6 5.2L38.1 216.8c-13.1-5.3-21.7-18.1-21.7-32.3 0-14.7 9.2-27.8 23.1-32.8l496.9-178z"]},t2={prefix:"fas",iconName:"database",icon:[448,512,[],"f1c0","M448 205.8c-14.8 9.8-31.8 17.7-49.5 24-47 16.8-108.7 26.2-174.5 26.2S96.4 246.5 49.5 229.8c-17.6-6.3-34.7-14.2-49.5-24L0 288c0 44.2 100.3 80 224 80s224-35.8 224-80l0-82.2zm0-77.8l0-48C448 35.8 347.7 0 224 0S0 35.8 0 80l0 48c0 44.2 100.3 80 224 80s224-35.8 224-80zM398.5 389.8C351.6 406.5 289.9 416 224 416S96.4 406.5 49.5 389.8c-17.6-6.3-34.7-14.2-49.5-24L0 432c0 44.2 100.3 80 224 80s224-35.8 224-80l0-66.2c-14.8 9.8-31.8 17.7-49.5 24z"]},s2={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M195.1 9.5C198.1-5.3 211.2-16 226.4-16l59.8 0c15.2 0 28.3 10.7 31.3 25.5L332 79.5c14.1 6 27.3 13.7 39.3 22.8l67.8-22.5c14.4-4.8 30.2 1.2 37.8 14.4l29.9 51.8c7.6 13.2 4.9 29.8-6.5 39.9L447 233.3c.9 7.4 1.3 15 1.3 22.7s-.5 15.3-1.3 22.7l53.4 47.5c11.4 10.1 14 26.8 6.5 39.9l-29.9 51.8c-7.6 13.1-23.4 19.2-37.8 14.4l-67.8-22.5c-12.1 9.1-25.3 16.7-39.3 22.8l-14.4 69.9c-3.1 14.9-16.2 25.5-31.3 25.5l-59.8 0c-15.2 0-28.3-10.7-31.3-25.5l-14.4-69.9c-14.1-6-27.2-13.7-39.3-22.8L73.5 432.3c-14.4 4.8-30.2-1.2-37.8-14.4L5.8 366.1c-7.6-13.2-4.9-29.8 6.5-39.9l53.4-47.5c-.9-7.4-1.3-15-1.3-22.7s.5-15.3 1.3-22.7L12.3 185.8c-11.4-10.1-14-26.8-6.5-39.9L35.7 94.1c7.6-13.2 23.4-19.2 37.8-14.4l67.8 22.5c12.1-9.1 25.3-16.7 39.3-22.8L195.1 9.5zM256.3 336a80 80 0 1 0 -.6-160 80 80 0 1 0 .6 160z"]},zv={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm0-336c-17.7 0-32 14.3-32 32 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-44.2 35.8-80 80-80s80 35.8 80 80c0 47.2-36 67.2-56 74.5l0 3.8c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-8.1c0-20.5 14.8-35.2 30.1-40.2 6.4-2.1 13.2-5.5 18.2-10.3 4.3-4.2 7.7-10 7.7-19.6 0-17.7-14.3-32-32-32zM224 368a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},i2={prefix:"fas",iconName:"play",icon:[448,512,[9654],"f04b","M91.2 36.9c-12.4-6.8-27.4-6.5-39.6 .7S32 57.9 32 72l0 368c0 14.1 7.5 27.2 19.6 34.4s27.2 7.5 39.6 .7l336-184c12.8-7 20.8-20.5 20.8-35.1s-8-28.1-20.8-35.1l-336-184z"]},r2={prefix:"fas",iconName:"trash-can",icon:[448,512,[61460,"trash-alt"],"f2ed","M136.7 5.9C141.1-7.2 153.3-16 167.1-16l113.9 0c13.8 0 26 8.8 30.4 21.9L320 32 416 32c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 96C14.3 96 0 81.7 0 64S14.3 32 32 32l96 0 8.7-26.1zM32 144l384 0 0 304c0 35.3-28.7 64-64 64L96 512c-35.3 0-64-28.7-64-64l0-304zm88 64c-13.3 0-24 10.7-24 24l0 192c0 13.3 10.7 24 24 24s24-10.7 24-24l0-192c0-13.3-10.7-24-24-24zm104 0c-13.3 0-24 10.7-24 24l0 192c0 13.3 10.7 24 24 24s24-10.7 24-24l0-192c0-13.3-10.7-24-24-24zm104 0c-13.3 0-24 10.7-24 24l0 192c0 13.3 10.7 24 24 24s24-10.7 24-24l0-192c0-13.3-10.7-24-24-24z"]},a2={prefix:"fas",iconName:"server",icon:[448,512,[],"f233","M64 32C28.7 32 0 60.7 0 96l0 64c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-64c0-35.3-28.7-64-64-64L64 32zm216 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm56 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zM64 288c-35.3 0-64 28.7-64 64l0 64c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-64c0-35.3-28.7-64-64-64L64 288zm216 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm56 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0z"]},n2={prefix:"fas",iconName:"list",icon:[512,512,["list-squares"],"f03a","M40 48C26.7 48 16 58.7 16 72l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24L40 48zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L192 64zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zM16 232l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0z"]},l2={prefix:"fas",iconName:"globe",icon:[512,512,[127760],"f0ac","M351.9 280l-190.9 0c2.9 64.5 17.2 123.9 37.5 167.4 11.4 24.5 23.7 41.8 35.1 52.4 11.2 10.5 18.9 12.2 22.9 12.2s11.7-1.7 22.9-12.2c11.4-10.6 23.7-28 35.1-52.4 20.3-43.5 34.6-102.9 37.5-167.4zM160.9 232l190.9 0C349 167.5 334.7 108.1 314.4 64.6 303 40.2 290.7 22.8 279.3 12.2 268.1 1.7 260.4 0 256.4 0s-11.7 1.7-22.9 12.2c-11.4 10.6-23.7 28-35.1 52.4-20.3 43.5-34.6 102.9-37.5 167.4zm-48 0C116.4 146.4 138.5 66.9 170.8 14.7 78.7 47.3 10.9 131.2 1.5 232l111.4 0zM1.5 280c9.4 100.8 77.2 184.7 169.3 217.3-32.3-52.2-54.4-131.7-57.9-217.3L1.5 280zm398.4 0c-3.5 85.6-25.6 165.1-57.9 217.3 92.1-32.7 159.9-116.5 169.3-217.3l-111.4 0zm111.4-48C501.9 131.2 434.1 47.3 342 14.7 374.3 66.9 396.4 146.4 399.9 232l111.4 0z"]},o2={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 160-160 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l160 0 0 160c0 17.7 14.3 32 32 32s32-14.3 32-32l0-160 160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-160 0 0-160z"]},c2={prefix:"fas",iconName:"copy",icon:[448,512,[],"f0c5","M192 0c-35.3 0-64 28.7-64 64l0 256c0 35.3 28.7 64 64 64l192 0c35.3 0 64-28.7 64-64l0-200.6c0-17.4-7.1-34.1-19.7-46.2L370.6 17.8C358.7 6.4 342.8 0 326.3 0L192 0zM64 128c-35.3 0-64 28.7-64 64L0 448c0 35.3 28.7 64 64 64l192 0c35.3 0 64-28.7 64-64l0-16-64 0 0 16-192 0 0-256 16 0 0-64-16 0z"]},u2={prefix:"fas",iconName:"eye-slash",icon:[576,512,[],"f070","M41-24.9c-9.4-9.4-24.6-9.4-33.9 0S-2.3-.3 7 9.1l528 528c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-96.4-96.4c2.7-2.4 5.4-4.8 8-7.2 46.8-43.5 78.1-95.4 93-131.1 3.3-7.9 3.3-16.7 0-24.6-14.9-35.7-46.2-87.7-93-131.1-47.1-43.7-111.8-80.6-192.6-80.6-56.8 0-105.6 18.2-146 44.2L41-24.9zM204.5 138.7c23.5-16.8 52.4-26.7 83.5-26.7 79.5 0 144 64.5 144 144 0 31.1-9.9 59.9-26.7 83.5l-34.7-34.7c12.7-21.4 17-47.7 10.1-73.7-13.7-51.2-66.4-81.6-117.6-67.9-8.6 2.3-16.7 5.7-24 10l-34.7-34.7zM325.3 395.1c-11.9 3.2-24.4 4.9-37.3 4.9-79.5 0-144-64.5-144-144 0-12.9 1.7-25.4 4.9-37.3L69.4 139.2c-32.6 36.8-55 75.8-66.9 104.5-3.3 7.9-3.3 16.7 0 24.6 14.9 35.7 46.2 87.7 93 131.1 47.1 43.7 111.8 80.6 192.6 80.6 37.3 0 71.2-7.9 101.5-20.6l-64.2-64.2z"]},d2={prefix:"fas",iconName:"bolt",icon:[448,512,[9889,"zap"],"f0e7","M338.8-9.9c11.9 8.6 16.3 24.2 10.9 37.8L271.3 224 416 224c13.5 0 25.5 8.4 30.1 21.1s.7 26.9-9.6 35.5l-288 240c-11.3 9.4-27.4 9.9-39.3 1.3s-16.3-24.2-10.9-37.8L176.7 288 32 288c-13.5 0-25.5-8.4-30.1-21.1s-.7-26.9 9.6-35.5l288-240c11.3-9.4 27.4-9.9 39.3-1.3z"]},h2={prefix:"fas",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M64 32l320 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96C0 60.7 28.7 32 64 32z"]},f2={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M65.9 228.5c13.3-93 93.4-164.5 190.1-164.5 53 0 101 21.5 135.8 56.2 .2 .2 .4 .4 .6 .6l7.6 7.2-47.9 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 53.4-11.3-10.7C390.5 28.6 326.5 0 256 0 127 0 20.3 95.4 2.6 219.5 .1 237 12.2 253.2 29.7 255.7s33.7-9.7 36.2-27.1zm443.5 64c2.5-17.5-9.7-33.7-27.1-36.2s-33.7 9.7-36.2 27.1c-13.3 93-93.4 164.5-190.1 164.5-53 0-101-21.5-135.8-56.2-.2-.2-.4-.4-.6-.6l-7.6-7.2 47.9 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 320c-8.5 0-16.7 3.4-22.7 9.5S-.1 343.7 0 352.3l1 127c.1 17.7 14.6 31.9 32.3 31.7S65.2 496.4 65 478.7l-.4-51.5 10.7 10.1c46.3 46.1 110.2 74.7 180.7 74.7 129 0 235.7-95.4 253.4-219.5z"]},m2={prefix:"fas",iconName:"layer-group",icon:[512,512,[],"f5fd","M232.5 5.2c14.9-6.9 32.1-6.9 47 0l218.6 101c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L13.9 149.8C5.4 145.8 0 137.3 0 128s5.4-17.9 13.9-21.8L232.5 5.2zM48.1 218.4l164.3 75.9c27.7 12.8 59.6 12.8 87.3 0l164.3-75.9 34.1 15.8c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L13.9 277.8C5.4 273.8 0 265.3 0 256s5.4-17.9 13.9-21.8l34.1-15.8zM13.9 362.2l34.1-15.8 164.3 75.9c27.7 12.8 59.6 12.8 87.3 0l164.3-75.9 34.1 15.8c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L13.9 405.8C5.4 401.8 0 393.3 0 384s5.4-17.9 13.9-21.8z"]};const p2={plus:o2,"circle-question":zv,"magnifying-glass":QS,"arrows-rotate":f2,"paper-plane":e2,eye:ZS,"eye-slash":u2,copy:c2,"trash-can":r2,play:i2,square:h2,gear:s2,database:t2,globe:l2,server:a2,bolt:d2,"message-square":JS,layers:m2,list:n2};function ul({name:e,size:t=16,className:s=""}){const i=p2[e]||zv;return r.jsx(Pv,{icon:i,className:s,style:{fontSize:`${t}px`}})}function g2({onOpenWorkspace:e,activeTabKind:t}){const s=({iconName:i,label:a,onClick:n,active:m=!1})=>r.jsxs("button",{onClick:n,className:`w-full flex items-center gap-3 px-4 py-2 rounded-md text-sm hover:bg-gray-100 transition ${m?"bg-gray-100 font-medium":""}`,children:[r.jsx(ul,{name:i,size:18,className:"text-gray-700"}),r.jsx("span",{children:a})]});return r.jsxs("aside",{className:"w-64 border-r border-gray-200 bg-white p-4 space-y-4",children:[r.jsx("div",{className:"px-2 text-xs uppercase text-gray-500 tracking-wide",children:"General"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(s,{iconName:"layout",label:"Dashboard",onClick:()=>e("dashboard")}),r.jsx(s,{iconName:"list",label:"Connections",onClick:()=>e("connections")}),r.jsx(s,{iconName:"globe",label:"Examples",onClick:()=>e("examples")})]}),r.jsx("div",{className:"pt-4 border-t border-gray-200"}),r.jsx("div",{className:"px-2 text-xs uppercase text-gray-500 tracking-wide",children:"Workspaces"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(s,{iconName:"globe",label:"REST",onClick:()=>e("rest"),active:t==="rest"}),r.jsx(s,{iconName:"server",label:"OPC UA",onClick:()=>e("opcua")}),r.jsx(s,{iconName:"bolt",label:"WebSocket",onClick:()=>e("ws")}),r.jsx(s,{iconName:"layers",label:"SSH",onClick:()=>e("ssh")}),r.jsx(s,{iconName:"server",label:"Kubernetes",onClick:()=>e("k8s")}),r.jsx(s,{iconName:"message-square",label:"gRPC",onClick:()=>e("grpc")}),r.jsx(s,{iconName:"layers",label:"CPD",onClick:()=>e("cpd")}),r.jsx(s,{iconName:"database",label:"SQL",onClick:()=>e("sql")}),r.jsx(s,{iconName:"layers",label:"File Commander",onClick:()=>e("commander")})]}),r.jsx("div",{className:"pt-4 border-t border-gray-200"}),r.jsx("div",{className:"px-2 text-xs uppercase text-gray-500 tracking-wide",children:"Tools"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(s,{iconName:"activity",label:"Network Tools",onClick:()=>e("helpers-network")}),r.jsx(s,{iconName:"braces",label:"JSON/YAML Tools",onClick:()=>e("helpers-format")})]}),r.jsx("div",{className:"pt-4 border-t border-gray-200"}),r.jsx("div",{className:"px-2 text-xs uppercase text-gray-500 tracking-wide",children:"System"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(s,{iconName:"gear",label:"Settings",onClick:()=>{}}),r.jsx(s,{iconName:"list",label:"Templates",onClick:()=>e("templates")})]})]})}const v2={sm:"h-8 px-3 text-[12px] leading-4",md:"h-10 px-4 text-base leading-6",lg:"h-12 px-5 text-base leading-6"},_2="inline-flex items-center justify-center rounded-[4px] font-semibold select-none disabled:opacity-50 disabled:cursor-not-allowed transition-colors",y2={primary:"bg-swarco-blue-800 text-white hover:bg-swarco-blue-600 active:bg-swarco-blue-400 focus:outline-none focus:ring-2 focus:ring-swarco-blue-200",secondary:"border border-gray-300 text-swarco-blue-800 bg-white hover:bg-gray-50 active:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-swarco-blue-200"};function xe({variant:e="primary",size:t="md",className:s="",children:i,leftIcon:a,rightIcon:n,leftEl:m=null,rightEl:l=null,...h}){return r.jsxs("button",{className:[_2,y2[e],v2[t],s].join(" "),...h,children:[m||(a?r.jsx(a,{size:16,className:"mr-2"}):null),i,l||(n?r.jsx(n,{size:16,className:"ml-2"}):null)]})}function b2({text:e,children:t}){return r.jsxs("span",{className:"relative group inline-flex items-center",children:[t,r.jsx("span",{className:"pointer-events-none absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block bg-swarco-grey-900 text-white text-[12px] leading-4 px-2 py-1 rounded",children:e})]})}const Ad="unicon_token_v1",Hv="unicon_roles_v1";function Uv(e,t=[]){try{localStorage.setItem(Ad,e)}catch{}try{localStorage.setItem(Hv,JSON.stringify(t))}catch{}}function rs(){try{return localStorage.getItem(Ad)||null}catch{return null}}function x2(){try{localStorage.removeItem(Ad)}catch{}try{localStorage.removeItem(Hv)}catch{}}const ms="/unicon/api";async function Cs(e,t,s="POST"){const i=rs(),a=await fetch(`${ms}${e}`,{method:s,headers:{"Content-Type":"application/json",...i?{Authorization:`Bearer ${i}`}:{}},body:JSON.stringify(t??{})}),n=await a.json().catch(()=>({}));if(!a.ok||(n==null?void 0:n.success)===!1){const m=(n==null?void 0:n.error)||a.statusText;throw new Error(m)}return n}async function nn(e){const t=rs(),s=await fetch(`${ms}${e}`,{headers:t?{Authorization:`Bearer ${t}`}:void 0}),i=await s.json().catch(()=>({}));if(!s.ok||(i==null?void 0:i.success)===!1){const a=(i==null?void 0:i.error)||s.statusText;throw new Error(a)}return i}function $v(){try{return localStorage.getItem("unicon_current_workspace_v1")||null}catch{return null}}async function Nn(){const e=$v();return nn(e?`/connections?workspaceId=${encodeURIComponent(e)}`:"/connections")}async function Es(e){const t=$v(),s=t?{...e,workspaceId:t}:e;return Cs("/connections",s)}async function Fv(e){return fetch(`${ms}/connections/${e}`,{method:"DELETE"}).then(t=>t.json())}async function bu(e,t){const s=rs(),i=await fetch(`${ms}/connections/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",...s?{Authorization:`Bearer ${s}`}:{}},body:JSON.stringify(t||{})}),a=await i.json().catch(()=>({}));if(!i.ok||(a==null?void 0:a.success)===!1){const n=(a==null?void 0:a.error)||i.statusText;throw new Error(n)}return a}async function hs(e){return Cs("/connect",{connectionId:e})}async function Ni(e){return Cs("/disconnect",{connectionId:e})}async function Ae(e,t,s={}){return Cs("/operation",{connectionId:e,operation:t,params:s})}async function ea(){return nn("/workspaces")}async function Td(e){return Cs("/workspaces",{name:e})}async function qv(e,t){const s=rs(),i=await fetch(`${ms}/workspaces/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",...s?{Authorization:`Bearer ${s}`}:{}},body:JSON.stringify({name:t})}),a=await i.json().catch(()=>({}));if(!i.ok||(a==null?void 0:a.success)===!1)throw new Error((a==null?void 0:a.error)||i.statusText);return a}async function Gv(e){const t=rs(),s=await fetch(`${ms}/workspaces/${e}`,{method:"DELETE",headers:t?{Authorization:`Bearer ${t}`}:void 0}),i=await s.json().catch(()=>({}));if(!s.ok||(i==null?void 0:i.success)===!1)throw new Error((i==null?void 0:i.error)||s.statusText);return i}async function dl(e){const t=rs(),s=await fetch(`${ms}/workspaces/${e}/members`,{headers:t?{Authorization:`Bearer ${t}`}:void 0}),i=await s.json().catch(()=>({}));if(!s.ok||(i==null?void 0:i.success)===!1){const a=new Error((i==null?void 0:i.error)||s.statusText);throw a.status=s.status,a}return i}async function Kv(e,t,s){const i=rs(),a=await fetch(`${ms}/workspaces/${e}/members`,{method:"POST",headers:{"Content-Type":"application/json",...i?{Authorization:`Bearer ${i}`}:{}},body:JSON.stringify({userId:t,role:s})}),n=await a.json().catch(()=>({}));if(!a.ok||(n==null?void 0:n.success)===!1)throw new Error((n==null?void 0:n.error)||a.statusText);return n}async function Wv(e,t,s){const i=rs(),a=await fetch(`${ms}/workspaces/${e}/members/${encodeURIComponent(t)}`,{method:"PUT",headers:{"Content-Type":"application/json",...i?{Authorization:`Bearer ${i}`}:{}},body:JSON.stringify({role:s})}),n=await a.json().catch(()=>({}));if(!a.ok||(n==null?void 0:n.success)===!1)throw new Error((n==null?void 0:n.error)||a.statusText);return n}async function Yv(e,t){const s=rs(),i=await fetch(`${ms}/workspaces/${e}/members/${encodeURIComponent(t)}`,{method:"DELETE",headers:s?{Authorization:`Bearer ${s}`}:void 0}),a=await i.json().catch(()=>({}));if(!i.ok||(a==null?void 0:a.success)===!1)throw new Error((a==null?void 0:a.error)||i.statusText);return a}async function Vv(e,t){const s=rs(),i=await fetch(`${ms}/workspaces/${e}/owner-transfer`,{method:"POST",headers:{"Content-Type":"application/json",...s?{Authorization:`Bearer ${s}`}:{}},body:JSON.stringify({toUserId:t})}),a=await i.json().catch(()=>({}));if(!i.ok||(a==null?void 0:a.success)===!1)throw new Error((a==null?void 0:a.error)||i.statusText);return a}const S2=Object.freeze(Object.defineProperty({__proto__:null,addWorkspaceMember:Kv,apiGet:nn,apiPost:Cs,connectConnection:hs,createConnection:Es,createWorkspace:Td,deleteConnection:Fv,deleteWorkspace:Gv,disconnectConnection:Ni,listConnections:Nn,listWorkspaceMembers:dl,listWorkspaces:ea,op:Ae,removeWorkspaceMember:Yv,transferWorkspaceOwner:Vv,updateConnection:bu,updateWorkspace:qv,updateWorkspaceMember:Wv},Symbol.toStringTag,{value:"Module"}));function kn({open:e,title:t,onClose:s,children:i,footer:a}){return e?r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:s}),r.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg max-w-[600px] w-[90%] p-6",children:[t?r.jsx("h3",{className:"text-[24px] leading-8 font-bold text-swarco-grey-900 mb-4",children:t}):null,r.jsx("div",{children:i}),a?r.jsx("div",{className:"mt-6 flex items-center justify-end gap-2",children:a}):null]})]}):null}function w2({open:e,onClose:t}){const[s,i]=ge.useState([]),[a,n]=ge.useState(!1),[m,l]=ge.useState(""),[h,p]=ge.useState(null),[b,f]=ge.useState(""),[v,y]=ge.useState(()=>{try{return localStorage.getItem("unicon_current_workspace_v1")||""}catch{return""}}),[w,S]=ge.useState([]),[o,u]=ge.useState(!0),[c,d]=ge.useState(""),[g,_]=ge.useState("member"),C=async()=>{n(!0);try{const R=await ea();i(R.workspaces||[])}finally{n(!1)}};ge.useEffect(()=>{e&&C()},[e]);const j=async R=>{if(!R){S([]);return}try{const q=await dl(R);S(q.members||[]),u(!0)}catch(q){q&&(q.status===501||String(q.message||"").includes("workspace_members_unsupported"))?(u(!1),S([])):S([])}},x=R=>{y(R||"");try{localStorage.setItem("unicon_current_workspace_v1",R||"")}catch{}j(R)};ge.useEffect(()=>{e&&j(v)},[e]);const E=async()=>{const R=m.trim();if(!R)return;const q=await Td(R);i(G=>[...G,q.workspace]),l("")},D=R=>{p(R.id),f(R.name)},A=async R=>{const q=b.trim();q&&(await qv(R.id,q),i(G=>G.map(z=>z.id===R.id?{...z,name:q}:z)),p(null),f(""))},T=async R=>{confirm(`Delete workspace "${R.name}"? Connections will be detached but not deleted.`)&&(await Gv(R.id),i(q=>q.filter(G=>G.id!==R.id)),v===R.id&&x(""))};return r.jsx(kn,{open:e,title:"Manage Workspaces",onClose:t,footer:r.jsx(r.Fragment,{children:r.jsx("button",{className:"px-3 py-1.5 border rounded",onClick:t,children:"Close"})}),children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"text-sm text-gray-600",children:a?"Loading":"Create, rename, delete and select the active workspace."}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{className:"flex-1 border rounded px-2 py-1",placeholder:"New workspace name",value:m,onChange:R=>l(R.target.value)}),r.jsx("button",{className:"px-3 py-1.5 border rounded",onClick:E,children:"Add"})]}),r.jsxs("div",{className:"border rounded divide-y",children:[s.map(R=>r.jsxs("div",{className:"p-2 flex items-center justify-between gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"radio",name:"active-ws",checked:v===R.id,onChange:()=>x(R.id)}),h===R.id?r.jsx("input",{className:"border rounded px-2 py-1 text-sm",value:b,onChange:q=>f(q.target.value)}):r.jsx("div",{className:"text-sm",children:R.name})]}),r.jsx("div",{className:"flex items-center gap-2",children:h===R.id?r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"px-2 py-1 border rounded text-xs",onClick:()=>A(R),children:"Save"}),r.jsx("button",{className:"px-2 py-1 border rounded text-xs",onClick:()=>{p(null),f("")},children:"Cancel"})]}):r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"px-2 py-1 border rounded text-xs",onClick:()=>D(R),children:"Rename"}),r.jsx("button",{className:"px-2 py-1 border rounded text-xs text-red-600 hover:bg-red-50",onClick:()=>T(R),children:"Delete"})]})})]},R.id)),s.length===0&&r.jsx("div",{className:"p-3 text-sm text-gray-500",children:"No workspaces yet."})]}),r.jsxs("div",{className:"mt-4",children:[r.jsxs("div",{className:"font-semibold mb-1",children:["Members ",v?"":"(select a workspace)"]}),!o&&r.jsx("div",{className:"text-xs text-gray-600 border rounded p-2 bg-gray-50",children:"Members are not available in this mode."}),o&&v&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{className:"flex-1 border rounded px-2 py-1",placeholder:"User email or ID",value:c,onChange:R=>d(R.target.value)}),r.jsxs("select",{className:"border rounded px-2 py-1",value:g,onChange:R=>_(R.target.value),children:[r.jsx("option",{value:"viewer",children:"viewer"}),r.jsx("option",{value:"member",children:"member"}),r.jsx("option",{value:"admin",children:"admin"})]}),r.jsx("button",{className:"px-3 py-1.5 border rounded",onClick:async()=>{if(c.trim())try{await Kv(v,c.trim(),g),d("");const R=await dl(v);S(R.members||[])}catch(R){alert("Add failed: "+(R.message||"error"))}},children:"Add"})]}),r.jsxs("div",{className:"border rounded divide-y",children:[w.map(R=>r.jsxs("div",{className:"p-2 flex items-center justify-between gap-2",children:[r.jsx("div",{className:"text-sm",children:R.userId}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("select",{className:"border rounded px-2 py-1 text-xs",value:R.role,onChange:async q=>{try{await Wv(v,R.userId,q.target.value),S(G=>G.map(z=>z.userId===R.userId?{...z,role:q.target.value}:z))}catch(G){alert("Update failed: "+(G.message||"error"))}},children:[r.jsx("option",{value:"viewer",children:"viewer"}),r.jsx("option",{value:"member",children:"member"}),r.jsx("option",{value:"admin",children:"admin"})]}),r.jsx("button",{className:"px-2 py-1 border rounded text-xs",onClick:async()=>{if(confirm("Transfer ownership to this user?"))try{await Vv(v,R.userId);const q=await dl(v);S(q.members||[]),alert("Ownership transferred.")}catch(q){alert("Transfer failed: "+(q.message||"error"))}},children:"Make owner"}),r.jsx("button",{className:"px-2 py-1 border rounded text-xs text-red-600 hover:bg-red-50",onClick:async()=>{if(confirm("Remove member?"))try{await Yv(v,R.userId),S(q=>q.filter(G=>G.userId!==R.userId))}catch(q){alert("Remove failed: "+(q.message||"error"))}},children:"Remove"})]})]},R.userId)),w.length===0&&r.jsx("div",{className:"p-3 text-sm text-gray-500",children:"No members yet."})]})]})]})]})})}function C2({status:e="disconnected"}){const t=e==="connected"?"bg-green-500":e==="connecting"?"bg-amber-500":e==="error"?"bg-red-500":"bg-gray-300";return r.jsx("span",{className:`inline-block w-2.5 h-2.5 rounded-full ${t}`,"aria-hidden":"true"})}function ar({connection:e,name:t,type:s,status:i,id:a,className:n=""}){const m=e||{},l=t||m.name||"No connection selected",h=s||m.type,p=i||m.status||(l==="No connection selected"?"disconnected":void 0),b=a||m.id?String(a||m.id).slice(0,8):null,f=l==="No connection selected";return r.jsxs("div",{className:`inline-flex items-center gap-2 px-2.5 py-1.5 rounded-md border text-xs ${f?"text-gray-500 border-gray-200 bg-gray-50":"text-gray-700 border-gray-200 bg-white"} ${n}`,role:"status","aria-label":"Connection in use",children:[!f&&r.jsx(C2,{status:p}),r.jsx("span",{className:"font-medium",children:l}),h?r.jsx("span",{className:"uppercase text-[10px] tracking-wide text-gray-500",children:h}):null,b?r.jsxs("span",{className:"font-mono text-gray-400",children:["#",b]}):null,p?r.jsx("span",{className:`ml-1 px-1.5 py-0.5 rounded ${p==="connected"?"bg-green-50 text-green-700":p==="connecting"?"bg-amber-50 text-amber-700":p==="error"?"bg-red-50 text-red-700":"bg-gray-50 text-gray-600"}`,children:p}):null]})}function j2({onNewConnection:e,activeTab:t}){var w,S;const[s,i]=ge.useState(null);ge.useEffect(()=>{rs()&&nn("/me").then(u=>i(u.user)).catch(()=>{})},[]);const[a,n]=ge.useState([]),[m,l]=ge.useState(()=>{try{return localStorage.getItem("unicon_current_workspace_v1")||""}catch{return""}});ge.useEffect(()=>{let o=!0;return ea().then(u=>{o&&n(u.workspaces||[])}).catch(()=>{}),()=>{o=!1}},[]);const[h,p]=ge.useState(null);ge.useEffect(()=>{const o=(t==null?void 0:t.params)||{};if(o.connection&&typeof o.connection=="object"){p(o.connection);return}if(o.connectionId){let u=!0;return nn("/connections").then(c=>{const g=(c.connections||[]).find(_=>_.id===o.connectionId)||null;u&&p(g)}).catch(()=>p(null)),()=>{u=!1}}p(null)},[t==null?void 0:t.id,(w=t==null?void 0:t.params)==null?void 0:w.connectionId]);const[b,f]=ge.useState(!1);ge.useEffect(()=>{function o(u){const c=document.getElementById("account-menu"),d=document.getElementById("account-menu-button");b&&c&&!c.contains(u.target)&&d&&!d.contains(u.target)&&f(!1)}return document.addEventListener("click",o),()=>document.removeEventListener("click",o)},[b]);const[v,y]=ge.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"h-14 border-b border-gray-200 bg-white px-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:"/unicon/brand/swarco.svg",alt:"Swarco",className:"h-6"}),r.jsx("div",{className:"font-semibold text-swarco-grey-900",children:"Unicon"})]}),r.jsxs("div",{className:"flex items-center gap-3 relative",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("select",{className:"border rounded px-2 py-1 text-sm",value:m,onChange:o=>{const u=o.target.value;l(u);try{localStorage.setItem("unicon_current_workspace_v1",u)}catch{}location.reload()},children:[r.jsx("option",{value:"",children:"All workspaces"}),a.map(o=>r.jsx("option",{value:o.id,children:o.name},o.id))]}),r.jsx("button",{className:"px-2 py-1 border rounded text-xs",title:"Create workspace",onClick:async()=>{const o=prompt("New workspace name");if(o)try{const u=await Td(o);n(c=>[...c,u.workspace]),localStorage.setItem("unicon_current_workspace_v1",u.workspace.id),location.reload()}catch(u){alert("Failed: "+u.message)}},children:"+"})]}),r.jsx("button",{className:"px-2 py-1 border rounded text-xs",title:"Manage workspaces",onClick:()=>y(!0),children:"Manage"}),r.jsx(ar,{connection:h||void 0}),r.jsx(xe,{variant:"secondary",size:"md",leftEl:r.jsx(ul,{name:"plus",size:16,className:"mr-2"}),onClick:e,children:"New Connection"}),r.jsx(b2,{text:"Help",children:r.jsx("button",{className:"p-2 text-swarco-grey-800 hover:text-swarco-grey-900","aria-label":"Help",children:r.jsx(ul,{name:"circle-question",size:18})})}),r.jsxs("div",{className:"flex items-center gap-2",children:[s!=null&&s.avatar?r.jsx("img",{src:s.avatar,alt:"avatar",className:"h-8 w-8 rounded-full border"}):r.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center text-xs text-gray-600",children:s!=null&&s.email?(S=s.email[0])==null?void 0:S.toUpperCase():"?"}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{id:"account-menu-button",className:"p-2 text-swarco-grey-800 hover:text-swarco-grey-900","aria-haspopup":"menu","aria-expanded":b,"aria-controls":"account-menu",onClick:()=>f(o=>!o),children:r.jsx(ul,{name:"chevron-down",size:16})}),b&&r.jsxs("div",{id:"account-menu",role:"menu",className:"absolute right-0 mt-2 w-56 bg-white border rounded shadow",children:[r.jsx("div",{className:"px-3 py-2 text-sm text-gray-700 border-b",children:(s==null?void 0:s.email)||"Signed in"}),r.jsxs("div",{className:"px-3 py-2 text-xs text-gray-500",children:["Provider: ",(s==null?void 0:s.provider)||""]}),(s==null?void 0:s.provider)&&r.jsxs("button",{role:"menuitem",className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:async()=>{try{const o=localStorage.getItem("unicon_token_v1");await fetch(`/unicon/api/auth/oauth/${s.provider}`,{method:"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}),location.reload()}catch{}},children:["Disconnect ",s.provider]}),r.jsx("button",{role:"menuitem",className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:async()=>{const o=prompt("Language code (en/de):","en");if(o)try{await fetch("/unicon/api/settings/language",{method:"POST",headers:{"Content-Type":"application/json",...localStorage.getItem("unicon_token_v1")?{Authorization:`Bearer ${localStorage.getItem("unicon_token_v1")}`}:{}},body:JSON.stringify({lang:o})})}catch{}},children:"Language"}),r.jsx("button",{role:"menuitem",className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:()=>{x2(),location.replace("/unicon/")},children:"Logout"})]})]})]})]})]}),r.jsx(w2,{open:v,onClose:()=>{y(!1),ea().then(o=>n(o.workspaces||[])).catch(()=>{})}})]})}function E2({tabs:e,activeTabId:t,onActivate:s,onClose:i,onCloseAll:a,errorCounts:n={}}){return r.jsxs("div",{className:"h-10 border-b border-gray-200 bg-white px-2 flex items-end",children:[r.jsx("div",{className:"flex gap-1 overflow-x-auto flex-1",children:e.map(m=>r.jsxs("button",{onClick:()=>s(m.id),className:`group h-8 px-3 inline-flex items-center gap-2 rounded-t-md border border-b-0 ${m.id===t?"bg-white border-gray-200 text-swarco-blue-800 border-b-swarco-blue-800":"bg-gray-100 text-swarco-grey-600 border-gray-200 hover:bg-gray-200"}`,title:m.title,children:[r.jsxs("span",{className:"text-sm whitespace-nowrap flex items-center gap-1",children:[m.title,!!n[m.id]&&r.jsx("span",{className:"ml-1 inline-flex items-center justify-center min-w-[16px] h-4 px-1 rounded-full text-[10px] bg-red-600 text-white",children:n[m.id]})]}),r.jsx("span",{className:"opacity-50 group-hover:opacity-100",onClick:l=>{l.stopPropagation(),i(m.id)},children:r.jsx(Ur,{size:14})})]},m.id))}),e.length>0&&r.jsx("button",{className:"ml-2 h-8 w-8 flex items-center justify-center rounded border border-gray-200 text-swarco-grey-700 hover:bg-gray-100",title:"Close all tabs","aria-label":"Close all tabs",onClick:()=>a&&a(),children:r.jsx(l0,{size:16})})]})}function N2({tabs:e,activeTabId:t,registry:s,openTab:i}){const a=M.useMemo(()=>e.find(l=>l.id===t)||null,[e,t]);if(!a)return r.jsx("main",{className:"flex-1 bg-white flex items-center justify-center text-gray-500",children:"No tabs open"});const n=s[a.kind];if(!n)return r.jsx("main",{className:"flex-1 bg-white flex items-center justify-center text-gray-500",children:"Unknown tab"});const m=n.component;return r.jsx("main",{className:"flex-1 bg-white p-4 overflow-auto",children:r.jsx(m,{...a.params||{},openTab:i})})}function Xv({children:e,htmlFor:t}){return r.jsx("label",{htmlFor:t,className:"block text-[16px] leading-6 font-semibold text-swarco-grey-900 mb-1",children:e})}function Dd({children:e,tone:t="default"}){const s=t==="error"?"text-swarco-red-500":"text-swarco-grey-600";return r.jsx("div",{className:`mt-1 text-[12px] leading-4 ${s}`,children:e})}function lt({id:e,label:t,error:s,helper:i,className:a="",...n}){return r.jsxs("div",{className:a,children:[t?r.jsx(Xv,{htmlFor:e,children:t}):null,r.jsx("input",{id:e,className:`h-10 w-full rounded-[4px] border px-3 text-[16px] leading-6 placeholder-swarco-grey-400 focus:outline-none focus:ring-2 focus:ring-swarco-blue-200 focus:border-swarco-blue-600
          ${s?"border-swarco-red-500":"border-swarco-grey-400"}`,...n}),i?r.jsx(Dd,{tone:s?"error":"default",children:i}):null]})}function Jv({id:e,label:t,error:s,helper:i,className:a="",children:n,...m}){return r.jsxs("div",{className:a,children:[t?r.jsx(Xv,{htmlFor:e,children:t}):null,r.jsx("select",{id:e,className:`h-10 w-full rounded-[4px] border px-3 text-[16px] leading-6 focus:outline-none focus:ring-2 focus:ring-swarco-blue-200 focus:border-swarco-blue-600
          ${s?"border-swarco-red-500":"border-swarco-grey-400"}`,...m,children:n}),i?r.jsx(Dd,{tone:s?"error":"default",children:i}):null]})}function nr({connectionId:e,includeBrowser:t=!0,max:s=200,className:i=""}){const[a,n]=ge.useState([]),[m,l]=ge.useState("all"),[h,p]=ge.useState(""),[b,f]=ge.useState(()=>{try{return localStorage.getItem("unicon_log_persist")!=="0"}catch{return!0}}),[v,y]=ge.useState(()=>{try{return localStorage.getItem("unicon_log_follow")!=="0"}catch{return!0}}),[w,S]=ge.useState(()=>{try{return localStorage.getItem("unicon_log_paused")==="1"}catch{return!1}}),o=ge.useRef([]),u=ge.useMemo(()=>`unicon_log_${e||"global"}`,[e]),c=ge.useRef(null),d=A=>{if(o.current=[A,...o.current].slice(0,s),n(o.current),v&&c.current&&!w)try{c.current.scrollTop=c.current.scrollHeight}catch{}if(b)try{localStorage.setItem(u,JSON.stringify(o.current.map(T=>({...T,ts:T.ts.toISOString?T.ts.toISOString():T.ts}))))}catch{}};ge.useEffect(()=>{if(b)try{const A=localStorage.getItem(u);if(A){const T=JSON.parse(A),R=Array.isArray(T)?T.map(q=>({...q,ts:q.ts?new Date(q.ts):new Date})):[];o.current=R.slice(0,s),n(o.current)}}catch{}},[u]),ge.useEffect(()=>{const A=W=>{const N=W.detail||{};try{if(N.type==="log"){const L=N.data||{};(!e||L.connectionId===e)&&d({ts:new Date,kind:L.type||"info",message:L.message||"",code:L.code||null,hint:L.hint||null})}else if(N.type==="connection_status"){const L=N.data||{};(!e||L.connectionId===e)&&d({ts:new Date,kind:"status",message:`Status: ${L.status}`})}else if(N.type==="ws"&&N.data&&N.data.event==="message"&&(!e||N.data.connectionId===e)){const L=(()=>{try{return localStorage.getItem("unicon_log_include_resp")!=="0"}catch{return!0}})(),I=(()=>{try{const se=parseInt(localStorage.getItem("unicon_log_hint_limit")||"800",10);return isNaN(se)?800:Math.min(5e3,Math.max(100,se))}catch{return 800}})(),U=typeof N.data.data=="string"?N.data.data:JSON.stringify(N.data.data);d({ts:new Date,kind:"ws_recv",message:"WS message received",hint:L?String(U).slice(0,I):null})}}catch{}};window.addEventListener("unicon-ws",A);const T=W=>{const N=W.detail||{};e&&N.connectionId&&N.connectionId!==e||d({ts:N.ts?new Date(N.ts):new Date,kind:N.kind||"info",message:N.message||"",code:N.code||null,hint:N.hint||null})};window.addEventListener("unicon-log",T);const R=()=>{S(W=>{const N=!W;try{localStorage.setItem("unicon_log_paused",N?"1":"0")}catch{}return N})},q=()=>{y(W=>{const N=!W;try{localStorage.setItem("unicon_log_follow",N?"1":"0")}catch{}return N})};window.addEventListener("unicon-log-toggle-pause",R),window.addEventListener("unicon-log-toggle-follow",q);let G,z;return t&&(G=W=>{d({ts:new Date,kind:"browser",message:(W==null?void 0:W.message)||"Script error"})},z=W=>{const N=(W==null?void 0:W.reason)&&(W.reason.message||W.reason.toString())||"Unhandled promise rejection";d({ts:new Date,kind:"browser",message:N})},window.addEventListener("error",G),window.addEventListener("unhandledrejection",z)),()=>{window.removeEventListener("unicon-ws",A),window.removeEventListener("unicon-log",T),window.removeEventListener("unicon-log-toggle-pause",R),window.removeEventListener("unicon-log-toggle-follow",q),t&&(window.removeEventListener("error",G),window.removeEventListener("unhandledrejection",z))}},[e,t,s]);const g=()=>{if(o.current=[],n([]),b)try{localStorage.removeItem(u)}catch{}},_=async()=>{try{await navigator.clipboard.writeText(JSON.stringify(a.map(A=>({ts:A.ts.toISOString(),kind:A.kind,message:A.message,code:A.code,hint:A.hint})),null,2))}catch{}},C=(A=!1)=>{const T=a.map(z=>({ts:z.ts.toISOString(),kind:z.kind,message:z.message,code:z.code,hint:z.hint})),R=A?T.map(z=>JSON.stringify(z)).join(`
`):JSON.stringify(T,null,2),q=new Blob([R],{type:"application/json"}),G=document.createElement("a");G.href=URL.createObjectURL(q),G.download=A?"log.ndjson":"log.json",G.click(),URL.revokeObjectURL(G.href)},j=(()=>{try{return localStorage.getItem("unicon_log_level")||"all"}catch{return"all"}})(),x=A=>j==="all"?!0:A==="error",E=a.filter(A=>(m==="all"||A.kind===m)&&x(A.kind)&&(!h||((A.message||"")+" "+(A.hint||"")).toLowerCase().includes(h.toLowerCase()))),D=()=>{const A={ts:new Date().toISOString(),connectionId:e||null,page:typeof location<"u"?location.href:null,ua:typeof navigator<"u"?navigator.userAgent:null,settings:{persist:b,follow:v,paused:w,includePayloads:(()=>{try{return localStorage.getItem("unicon_log_include_payload")!=="0"}catch{return!0}})(),includeBodies:(()=>{try{return localStorage.getItem("unicon_log_include_resp")!=="0"}catch{return!0}})()},entries:a.map(q=>({ts:q.ts.toISOString(),kind:q.kind,message:q.message,code:q.code||null,hint:q.hint||null}))},T=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),R=document.createElement("a");R.href=URL.createObjectURL(T),R.download="unicon-report.json",R.click(),URL.revokeObjectURL(R.href)};return ge.useEffect(()=>{const A=T=>{var q;const R=String(((q=T.target)==null?void 0:q.tagName)||"").toLowerCase();R==="input"||R==="textarea"||R==="select"||T.isComposing||(T.key.toLowerCase()==="p"?(T.preventDefault(),S(G=>{const z=!G;try{localStorage.setItem("unicon_log_paused",z?"1":"0")}catch{}return z})):T.key.toLowerCase()==="f"&&(T.preventDefault(),y(G=>{const z=!G;try{localStorage.setItem("unicon_log_follow",z?"1":"0")}catch{}return z})))};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[]),r.jsxs("div",{className:`border rounded-lg p-3 bg-gray-50 ${i}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"text-sm font-medium",children:"Client log"}),r.jsx("select",{className:"border rounded px-1.5 py-0.5 text-xs",value:m,onChange:A=>l(A.target.value),children:["all","info","status","error","browser","request","response","sql","sql_result","ws_sent","ws_recv"].map(A=>r.jsx("option",{value:A,children:A},A))}),r.jsxs("label",{className:"text-xs inline-flex items-center gap-1",children:["Level",r.jsxs("select",{className:"border rounded px-1 py-0.5 text-xs",value:j,onChange:A=>{try{localStorage.setItem("unicon_log_level",A.target.value)}catch{}l(T=>T)},children:[r.jsx("option",{value:"all",children:"all"}),r.jsx("option",{value:"errors",children:"errors"})]})]}),r.jsx("input",{className:"border rounded px-1.5 py-0.5 text-xs",placeholder:"search",value:h,onChange:A=>p(A.target.value)}),r.jsxs("label",{className:"text-xs inline-flex items-center gap-1",children:[r.jsx("input",{type:"checkbox",checked:(()=>{try{return localStorage.getItem("unicon_log_include_resp")!=="0"}catch{return!0}})(),onChange:A=>{try{localStorage.setItem("unicon_log_include_resp",A.target.checked?"1":"0")}catch{}}}),"Resp bodies"]}),r.jsxs("label",{className:"text-xs inline-flex items-center gap-1",children:[r.jsx("input",{type:"checkbox",checked:(()=>{try{return localStorage.getItem("unicon_log_include_payload")!=="0"}catch{return!0}})(),onChange:A=>{try{localStorage.setItem("unicon_log_include_payload",A.target.checked?"1":"0")}catch{}}}),"Payloads"]}),r.jsxs("label",{className:"text-xs inline-flex items-center gap-1",children:["Preview",r.jsx("input",{type:"number",min:"100",max:"5000",step:"100",className:"w-20 border rounded px-1 py-0.5 text-xs",defaultValue:(()=>{try{return localStorage.getItem("unicon_log_hint_limit")||"800"}catch{return"800"}})(),onChange:A=>{try{const T=Math.min(5e3,Math.max(100,parseInt(A.target.value||"800",10)));localStorage.setItem("unicon_log_hint_limit",String(T))}catch{}}})]}),r.jsxs("label",{className:"text-xs inline-flex items-center gap-1",children:[r.jsx("input",{type:"checkbox",checked:b,onChange:A=>{const T=A.target.checked;f(T);try{localStorage.setItem("unicon_log_persist",T?"1":"0"),T||localStorage.removeItem(u)}catch{}}}),"Persist"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsx("button",{className:"px-2 py-1 border rounded bg-white",onClick:()=>S(A=>{const T=!A;try{localStorage.setItem("unicon_log_paused",T?"1":"0")}catch{}return T}),children:w?"Resume":"Pause"}),r.jsx("button",{className:"px-2 py-1 border rounded bg-white",onClick:()=>y(A=>{const T=!A;try{localStorage.setItem("unicon_log_follow",T?"1":"0")}catch{}return T}),children:v?"Unfollow":"Follow"}),r.jsx("button",{className:"px-2 py-1 border rounded bg-white",onClick:()=>C(!1),title:"Download JSON",children:"Export"}),r.jsx("button",{className:"px-2 py-1 border rounded bg-white",onClick:()=>C(!0),title:"Download NDJSON",children:"NDJSON"}),r.jsx("button",{className:"px-2 py-1 border rounded bg-white",onClick:D,title:"Create report JSON",children:"Report"}),r.jsxs("button",{className:"px-2 py-1 border rounded bg-white",onClick:_,children:[r.jsx(zi,{size:12,className:"inline mr-1"}),"Copy"]}),r.jsxs("button",{className:"px-2 py-1 border rounded bg-white text-red-600",onClick:g,children:[r.jsx(Yi,{size:12,className:"inline mr-1"}),"Clear"]})]})]}),r.jsx("div",{ref:c,className:"space-y-1 max-h-40 overflow-y-auto text-sm",children:E.length===0?r.jsx("div",{className:"text-xs text-gray-500",children:"No log entries yet. Actions and errors will appear here."}):E.map((A,T)=>r.jsxs("div",{className:"flex items-start justify-between bg-white rounded border px-2 py-1",children:[r.jsxs("div",{children:[r.jsx("div",{className:`text-xs inline-block mr-2 px-1 rounded ${A.kind==="error"?"bg-red-100 text-red-700":A.kind==="status"?"bg-blue-100 text-blue-700":A.kind==="browser"?"bg-amber-100 text-amber-700":"bg-gray-100 text-gray-700"}`,children:A.kind}),r.jsx("span",{className:"text-sm",children:A.message}),A.code&&r.jsxs("span",{className:"ml-2 text-[10px] text-gray-500",children:["[",A.code,"]"]}),A.hint&&r.jsxs("span",{className:"ml-2 text-[10px] text-gray-500",children:[" ",A.hint]})]}),r.jsxs("div",{className:"text-xs text-gray-500 inline-flex items-center",children:[r.jsx(Ua,{size:12,className:"mr-1"}),A.ts.toLocaleTimeString()]})]},T))})]})}const Qt={rest:[{name:"JSONPlaceholder",baseUrl:"https://jsonplaceholder.typicode.com",tryPath:"/posts/1",description:"Fake online REST API for testing and prototyping.",endpoints:[{method:"GET",path:"/posts",summary:"Get all posts"},{method:"GET",path:"/posts/1",summary:"Get post by ID"},{method:"GET",path:"/posts/1/comments",summary:"Get comments for post"},{method:"GET",path:"/users",summary:"Get all users"},{method:"GET",path:"/users/1",summary:"Get user by ID"},{method:"POST",path:"/posts",summary:"Create a new post",headers:{"Content-Type":"application/json"},body:{title:"New Post",body:"This is the post content.",userId:1}},{method:"PUT",path:"/posts/1",summary:"Update post",headers:{"Content-Type":"application/json"},body:{id:1,title:"Updated Title",body:"Updated content.",userId:1}},{method:"PATCH",path:"/posts/1",summary:"Partial update post",headers:{"Content-Type":"application/json"},body:{title:"Patched Title"}},{method:"DELETE",path:"/posts/1",summary:"Delete post"}]},{name:"HTTPBin",baseUrl:"https://httpbin.org",tryPath:"/get",description:"HTTP request & response service with many endpoints.",endpoints:[{method:"GET",path:"/get",summary:"Returns GET data"},{method:"GET",path:"/ip",summary:"Returns origin IP"},{method:"GET",path:"/headers",summary:"Returns request headers"},{method:"GET",path:"/user-agent",summary:"Returns user-agent"},{method:"GET",path:"/uuid",summary:"Returns UUID4"},{method:"GET",path:"/delay/1",summary:"Delays response by 1s"},{method:"GET",path:"/status/200",summary:"Returns status 200"},{method:"GET",path:"/status/404",summary:"Returns status 404"},{method:"POST",path:"/post",summary:"Returns POST data",headers:{"Content-Type":"application/json"},body:{message:"Hello HTTPBin!",count:42}},{method:"PUT",path:"/put",summary:"Returns PUT data",headers:{"Content-Type":"application/json"},body:{updated:!0,value:"test"}},{method:"DELETE",path:"/delete",summary:"Returns DELETE data"},{method:"POST",path:"/anything",summary:"Returns anything passed",headers:{"Content-Type":"application/json","X-Custom-Header":"test-value"},body:{test:"data",nested:{key:"value"}}}]},{name:"Cat Facts",baseUrl:"https://catfact.ninja",tryPath:"/fact",description:"Random cat facts.",endpoints:[{method:"GET",path:"/fact",summary:"Get a random cat fact"},{method:"GET",path:"/facts",summary:"Get multiple cat facts"},{method:"GET",path:"/facts?limit=5",summary:"Get 5 cat facts"},{method:"GET",path:"/breeds",summary:"Get cat breeds"}]},{name:"Dog CEO",baseUrl:"https://dog.ceo",tryPath:"/api/breeds/image/random",description:"Random dog images.",endpoints:[{method:"GET",path:"/api/breeds/image/random",summary:"Random dog image"},{method:"GET",path:"/api/breeds/image/random/3",summary:"3 random dog images"},{method:"GET",path:"/api/breeds/list/all",summary:"List all breeds"},{method:"GET",path:"/api/breed/husky/images",summary:"Husky images"},{method:"GET",path:"/api/breed/labrador/images/random",summary:"Random labrador image"}]},{name:"Bored API",baseUrl:"https://www.boredapi.com",tryPath:"/api/activity",description:"Random activities to beat boredom.",endpoints:[{method:"GET",path:"/api/activity",summary:"Random activity"},{method:"GET",path:"/api/activity?type=education",summary:"Educational activity"},{method:"GET",path:"/api/activity?type=recreational",summary:"Recreational activity"},{method:"GET",path:"/api/activity?participants=2",summary:"Activity for 2 people"},{method:"GET",path:"/api/activity?minprice=0&maxprice=0",summary:"Free activity"}]},{name:"Advice Slip",baseUrl:"https://api.adviceslip.com",tryPath:"/advice",description:"Random life advice.",endpoints:[{method:"GET",path:"/advice",summary:"Random advice"},{method:"GET",path:"/advice/1",summary:"Advice by ID"},{method:"GET",path:"/advice/search/life",summary:"Search advice about life"}]},{name:"IPify",baseUrl:"https://api.ipify.org",tryPath:"/?format=json",description:"Returns your public IP in JSON.",endpoints:[{method:"GET",path:"/?format=json",summary:"Get IP as JSON"},{method:"GET",path:"/?format=text",summary:"Get IP as text"}]},{name:"Agify",baseUrl:"https://api.agify.io",tryPath:"/?name=michael",description:"Predict age by name.",endpoints:[{method:"GET",path:"/?name=michael",summary:"Predict age for Michael"},{method:"GET",path:"/?name=anna",summary:"Predict age for Anna"},{method:"GET",path:"/?name=john&country_id=US",summary:"Predict age for John (US)"}]},{name:"ReqRes",baseUrl:"https://reqres.in",tryPath:"/api/users",description:"Hosted REST API for testing with realistic responses.",endpoints:[{method:"GET",path:"/api/users",summary:"List users (page 1)"},{method:"GET",path:"/api/users?page=2",summary:"List users (page 2)"},{method:"GET",path:"/api/users/2",summary:"Get single user"},{method:"GET",path:"/api/users/23",summary:"User not found (404)"},{method:"POST",path:"/api/users",summary:"Create user",headers:{"Content-Type":"application/json"},body:{name:"John Doe",job:"Developer"}},{method:"PUT",path:"/api/users/2",summary:"Update user",headers:{"Content-Type":"application/json"},body:{name:"Jane Doe",job:"Manager"}},{method:"DELETE",path:"/api/users/2",summary:"Delete user"},{method:"POST",path:"/api/register",summary:"Register user",headers:{"Content-Type":"application/json"},body:{email:"eve.holt@reqres.in",password:"pistol"}},{method:"POST",path:"/api/login",summary:"Login user",headers:{"Content-Type":"application/json"},body:{email:"eve.holt@reqres.in",password:"cityslicka"}}]}],ws:[{name:"Public Echo",url:"wss://echo.websocket.events",description:"Simple echo server for quick WebSocket tests."}],sql:[{name:"SQLite (in-memory)",config:{driver:"sqlite",filename:":memory:"},description:"Temporary DB; perfect for a quick SELECT 1 test."}],opcua:[{name:"Prosys Demo",endpointUrl:"opc.tcp://uademo.prosysopc.com:53530/OPCUA/Simulation",securityPolicy:"None",securityMode:"None",description:"Public demo OPC UA server (availability may vary)."},{name:"Sample Server",endpointUrl:"opc.tcp://opcua.demo-this.com:51210/UA/SampleServer",securityPolicy:"None",securityMode:"None",description:"Community demo server (availability may vary)."}]},k2=({connection:e,openTab:t,autoRequest:s})=>{var ye,P;const[i,a]=M.useState("request"),[n,m]=M.useState({method:"GET",endpoint:"/",headers:{},body:"",params:{}}),[l,h]=M.useState(null),[p,b]=M.useState([]),[f,v]=M.useState(!1),[y,w]=M.useState([{key:"",value:""}]),[S,o]=M.useState(!1),[u,c]=M.useState(""),[d,g]=M.useState([]),[_,C]=M.useState("idle"),[j,x]=M.useState(""),[E,D]=M.useState([]),[A,T]=M.useState(null),[R,q]=M.useState(!0),G="/unicon/api",z=["GET","POST","PUT","DELETE","PATCH","HEAD","OPTIONS"];async function W(){if(u){if(!e||e.status!=="connected"){alert("Nicht mit Server verbunden");return}C("loading");try{const B=await fetch(`${G}/operation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:e.id,operation:"loadOpenApi",params:{openApiUrl:u}})}),K=await B.json();if(!B.ok||(K==null?void 0:K.success)===!1)throw new Error((K==null?void 0:K.error)||"Load failed");await L(),C("loaded")}catch(B){console.error(B),C("error"),alert(B.message||"Load failed")}}}async function N(B){if(B){if(!e||e.status!=="connected"){alert("Nicht mit Server verbunden");return}C("loading");try{const K=new FormData;K.append("openApiFile",B);const te=await fetch(`${G}/upload-openapi`,{method:"POST",body:K}),de=await te.json();if(!te.ok||(de==null?void 0:de.success)===!1)throw new Error((de==null?void 0:de.error)||"Upload failed");const le=await fetch(`${G}/operation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:e.id,operation:"loadOpenApi",params:{openApiFile:de.filename||B.name}})}),ae=await le.json();if(!le.ok||(ae==null?void 0:ae.success)===!1)throw new Error((ae==null?void 0:ae.error)||"Load failed");await L(),C("loaded")}catch(K){console.error(K),C("error"),alert(K.message||"Upload failed")}}}async function L(B=null){var K;if(!(!e||e.status!=="connected"))try{const de=await(await fetch(`${G}/operation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:e.id,operation:"getEndpoints",params:{tag:B}})})).json();de!=null&&de.success&&Array.isArray((K=de.data)==null?void 0:K.endpoints)&&g(de.data.endpoints)}catch{}}function I(B,K=0){var de;if(!B||K>6)return null;if(B.example!==void 0)return B.example;if(B.default!==void 0)return B.default;const te=B.type;if(te==="object"||B.properties&&!te){const le={},ae=B.properties||{};for(const _e of Object.keys(ae))le[_e]=I(ae[_e],K+1);return le}return te==="array"||B.items?[I(B.items||{},K+1)]:te==="string"?((de=B.enum)==null?void 0:de[0])||"string":te==="number"||te==="integer"?0:te==="boolean"?!0:null}const U=()=>{try{return localStorage.getItem("unicon_log_include_payload")!=="0"}catch{return!0}},se=B=>{const K=ae=>typeof ae=="string"?ae:JSON.stringify(ae),te=ae=>ae&&"***",de=/^(authorization|password|passwd|token|api[-_]?key|secret)$/i,le=ae=>{if(!ae||typeof ae!="object")return ae;if(Array.isArray(ae))return ae.map(le);const _e={};for(const[be,Le]of Object.entries(ae))_e[be]=de.test(be)?te(K(Le)):le(Le);return _e};try{return le(B)}catch{return B}},ce=async()=>{if(!e||e.status!=="connected"){alert("Nicht mit Server verbunden");return}v(!0);try{const B={connectionId:e.id,kind:"request",message:`${n.method} ${n.endpoint}`};if(U()){const K=y.reduce((le,ae)=>(ae.key&&(le[ae.key]=ae.value),le),{}),te={headers:se(K),body:n.body?se(JSON.parse(n.body)):null},de=O();B.hint=JSON.stringify(te).slice(0,de)}window.dispatchEvent(new CustomEvent("unicon-log",{detail:B}))}catch{}h(null);try{const B={};y.forEach(_e=>{_e.key&&_e.value&&(B[_e.key]=_e.value)});const K={connectionId:e.id,operation:"request",params:{method:n.method,endpoint:n.endpoint,data:n.body?JSON.parse(n.body):null,headers:B}},te=performance.now(),le=await(await fetch(`${G}/operation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)})).json(),ae=Math.round(performance.now()-te);if(le.success){const _e={...le.data,timestamp:new Date().toISOString(),request:{...n,headers:B}};h(_e);try{const be={connectionId:e.id,kind:"response",message:`${_e.status} ${_e.statusText} (${ae}ms)`};if((()=>{try{return localStorage.getItem("unicon_log_include_resp")!=="0"}catch{return!0}})()){const Te=se(_e.data),Xe=O();be.hint=JSON.stringify(Te).slice(0,Xe)}window.dispatchEvent(new CustomEvent("unicon-log",{detail:be}))}catch{}b(be=>[_e,...be.slice(0,49)]);for(const be of E)try{if(be.type==="download"){const Le=new Blob([JSON.stringify(_e.data,null,2)],{type:"application/json"}),Te=document.createElement("a");Te.href=URL.createObjectURL(Le),Te.download=be.filename||"response.json",document.body.appendChild(Te),Te.click(),Te.remove()}else be.type==="followup"&&await(await fetch(`${G}/operation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:e.id,operation:"request",params:{method:be.method||"GET",endpoint:be.endpoint||"/",data:null,headers:{}}})})).json().catch(()=>({}))}catch{}}else throw new Error(le.error||"Request failed")}catch(B){console.error("Request error:",B);try{window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e==null?void 0:e.id,kind:"error",message:`REST request failed: ${B.message}`}}))}catch{}h({status:0,statusText:"Error",data:{error:B.message},timestamp:new Date().toISOString(),request:{...n}})}finally{v(!1)}},Q=()=>{w(B=>[...B,{key:"",value:""}])},re=(B,K,te)=>{w(de=>de.map((le,ae)=>ae===B?{...le,[K]:te}:le))},pe=B=>{w(K=>K.filter((te,de)=>de!==B))},k=B=>{m(B.request);const K=Object.entries(B.request.headers||{});w(K.length>0?K.map(([te,de])=>({key:te,value:de})):[{key:"",value:""}])},F=B=>{try{return JSON.stringify(B,null,2)}catch{return String(B)}},Y=B=>{navigator.clipboard.writeText(B)},V=B=>B>=200&&B<300?"text-green-600 bg-green-100":B>=300&&B<400?"text-blue-600 bg-blue-100":B>=400&&B<500?"text-orange-600 bg-orange-100":B>=500?"text-red-600 bg-red-100":"text-gray-600 bg-gray-100",O=()=>{try{const B=parseInt(localStorage.getItem("unicon_log_hint_limit")||"800",10);return isNaN(B)?800:Math.min(5e3,Math.max(100,B))}catch{return 800}},H=()=>{var B;try{const K=((B=e==null?void 0:e.config)==null?void 0:B.baseUrl)||"",de=((He,Ce)=>He.replace(/\/$/,"")+"/"+(Ce||"/").replace(/^\//,""))(K,n.endpoint||"/"),le=(n.method||"GET").toUpperCase(),ae=y.reduce((He,Ce)=>(Ce.key&&Ce.value&&He.push([Ce.key,Ce.value]),He),[]),_e=(He,Ce)=>/^(authorization|password|passwd|token|api[-_]?key|secret)$/i.test(He)?"***":Ce,be=ae.map(([He,Ce])=>`-H ${JSON.stringify(He+": "+_e(He,Ce))}`),Le=(n.body||"").trim(),Te=Le&&["POST","PUT","PATCH","DELETE"].includes(le)?[`--data ${JSON.stringify(Le)}`]:[],Ke=["curl",...le!=="GET"?[`-X ${le}`]:[],...be,...Te,JSON.stringify(de)].join(" ");navigator.clipboard.writeText(Ke).catch(()=>{}),window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e==null?void 0:e.id,kind:"info",message:"Copied cURL"}})),alert("cURL copied")}catch(K){alert("Failed to create cURL: "+(K.message||"error"))}},Z=()=>{var B;try{const K=((B=e==null?void 0:e.config)==null?void 0:B.baseUrl)||"",de=((He,Ce)=>He.replace(/\/$/,"")+"/"+(Ce||"/").replace(/^\//,""))(K,n.endpoint||"/"),le=(n.method||"GET").toUpperCase(),ae=y.reduce((He,Ce)=>(Ce.key&&Ce.value&&(He[Ce.key]=Ce.value),He),{}),_e=(He,Ce)=>/^(authorization|password|passwd|token|api[-_]?key|secret)$/i.test(He)?"***":Ce,be=Object.fromEntries(Object.entries(ae).map(([He,Ce])=>[He,_e(He,Ce)])),Le=Object.keys(be).length?`$headers = @${JSON.stringify(be).replace(/"/g,'"')}`.replace(/@\{/,"@{").replace(/\}/g,"}"):"$headers = @{}",Te=(n.body||"").trim(),Xe=Te&&["POST","PUT","PATCH","DELETE"].includes(le)?` -Body ${JSON.stringify(Te)}`:"",Ke=`${Le}
Invoke-RestMethod -Uri '${de}' -Method ${le}${Xe} -Headers $headers${Te?" -ContentType 'application/json'":""}`;navigator.clipboard.writeText(Ke).catch(()=>{}),window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e==null?void 0:e.id,kind:"info",message:"Copied PowerShell"}})),alert("PowerShell command copied")}catch(K){alert("Failed to create PowerShell command: "+(K.message||"error"))}},ue=()=>{var B;try{if(!l){alert("No response to export");return}const K=((B=e==null?void 0:e.config)==null?void 0:B.baseUrl)||"",de=((Le,Te)=>Le.replace(/\/$/,"")+"/"+(Te||"/").replace(/^\//,""))(K,n.endpoint||"/"),le=y.reduce((Le,Te)=>(Te.key&&Te.value&&Le.push({name:Te.key,value:Te.value}),Le),[]),ae={log:{version:"1.2",creator:{name:"UNICON",version:"1.0"},entries:[{startedDateTime:new Date(l.timestamp||Date.now()).toISOString(),time:l.duration||0,request:{method:n.method||"GET",url:de,httpVersion:"HTTP/1.1",headers:le,queryString:[],headersSize:-1,bodySize:(n.body||"").length,postData:["POST","PUT","PATCH","DELETE"].includes((n.method||"").toUpperCase())?{mimeType:"application/json",text:n.body||""}:void 0},response:{status:l.status,statusText:l.statusText||"",httpVersion:"HTTP/1.1",headers:Object.entries(l.headers||{}).map(([Le,Te])=>({name:Le,value:String(Te)})),content:{mimeType:"application/json",text:JSON.stringify(l.data)},headersSize:-1,bodySize:JSON.stringify(l.data||"").length},cache:{},timings:{send:0,wait:l.duration||0,receive:0}}]}},_e=new Blob([JSON.stringify(ae,null,2)],{type:"application/json"}),be=document.createElement("a");be.href=URL.createObjectURL(_e),be.download="unicon.har",be.click(),URL.revokeObjectURL(be.href)}catch(K){alert("HAR export failed: "+(K.message||"error"))}},me=ge.useRef(!1);return ge.useEffect(()=>{me.current||!s||!e||e.status!=="connected"||(me.current=!0,m(B=>({...B,method:s.method||"GET",endpoint:s.endpoint||"/"})),setTimeout(()=>{ce()},50))},[s,e==null?void 0:e.status]),r.jsxs("div",{className:"h-full flex flex-col",children:[e?r.jsxs("div",{className:"mb-3 space-y-2",children:[r.jsx(ar,{connection:e}),r.jsx(nr,{connectionId:e.id})]}):null,r.jsx("div",{className:"border-b border-gray-200 mb-6",children:r.jsx("nav",{className:"flex space-x-8",children:["request","response","history"].map(B=>r.jsxs("button",{onClick:()=>a(B),className:`py-2 px-1 border-b-2 font-medium text-sm ${i===B?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[B==="request"&&"Request",B==="response"&&"Response",B==="history"&&`History (${p.length})`]},B))})}),r.jsxs("div",{className:"mb-3 text-sm text-gray-700 flex flex-col gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:"Quick pick:"}),r.jsxs("select",{className:"border rounded px-2 py-1",onChange:async B=>{const K=Number(B.target.value);if(isNaN(K))return;const te=Qt.rest[K];T(te);const le=(await Es({name:`${te.name} (REST)`,type:"rest",config:{baseUrl:te.baseUrl}})).connection;try{await hs(le.id);const ae={...le,status:"connected"};typeof t=="function"&&t("rest",{connectionId:le.id,connection:ae,title:`REST  ${te.name}`,autoRequest:{method:"GET",endpoint:te.tryPath||"/"}})}catch{typeof t=="function"&&t("rest",{connectionId:le.id,connection:le,title:`REST  ${te.name}`})}},children:[r.jsx("option",{children:"Pick"}),Qt.rest.map((B,K)=>r.jsx("option",{value:K,children:B.name},B.name))]}),((ye=A==null?void 0:A.endpoints)==null?void 0:ye.length)>0&&r.jsxs("button",{className:"text-xs text-blue-600 hover:underline",onClick:()=>q(!R),children:[R?"Hide":"Show"," endpoints (",A.endpoints.length,")"]})]}),((P=A==null?void 0:A.endpoints)==null?void 0:P.length)>0&&R&&r.jsxs("div",{className:"border rounded bg-white max-h-48 overflow-auto",children:[r.jsxs("div",{className:"px-2 py-1 bg-gray-100 text-xs font-medium border-b sticky top-0",children:[A.name,"  Click an endpoint to load it"]}),A.endpoints.map((B,K)=>r.jsxs("button",{className:"w-full text-left px-2 py-1.5 hover:bg-blue-50 text-sm flex items-center gap-2 border-b border-gray-100 last:border-b-0",title:B.summary||"",onClick:()=>{if(m(te=>({...te,method:B.method,endpoint:B.path,body:B.body?JSON.stringify(B.body,null,2):""})),B.headers&&Object.keys(B.headers).length>0){const te=Object.entries(B.headers).map(([de,le])=>({key:de,value:le}));w(te.length>0?te:[{key:"",value:""}])}else w([{key:"",value:""}]);a("request")},children:[r.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-mono font-medium ${B.method==="GET"?"bg-green-100 text-green-700":B.method==="POST"?"bg-blue-100 text-blue-700":B.method==="PUT"?"bg-yellow-100 text-yellow-700":B.method==="PATCH"?"bg-orange-100 text-orange-700":B.method==="DELETE"?"bg-red-100 text-red-700":"bg-gray-200 text-gray-700"}`,children:B.method}),r.jsx("span",{className:"font-mono text-[12px] text-gray-800",children:B.path}),B.summary&&r.jsxs("span",{className:"text-xs text-gray-500 truncate",children:[" ",B.summary]}),B.body&&r.jsx("span",{className:"text-[10px] text-blue-500 ml-auto",children:"+ body"})]},K))]})]}),i==="request"&&r.jsxs("div",{className:"flex-1 space-y-6",children:[r.jsxs("div",{className:"bg-gray-50 border rounded p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Rd,{size:14}),r.jsx("div",{className:"text-sm font-medium",children:"OpenAPI / Swagger"})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("label",{className:"text-sm",children:"Upload:"}),r.jsx("input",{type:"file",accept:".json,.yaml,.yml",onChange:B=>{var K;return((K=B.target.files)==null?void 0:K[0])&&N(B.target.files[0])}}),r.jsx("span",{className:"text-xs text-gray-500",children:_==="loaded"?"Spec loaded":_==="loading"?"Loading":""})]}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx(o0,{size:14}),r.jsx(lt,{className:"flex-1",placeholder:"https://host/openapi.json",value:u,onChange:B=>c(B.target.value)}),r.jsx(xe,{size:"sm",onClick:W,children:"Load"}),r.jsx(xe,{size:"sm",variant:"secondary",onClick:()=>L(),children:"Refresh endpoints"})]}),d.length>0&&r.jsx("div",{className:"mt-2 max-h-40 overflow-auto border rounded",children:d.map((B,K)=>r.jsxs("button",{className:"w-full text-left px-2 py-1 hover:bg-gray-100 text-sm flex items-center gap-2",title:B.summary||"",onClick:()=>{m(te=>({...te,method:B.method,endpoint:B.path})),a("request")},children:[r.jsx("span",{className:"px-1 py-0.5 rounded text-[11px] font-mono bg-gray-200",children:B.method}),r.jsx("span",{className:"font-mono text-[12px]",children:B.path}),B.summary&&r.jsxs("span",{className:"text-xs text-gray-500",children:[" ",B.summary]})]},K))}),r.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[r.jsx(Rd,{size:14}),r.jsx("div",{className:"text-sm font-medium",children:"JSON Schema  Body"}),r.jsx("input",{type:"file",accept:".json",onChange:async B=>{var te;const K=(te=B.target.files)==null?void 0:te[0];if(K)try{const de=await K.text(),le=JSON.parse(de),ae=I(le);x(JSON.stringify(ae,null,2))}catch{alert("Invalid JSON schema")}}}),j&&r.jsx(xe,{size:"sm",onClick:()=>m(B=>({...B,method:["POST","PUT","PATCH"].includes(B.method)?B.method:"POST",body:j})),children:"Insert to body"})]}),j&&r.jsx("pre",{className:"mt-2 bg-gray-900 text-green-400 p-2 rounded text-xs max-h-40 overflow-auto",children:j})]}),r.jsxs("div",{className:"flex space-x-3 mt-4",children:[r.jsx(Jv,{value:n.method,onChange:B=>m(K=>({...K,method:B.target.value})),className:"w-32","aria-label":"HTTP Method",children:z.map(B=>r.jsx("option",{value:B,children:B},B))}),r.jsx(lt,{value:n.endpoint,onChange:B=>m(K=>({...K,endpoint:B.target.value})),placeholder:"/api/endpoint","aria-label":"Endpoint",className:"flex-1"}),r.jsx(xe,{onClick:ce,disabled:f||(e==null?void 0:e.status)!=="connected",leftEl:f?r.jsx("span",{className:"mr-2",children:r.jsx("span",{className:"sr-only",children:"Loading"})}):r.jsx(Gn,{size:16,className:"mr-2"}),children:"Send"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Headers"}),r.jsx(xe,{variant:"secondary",size:"sm",onClick:Q,leftEl:r.jsx($f,{size:14,className:"mr-1"}),children:"Add Header"})]}),r.jsx("div",{className:"space-y-2",children:y.map((B,K)=>r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(lt,{value:B.key,onChange:te=>re(K,"key",te.target.value),placeholder:"Header Name",className:"flex-1"}),r.jsx(lt,{value:B.value,onChange:te=>re(K,"value",te.target.value),placeholder:"Header Value",className:"flex-1"}),r.jsx("button",{onClick:()=>pe(K),className:"p-2 text-gray-400 hover:text-red-500",children:r.jsx(Yi,{size:14})})]},K))})]}),["POST","PUT","PATCH"].includes(n.method)&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Request Body"}),r.jsx("textarea",{value:n.body,onChange:B=>m(K=>({...K,body:B.target.value})),placeholder:'{"key": "value"}',rows:8,className:"w-full px-3 py-2 border border-swarco-grey-400 rounded-md font-mono text-sm focus:outline-none focus:ring-2 focus:ring-swarco-blue-200 focus:border-swarco-blue-600"}),r.jsx("div",{className:"text-xs text-gray-500",children:"JSON format expected. Will be parsed automatically."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Post actions"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(xe,{size:"sm",variant:"secondary",onClick:()=>D(B=>[...B,{type:"download",filename:"response.json"}]),leftEl:r.jsx(ac,{size:14,className:"mr-1"}),children:"Save as file"}),r.jsx(xe,{size:"sm",variant:"secondary",onClick:()=>D(B=>[...B,{type:"followup",method:"GET",endpoint:"/"}]),leftEl:r.jsx(c0,{size:14,className:"mr-1"}),children:"Add follow-up"})]})]}),E.length>0&&r.jsx("div",{className:"space-y-1",children:E.map((B,K)=>r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"px-2 py-0.5 bg-gray-100 rounded text-xs font-mono",children:B.type}),B.type==="download"&&r.jsx("input",{className:"border rounded px-2 py-1 text-xs",placeholder:"filename",value:B.filename||"",onChange:te=>D(de=>de.map((le,ae)=>ae===K?{...le,filename:te.target.value}:le))}),B.type==="followup"&&r.jsxs(r.Fragment,{children:[r.jsx("select",{className:"border rounded px-2 py-1 text-xs",value:B.method,onChange:te=>D(de=>de.map((le,ae)=>ae===K?{...le,method:te.target.value}:le)),children:z.map(te=>r.jsx("option",{value:te,children:te},te))}),r.jsx("input",{className:"border rounded px-2 py-1 text-xs flex-1",placeholder:"/path",value:B.endpoint,onChange:te=>D(de=>de.map((le,ae)=>ae===K?{...le,endpoint:te.target.value}:le))})]}),r.jsx("button",{className:"text-gray-400 hover:text-red-500",onClick:()=>D(te=>te.filter((de,le)=>le!==K)),children:r.jsx(Yi,{size:14})})]},K))})]})]}),i==="response"&&r.jsx("div",{className:"flex-1",children:l?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Response Info"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(xe,{size:"sm",variant:"secondary",onClick:()=>o(!S),leftEl:S?r.jsx(u0,{size:12,className:"mr-1"}):r.jsx(nc,{size:12,className:"mr-1"}),children:S?"Formatted":"Raw"}),r.jsx(xe,{size:"sm",variant:"secondary",onClick:()=>Y(F(l.data)),leftEl:r.jsx(zi,{size:12,className:"mr-1"}),children:"Copy"}),r.jsx(xe,{size:"sm",variant:"secondary",onClick:()=>H(),leftEl:r.jsx(zi,{size:12,className:"mr-1"}),children:"Copy cURL"}),r.jsx(xe,{size:"sm",variant:"secondary",onClick:()=>Z(),leftEl:r.jsx(zi,{size:12,className:"mr-1"}),children:"Copy PowerShell"}),r.jsx(xe,{size:"sm",variant:"secondary",onClick:()=>ue(),leftEl:r.jsx(ac,{size:12,className:"mr-1"}),children:"Export HAR"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Status:"}),r.jsxs("span",{className:`ml-2 px-2 py-1 rounded text-xs font-mono ${V(l.status)}`,children:[l.status," ",l.statusText]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Time:"}),r.jsx("span",{className:"ml-2 font-mono",children:new Date(l.timestamp).toLocaleTimeString()})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Size:"}),r.jsxs("span",{className:"ml-2 font-mono",children:[JSON.stringify(l.data).length," bytes"]})]})]})]}),l.headers&&Object.keys(l.headers).length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Response Headers"}),r.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:r.jsx("div",{className:"space-y-1 text-sm font-mono",children:Object.entries(l.headers).map(([B,K])=>r.jsxs("div",{className:"flex",children:[r.jsxs("span",{className:"text-gray-600 w-32 flex-shrink-0",children:[B,":"]}),r.jsx("span",{className:"text-gray-800",children:K})]},B))})})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Response Body"}),r.jsx("div",{className:"bg-gray-900 text-green-400 rounded-lg p-4 font-mono text-sm overflow-auto max-h-96",children:S?r.jsx("pre",{children:JSON.stringify(l.data)}):r.jsx("pre",{children:F(l.data)})})]})]}):r.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:r.jsxs("div",{className:"text-center",children:[r.jsx(lc,{size:48,className:"mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"Keine Response verfgbar"}),r.jsx("p",{className:"text-sm",children:"Senden Sie zuerst einen Request"})]})})}),i==="history"&&r.jsx("div",{className:"flex-1",children:p.length>0?r.jsx("div",{className:"space-y-3",children:p.map((B,K)=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 cursor-pointer",onClick:()=>k(B),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"px-2 py-1 text-xs font-mono bg-gray-100 rounded",children:B.request.method}),r.jsx("span",{className:"font-mono text-sm text-gray-700",children:B.request.endpoint}),r.jsx("span",{className:`px-2 py-1 text-xs font-mono rounded ${V(B.status)}`,children:B.status})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[r.jsx(Ua,{size:12}),r.jsx("span",{children:new Date(B.timestamp).toLocaleString()})]})]}),r.jsxs("div",{className:"text-sm text-gray-600",children:[Object.keys(B.request.headers||{}).length>0&&r.jsxs("span",{className:"mr-3",children:[Object.keys(B.request.headers).length," headers"]}),B.request.body&&r.jsxs("span",{children:["Body: ",B.request.body.slice(0,50),"..."]})]})]},K))}):r.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ua,{size:48,className:"mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"Keine Request History"}),r.jsx("p",{className:"text-sm",children:"Ihre Requests werden hier angezeigt"})]})})})]})};function A2(){const[e,t]=ge.useState({connected:!1,paused:!1}),[s,i]=ge.useState(!0),[a,n]=ge.useState(null),[m,l]=ge.useState(Date.now()),[h,p]=ge.useState(()=>{try{return localStorage.getItem("unicon_ws_paused")==="1"}catch{return!1}});if(ge.useEffect(()=>{const w=o=>t(o.detail||{connected:!1});window.addEventListener("unicon-ws-status",w);const S=setInterval(()=>l(Date.now()),500);return()=>{window.removeEventListener("unicon-ws-status",w),clearInterval(S)}},[]),ge.useEffect(()=>{const w=async()=>{try{const o=await fetch("/unicon/api/health");i(o.ok),n(new Date)}catch{i(!1),n(new Date)}};w();const S=setInterval(w,1e4);return()=>{clearInterval(S)}},[]),e.connected&&s&&!h)return null;const b=e.nextRetryTs&&!h?Math.max(0,Math.ceil((e.nextRetryTs-m)/1e3)):null,f=()=>{h||window.dispatchEvent(new CustomEvent("unicon-ws-reconnect"))},v=()=>{const w=!h;p(w);try{localStorage.setItem("unicon_ws_paused",w?"1":"0")}catch{}window.dispatchEvent(new CustomEvent("unicon-ws-toggle-pause",{detail:{paused:w}}))},y=async()=>{const w={apiOk:s,wsConnected:e.connected,wsPaused:h,wsError:!!e.error,wsUrl:e.url||null,nextRetryTs:e.nextRetryTs||null,page:typeof location<"u"?location.href:null,ua:typeof navigator<"u"?navigator.userAgent:null,lastHealthCheck:a?a.toISOString():null,ts:new Date().toISOString()};try{await navigator.clipboard.writeText(JSON.stringify(w,null,2))}catch{}};return r.jsxs("div",{className:"bg-amber-50 border-b border-amber-200 text-amber-900 text-sm px-4 py-2 flex items-center gap-3",children:[r.jsx("span",{className:"inline-flex w-2.5 h-2.5 rounded-full bg-amber-500"}),r.jsxs("span",{className:"flex-1",children:["Backend: ",s?"API OK":"API unreachable","  WS ",h?"paused":e.connected?"connected":"disconnected",!h&&b!==null?`  auto-retry in ${b}s`:"",a?`  checked ${a.toLocaleTimeString()}`:""]}),r.jsx("button",{className:"px-2 py-1 border rounded bg-white hover:bg-gray-50",onClick:v,children:h?"Resume WS":"Pause WS"}),r.jsx("button",{className:"px-2 py-1 border rounded bg-white hover:bg-gray-50",onClick:f,disabled:h,title:h?"Resume first to reconnect":"Reconnect WebSocket",children:"Retry"}),r.jsx("button",{className:"px-2 py-1 border rounded bg-white hover:bg-gray-50",onClick:y,children:"Copy diagnostics"})]})}function T2({connection:e}){const[t,s]=M.useState([]),[i,a]=M.useState(null),[n,m]=M.useState(""),[l,h]=M.useState("Auto"),[p,b]=M.useState(!1),[f,v]=M.useState((e==null?void 0:e.status)||"disconnected"),y=ge.useMemo(()=>`opcua_simple_mode_${(e==null?void 0:e.id)||"global"}`,[e==null?void 0:e.id]),[w,S]=M.useState(()=>{try{return(localStorage.getItem(y)??"1")!=="0"}catch{return!0}});M.useEffect(()=>{try{localStorage.setItem(y,w?"1":"0")}catch{}},[w,y]);const[o,u]=M.useState(null),[c,d]=M.useState(1e3),[g,_]=M.useState(""),[C,j]=M.useState([]),[x,E]=M.useState(""),[D,A]=M.useState(""),[T,R]=M.useState([]),[q,G]=M.useState(1),[z,W]=M.useState(10),[N,L]=M.useState(0),I=M.useRef(null),[U,se]=M.useState([]),ce=200;M.useEffect(()=>{const $=ee=>{const ie=ee.detail||{};if(ie.type!=="opcua")return;const we=ie.data||{};if(we.connectionId!==(e==null?void 0:e.id)||i&&we.nodeId!==i.nodeId)return;const ve=Number(we.value);Number.isFinite(ve)&&se(Ee=>{const We=[...Ee,{t:Date.parse(we.ts||new Date().toISOString()),v:ve}];return We.length>ce?We.slice(-ce):We})};return window.addEventListener("unicon-ws",$),()=>window.removeEventListener("unicon-ws",$)},[e==null?void 0:e.id,i==null?void 0:i.nodeId]),M.useEffect(()=>{const $=I.current;if(!$)return;const ee=$.getContext("2d"),ie=$.width=$.clientWidth||320,we=$.height=$.clientHeight||80;if(ee.clearRect(0,0,ie,we),!U.length){ee.strokeStyle="#94a3b8",ee.beginPath(),ee.moveTo(0,we-1),ee.lineTo(ie,we-1),ee.stroke();return}const ve=U.map(tt=>tt.t),Ee=U.map(tt=>tt.v),We=ve[0],Fe=ve[ve.length-1]||We+1,gt=Math.min(...Ee),Wt=Math.max(...Ee),Ot=Math.max(1,Fe-We),gs=Wt-gt||1;ee.strokeStyle="#2563eb",ee.lineWidth=1.5,ee.beginPath(),U.forEach((tt,Qs)=>{const Di=(tt.t-We)/Ot*(ie-6)+3,X=we-((tt.v-gt)/gs*(we-6)+3);Qs===0?ee.moveTo(Di,X):ee.lineTo(Di,X)}),ee.stroke()},[U]);const Q=ge.useMemo(()=>`opcua_saved_nodes_${(e==null?void 0:e.id)||"global"}`,[e==null?void 0:e.id]),re=ge.useMemo(()=>`opcua_seq_${(e==null?void 0:e.id)||"global"}`,[e==null?void 0:e.id]),[pe,k]=M.useState(()=>{try{return JSON.parse(localStorage.getItem(Q)||"[]")}catch{return[]}}),[F,Y]=M.useState(()=>{try{return JSON.parse(localStorage.getItem(re)||"[]")}catch{return[]}}),[V,O]=M.useState(!1),H=M.useRef(null),[Z,ue]=M.useState(1),[me,ye]=M.useState(!1),[P,B]=M.useState(""),K=M.useRef(null),[te,de]=M.useState([]),[le,ae]=M.useState(()=>new Set),[_e,be]=M.useState(!1);M.useEffect(()=>{v((e==null?void 0:e.status)||"disconnected")},[e==null?void 0:e.status]),M.useEffect(()=>{try{localStorage.setItem(Q,JSON.stringify(pe))}catch{}},[pe,Q]),M.useEffect(()=>{try{localStorage.setItem(re,JSON.stringify(F))}catch{}},[F,re]);const Le=async()=>{if(e!=null&&e.id){b(!0);try{await hs(e.id),v("connected");try{window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e.id,kind:"status",message:"connected"}}))}catch{}await Xe(!0)}catch($){try{window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e.id,kind:"error",message:`OPC UA connect failed: ${$.message}`}}))}catch{}alert($.message||"Connect failed")}finally{b(!1)}}},Te=async()=>{if(e!=null&&e.id){b(!0);try{await Ni(e.id),v("disconnected");try{window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e.id,kind:"status",message:"disconnected"}}))}catch{}s([]),a(null)}catch($){try{window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e.id,kind:"error",message:`OPC UA disconnect failed: ${$.message}`}}))}catch{}alert($.message||"Disconnect failed")}finally{b(!1)}}},Xe=async($=!1)=>{if(!(!e||!$&&f!=="connected")){b(!0);try{const ie=await(await fetch("/unicon/api/operation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:e.id,operation:"browse",params:{nodeId:"RootFolder"}})})).json();ie.success&&s(ie.nodes||[])}finally{b(!1)}}},as=async()=>{if(!(!(e!=null&&e.id)||!i)){b(!0);try{const $=await Ae(e.id,"read",{nodes:[{nodeId:i.nodeId}]}),ee=($==null?void 0:$.data)||$,ie=Array.isArray(ee==null?void 0:ee.values)?ee.values[0]:(ee==null?void 0:ee.value)??null;m(ie==null?"":String(ie));try{window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e.id,kind:"info",message:`Read ${i.nodeId}`,hint:String(ie).slice(0,800)}}))}catch{}}catch($){try{window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e.id,kind:"error",message:`OPC UA read failed: ${$.message}`}}))}catch{}alert($.message||"Read failed")}finally{b(!1)}}},Ke=($,ee)=>{const ie=(ee||"Auto").toLowerCase();if(ie==="auto"){try{return JSON.parse($)}catch{}if(/^true|false$/i.test($))return/^true$/i.test($);const we=Number($);return Number.isNaN(we)?$:we}if(ie==="json")try{return JSON.parse($)}catch{return $}return ie==="boolean"?/^true$/i.test($):ie==="int32"?parseInt($,10):ie==="float"||ie==="double"?parseFloat($):$},He=async()=>{if(!(e!=null&&e.id)||!i)return;const $=Ke(n,l);b(!0);try{const ee=await Ae(e.id,"write",{nodeId:i.nodeId,value:$,dataType:l==="Auto"?void 0:l}),ie=(ee==null?void 0:ee.success)||(ee==null?void 0:ee.statusCode)==="Good"||(ee==null?void 0:ee.statusCode)===0;try{window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e.id,kind:ie?"info":"error",message:`Write ${i.nodeId}`,hint:JSON.stringify({value:$,dataType:l}).slice(0,800)}}))}catch{}ie||alert("Write may have failed")}catch(ee){try{window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e.id,kind:"error",message:`OPC UA write failed: ${ee.message}`}}))}catch{}alert(ee.message||"Write failed")}finally{b(!1)}};M.useEffect(()=>{f==="connected"&&Xe()},[f]);const Ce=()=>{if(!i){alert("Select a node first");return}const $=prompt("Label (optional):",i.displayName||i.nodeId)||"",ee={nodeId:i.nodeId,label:$.trim(),displayName:i.displayName||""};pe.some(ie=>ie.nodeId===ee.nodeId)||k(ie=>[...ie,ee])},xt=$=>k(ee=>ee.filter(ie=>ie.nodeId!==$)),lr=$=>{var ie;const ee=(i==null?void 0:i.nodeId)||((ie=pe[0])==null?void 0:ie.nodeId)||"";if(!ee){alert("Add or select a node first");return}Y(we=>[...we,{nodeId:ee,selected:!1,dataType:"Auto",value:"",delayMs:1e3,durationMs:0,jitterMs:0,revert:!1,description:""}])},he=($,ee,ie)=>Y(we=>we.map((ve,Ee)=>Ee===$?{...ve,[ee]:ie}:ve)),or=$=>Y(ee=>ee.filter((ie,we)=>we!==$)),Xs=()=>{H.current=null,O(!1)},Js=async()=>{if(!(e!=null&&e.id)||!i){alert("Select a node to monitor");return}if(!o)try{const $=await Ae(e.id,"monitorStart",{nodeIds:[i.nodeId],samplingInterval:parseInt(c||1e3,10)});$!=null&&$.success&&$.monitorId?(u($.monitorId),_($.logPath||""),se([]),window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e.id,kind:"info",message:`Monitoring ${i.nodeId} (interval ${c} ms)`}})),$.logPath&&window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e.id,kind:"info",message:`CSV: ${$.logPath}`}}))):alert("Monitor start failed")}catch($){alert($.message||"Monitor start failed")}},cr=async $=>{if(!(e!=null&&e.id)||!$)return;if(o)try{await Ti()}catch{}const ee=i;a({nodeId:$,displayName:$}),await Js(),ee||a({nodeId:$,displayName:$})},Ti=async()=>{if(!(!(e!=null&&e.id)||!o))try{await Ae(e.id,"monitorStop",{monitorId:o}),u(null),window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e.id,kind:"info",message:"Monitor stopped"}}))}catch($){alert($.message||"Monitor stop failed")}},ns=$=>new Promise(ee=>setTimeout(ee,$)),ur=()=>{if(!P)return null;try{const $=new Date(P);return isNaN($.getTime())?null:$.getTime()}catch{return null}},[J,Oe]=M.useState(0),Ne=$=>$?F.filter(ee=>ee.selected):F,Kt=async($=!1)=>{const ee=Ne($);if(!ee.length){alert("No steps selected");return}let we=(()=>{try{const ve=new Date(P);return isNaN(ve.getTime())?new Date:ve}catch{return new Date}})().getTime();ee.forEach((ve,Ee)=>{we+=Math.max(0,parseInt(ve.delayMs||0,10));const We=new Date(we).toLocaleTimeString(),Fe=`DRY step ${Ee+1}: ${ve.nodeId} ${ve.dataType||"Auto"}=${ve.value} @ ${We}`;window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e==null?void 0:e.id,kind:"info",message:Fe}}))}),alert(`Dry run planned ${ee.length} steps. Check Client log for details.`)},Pe=async($=!1)=>{var we;const ee=Ne($);if(!ee.length){alert("No steps to validate");return}if(f!=="connected"){alert("Connect first");return}const ie=Array.from(new Set(ee.map(ve=>ve.nodeId).filter(Boolean))).map(ve=>({nodeId:ve}));try{const ve=await Ae(e.id,"read",{nodes:ie}),Ee=((we=(ve==null?void 0:ve.data)||ve)==null?void 0:we.values)||[];let We=0,Fe=0;const gt=[];ie.forEach((Ot,gs)=>{var Qs;const tt=((Qs=Ee[gs])==null?void 0:Qs.statusCode)||"Good";String(tt).toLowerCase().includes("good")?We++:(Fe++,gt.push(`${Ot.nodeId} (${tt})`))});const Wt=`Validated ${ie.length} nodes: ${We} OK, ${Fe} bad`;window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e==null?void 0:e.id,kind:Fe?"error":"info",message:Wt,hint:gt.join("; ").slice(0,800)}})),alert(Wt+(gt.length?`
Failed: ${gt.slice(0,5).join(", ")}${gt.length>5?" ":""}`:""))}catch(ve){window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e==null?void 0:e.id,kind:"error",message:`Validate failed: ${ve.message}`}})),alert("Validate failed: "+(ve.message||"error"))}},ps=async()=>{var ve;if(!(e!=null&&e.id))return;if(!F.length){alert("No steps");return}if(f!=="connected"){alert("Connect first");return}const $=_e?F.filter(Ee=>Ee.selected):F;if(!$.length){alert("No steps selected");return}const ee=Date.now();H.current=ee,O(!0);const ie=ur();if(ie&&ie>Date.now()){const Ee=ie-Date.now();if(window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e.id,kind:"info",message:`Sequence starts in ${Ee} ms`}})),await ns(Ee),H.current!==ee){O(!1);return}}let we=0;for(;H.current===ee&&(me||we<Math.max(1,parseInt(Z||1,10)));){for(let We=0;We<$.length&&H.current===ee;We++){const Fe=$[We],gt=Math.max(0,parseInt(Fe.jitterMs||0,10)),Wt=Math.max(0,parseInt(Fe.delayMs||0,10)+(gt?Math.floor(Math.random()*(gt*2+1))-gt:0));if(Wt>0&&await ns(Wt),H.current!==ee)break;try{let Ot;if(Fe.revert&&parseInt(Fe.durationMs||0,10)>0){const X=await Ae(e.id,"read",{nodes:[{nodeId:Fe.nodeId}]}),ne=(X==null?void 0:X.data)||X,je=(ne==null?void 0:ne.values)||[];Ot=Array.isArray(je)?((ve=je[0])==null?void 0:ve.value)??je[0]:ne==null?void 0:ne.value}const gs=Ke(String(Fe.value??""),Fe.dataType||"Auto"),tt=await Ae(e.id,"write",{nodeId:Fe.nodeId,value:gs,dataType:Fe.dataType==="Auto"?void 0:Fe.dataType}),Qs=(tt==null?void 0:tt.success)||(tt==null?void 0:tt.statusCode)==="Good"||(tt==null?void 0:tt.statusCode)===0;window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e.id,kind:Qs?"info":"error",message:`Seq write ${Fe.nodeId}`,hint:JSON.stringify({value:gs,dataType:Fe.dataType}).slice(0,800)}}));const Di=Math.max(0,parseInt(Fe.durationMs||0,10));if(Di>0&&await ns(Di),Fe.revert&&Ot!==void 0&&H.current===ee)try{await Ae(e.id,"write",{nodeId:Fe.nodeId,value:Ot,dataType:void 0}),window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e.id,kind:"info",message:`Reverted ${Fe.nodeId}`,hint:String(Ot).slice(0,800)}}))}catch(X){window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e.id,kind:"error",message:`Revert failed: ${X.message}`}}))}}catch(Ot){window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e.id,kind:"error",message:`Seq step failed: ${Ot.message}`}}))}}if(we++,!me&&we>=Math.max(1,parseInt(Z||1,10)))break;const Ee=parseInt(J||0,10);Ee>0&&H.current===ee&&await ns(Ee)}H.current===ee&&O(!1)};return M.useEffect(()=>{(async()=>{try{const $=new URLSearchParams;e!=null&&e.id&&$.set("connectionId",e.id),x&&$.set("q",x),D&&$.set("datasetId",D),$.set("page",String(q)),$.set("pageSize",String(z));const ie=await(await fetch(`/unicon/api/opcua/logs?${$.toString()}`)).json();j(Array.isArray(ie==null?void 0:ie.files)?ie.files:[]),L(parseInt((ie==null?void 0:ie.total)||0,10)),R(Array.isArray(ie==null?void 0:ie.datasets)?ie.datasets:[])}catch{}})()},[e==null?void 0:e.id,x,D,q,z]),r.jsxs("div",{className:"h-full flex flex-col space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-medium",children:"OPC UA Browser"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("label",{className:"flex items-center text-sm gap-2 mr-2",children:[r.jsx("input",{type:"checkbox",checked:w,onChange:$=>S($.target.checked)})," Simple mode"]}),r.jsx(ar,{connection:e,status:f}),r.jsx(xe,{variant:"secondary",onClick:Le,disabled:f==="connected"||p,leftEl:r.jsx(Gl,{size:16,className:"mr-2"}),children:"Connect"}),r.jsx(xe,{variant:"secondary",onClick:Te,disabled:f!=="connected"||p,leftEl:r.jsx(Kl,{size:16,className:"mr-2"}),children:"Disconnect"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",min:"50",step:"50",value:c,onChange:$=>d($.target.value),className:"w-24 border rounded px-2 py-1 text-sm",title:"Sampling interval (ms)"}),r.jsx(xe,{variant:"secondary",onClick:Js,disabled:p||f!=="connected"||!i||!!o,children:"Start Monitor"}),r.jsx(xe,{variant:"secondary",onClick:Ti,disabled:!o,children:"Stop Monitor"}),r.jsx(xe,{variant:"secondary",onClick:async()=>{if(o)try{const ee=await(await fetch("/unicon/api/opcua/monitor/stop-rotate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({monitorId:o})})).json();ee!=null&&ee.success?(u(null),window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e.id,kind:"info",message:`CSV rotated ${ee.rotatedPath||""}`}}))):alert("Rotate failed")}catch($){alert($.message||"Rotate failed")}},disabled:!o,children:"Stop + Rotate CSV"}),r.jsx(xe,{variant:"secondary",onClick:()=>{o&&window.open(`/unicon/api/opcua/monitor/csv?monitorId=${encodeURIComponent(o)}`,"_blank")},disabled:!o,children:"Download CSV"})]}),r.jsx(xe,{variant:"secondary",onClick:()=>Xe(),disabled:p||f!=="connected",leftEl:r.jsx(js,{size:16,className:p?"mr-2 animate-spin":"mr-2"}),children:"Refresh"})]}),!w&&r.jsxs("div",{className:"border rounded p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"font-medium",children:"Saved Nodes"}),r.jsx("div",{className:"text-xs text-gray-500",children:pe.length})]}),pe.length?r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:pe.map($=>r.jsxs("div",{className:"border rounded p-2 text-sm flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:le.has($.nodeId),onChange:ee=>{ae(ie=>{const we=new Set(ie);return ee.target.checked?we.add($.nodeId):we.delete($.nodeId),we})}}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:$.label||$.displayName||$.nodeId}),r.jsx("div",{className:"text-xs text-gray-500 font-mono",children:$.nodeId})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"px-2 py-0.5 border rounded text-xs",onClick:()=>a({nodeId:$.nodeId,displayName:$.label||$.displayName||$.nodeId}),children:"Use"}),r.jsx("button",{className:"px-2 py-0.5 border rounded text-xs",onClick:()=>xt($.nodeId),children:"Remove"})]})]},$.nodeId))}):r.jsx("div",{className:"text-sm text-gray-500",children:"No saved nodes yet."}),r.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm",children:[r.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>{const $=Array.from(le);if(!$.length){alert("Select nodes first");return}Y(ee=>[...ee,...$.map(ie=>({nodeId:ie,dataType:"Auto",value:"",delayMs:1e3}))])},children:"Add selected to sequence"}),r.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>ae(new Set),children:"Clear selection"})]})]}),!w&&r.jsxs("div",{className:"border rounded p-4 col-span-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"font-medium",children:"Write Sequence"}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsxs("label",{className:"flex items-center gap-1",children:["Start at",r.jsx("input",{type:"datetime-local",className:"border rounded px-2 py-1",value:P,onChange:$=>B($.target.value)})]}),r.jsxs("label",{className:"flex items-center gap-1",children:["Repeat",r.jsx("input",{type:"number",min:"1",className:"border rounded px-2 py-1 w-20",value:Z,onChange:$=>ue($.target.value)})]}),r.jsxs("label",{className:"flex items-center gap-1",children:["Pause",r.jsx("input",{type:"number",min:"0",className:"border rounded px-2 py-1 w-24",value:J,onChange:$=>Oe($.target.value)})," ms"]}),r.jsxs("label",{className:"flex items-center gap-1",children:[r.jsx("input",{type:"checkbox",checked:me,onChange:$=>ye($.target.checked)})," Loop"]}),r.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>lr(),children:"Add step"}),r.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>Kt(_e),title:"Simulate without writing",children:"Dry run"}),r.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>Pe(_e),title:"Read nodes once to pre-check",children:"Validate"}),r.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>{try{const $=new Blob([JSON.stringify(F,null,2)],{type:"application/json"}),ee=document.createElement("a");ee.href=URL.createObjectURL($),ee.download="opcua-sequence.json",ee.click(),URL.revokeObjectURL(ee.href)}catch{alert("Export failed")}},children:"Export"}),r.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>{var $;return($=K.current)==null?void 0:$.click()},children:"Import"}),r.jsx("input",{ref:K,type:"file",accept:"application/json",className:"hidden",onChange:async $=>{var ie;const ee=(ie=$.target.files)==null?void 0:ie[0];if(ee)try{const we=await ee.text(),ve=JSON.parse(we);Array.isArray(ve)&&Y(ve.map(Ee=>({nodeId:String(Ee.nodeId||""),selected:!!Ee.selected,dataType:Ee.dataType||"Auto",value:Ee.value??"",delayMs:parseInt(Ee.delayMs||0,10),durationMs:parseInt(Ee.durationMs||0,10),jitterMs:parseInt(Ee.jitterMs||0,10),revert:!!Ee.revert,description:Ee.description||""})))}catch(we){alert("Import failed: "+(we.message||"error"))}finally{$.target.value=""}}}),r.jsxs("label",{className:"flex items-center gap-1",children:[r.jsx("input",{type:"checkbox",checked:_e,onChange:$=>be($.target.checked)})," Run selected only"]}),r.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>{const $=_e;be(!1),ps().finally(()=>be($))},disabled:V||f!=="connected",children:"Run all"}),r.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>{const $=_e;be(!0),ps().finally(()=>be($))},disabled:V||f!=="connected",children:"Run selected"}),r.jsx("button",{className:"px-2 py-1 border rounded",onClick:Xs,disabled:!V,children:"Stop"})]})]}),F.length?r.jsx("div",{className:"overflow-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-2 py-1",children:"Sel"}),r.jsx("th",{className:"text-left px-2 py-1",children:"Node"}),r.jsx("th",{className:"text-left px-2 py-1",children:"Type"}),r.jsx("th",{className:"text-left px-2 py-1",children:"Value"}),r.jsx("th",{className:"text-left px-2 py-1",children:"Delay"}),r.jsx("th",{className:"text-left px-2 py-1",children:"Jitter"}),r.jsx("th",{className:"text-left px-2 py-1",children:"Hold"}),r.jsx("th",{className:"text-left px-2 py-1",children:"Revert"}),r.jsx("th",{className:"text-left px-2 py-1",children:"Desc"}),r.jsx("th",{className:"px-2 py-1"})]})}),r.jsx("tbody",{children:F.map(($,ee)=>r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"px-2 py-1 text-center",children:r.jsx("input",{type:"checkbox",checked:!!$.selected,onChange:ie=>he(ee,"selected",ie.target.checked)})}),r.jsx("td",{className:"px-2 py-1",children:r.jsx("select",{className:"border rounded px-2 py-1 font-mono text-xs min-w-[280px]",value:$.nodeId,onChange:ie=>he(ee,"nodeId",ie.target.value),children:[...new Set([$.nodeId,i==null?void 0:i.nodeId,...pe.map(ie=>ie.nodeId)].filter(Boolean))].map(ie=>r.jsx("option",{value:ie,children:ie},ie))})}),r.jsx("td",{className:"px-2 py-1",children:r.jsx("select",{className:"border rounded px-2 py-1",value:$.dataType||"Auto",onChange:ie=>he(ee,"dataType",ie.target.value),children:["Auto","Boolean","Int32","Float","Double","String","JSON"].map(ie=>r.jsx("option",{value:ie,children:ie},ie))})}),r.jsx("td",{className:"px-2 py-1",children:r.jsx("input",{className:"border rounded px-2 py-1 w-full font-mono text-xs",value:$.value||"",onChange:ie=>he(ee,"value",ie.target.value),placeholder:"value"})}),r.jsx("td",{className:"px-2 py-1",children:r.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24",value:$.delayMs||0,onChange:ie=>he(ee,"delayMs",ie.target.value)})}),r.jsx("td",{className:"px-2 py-1",children:r.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24",value:$.jitterMs||0,onChange:ie=>he(ee,"jitterMs",ie.target.value)})}),r.jsx("td",{className:"px-2 py-1",children:r.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24",value:$.durationMs||0,onChange:ie=>he(ee,"durationMs",ie.target.value)})}),r.jsx("td",{className:"px-2 py-1 text-center",children:r.jsx("input",{type:"checkbox",checked:!!$.revert,onChange:ie=>he(ee,"revert",ie.target.checked)})}),r.jsx("td",{className:"px-2 py-1",children:r.jsx("input",{className:"border rounded px-2 py-1 w-full text-xs",value:$.description||"",onChange:ie=>he(ee,"description",ie.target.value),placeholder:"description"})}),r.jsx("td",{className:"px-2 py-1 text-right",children:r.jsx("button",{className:"px-2 py-0.5 border rounded text-xs",onClick:()=>or(ee),children:"Remove"})})]},ee))})]})}):r.jsx("div",{className:"text-sm text-gray-500",children:"No steps. Add steps to build a write sequence."}),r.jsx("div",{className:"mt-3 text-xs text-gray-700",children:(()=>{if(!F.length)return null;let ee=(()=>{try{const ve=new Date(P);return isNaN(ve.getTime())?new Date:ve}catch{return new Date}})().getTime();const ie=F.map((ve,Ee)=>(ee+=parseInt(ve.delayMs||0,10),{idx:Ee+1,at:new Date(ee),nodeId:ve.nodeId,desc:ve.description||""})),we=F.reduce((ve,Ee)=>ve+parseInt(Ee.delayMs||0,10),0);return r.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[r.jsxs("div",{className:"mb-1",children:["First run total time: ",we," ms"]}),r.jsx("div",{className:"max-h-28 overflow-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left",children:"#"}),r.jsx("th",{className:"text-left",children:"Time"}),r.jsx("th",{className:"text-left",children:"Node"}),r.jsx("th",{className:"text-left",children:"Desc"})]})}),r.jsx("tbody",{children:ie.map(ve=>r.jsxs("tr",{children:[r.jsx("td",{className:"pr-2",children:ve.idx}),r.jsx("td",{className:"pr-2",children:ve.at.toLocaleTimeString()}),r.jsx("td",{className:"pr-2 font-mono",children:ve.nodeId}),r.jsx("td",{children:ve.desc})]},ve.idx))})]})})]})})()})]})]}),r.jsx(nr,{connectionId:e==null?void 0:e.id}),r.jsxs("div",{className:`flex-1 grid ${w?"grid-cols-2":"grid-cols-3"} gap-4`,children:[r.jsxs("div",{className:"border rounded p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"font-medium",children:"Nodes"}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx(xe,{variant:"secondary",onClick:Ce,disabled:!i,children:"Add to Saved"})})]}),t.length?r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:t.map($=>r.jsx("div",{className:`p-2 rounded hover:bg-gray-50 border ${(i==null?void 0:i.nodeId)===$.nodeId?"bg-blue-50 border-blue-200":"border-transparent"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"cursor-pointer",onClick:()=>{a($),m($.value||"")},children:[r.jsx("div",{className:"font-medium text-sm",children:$.displayName}),r.jsx("div",{className:"text-xs text-gray-500",children:$.nodeId})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("button",{className:"px-2 py-0.5 border rounded text-xs",onClick:()=>cr($.nodeId),disabled:f!=="connected",children:"Start"})})]})},$.nodeId))}):r.jsxs("div",{className:"text-center text-gray-500 py-8",children:[r.jsx(Hi,{size:32,className:"mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm",children:f==="connected"?"No nodes available":"Not connected"})]})]}),r.jsxs("div",{className:"border rounded p-4",children:[r.jsx("h4",{className:"font-medium mb-3",children:"Node Operations"}),r.jsxs("div",{className:"mb-3 bg-gray-50 rounded p-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("div",{className:"text-xs text-gray-600",children:"Live Value (selected node)"}),r.jsx("div",{className:"text-[11px] text-gray-600 font-mono",children:(()=>{const $=U.length;if(!$)return"";const ee=U.map(Ee=>Ee.v),ie=Math.min(...ee),we=Math.max(...ee);return`last=${ee[ee.length-1]}  min=${ie}  max=${we}  n=${$}`})()})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"text-sm font-mono min-w-[120px]",children:U.length?String(U[U.length-1].v):""}),r.jsx("canvas",{ref:I,style:{width:"100%",height:"64px"}})]})]}),i?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Node ID"}),r.jsx(lt,{value:i.nodeId,readOnly:!0,className:"w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Value"}),r.jsx(lt,{value:n,onChange:$=>m($.target.value),className:"w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data Type"}),r.jsx("select",{className:"border rounded px-2 py-1 text-sm",value:l,onChange:$=>h($.target.value),children:["Auto","Boolean","Int32","Float","Double","String","JSON"].map($=>r.jsx("option",{value:$,children:$},$))})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(xe,{variant:"secondary",className:"flex-1",onClick:as,disabled:f!=="connected"||p,children:"Read"}),r.jsx(xe,{className:"flex-1",onClick:He,disabled:f!=="connected"||p,children:"Write"})]})]}):r.jsxs("div",{className:"text-center text-gray-500 py-8",children:[r.jsx(xu,{size:32,className:"mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm",children:"Select a node to perform operations"})]})]}),r.jsxs("div",{className:"border rounded p-4 col-span-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"font-medium",children:"Logs"}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("input",{className:"px-2 py-1 border rounded text-sm",placeholder:"Search",value:x,onChange:$=>E($.target.value)}),r.jsxs("select",{className:"px-2 py-1 border rounded text-sm",value:D,onChange:$=>{A($.target.value),G(1)},children:[r.jsx("option",{value:"",children:"All datasets"}),T.map($=>r.jsx("option",{value:$,children:$},$))]}),r.jsx("select",{className:"px-2 py-1 border rounded text-sm",value:z,onChange:$=>{W(parseInt($.target.value,10)),G(1)},children:[10,20,50,100].map($=>r.jsxs("option",{value:$,children:[$,"/page"]},$))}),r.jsx("button",{className:"px-2 py-1 border rounded",onClick:async()=>{try{const $=new URLSearchParams;e!=null&&e.id&&$.set("connectionId",e.id),x&&$.set("q",x),D&&$.set("datasetId",D),$.set("page",String(q)),$.set("pageSize",String(z));const ie=await(await fetch(`/unicon/api/opcua/logs?${$.toString()}`)).json();j(Array.isArray(ie==null?void 0:ie.files)?ie.files:[]),L(parseInt((ie==null?void 0:ie.total)||0,10)),R(Array.isArray(ie==null?void 0:ie.datasets)?ie.datasets:[])}catch{}},children:"Refresh"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>{q>1&&G($=>$-1)},disabled:q<=1,children:"Prev"}),r.jsx("span",{className:"text-xs text-gray-600",children:q}),r.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>{const $=Math.max(1,Math.ceil(N/z));q<$&&G(ee=>ee+1)},disabled:q>=Math.max(1,Math.ceil(N/z)),children:"Next"})]})]})]}),r.jsx("div",{className:"max-h-64 overflow-y-auto text-sm",children:C.length?r.jsx("div",{className:"space-y-1",children:C.map($=>r.jsxs("div",{className:"flex items-center justify-between border rounded px-2 py-1",children:[r.jsxs("div",{className:"truncate",children:[r.jsx("div",{className:"font-mono text-xs truncate",title:$.name,children:$.name}),r.jsxs("div",{className:"text-[11px] text-gray-500",children:[new Date($.mtime).toLocaleString(),"  ",($.size/1024).toFixed(1)," KB"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"px-2 py-0.5 border rounded text-xs",onClick:()=>window.open(`/unicon/api/opcua/logs/download?file=${encodeURIComponent($.name)}`,"_blank"),children:"Download"}),r.jsx("button",{className:"px-2 py-0.5 border rounded text-xs",onClick:async()=>{if(confirm("Delete log?"))try{await fetch("/unicon/api/opcua/logs",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:$.name})}),j(ee=>ee.filter(ie=>ie.name!==$.name))}catch{}},children:"Delete"})]})]},$.name))}):r.jsx("div",{className:"text-gray-500 text-sm",children:"No logs found"})}),r.jsxs("div",{className:"mt-2 text-[11px] text-gray-600",children:["Total: ",N]})]}),!w&&r.jsxs("div",{className:"border rounded p-4 col-span-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"font-medium",children:"Batch Read (Saved Nodes)"}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("button",{className:"px-2 py-1 border rounded",onClick:async()=>{const $=Array.from(le),ee=$.length?pe.filter(ie=>$.includes(ie.nodeId)):pe;if(!ee.length){alert("No saved nodes");return}if(f!=="connected"){alert("Connect first");return}try{const ie=await Ae(e.id,"read",{nodes:ee.map(We=>({nodeId:We.nodeId}))}),we=(ie==null?void 0:ie.data)||ie,ve=(we==null?void 0:we.values)||[],Ee=ee.map((We,Fe)=>{var gt,Wt;return{nodeId:We.nodeId,value:((gt=ve[Fe])==null?void 0:gt.value)??ve[Fe]??null,statusCode:((Wt=ve[Fe])==null?void 0:Wt.statusCode)||"Good"}});de(Ee)}catch(ie){alert("Batch read failed: "+(ie.message||"error"))}},children:"Read All"}),r.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>{if(!te.length)return;const $=["nodeId","value","statusCode"],ee=Ee=>{const We=String(Ee??"");return/[",\n]/.test(We)?'"'+We.replace(/"/g,'""')+'"':We},ie=[$.join(",")].concat(te.map(Ee=>$.map(We=>ee(Ee[We])).join(","))),we=new Blob([ie.join(`
`)],{type:"text/csv;charset=utf-8;"}),ve=document.createElement("a");ve.href=URL.createObjectURL(we),ve.download="opcua-batch.csv",ve.click(),URL.revokeObjectURL(ve.href)},children:"Export CSV"}),r.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>de([]),children:"Clear"})]})]}),te.length?r.jsx("div",{className:"overflow-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-2 py-1",children:"Node"}),r.jsx("th",{className:"text-left px-2 py-1",children:"Value"}),r.jsx("th",{className:"text-left px-2 py-1",children:"Status"})]})}),r.jsx("tbody",{children:te.map(($,ee)=>r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"px-2 py-1 font-mono text-xs",children:$.nodeId}),r.jsx("td",{className:"px-2 py-1 font-mono text-xs break-words",children:String($.value)}),r.jsx("td",{className:"px-2 py-1 text-xs",children:$.statusCode})]},ee))})]})}):r.jsx("div",{className:"text-sm text-gray-500",children:"No results yet."})]})]})]})}function _r({id:e,label:t,helper:s,error:i,className:a="",...n}){return r.jsxs("div",{className:`flex items-start gap-2 ${a}`,children:[r.jsx("input",{id:e,type:"checkbox",className:`h-4 w-4 rounded border ${i?"border-swarco-red-500":"border-swarco-grey-400"} text-swarco-blue-800 focus:ring-swarco-blue-200`,...n}),r.jsxs("div",{children:[t?r.jsx("label",{htmlFor:e,className:"text-[16px] leading-6 text-swarco-grey-900",children:t}):null,s?r.jsx(Dd,{tone:i?"error":"default",children:s}):null]})]})}function D2({connection:e,openTab:t}){const[s,i]=M.useState(""),[a,n]=M.useState([]),[m,l]=M.useState(!0),[h,p]=M.useState((e==null?void 0:e.status)||"disconnected");M.useEffect(()=>{const f=v=>{var w;const y=v.detail||{};try{(y==null?void 0:y.type)==="ws"&&((w=y==null?void 0:y.data)==null?void 0:w.connectionId)===(e==null?void 0:e.id)&&(y.data.event==="message"?n(S=>[...S,{type:"received",content:y.data.data,timestamp:new Date}]):y.data.event==="connected"?p("connected"):y.data.event==="closed"&&(p("disconnected"),m&&(e!=null&&e.id)&&fetch("/unicon/api/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:e.id})}).catch(()=>{})))}catch{}};return window.addEventListener("unicon-ws",f),()=>window.removeEventListener("unicon-ws",f)},[e==null?void 0:e.id,m]);const b=async()=>{if(!(!s.trim()||!e||h!=="connected"))try{try{window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:e.id,kind:"ws_sent",message:s}}))}catch{}await fetch("/unicon/api/operation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:e.id,operation:"send",params:{message:s}})}),n(f=>[...f,{type:"sent",content:s,timestamp:new Date}]),i("")}catch(f){console.error("Send error:",f)}};return r.jsxs("div",{className:"h-full flex flex-col space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-medium",children:"WebSocket Client"}),r.jsx(ar,{connection:e,status:h})]}),r.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"mr-2",children:"Quick pick:"}),r.jsxs("select",{className:"border rounded px-2 py-1",onChange:async f=>{const v=Number(f.target.value);if(isNaN(v))return;const y=Qt.ws[v],S=(await Es({name:`${y.name} (WS)`,type:"websocket",config:{url:y.url}})).connection;try{await hs(S.id);const o={...S,status:"connected"};typeof t=="function"&&t("ws",{connectionId:S.id,connection:o,title:`WebSocket  ${y.name}`})}catch{typeof t=="function"&&t("ws",{connectionId:S.id,connection:S,title:`WebSocket  ${y.name}`})}},children:[r.jsx("option",{children:"Pick"}),Qt.ws.map((f,v)=>r.jsx("option",{value:v,children:f.name},f.name))]})]}),r.jsxs("span",{children:["Status: ",h]}),r.jsx(_r,{id:"ws-autoreconnect",label:"Auto-reconnect",checked:m,onChange:f=>l(f.target.checked)}),r.jsx(xe,{variant:"secondary",disabled:h==="connected",onClick:()=>fetch("/unicon/api/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:e.id})}),children:"Connect"}),r.jsx(xe,{variant:"secondary",disabled:h!=="connected",onClick:()=>fetch("/unicon/api/disconnect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:e.id})}),children:"Disconnect"})]}),r.jsx(nr,{connectionId:e==null?void 0:e.id,className:"mb-3"}),r.jsxs("div",{className:"flex-1 border border-gray-200 rounded-lg p-4",children:[r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto mb-4",children:a.map((f,v)=>r.jsxs("div",{className:`p-2 rounded ${f.type==="sent"?"bg-blue-50 border-l-4 border-blue-500":"bg-green-50 border-l-4 border-green-500"}`,children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:f.timestamp.toLocaleTimeString()}),r.jsx("div",{className:"font-mono text-sm",children:f.content})]},v))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(lt,{value:s,onChange:f=>i(f.target.value),placeholder:"Enter message...",className:"flex-1",onKeyDown:f=>f.key==="Enter"&&b()}),r.jsx(xe,{onClick:b,children:"Send"})]})]})]})}function R2({connectionId:e,openTab:t}){const[s,i]=M.useState("localhost:50051"),[a]=M.useState(e||null),[n,m]=M.useState(""),[l,h]=M.useState(""),[p,b]=M.useState(""),[f,v]=M.useState(""),[y,w]=M.useState("{}"),[S,o]=M.useState(null);async function u(){try{const _=a||await c(),j=await(await fetch("/unicon/api/operation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:_,operation:"unary",params:{method:f,request:JSON.parse(y||"{}")}})})).json();o(j)}catch(_){o({error:_.message})}}async function c(){if(a)return a;const C=(await fetch("/unicon/api/connections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:`grpc:${s}`,type:"grpc",config:{address:s,proto:n,package:l,service:p}})}).then(j=>j.json())).connection.id;return await fetch("/unicon/api/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:C})}),C}function d(_){i(_.address),m(_.proto),h(_.pkg),b(_.svc),v(_.method),w(_.payload)}const g=[{label:"Hello (local test.proto)",address:"localhost:9090",proto:"server/proto/test.proto",pkg:"test",svc:"Echo",method:"Say",payload:'{"name":"World"}'}];return r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx(nr,{connectionId:a}),r.jsx("h3",{className:"text-lg font-medium",children:"gRPC Workspace"}),r.jsxs("div",{className:"text-sm text-gray-700 mb-2",children:["Quick pick:",r.jsxs("select",{className:"ml-2 border rounded px-2 py-1",onChange:_=>{const C=Number(_.target.value);isNaN(C)||(d(g[C]),_.target.value="")},children:[r.jsx("option",{children:"Pick"}),g.map((_,C)=>r.jsx("option",{value:C,children:_.label},_.label))]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx("div",{children:r.jsx(lt,{label:"Address",value:s,onChange:_=>i(_.target.value),placeholder:"localhost:50051"})}),r.jsx("div",{children:r.jsx(lt,{label:"Package",value:l,onChange:_=>h(_.target.value),placeholder:"my.package"})}),r.jsx("div",{children:r.jsx(lt,{label:"Service",value:p,onChange:_=>b(_.target.value),placeholder:"MyService"})}),r.jsx("div",{children:r.jsx(lt,{label:"Method",value:f,onChange:_=>v(_.target.value),placeholder:"SayHello"})})]}),r.jsx("div",{children:r.jsx(lt,{label:"Proto (path under server/proto or absolute)",value:n,onChange:_=>m(_.target.value),placeholder:"helloworld.proto"})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-swarco-grey-900 mb-1",children:"Payload (JSON)"}),r.jsx("textarea",{className:"w-full border border-swarco-grey-400 rounded px-3 py-2 font-mono text-sm focus:outline-none focus:ring-2 focus:ring-swarco-blue-200 focus:border-swarco-blue-600",rows:6,value:y,onChange:_=>w(_.target.value)})]}),r.jsx(xe,{onClick:u,children:"Call Unary"}),S&&r.jsx("div",{className:"text-sm bg-gray-50 border rounded p-3 mt-2",children:r.jsx("pre",{children:JSON.stringify(S,null,2)})})]})}const L2=({connection:e,openTab:t})=>{var pe,k,F,Y,V;const[s,i]=M.useState("topics"),[a,n]=M.useState([]),[m,l]=M.useState(""),[h,p]=M.useState([]),[b,f]=M.useState('{"value": 23.5, "unit": "C", "timestamp": "'+new Date().toISOString()+'"}'),[v,y]=M.useState(`sw.sensor.#
sw.assets.#`),[w,S]=M.useState([]),[o,u]=M.useState("sw.*"),[c,d]=M.useState(!1),[g,_]=M.useState("test"),[C,j]=M.useState("publish"),[x,E]=M.useState({storeAll:!1,flatSubscribe:!0,sendInitialData:!0,aggrMode:0}),D="/unicon/api",A=[{value:"publish",label:"Publish (FullFull)",description:"Standard publish"},{value:"publishUpdate",label:"Publish Update",description:"Merge partial data"},{value:"deltaPublish",label:"Delta Publish",description:"Changes only"},{value:"publishDeltaToDelta",label:"DeltaDelta",description:"Performance optimized"},{value:"publishDeltaToFull",label:"DeltaFull",description:"Merge delta to full"},{value:"publishFullToDelta",label:"FullDelta",description:"Extract changes"},{value:"sendTopic",label:"Send Topic",description:"No storage/management"}],T=async()=>{var O;if(!(!e||e.status!=="connected")){d(!0);try{const Z=await(await fetch(`${D}/operation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:e.id,operation:"ping",params:{message:g}})})).json();Z.success?L("ping",`Ping response: ${((O=Z.data)==null?void 0:O.msg)||"OK"}`,null,Z.data):L("error",`Ping failed: ${Z.error}`,null,null)}catch(H){console.error("Ping error:",H),L("error",`Ping error: ${H.message}`,null,null)}finally{d(!1)}}},R=async()=>{var O;if(!(!e||e.status!=="connected")){d(!0);try{const Z=await(await fetch(`${D}/operation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:e.id,operation:"browseTopics",params:{topicPattern:o,limit:100,beginTopicName:"",reverse:!1}})})).json();Z.success?(n(Z.topicNames||[]),L("browse",`Found ${((O=Z.topicNames)==null?void 0:O.length)||0} topics`,null,Z.topicNames)):L("error",`Browse failed: ${Z.error}`,null,null)}catch(H){console.error("Browse error:",H),L("error",`Browse error: ${H.message}`,null,null)}finally{d(!1)}}},q=async()=>{if(!e||e.status!=="connected"||!v.trim())return;const O=Date.now();d(!0);try{const H=v.split(`
`).map(me=>me.trim()).filter(me=>me),ue=await(await fetch(`${D}/operation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:e.id,operation:"subscribe",params:{id:O,topicPatterns:H,config:x}})})).json();ue.success?(p(me=>[...me,{id:O,patterns:H,config:x,timestamp:new Date,messageCount:0}]),L("subscribe",`Subscribed to ${H.length} patterns`,null,{id:O,patterns:H})):L("error",`Subscribe failed: ${ue.error}`,null,null)}catch(H){console.error("Subscribe error:",H),L("error",`Subscribe error: ${H.message}`,null,null)}finally{d(!1)}},G=async()=>{if(!e||e.status!=="connected"||!v.trim())return;const O=Date.now();d(!0);try{const H=v.split(`
`).map(me=>me.trim()).filter(me=>me),ue=await(await fetch(`${D}/operation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:e.id,operation:"simpleSubscribe",params:{id:O,topicPatterns:H}})})).json();ue.success?(p(me=>[...me,{id:O,patterns:H,config:{simple:!0},timestamp:new Date,messageCount:0}]),L("subscribe",`Simple subscribed to ${H.length} patterns`,null,{id:O,patterns:H})):L("error",`Simple subscribe failed: ${ue.error}`,null,null)}catch(H){console.error("Simple subscribe error:",H),L("error",`Simple subscribe error: ${H.message}`,null,null)}finally{d(!1)}},z=async O=>{if(!(!e||e.status!=="connected"))try{const Z=await(await fetch(`${D}/operation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:e.id,operation:"unsubscribe",params:{id:O}})})).json();Z.success?(p(ue=>ue.filter(me=>me.id!==O)),L("unsubscribe",`Unsubscribed from ID: ${O}`,null,{id:O})):L("error",`Unsubscribe failed: ${Z.error}`,null,null)}catch(H){console.error("Unsubscribe error:",H),L("error",`Unsubscribe error: ${H.message}`,null,null)}},W=async()=>{if(!(!e||e.status!=="connected"||!m.trim())){d(!0);try{let O;try{O=JSON.parse(b)}catch{O=b}const Z=await(await fetch(`${D}/operation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:e.id,operation:C,params:{topic:m,data:O}})})).json();Z.success?L("publish",`Published (${C}) to: ${m}`,m,O):L("error",`Publish failed: ${Z.error}`,m,null)}catch(O){console.error("Publish error:",O),L("error",`Publish error: ${O.message}`,m,null)}finally{d(!1)}}},N=async()=>{if(!(!e||e.status!=="connected")){d(!0);try{const O=v.split(`
`).map(ue=>ue.trim()).filter(ue=>ue),Z=await(await fetch(`${D}/operation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:e.id,operation:"getLatestData",params:{topicPatterns:O}})})).json();Z.success?L("latestData",`Retrieved latest data for ${O.length} patterns`,null,Z.data):L("error",`Get latest data failed: ${Z.error}`,null,null)}catch(O){console.error("Get latest data error:",O),L("error",`Get latest data error: ${O.message}`,null,null)}finally{d(!1)}}},L=(O,H,Z=null,ue=null)=>{const me={id:Date.now()+Math.random(),type:O,message:H,topic:Z,data:ue,timestamp:new Date};S(ye=>[me,...ye.slice(0,99)])},I=O=>{navigator.clipboard.writeText(O).then(()=>{L("info","Copied to clipboard",null,null)})},U=()=>{S([])},se=O=>{if(typeof O=="string")try{return JSON.stringify(JSON.parse(O),null,2)}catch{return O}return JSON.stringify(O,null,2)},ce=O=>{switch(O){case"ping":return r.jsx(Kn,{className:"text-yellow-500",size:14});case"subscribe":return r.jsx(ii,{className:"text-green-500",size:14});case"unsubscribe":return r.jsx(Ld,{className:"text-orange-500",size:14});case"publish":return r.jsx(Gn,{className:"text-blue-500",size:14});case"received":return r.jsx(oc,{className:"text-purple-500",size:14});case"browse":return r.jsx(wa,{className:"text-teal-500",size:14});case"latestData":return r.jsx(Hi,{className:"text-indigo-500",size:14});case"error":return r.jsx(h0,{className:"text-red-500",size:14});case"info":return r.jsx(Ff,{className:"text-gray-500",size:14});default:return r.jsx(oc,{className:"text-gray-500",size:14})}},Q=O=>{switch(O){case"ping":return"border-l-yellow-500 bg-yellow-50";case"subscribe":return"border-l-green-500 bg-green-50";case"unsubscribe":return"border-l-orange-500 bg-orange-50";case"publish":return"border-l-blue-500 bg-blue-50";case"received":return"border-l-purple-500 bg-purple-50";case"browse":return"border-l-teal-500 bg-teal-50";case"latestData":return"border-l-indigo-500 bg-indigo-50";case"error":return"border-l-red-500 bg-red-50";case"info":return"border-l-gray-300 bg-gray-50";default:return"border-l-gray-300 bg-gray-50"}},re=ge.useCallback(O=>{var H,Z,ue;if(((Z=(H=O.data)==null?void 0:H.payload)==null?void 0:Z.type)==="topicChange"){const me=O.data.payload;p(ye=>ye.map(P=>P.id===me.subscriptionId?{...P,messageCount:P.messageCount+1}:P)),(ue=me.topics)==null||ue.forEach(ye=>{L("received","Topic data received",ye.topic,ye.data)})}},[L]);return M.useEffect(()=>{const O=H=>re(H.detail||{});return window.addEventListener("unicon-ws",O),()=>window.removeEventListener("unicon-ws",O)},[re]),r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsx("div",{className:"border-b border-gray-200 mb-6",children:r.jsx("nav",{className:"flex space-x-8",children:["topics","messages","subscriptions","settings"].map(O=>r.jsxs("button",{onClick:()=>i(O),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${s===O?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[O==="topics"&&"Topics & Operations",O==="messages"&&`Messages (${w.length})`,O==="subscriptions"&&`Subscriptions (${h.length})`,O==="settings"&&"Settings"]},O))})}),r.jsx(nr,{connectionId:e==null?void 0:e.id}),r.jsxs("div",{className:"mb-3 text-sm text-gray-700 flex items-center gap-2",children:[r.jsx("span",{children:"Quick pick:"}),r.jsxs("select",{className:"border rounded px-2 py-1",onChange:async O=>{const H=O.target.value;if(!H)return;const[Z,ue]=H.split("|"),me=Z==="grpc"?{name:"CPD gRPC (local)",type:"cpd",config:{protocol:"grpc",address:ue}}:{name:"CPD WS (local)",type:"cpd",config:{protocol:"websocket",url:ue}},P=(await Es(me)).connection;typeof t=="function"&&t("cpd",{connectionId:P.id,connection:P,title:`CPD  ${me.name}`}),O.target.value=""},children:[r.jsx("option",{value:"",children:"Pick"}),r.jsx("option",{value:"grpc|localhost:8082",children:"Local gRPC adapter (localhost:8082)"}),r.jsx("option",{value:"ws|ws://localhost:8003",children:"Local WebSocket adapter (ws://localhost:8003)"})]})]}),s==="topics"&&r.jsxs("div",{className:"flex-1 space-y-6",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("h4",{className:"font-medium mb-3 flex items-center",children:[r.jsx(Kn,{size:16,className:"mr-2 text-yellow-500"}),"Connection Test"]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("input",{type:"text",value:g,onChange:O=>_(O.target.value),placeholder:"Ping message",className:"flex-1 px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-teal-500"}),r.jsxs(xe,{onClick:T,disabled:c,leftIcon:Kn,children:[c?r.jsx(js,{size:16,className:"animate-spin"}):null,"Ping"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h4",{className:"font-medium flex items-center",children:[r.jsx(wa,{size:16,className:"mr-2 text-teal-500"}),"Browse Topics"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"text",value:o,onChange:O=>u(O.target.value),placeholder:"sw.* or sw.sensors.# or specific.topic.name",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-teal-500"}),r.jsxs(xe,{variant:"secondary",className:"w-full",onClick:R,disabled:c,leftIcon:wa,children:[c?r.jsx(js,{size:16,className:"mr-2 animate-spin"}):null,"Browse Topics"]})]}),a.length>0&&r.jsxs("div",{className:"border border-gray-200 rounded-lg max-h-64 overflow-y-auto",children:[r.jsxs("div",{className:"p-2 bg-gray-50 border-b text-xs font-medium text-gray-600",children:["Found ",a.length," topics"]}),a.map((O,H)=>r.jsx("div",{onClick:()=>l(O),className:`p-2 cursor-pointer hover:bg-gray-50 border-b border-gray-100 last:border-b-0 ${m===O?"bg-teal-50 border-teal-200":""}`,children:r.jsx("span",{className:"font-mono text-sm",children:O})},H))]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h4",{className:"font-medium flex items-center",children:[r.jsx(Gn,{size:16,className:"mr-2 text-blue-500"}),"Publish Data"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"text",value:m,onChange:O=>l(O.target.value),placeholder:"sw.sensor.temperature.room1",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-teal-500"}),r.jsx("select",{value:C,onChange:O=>j(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-teal-500",children:A.map(O=>r.jsxs("option",{value:O.value,children:[O.label," - ",O.description]},O.value))}),r.jsx("textarea",{value:b,onChange:O=>f(O.target.value),placeholder:'{"value": 23.5, "unit": "C", "timestamp": "2024-01-01T12:00:00Z"}',rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded text-sm font-mono focus:outline-none focus:ring-1 focus:ring-teal-500"}),r.jsx(xe,{className:"w-full",onClick:W,disabled:c||!m.trim(),leftIcon:Gn,children:`Publish (${C})`})]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("h4",{className:"font-medium mb-4 flex items-center",children:[r.jsx(ii,{size:16,className:"mr-2 text-green-500"}),"Topic Subscriptions"]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"lg:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Topic Patterns"}),r.jsx("textarea",{value:v,onChange:O=>y(O.target.value),placeholder:`sw.sensor.#
sw.assets.*
specific.topic.name`,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded text-sm font-mono focus:outline-none focus:ring-1 focus:ring-teal-500"}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Use # for multi-level wildcard, * for single-level wildcard. One pattern per line."})]}),r.jsxs("div",{className:"flex flex-col justify-end space-y-2",children:[r.jsx(xe,{onClick:G,disabled:c||!v.trim(),leftIcon:ii,children:"Simple Subscribe"}),r.jsx(xe,{onClick:q,disabled:c||!v.trim(),leftIcon:ii,children:"Advanced Subscribe"}),r.jsx(xe,{variant:"secondary",onClick:N,disabled:c||!v.trim(),leftIcon:Hi,children:"Get Latest Data"})]})]})]})]}),s==="messages"&&r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Message History"}),r.jsx("div",{className:"flex space-x-2",children:r.jsxs("button",{onClick:U,disabled:w.length===0,className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50 disabled:opacity-50",children:[r.jsx(Yi,{size:14,className:"mr-1"}),"Clear"]})})]}),r.jsx("div",{className:"flex-1 border border-gray-200 rounded-lg overflow-hidden",children:r.jsx("div",{className:"h-full overflow-y-auto p-4 space-y-3",children:w.length>0?w.map(O=>r.jsxs("div",{className:`p-3 rounded-lg border-l-4 ${Q(O.type)}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[ce(O.type),r.jsx("span",{className:"text-xs font-medium text-gray-600 uppercase",children:O.type}),r.jsx("span",{className:"text-xs text-gray-500",children:O.timestamp.toLocaleTimeString()})]}),O.data&&r.jsx("button",{onClick:()=>I(se(O.data)),className:"p-1 text-gray-400 hover:text-gray-600",children:r.jsx(zi,{size:12})})]}),r.jsx("div",{className:"text-sm text-gray-700 mb-2",children:O.message}),O.topic&&r.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:[r.jsx("span",{className:"font-medium",children:"Topic:"})," ",r.jsx("span",{className:"font-mono",children:O.topic})]}),O.data&&r.jsx("div",{className:"text-xs bg-white rounded p-2 border font-mono",children:r.jsx("pre",{className:"whitespace-pre-wrap break-words max-h-32 overflow-y-auto",children:se(O.data)})})]},O.id)):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:r.jsxs("div",{className:"text-center",children:[r.jsx(d0,{size:48,className:"mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"Keine Nachrichten"}),r.jsx("p",{className:"text-sm",children:"CPD-Nachrichten werden hier angezeigt"})]})})})})]}),s==="subscriptions"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Active Subscriptions"}),h.length>0?h.map(O=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsxs("div",{children:[r.jsxs("span",{className:"font-medium",children:["Subscription ID: ",O.id]}),r.jsxs("div",{className:"text-sm text-gray-500",children:["Created: ",O.timestamp.toLocaleString()]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"text-sm text-gray-600",children:["Messages: ",r.jsx("span",{className:"font-mono font-medium",children:O.messageCount})]}),r.jsxs("button",{onClick:()=>z(O.id),className:"inline-flex items-center px-3 py-1 text-sm text-red-600 hover:text-red-800 border border-red-300 rounded hover:bg-red-50",children:[r.jsx(Ld,{size:14,className:"mr-1"}),"Unsubscribe"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Topic Patterns:"}),r.jsx("div",{className:"mt-1 space-y-1",children:O.patterns.map((H,Z)=>r.jsx("div",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:H},Z))})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Configuration:"}),r.jsx("div",{className:"mt-1 text-sm text-gray-600",children:O.config.simple?r.jsx("div",{className:"bg-blue-100 px-2 py-1 rounded",children:"Simple Subscription"}):r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{children:["Store All: ",O.config.storeAll?"Yes":"No"]}),r.jsxs("div",{children:["Flat Subscribe: ",O.config.flatSubscribe?"Yes":"No"]}),r.jsxs("div",{children:["Send Initial: ",O.config.sendInitialData?"Yes":"No"]}),r.jsxs("div",{children:["Aggregation Mode: ",O.config.aggrMode]})]})})]})]})]},O.id)):r.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ii,{size:48,className:"mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"Keine aktiven Subscriptions"}),r.jsx("p",{className:"text-sm",children:"Abonnieren Sie Topics, um Live-Updates zu erhalten"})]})})]}),s==="settings"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-medium",children:"CPD Configuration"}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium mb-3",children:"Connection Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Protocol:"}),r.jsx("span",{className:"ml-2",children:((pe=e==null?void 0:e.config)==null?void 0:pe.protocol)||"Unknown"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Address:"}),r.jsx("span",{className:"ml-2 font-mono",children:((k=e==null?void 0:e.config)==null?void 0:k.protocol)==="grpc"?(F=e==null?void 0:e.config)==null?void 0:F.address:(Y=e==null?void 0:e.config)==null?void 0:Y.url})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-700",children:"TLS/Security:"}),r.jsx("span",{className:"ml-2",children:(V=e==null?void 0:e.config)!=null&&V.useTls?"Enabled":"Disabled"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Status:"}),r.jsx("span",{className:`ml-2 font-medium ${(e==null?void 0:e.status)==="connected"?"text-green-600":"text-red-600"}`,children:(e==null?void 0:e.status)==="connected"?"Connected":"Disconnected"})]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium mb-3",children:"Default Subscription Configuration"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Store All Data"}),r.jsx("div",{className:"text-xs text-gray-500",children:"Force storage of all topic data within CPD adapter"})]}),r.jsx("button",{onClick:()=>E(O=>({...O,storeAll:!O.storeAll})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${x.storeAll?"bg-teal-600":"bg-gray-200"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${x.storeAll?"translate-x-6":"translate-x-1"}`})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Flat Subscribe"}),r.jsx("div",{className:"text-xs text-gray-500",children:"Only subscribe to currently available topics"})]}),r.jsx("button",{onClick:()=>E(O=>({...O,flatSubscribe:!O.flatSubscribe})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${x.flatSubscribe?"bg-teal-600":"bg-gray-200"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${x.flatSubscribe?"translate-x-6":"translate-x-1"}`})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Send Initial Data"}),r.jsx("div",{className:"text-xs text-gray-500",children:"Send latest data immediately upon subscription"})]}),r.jsx("button",{onClick:()=>E(O=>({...O,sendInitialData:!O.sendInitialData})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${x.sendInitialData?"bg-teal-600":"bg-gray-200"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${x.sendInitialData?"translate-x-6":"translate-x-1"}`})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aggregation Mode"}),r.jsxs("select",{value:x.aggrMode,onChange:O=>E(H=>({...H,aggrMode:parseInt(O.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-teal-500",children:[r.jsx("option",{value:0,children:"ON_ANY - Individual topic updates"}),r.jsx("option",{value:1,children:"ON_CAPTURETIME - Group updates by time window"}),r.jsx("option",{value:2,children:"ON_CAPTURETRIGGER - Group updates by trigger topic"})]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium mb-3",children:"Session Statistics"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-teal-600",children:h.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Active Subscriptions"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:w.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total Messages"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:h.reduce((O,H)=>O+H.messageCount,0)}),r.jsx("div",{className:"text-sm text-gray-600",children:"Received Updates"})]})]})]})]})]})};function Qv({size:e=16}){const t=typeof e=="number"?`${e}px`:e;return r.jsxs("svg",{style:{width:t,height:t},className:"animate-spin text-swarco-blue-800",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]})}function O2({connectionId:e}){const[t,s]=M.useState([]),[i,a]=M.useState(""),[n,m]=M.useState("disconnected"),[l,h]=M.useState("sqlite"),[p,b]=M.useState("SELECT 1 AS test;"),[f,v]=M.useState("[]"),[y,w]=M.useState([]),[S,o]=M.useState(null),[u,c]=M.useState(!1),[d,g]=M.useState(null),[_,C]=M.useState("asc"),[j,x]=M.useState({}),[E,D]=M.useState(1),A=100,T=M.useMemo(()=>(t||[]).filter(Q=>Q.type==="sql"),[t]);M.useEffect(()=>{(async()=>{var F;const Q=await Nn();s(Q.connections||[]);const re=(Q.connections||[]).filter(Y=>Y.type==="sql"),k=re.find(Y=>Y.id===e)||re[0];k&&(a(k.id),h(((F=k.config)==null?void 0:F.driver)||"sqlite"))})()},[e]);async function R(){if(i){c(!0);try{await hs(i),m("connected")}finally{c(!1)}}}async function q(){if(i){c(!0);try{await Ni(i),m("disconnected"),w([]),o(null)}finally{c(!1)}}}function G(){try{const Q=JSON.parse(f||"[]");return Array.isArray(Q)?Q:[]}catch{return[]}}const z=()=>{try{return localStorage.getItem("unicon_log_include_payload")!=="0"}catch{return!0}},W=Q=>{const re=F=>F&&"***",pe=/^(password|passwd|token|api[-_]?key|secret)$/i,k=F=>{if(!F||typeof F!="object")return F;if(Array.isArray(F))return F.map(k);const Y={};for(const[V,O]of Object.entries(F))Y[V]=pe.test(V)?re(O):k(O);return Y};try{return k(Q)}catch{return Q}},N=()=>{try{const Q=parseInt(localStorage.getItem("unicon_log_hint_limit")||"800",10);return isNaN(Q)?800:Math.min(5e3,Math.max(100,Q))}catch{return 800}};async function L(){if(!(!i||n!=="connected")){c(!0);try{const Q={connectionId:i,kind:"sql",message:(p||"").slice(0,200)};if(z()){const re=W(G()),pe=N();Q.hint=JSON.stringify(re).slice(0,pe)}window.dispatchEvent(new CustomEvent("unicon-log",{detail:Q}))}catch{}try{const Q=performance.now(),re=await Ae(i,"query",{sql:p,params:G()}),pe=Math.round(performance.now()-Q),k=(re==null?void 0:re.data)||re,F=(()=>{try{return localStorage.getItem("unicon_log_include_resp")!=="0"}catch{return!0}})();if(Array.isArray(k.rows)){w(k.rows),o({rowCount:k.rows.length}),D(1);try{if(F){const Y=N(),V=JSON.stringify(k.rows.slice(0,10));window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:i,kind:"sql_result",message:`rows=${k.rows.length}`,hint:V.slice(0,Y)}}))}}catch{}}else{w([]),o(k);try{if(F){const Y=N(),V=JSON.stringify(k);window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:i,kind:"sql_result",message:"meta",hint:V.slice(0,Y)}}))}}catch{}}try{window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:i,kind:"info",message:`SQL done (${pe}ms)`}}))}catch{}}catch(Q){w([]),o({error:Q.message});try{window.dispatchEvent(new CustomEvent("unicon-log",{detail:{connectionId:i,kind:"error",message:`SQL error: ${Q.message}`}}))}catch{}}finally{c(!1)}}}const I=M.useMemo(()=>{let Q=y;const re=Object.keys(j||{});if(re.length&&(Q=Q.filter(pe=>re.every(k=>{const F=(j[k]||"").toString().trim();if(!F)return!0;const Y=pe[k];return String(Y??"").toLowerCase().includes(F.toLowerCase())}))),d){const pe=_==="desc"?-1:1;Q=[...Q].sort((k,F)=>{const Y=k==null?void 0:k[d],V=F==null?void 0:F[d];if(Y==null&&V==null)return 0;if(Y==null)return-1*pe;if(V==null)return 1*pe;if(typeof Y=="number"&&typeof V=="number")return(Y-V)*pe;const O=String(Y),H=String(V);return O.localeCompare(H)*pe})}return Q},[y,j,d,_]),U=M.useMemo(()=>{const Q=(E-1)*A;return I.slice(Q,Q+A)},[I,E]),se=M.useMemo(()=>I.length?Object.keys(I[0]):[],[I]),ce=Math.max(1,Math.ceil(I.length/A));return r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"flex items-end gap-3",children:[r.jsxs("div",{className:"text-sm text-gray-700",children:["Quick pick:",r.jsxs("select",{className:"ml-2 border rounded px-2 py-1",onChange:async Q=>{var Y;const re=Number(Q.target.value);if(isNaN(re))return;const pe=Qt.sql[re],F=(await Es({name:pe.name,type:"sql",config:pe.config})).connection;a(F.id),h(((Y=F.config)==null?void 0:Y.driver)||"sqlite")},children:[r.jsx("option",{children:"Pick"}),Qt.sql.map((Q,re)=>r.jsx("option",{value:re,children:Q.name},Q.name))]})]}),r.jsx(M2,{connections:t,selectedId:i,status:n}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-600",children:"SQL Connection"}),r.jsx("select",{className:"border border-swarco-grey-400 rounded px-3 py-2 min-w-[16rem] focus:outline-none focus:ring-2 focus:ring-swarco-blue-200 focus:border-swarco-blue-600",value:i,onChange:Q=>{var pe;a(Q.target.value);const re=(pe=T.find(k=>k.id===Q.target.value))==null?void 0:pe.config;h((re==null?void 0:re.driver)||"sqlite")},children:T.map(Q=>{var re;return r.jsxs("option",{value:Q.id,children:[Q.name," (",((re=Q.config)==null?void 0:re.driver)||"sqlite",")"]},Q.id)})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(xe,{variant:"secondary",onClick:R,disabled:!i||u||n==="connected",leftEl:u?r.jsx(Qv,{size:14}):r.jsx(Gl,{size:14,className:"mr-1"}),children:"Connect"}),r.jsx(xe,{variant:"secondary",onClick:q,disabled:!i||u||n!=="connected",leftEl:r.jsx(Kl,{size:14,className:"mr-1"}),children:"Disconnect"})]}),r.jsxs("div",{className:"text-sm text-gray-600",children:["Driver: ",l]})]}),r.jsx(nr,{connectionId:i,className:"-mt-2"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm text-gray-600",children:"SQL"}),r.jsx("textarea",{rows:6,className:"w-full border border-swarco-grey-400 rounded px-3 py-2 font-mono text-sm focus:outline-none focus:ring-2 focus:ring-swarco-blue-200 focus:border-swarco-blue-600",value:p,onChange:Q=>b(Q.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm text-gray-600",children:"Params (JSON array)"}),r.jsx("textarea",{rows:6,className:"w-full border border-swarco-grey-400 rounded px-3 py-2 font-mono text-sm focus:outline-none focus:ring-2 focus:ring-swarco-blue-200 focus:border-swarco-blue-600",value:f,onChange:Q=>v(Q.target.value)})]})]}),r.jsx("div",{children:r.jsx(xe,{onClick:L,disabled:u||n!=="connected",children:u?"Running":"Execute"})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(xe,{variant:"secondary",size:"sm",disabled:!y.length,onClick:()=>B2(y,"query-results.csv"),children:"Export CSV"}),r.jsx(xe,{variant:"secondary",size:"sm",onClick:()=>I2(p,f),children:"Save Query"}),r.jsx(xe,{variant:"secondary",size:"sm",onClick:()=>P2(b,v),children:"Load Last"})]}),y.length>0&&r.jsxs("div",{className:"border rounded",children:[r.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b bg-gray-50 text-sm",children:[r.jsxs("div",{children:[y.length," rows"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(xe,{variant:"secondary",size:"sm",disabled:E<=1,onClick:()=>D(Q=>Math.max(1,Q-1)),children:"Prev"}),r.jsxs("span",{children:["Page ",E," / ",ce]}),r.jsx(xe,{variant:"secondary",size:"sm",disabled:E>=ce,onClick:()=>D(Q=>Math.min(ce,Q+1)),children:"Next"})]})]}),r.jsx("div",{className:"overflow-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsxs("thead",{className:"bg-gray-50",children:[r.jsx("tr",{children:se.map(Q=>r.jsx("th",{className:"text-left px-3 py-2 border-b font-medium",children:r.jsxs("button",{className:"inline-flex items-center gap-1",onClick:()=>{d===Q?C(re=>re==="asc"?"desc":"asc"):(g(Q),C("asc"))},children:[Q,d===Q&&r.jsx("span",{className:"text-xs opacity-60",children:_==="asc"?"":""})]})},Q))}),r.jsx("tr",{children:se.map(Q=>r.jsx("th",{className:"px-3 pb-2 border-b",children:r.jsx(lt,{className:"w-full text-xs",placeholder:"filter",value:j[Q]||"",onChange:re=>{const pe=re.target.value;x(k=>({...k,[Q]:pe})),D(1)}})},Q))})]}),r.jsx("tbody",{children:U.map((Q,re)=>r.jsx("tr",{className:"border-b",children:se.map(pe=>r.jsx("td",{className:"px-3 py-1 font-mono",children:String(Q[pe])},pe))},re))})]})})]}),S&&!y.length&&r.jsx("div",{className:"text-sm text-gray-700 bg-gray-50 border rounded p-3",children:r.jsx("pre",{children:JSON.stringify(S,null,2)})})]})}function M2({connections:e,selectedId:t,status:s}){const i=(e||[]).find(a=>a.id===t)||null;return r.jsx("div",{className:"ml-auto",children:r.jsx(ar,{connection:i||void 0,status:s})})}function B2(e,t){if(!e||!e.length)return;const s=Object.keys(e[0]),i=h=>{const p=String(h??"");return/[",\n]/.test(p)?'"'+p.replace(/"/g,'""')+'"':p},a=[s.join(",")].concat(e.map(h=>s.map(p=>i(h[p])).join(","))),n=new Blob([a.join(`
`)],{type:"text/csv;charset=utf-8;"}),m=URL.createObjectURL(n),l=document.createElement("a");l.href=m,l.download=t,l.click(),URL.revokeObjectURL(m)}function I2(e,t){const s={sql:e,paramsText:t,ts:Date.now()};localStorage.setItem("sql_saved_last",JSON.stringify(s))}function P2(e,t){try{const s=JSON.parse(localStorage.getItem("sql_saved_last")||"null");s&&(e(s.sql||""),t(s.paramsText||"[]"))}catch{}}function Pf(e,t=!1){setSelectedNames(s=>{const i=t?new Set:new Set(s);return t?i.add(e):i.has(e)?i.delete(e):i.add(e),i})}async function z2(){const e=prompt("New folder name:");e&&(await fetch(`${API}/operation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:connection.id,operation:"mkdir",params:{path:(cwd==="/"?"":cwd+"/")+e}})}),await list(cwd))}async function H2(){const e=Array.from(selectedNames);if(e.length!==1)return;const t=e[0],s=prompt("Rename to:",t);!s||s===t||(await fetch(`${API}/operation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:connection.id,operation:"rename",params:{from:(cwd==="/"?"":cwd+"/")+t,to:(cwd==="/"?"":cwd+"/")+s}})}),await list(cwd))}async function U2(){const e=Array.from(selectedNames);if(e.length!==1)return;const t=(cwd==="/"?"":cwd+"/")+e[0],s=await fetch(`${API}/${proto}/text?connectionId=${encodeURIComponent(connection.id)}&path=${encodeURIComponent(t)}`).then(i=>i.json());if(!s.success){alert(s.error||"Failed to load file");return}if(s.size>256*1024){alert("File too large for inline editor (>256KB)");return}setEditor({open:!0,path:t,content:s.content||"",saving:!1})}async function $2(){setEditor(t=>({...t,saving:!0}));const e=await fetch(`${API}/${proto}/text`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:connection.id,path:editor.path,content:editor.content})}).then(t=>t.json());if(setEditor(t=>({...t,saving:!1})),!e.success){alert(e.error||"Save failed");return}setEditor({open:!1,path:"",content:"",saving:!1}),await list(cwd)}function F2(e){e.preventDefault()}async function q2(e){e.preventDefault();const t=Array.from(e.dataTransfer.files||[]);if(t.length){for(const s of t){const i=new FormData;i.append("file",s),i.append("connectionId",connection.id),i.append("path",cwd),await fetch(`${API}/${proto}/upload`,{method:"POST",body:i})}await list(cwd)}}function Zv({connection:e,protocol:t,openTab:s}){const[i,a]=M.useState("."),[n,m]=M.useState([]),[l,h]=M.useState(!1),[p,b]=M.useState(new Set),[f,v]=M.useState({open:!1,path:"",content:"",saving:!1}),y="/unicon/api",w=t||((e==null?void 0:e.type)==="sftp"?"sftp":"ftp");async function S(_=i){if(!(!e||e.status!=="connected")){h(!0);try{const C=await fetch(`${y}/operation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:e.id,operation:"list",params:{path:_}})}).then(j=>j.json());C.success&&(m(C.data||[]),a(_),b(new Set))}finally{h(!1)}}}M.useEffect(()=>{(e==null?void 0:e.status)==="connected"&&S(".")},[e==null?void 0:e.status]);function o(){if(!i||i==="."||i==="/"){S("/");return}const _=i.replace(/\\+/g,"/").replace(/\/+/g,"/").split("/");_.pop();const C=_.join("/")||"/";S(C)}function u(_){if(_.isDirectory===!0||_.type===1||_.type==="d"){const j=i==="/"?`/${_.name}`:`${i}/${_.name}`;S(j)}else Pf(_.name,!0)}async function c(_){var j;const C=(j=_==null?void 0:_.target)!=null&&j.files?Array.from(_.target.files):[];if(C.length){for(const x of C){const E=new FormData;E.append("file",x),E.append("connectionId",e.id),E.append("path",i),await fetch(`${y}/${w}/upload`,{method:"POST",body:E})}await S(i)}}function d(){const _=Array.from(p);if(_.length)for(const C of _){const j=`${y}/${w}/download?connectionId=${encodeURIComponent(e.id)}&path=${encodeURIComponent(i==="/"?"":i+"/"+C)}`;window.open(j,"_blank")}}async function g(){const _=Array.from(p);if(_.length&&confirm(`Delete ${_.length} item(s)?`)){for(const C of _){const j=(i==="/"?"":i+"/")+C;await fetch(`${y}/${w}/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({connectionId:e.id,path:j})})}await S(i)}}return r.jsxs("div",{className:"h-full flex flex-col gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"text-sm text-gray-700",children:["Quick pick:",r.jsxs("select",{className:"ml-2 border rounded px-2 py-1",onChange:async _=>{const C=_.target.value;if(_.target.value="",!!C){if(C==="ftp_local"){const x=(await Es({name:"FTP localhost",type:"ftp",config:{host:"localhost",port:21,secure:!1}})).connection;typeof s=="function"&&s("ftp",{connectionId:x.id,connection:x,title:`FTP  ${x.name}`})}else if(C==="sftp_local"){const x=(await Es({name:"SFTP localhost",type:"sftp",config:{host:"localhost",port:22,username:"user"}})).connection;typeof s=="function"&&s("sftp",{connectionId:x.id,connection:x,title:`SFTP  ${x.name}`})}}},children:[r.jsx("option",{children:"Pick"}),r.jsx("option",{value:"ftp_local",children:"FTP localhost (21)"}),r.jsx("option",{value:"sftp_local",children:"SFTP localhost (22)"})]})]}),r.jsx(xe,{variant:"secondary",onClick:o,children:"Up"}),r.jsx(xe,{variant:"secondary",onClick:()=>S(i),children:"Refresh"}),r.jsx(lt,{value:i,onChange:_=>a(_.target.value),className:"flex-1"}),r.jsx("input",{type:"file",multiple:!0,onChange:c}),r.jsx(xe,{onClick:d,disabled:!p.size,children:"Download"}),r.jsx(xe,{variant:"secondary",onClick:g,disabled:!p.size,children:"Delete"}),r.jsx(xe,{variant:"secondary",onClick:z2,children:"Mkdir"}),r.jsx(xe,{variant:"secondary",onClick:H2,disabled:p.size!==1,children:"Rename"}),r.jsx(xe,{variant:"secondary",onClick:U2,disabled:p.size!==1,children:"Edit"})]}),r.jsx("div",{className:"border rounded overflow-auto",onDragOver:F2,onDrop:q2,children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"w-8 px-3 py-2",children:r.jsx("input",{type:"checkbox","aria-label":"Select all",onChange:_=>{_.target.checked?b(new Set(n.filter(C=>!(C.isDirectory===!0||C.type===1||C.type==="d")).map(C=>C.name))):b(new Set)}})}),r.jsx("th",{className:"text-left px-3 py-2",children:"Name"}),r.jsx("th",{className:"text-left px-3 py-2",children:"Type"}),r.jsx("th",{className:"text-left px-3 py-2",children:"Size"})]})}),r.jsxs("tbody",{children:[n.map((_,C)=>{const j=_.isDirectory===!0||_.type===1||_.type==="d",x=p.has(_.name);return r.jsxs("tr",{className:`border-b ${x?"bg-blue-50":""}`,children:[r.jsx("td",{className:"px-3 py-2 align-middle",children:!j&&r.jsx("input",{type:"checkbox",checked:x,onChange:()=>Pf(_.name)})}),r.jsx("td",{className:"px-3 py-2",children:r.jsx("button",{className:"hover:underline",onClick:()=>u(_),children:_.name})}),r.jsx("td",{className:"px-3 py-2",children:j?"dir":"file"}),r.jsx("td",{className:"px-3 py-2",children:_.size??""})]},C)}),!n.length&&r.jsx("tr",{children:r.jsx("td",{className:"px-3 py-6 text-center text-gray-500",colSpan:4,children:l?"Loading":"Empty"})})]})]})}),r.jsx(kn,{open:f.open,title:`Edit ${f.path}`,onClose:()=>v({open:!1,path:"",content:"",saving:!1}),footer:r.jsxs(r.Fragment,{children:[r.jsx(xe,{variant:"secondary",onClick:()=>v({open:!1,path:"",content:"",saving:!1}),children:"Cancel"}),r.jsx(xe,{onClick:$2,disabled:f.saving,children:f.saving?"Saving":"Save"})]}),children:r.jsx("textarea",{className:"w-full h-80 border rounded p-2 font-mono text-sm",value:f.content,onChange:_=>v(C=>({...C,content:_.target.value}))})})]})}function G2(e){return r.jsx(Zv,{...e,protocol:"sftp"})}var e0={exports:{}};(function(e,t){(function(s,i){e.exports=i()})(self,()=>(()=>{var s={4567:function(m,l,h){var p=this&&this.__decorate||function(d,g,_,C){var j,x=arguments.length,E=x<3?g:C===null?C=Object.getOwnPropertyDescriptor(g,_):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(d,g,_,C);else for(var D=d.length-1;D>=0;D--)(j=d[D])&&(E=(x<3?j(E):x>3?j(g,_,E):j(g,_))||E);return x>3&&E&&Object.defineProperty(g,_,E),E},b=this&&this.__param||function(d,g){return function(_,C){g(_,C,d)}};Object.defineProperty(l,"__esModule",{value:!0}),l.AccessibilityManager=void 0;const f=h(9042),v=h(6114),y=h(9924),w=h(844),S=h(5596),o=h(4725),u=h(3656);let c=l.AccessibilityManager=class extends w.Disposable{constructor(d,g){super(),this._terminal=d,this._renderService=g,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let _=0;_<this._terminal.rows;_++)this._rowElements[_]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[_]);if(this._topBoundaryFocusListener=_=>this._handleBoundaryFocus(_,0),this._bottomBoundaryFocusListener=_=>this._handleBoundaryFocus(_,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new y.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(_=>this._handleResize(_.rows))),this.register(this._terminal.onRender(_=>this._refreshRows(_.start,_.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(_=>this._handleChar(_))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(_=>this._handleTab(_))),this.register(this._terminal.onKey(_=>this._handleKey(_.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new S.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,u.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,w.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(d){for(let g=0;g<d;g++)this._handleChar(" ")}_handleChar(d){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==d&&(this._charsToAnnounce+=d):this._charsToAnnounce+=d,d===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)),v.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,v.isMac&&this._liveRegion.remove()}_handleKey(d){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(d)||this._charsToConsume.push(d)}_refreshRows(d,g){this._liveRegionDebouncer.refresh(d,g,this._terminal.rows)}_renderRows(d,g){const _=this._terminal.buffer,C=_.lines.length.toString();for(let j=d;j<=g;j++){const x=_.translateBufferLineToString(_.ydisp+j,!0),E=(_.ydisp+j+1).toString(),D=this._rowElements[j];D&&(x.length===0?D.innerText="":D.textContent=x,D.setAttribute("aria-posinset",E),D.setAttribute("aria-setsize",C))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(d,g){const _=d.target,C=this._rowElements[g===0?1:this._rowElements.length-2];if(_.getAttribute("aria-posinset")===(g===0?"1":`${this._terminal.buffer.lines.length}`)||d.relatedTarget!==C)return;let j,x;if(g===0?(j=_,x=this._rowElements.pop(),this._rowContainer.removeChild(x)):(j=this._rowElements.shift(),x=_,this._rowContainer.removeChild(j)),j.removeEventListener("focus",this._topBoundaryFocusListener),x.removeEventListener("focus",this._bottomBoundaryFocusListener),g===0){const E=this._createAccessibilityTreeNode();this._rowElements.unshift(E),this._rowContainer.insertAdjacentElement("afterbegin",E)}else{const E=this._createAccessibilityTreeNode();this._rowElements.push(E),this._rowContainer.appendChild(E)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(g===0?-1:1),this._rowElements[g===0?1:this._rowElements.length-2].focus(),d.preventDefault(),d.stopImmediatePropagation()}_handleResize(d){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let g=this._rowContainer.children.length;g<this._terminal.rows;g++)this._rowElements[g]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[g]);for(;this._rowElements.length>d;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const d=document.createElement("div");return d.setAttribute("role","listitem"),d.tabIndex=-1,this._refreshRowDimensions(d),d}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let d=0;d<this._terminal.rows;d++)this._refreshRowDimensions(this._rowElements[d])}}_refreshRowDimensions(d){d.style.height=`${this._renderService.dimensions.css.cell.height}px`}};l.AccessibilityManager=c=p([b(1,o.IRenderService)],c)},3614:(m,l)=>{function h(v){return v.replace(/\r?\n/g,"\r")}function p(v,y){return y?"\x1B[200~"+v+"\x1B[201~":v}function b(v,y,w,S){v=p(v=h(v),w.decPrivateModes.bracketedPasteMode&&S.rawOptions.ignoreBracketedPasteMode!==!0),w.triggerDataEvent(v,!0),y.value=""}function f(v,y,w){const S=w.getBoundingClientRect(),o=v.clientX-S.left-10,u=v.clientY-S.top-10;y.style.width="20px",y.style.height="20px",y.style.left=`${o}px`,y.style.top=`${u}px`,y.style.zIndex="1000",y.focus()}Object.defineProperty(l,"__esModule",{value:!0}),l.rightClickHandler=l.moveTextAreaUnderMouseCursor=l.paste=l.handlePasteEvent=l.copyHandler=l.bracketTextForPaste=l.prepareTextForTerminal=void 0,l.prepareTextForTerminal=h,l.bracketTextForPaste=p,l.copyHandler=function(v,y){v.clipboardData&&v.clipboardData.setData("text/plain",y.selectionText),v.preventDefault()},l.handlePasteEvent=function(v,y,w,S){v.stopPropagation(),v.clipboardData&&b(v.clipboardData.getData("text/plain"),y,w,S)},l.paste=b,l.moveTextAreaUnderMouseCursor=f,l.rightClickHandler=function(v,y,w,S,o){f(v,y,w),o&&S.rightClickSelect(v),y.value=S.selectionText,y.select()}},7239:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorContrastCache=void 0;const p=h(1505);l.ColorContrastCache=class{constructor(){this._color=new p.TwoKeyMap,this._css=new p.TwoKeyMap}setCss(b,f,v){this._css.set(b,f,v)}getCss(b,f){return this._css.get(b,f)}setColor(b,f,v){this._color.set(b,f,v)}getColor(b,f){return this._color.get(b,f)}clear(){this._color.clear(),this._css.clear()}}},3656:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.addDisposableDomListener=void 0,l.addDisposableDomListener=function(h,p,b,f){h.addEventListener(p,b,f);let v=!1;return{dispose:()=>{v||(v=!0,h.removeEventListener(p,b,f))}}}},6465:function(m,l,h){var p=this&&this.__decorate||function(o,u,c,d){var g,_=arguments.length,C=_<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,c):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(o,u,c,d);else for(var j=o.length-1;j>=0;j--)(g=o[j])&&(C=(_<3?g(C):_>3?g(u,c,C):g(u,c))||C);return _>3&&C&&Object.defineProperty(u,c,C),C},b=this&&this.__param||function(o,u){return function(c,d){u(c,d,o)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Linkifier2=void 0;const f=h(3656),v=h(8460),y=h(844),w=h(2585);let S=l.Linkifier2=class extends y.Disposable{get currentLink(){return this._currentLink}constructor(o){super(),this._bufferService=o,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new v.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new v.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,y.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,y.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(o){return this._linkProviders.push(o),{dispose:()=>{const u=this._linkProviders.indexOf(o);u!==-1&&this._linkProviders.splice(u,1)}}}attachToDom(o,u,c){this._element=o,this._mouseService=u,this._renderService=c,this.register((0,f.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,f.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(o){if(this._lastMouseEvent=o,!this._element||!this._mouseService)return;const u=this._positionFromMouseEvent(o,this._element,this._mouseService);if(!u)return;this._isMouseOut=!1;const c=o.composedPath();for(let d=0;d<c.length;d++){const g=c[d];if(g.classList.contains("xterm"))break;if(g.classList.contains("xterm-hover"))return}this._lastBufferCell&&u.x===this._lastBufferCell.x&&u.y===this._lastBufferCell.y||(this._handleHover(u),this._lastBufferCell=u)}_handleHover(o){if(this._activeLine!==o.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(o,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,o)||(this._clearCurrentLink(),this._askForLink(o,!0))}_askForLink(o,u){var c,d;this._activeProviderReplies&&u||((c=this._activeProviderReplies)===null||c===void 0||c.forEach(_=>{_==null||_.forEach(C=>{C.link.dispose&&C.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=o.y);let g=!1;for(const[_,C]of this._linkProviders.entries())u?!((d=this._activeProviderReplies)===null||d===void 0)&&d.get(_)&&(g=this._checkLinkProviderResult(_,o,g)):C.provideLinks(o.y,j=>{var x,E;if(this._isMouseOut)return;const D=j==null?void 0:j.map(A=>({link:A}));(x=this._activeProviderReplies)===null||x===void 0||x.set(_,D),g=this._checkLinkProviderResult(_,o,g),((E=this._activeProviderReplies)===null||E===void 0?void 0:E.size)===this._linkProviders.length&&this._removeIntersectingLinks(o.y,this._activeProviderReplies)})}_removeIntersectingLinks(o,u){const c=new Set;for(let d=0;d<u.size;d++){const g=u.get(d);if(g)for(let _=0;_<g.length;_++){const C=g[_],j=C.link.range.start.y<o?0:C.link.range.start.x,x=C.link.range.end.y>o?this._bufferService.cols:C.link.range.end.x;for(let E=j;E<=x;E++){if(c.has(E)){g.splice(_--,1);break}c.add(E)}}}}_checkLinkProviderResult(o,u,c){var d;if(!this._activeProviderReplies)return c;const g=this._activeProviderReplies.get(o);let _=!1;for(let C=0;C<o;C++)this._activeProviderReplies.has(C)&&!this._activeProviderReplies.get(C)||(_=!0);if(!_&&g){const C=g.find(j=>this._linkAtPosition(j.link,u));C&&(c=!0,this._handleNewLink(C))}if(this._activeProviderReplies.size===this._linkProviders.length&&!c)for(let C=0;C<this._activeProviderReplies.size;C++){const j=(d=this._activeProviderReplies.get(C))===null||d===void 0?void 0:d.find(x=>this._linkAtPosition(x.link,u));if(j){c=!0,this._handleNewLink(j);break}}return c}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(o){if(!this._element||!this._mouseService||!this._currentLink)return;const u=this._positionFromMouseEvent(o,this._element,this._mouseService);u&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,u)&&this._currentLink.link.activate(o,this._currentLink.link.text)}_clearCurrentLink(o,u){this._element&&this._currentLink&&this._lastMouseEvent&&(!o||!u||this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=u)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,y.disposeArray)(this._linkCacheDisposables))}_handleNewLink(o){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const u=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);u&&this._linkAtPosition(o.link,u)&&(this._currentLink=o,this._currentLink.state={decorations:{underline:o.link.decorations===void 0||o.link.decorations.underline,pointerCursor:o.link.decorations===void 0||o.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,o.link,this._lastMouseEvent),o.link.decorations={},Object.defineProperties(o.link.decorations,{pointerCursor:{get:()=>{var c,d;return(d=(c=this._currentLink)===null||c===void 0?void 0:c.state)===null||d===void 0?void 0:d.decorations.pointerCursor},set:c=>{var d,g;!((d=this._currentLink)===null||d===void 0)&&d.state&&this._currentLink.state.decorations.pointerCursor!==c&&(this._currentLink.state.decorations.pointerCursor=c,this._currentLink.state.isHovered&&((g=this._element)===null||g===void 0||g.classList.toggle("xterm-cursor-pointer",c)))}},underline:{get:()=>{var c,d;return(d=(c=this._currentLink)===null||c===void 0?void 0:c.state)===null||d===void 0?void 0:d.decorations.underline},set:c=>{var d,g,_;!((d=this._currentLink)===null||d===void 0)&&d.state&&((_=(g=this._currentLink)===null||g===void 0?void 0:g.state)===null||_===void 0?void 0:_.decorations.underline)!==c&&(this._currentLink.state.decorations.underline=c,this._currentLink.state.isHovered&&this._fireUnderlineEvent(o.link,c))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(c=>{if(!this._currentLink)return;const d=c.start===0?0:c.start+1+this._bufferService.buffer.ydisp,g=this._bufferService.buffer.ydisp+1+c.end;if(this._currentLink.link.range.start.y>=d&&this._currentLink.link.range.end.y<=g&&(this._clearCurrentLink(d,g),this._lastMouseEvent&&this._element)){const _=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);_&&this._askForLink(_,!1)}})))}_linkHover(o,u,c){var d;!((d=this._currentLink)===null||d===void 0)&&d.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(u,!0),this._currentLink.state.decorations.pointerCursor&&o.classList.add("xterm-cursor-pointer")),u.hover&&u.hover(c,u.text)}_fireUnderlineEvent(o,u){const c=o.range,d=this._bufferService.buffer.ydisp,g=this._createLinkUnderlineEvent(c.start.x-1,c.start.y-d-1,c.end.x,c.end.y-d-1,void 0);(u?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(g)}_linkLeave(o,u,c){var d;!((d=this._currentLink)===null||d===void 0)&&d.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(u,!1),this._currentLink.state.decorations.pointerCursor&&o.classList.remove("xterm-cursor-pointer")),u.leave&&u.leave(c,u.text)}_linkAtPosition(o,u){const c=o.range.start.y*this._bufferService.cols+o.range.start.x,d=o.range.end.y*this._bufferService.cols+o.range.end.x,g=u.y*this._bufferService.cols+u.x;return c<=g&&g<=d}_positionFromMouseEvent(o,u,c){const d=c.getCoords(o,u,this._bufferService.cols,this._bufferService.rows);if(d)return{x:d[0],y:d[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(o,u,c,d,g){return{x1:o,y1:u,x2:c,y2:d,cols:this._bufferService.cols,fg:g}}};l.Linkifier2=S=p([b(0,w.IBufferService)],S)},9042:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.tooMuchOutput=l.promptLabel=void 0,l.promptLabel="Terminal input",l.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(m,l,h){var p=this&&this.__decorate||function(S,o,u,c){var d,g=arguments.length,_=g<3?o:c===null?c=Object.getOwnPropertyDescriptor(o,u):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(S,o,u,c);else for(var C=S.length-1;C>=0;C--)(d=S[C])&&(_=(g<3?d(_):g>3?d(o,u,_):d(o,u))||_);return g>3&&_&&Object.defineProperty(o,u,_),_},b=this&&this.__param||function(S,o){return function(u,c){o(u,c,S)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkProvider=void 0;const f=h(511),v=h(2585);let y=l.OscLinkProvider=class{constructor(S,o,u){this._bufferService=S,this._optionsService=o,this._oscLinkService=u}provideLinks(S,o){var u;const c=this._bufferService.buffer.lines.get(S-1);if(!c)return void o(void 0);const d=[],g=this._optionsService.rawOptions.linkHandler,_=new f.CellData,C=c.getTrimmedLength();let j=-1,x=-1,E=!1;for(let D=0;D<C;D++)if(x!==-1||c.hasContent(D)){if(c.loadCell(D,_),_.hasExtendedAttrs()&&_.extended.urlId){if(x===-1){x=D,j=_.extended.urlId;continue}E=_.extended.urlId!==j}else x!==-1&&(E=!0);if(E||x!==-1&&D===C-1){const A=(u=this._oscLinkService.getLinkData(j))===null||u===void 0?void 0:u.uri;if(A){const T={start:{x:x+1,y:S},end:{x:D+(E||D!==C-1?0:1),y:S}};let R=!1;if(!(g!=null&&g.allowNonHttpProtocols))try{const q=new URL(A);["http:","https:"].includes(q.protocol)||(R=!0)}catch{R=!0}R||d.push({text:A,range:T,activate:(q,G)=>g?g.activate(q,G,T):w(0,G),hover:(q,G)=>{var z;return(z=g==null?void 0:g.hover)===null||z===void 0?void 0:z.call(g,q,G,T)},leave:(q,G)=>{var z;return(z=g==null?void 0:g.leave)===null||z===void 0?void 0:z.call(g,q,G,T)}})}E=!1,_.hasExtendedAttrs()&&_.extended.urlId?(x=D,j=_.extended.urlId):(x=-1,j=-1)}}o(d)}};function w(S,o){if(confirm(`Do you want to navigate to ${o}?

WARNING: This link could potentially be dangerous`)){const u=window.open();if(u){try{u.opener=null}catch{}u.location.href=o}else console.warn("Opening link blocked as opener could not be cleared")}}l.OscLinkProvider=y=p([b(0,v.IBufferService),b(1,v.IOptionsService),b(2,v.IOscLinkService)],y)},6193:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.RenderDebouncer=void 0,l.RenderDebouncer=class{constructor(h,p){this._parentWindow=h,this._renderCallback=p,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(h){return this._refreshCallbacks.push(h),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(h,p,b){this._rowCount=b,h=h!==void 0?h:0,p=p!==void 0?p:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,h):h,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,p):p,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const h=Math.max(this._rowStart,0),p=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(h,p),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const h of this._refreshCallbacks)h(0);this._refreshCallbacks=[]}}},5596:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ScreenDprMonitor=void 0;const p=h(844);class b extends p.Disposable{constructor(v){super(),this._parentWindow=v,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,p.toDisposable)(()=>{this.clearListener()}))}setListener(v){this._listener&&this.clearListener(),this._listener=v,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)===null||v===void 0||v.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}l.ScreenDprMonitor=b},3236:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Terminal=void 0;const p=h(3614),b=h(3656),f=h(6465),v=h(9042),y=h(3730),w=h(1680),S=h(3107),o=h(5744),u=h(2950),c=h(1296),d=h(428),g=h(4269),_=h(5114),C=h(8934),j=h(3230),x=h(9312),E=h(4725),D=h(6731),A=h(8055),T=h(8969),R=h(8460),q=h(844),G=h(6114),z=h(8437),W=h(2584),N=h(7399),L=h(5941),I=h(9074),U=h(2585),se=h(5435),ce=h(4567),Q=typeof window<"u"?window.document:null;class re extends T.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(k={}){super(k),this.browser=G,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new q.MutableDisposable),this._onCursorMove=this.register(new R.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new R.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new R.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new R.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new R.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new R.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new R.EventEmitter),this._onBlur=this.register(new R.EventEmitter),this._onA11yCharEmitter=this.register(new R.EventEmitter),this._onA11yTabEmitter=this.register(new R.EventEmitter),this._onWillOpen=this.register(new R.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(f.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(y.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(I.DecorationService),this._instantiationService.setService(U.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((F,Y)=>this.refresh(F,Y))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(F=>this._reportWindowsOptions(F))),this.register(this._inputHandler.onColor(F=>this._handleColorEvent(F))),this.register((0,R.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,R.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,R.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,R.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(F=>this._afterResize(F.cols,F.rows))),this.register((0,q.toDisposable)(()=>{var F,Y;this._customKeyEventHandler=void 0,(Y=(F=this.element)===null||F===void 0?void 0:F.parentNode)===null||Y===void 0||Y.removeChild(this.element)}))}_handleColorEvent(k){if(this._themeService)for(const F of k){let Y,V="";switch(F.index){case 256:Y="foreground",V="10";break;case 257:Y="background",V="11";break;case 258:Y="cursor",V="12";break;default:Y="ansi",V="4;"+F.index}switch(F.type){case 0:const O=A.color.toColorRGB(Y==="ansi"?this._themeService.colors.ansi[F.index]:this._themeService.colors[Y]);this.coreService.triggerDataEvent(`${W.C0.ESC}]${V};${(0,L.toRgbString)(O)}${W.C1_ESCAPED.ST}`);break;case 1:if(Y==="ansi")this._themeService.modifyColors(H=>H.ansi[F.index]=A.rgba.toColor(...F.color));else{const H=Y;this._themeService.modifyColors(Z=>Z[H]=A.rgba.toColor(...F.color))}break;case 2:this._themeService.restoreColor(F.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(k){k?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(ce.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(k){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(W.C0.ESC+"[I"),this.updateCursorStyle(k),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var k;return(k=this.textarea)===null||k===void 0?void 0:k.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(W.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const k=this.buffer.ybase+this.buffer.y,F=this.buffer.lines.get(k);if(!F)return;const Y=Math.min(this.buffer.x,this.cols-1),V=this._renderService.dimensions.css.cell.height,O=F.getWidth(Y),H=this._renderService.dimensions.css.cell.width*O,Z=this.buffer.y*this._renderService.dimensions.css.cell.height,ue=Y*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ue+"px",this.textarea.style.top=Z+"px",this.textarea.style.width=H+"px",this.textarea.style.height=V+"px",this.textarea.style.lineHeight=V+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,b.addDisposableDomListener)(this.element,"copy",F=>{this.hasSelection()&&(0,p.copyHandler)(F,this._selectionService)}));const k=F=>(0,p.handlePasteEvent)(F,this.textarea,this.coreService,this.optionsService);this.register((0,b.addDisposableDomListener)(this.textarea,"paste",k)),this.register((0,b.addDisposableDomListener)(this.element,"paste",k)),G.isFirefox?this.register((0,b.addDisposableDomListener)(this.element,"mousedown",F=>{F.button===2&&(0,p.rightClickHandler)(F,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,b.addDisposableDomListener)(this.element,"contextmenu",F=>{(0,p.rightClickHandler)(F,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),G.isLinux&&this.register((0,b.addDisposableDomListener)(this.element,"auxclick",F=>{F.button===1&&(0,p.moveTextAreaUnderMouseCursor)(F,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,b.addDisposableDomListener)(this.textarea,"keyup",k=>this._keyUp(k),!0)),this.register((0,b.addDisposableDomListener)(this.textarea,"keydown",k=>this._keyDown(k),!0)),this.register((0,b.addDisposableDomListener)(this.textarea,"keypress",k=>this._keyPress(k),!0)),this.register((0,b.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,b.addDisposableDomListener)(this.textarea,"compositionupdate",k=>this._compositionHelper.compositionupdate(k))),this.register((0,b.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,b.addDisposableDomListener)(this.textarea,"input",k=>this._inputEvent(k),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(k){var F;if(!k)throw new Error("Terminal requires a parent element.");k.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=k.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),k.appendChild(this.element);const Y=Q.createDocumentFragment();this._viewportElement=Q.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),Y.appendChild(this._viewportElement),this._viewportScrollArea=Q.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=Q.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=Q.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),Y.appendChild(this.screenElement),this.textarea=Q.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",v.promptLabel),G.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(_.CoreBrowserService,this.textarea,(F=this._document.defaultView)!==null&&F!==void 0?F:window),this._instantiationService.setService(E.ICoreBrowserService,this._coreBrowserService),this.register((0,b.addDisposableDomListener)(this.textarea,"focus",V=>this._handleTextAreaFocus(V))),this.register((0,b.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(d.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(E.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(D.ThemeService),this._instantiationService.setService(E.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(g.CharacterJoinerService),this._instantiationService.setService(E.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(j.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(E.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(V=>this._onRender.fire(V))),this.onResize(V=>this._renderService.resize(V.cols,V.rows)),this._compositionView=Q.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(u.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(Y);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(C.MouseService),this._instantiationService.setService(E.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(w.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(V=>this.scrollLines(V.amount,V.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(x.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(E.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(V=>this.scrollLines(V.amount,V.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(V=>this._renderService.handleSelectionChanged(V.start,V.end,V.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(V=>{this.textarea.value=V,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(V=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,b.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(S.BufferDecorationRenderer,this.screenElement)),this.register((0,b.addDisposableDomListener)(this.element,"mousedown",V=>this._selectionService.handleMouseDown(V))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(ce.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",V=>this._handleScreenReaderModeOptionChange(V))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",V=>{!this._overviewRulerRenderer&&V&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(c.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const k=this,F=this.element;function Y(H){const Z=k._mouseService.getMouseReportCoords(H,k.screenElement);if(!Z)return!1;let ue,me;switch(H.overrideType||H.type){case"mousemove":me=32,H.buttons===void 0?(ue=3,H.button!==void 0&&(ue=H.button<3?H.button:3)):ue=1&H.buttons?0:4&H.buttons?1:2&H.buttons?2:3;break;case"mouseup":me=0,ue=H.button<3?H.button:3;break;case"mousedown":me=1,ue=H.button<3?H.button:3;break;case"wheel":if(k.viewport.getLinesScrolled(H)===0)return!1;me=H.deltaY<0?0:1,ue=4;break;default:return!1}return!(me===void 0||ue===void 0||ue>4)&&k.coreMouseService.triggerMouseEvent({col:Z.col,row:Z.row,x:Z.x,y:Z.y,button:ue,action:me,ctrl:H.ctrlKey,alt:H.altKey,shift:H.shiftKey})}const V={mouseup:null,wheel:null,mousedrag:null,mousemove:null},O={mouseup:H=>(Y(H),H.buttons||(this._document.removeEventListener("mouseup",V.mouseup),V.mousedrag&&this._document.removeEventListener("mousemove",V.mousedrag)),this.cancel(H)),wheel:H=>(Y(H),this.cancel(H,!0)),mousedrag:H=>{H.buttons&&Y(H)},mousemove:H=>{H.buttons||Y(H)}};this.register(this.coreMouseService.onProtocolChange(H=>{H?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(H)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&H?V.mousemove||(F.addEventListener("mousemove",O.mousemove),V.mousemove=O.mousemove):(F.removeEventListener("mousemove",V.mousemove),V.mousemove=null),16&H?V.wheel||(F.addEventListener("wheel",O.wheel,{passive:!1}),V.wheel=O.wheel):(F.removeEventListener("wheel",V.wheel),V.wheel=null),2&H?V.mouseup||(F.addEventListener("mouseup",O.mouseup),V.mouseup=O.mouseup):(this._document.removeEventListener("mouseup",V.mouseup),F.removeEventListener("mouseup",V.mouseup),V.mouseup=null),4&H?V.mousedrag||(V.mousedrag=O.mousedrag):(this._document.removeEventListener("mousemove",V.mousedrag),V.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,b.addDisposableDomListener)(F,"mousedown",H=>{if(H.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(H))return Y(H),V.mouseup&&this._document.addEventListener("mouseup",V.mouseup),V.mousedrag&&this._document.addEventListener("mousemove",V.mousedrag),this.cancel(H)})),this.register((0,b.addDisposableDomListener)(F,"wheel",H=>{if(!V.wheel){if(!this.buffer.hasScrollback){const Z=this.viewport.getLinesScrolled(H);if(Z===0)return;const ue=W.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(H.deltaY<0?"A":"B");let me="";for(let ye=0;ye<Math.abs(Z);ye++)me+=ue;return this.coreService.triggerDataEvent(me,!0),this.cancel(H,!0)}return this.viewport.handleWheel(H)?this.cancel(H):void 0}},{passive:!1})),this.register((0,b.addDisposableDomListener)(F,"touchstart",H=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(H),this.cancel(H)},{passive:!0})),this.register((0,b.addDisposableDomListener)(F,"touchmove",H=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(H)?void 0:this.cancel(H)},{passive:!1}))}refresh(k,F){var Y;(Y=this._renderService)===null||Y===void 0||Y.refreshRows(k,F)}updateCursorStyle(k){var F;!((F=this._selectionService)===null||F===void 0)&&F.shouldColumnSelect(k)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(k,F,Y=0){var V;Y===1?(super.scrollLines(k,F,Y),this.refresh(0,this.rows-1)):(V=this.viewport)===null||V===void 0||V.scrollLines(k)}paste(k){(0,p.paste)(k,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(k){this._customKeyEventHandler=k}registerLinkProvider(k){return this.linkifier2.registerLinkProvider(k)}registerCharacterJoiner(k){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const F=this._characterJoinerService.register(k);return this.refresh(0,this.rows-1),F}deregisterCharacterJoiner(k){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(k)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(k){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+k)}registerDecoration(k){return this._decorationService.registerDecoration(k)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(k,F,Y){this._selectionService.setSelection(k,F,Y)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var k;(k=this._selectionService)===null||k===void 0||k.clearSelection()}selectAll(){var k;(k=this._selectionService)===null||k===void 0||k.selectAll()}selectLines(k,F){var Y;(Y=this._selectionService)===null||Y===void 0||Y.selectLines(k,F)}_keyDown(k){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(k)===!1)return!1;const F=this.browser.isMac&&this.options.macOptionIsMeta&&k.altKey;if(!F&&!this._compositionHelper.keydown(k))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;F||k.key!=="Dead"&&k.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const Y=(0,N.evaluateKeyboardEvent)(k,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(k),Y.type===3||Y.type===2){const V=this.rows-1;return this.scrollLines(Y.type===2?-V:V),this.cancel(k,!0)}return Y.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,k)||(Y.cancel&&this.cancel(k,!0),!Y.key||!!(k.key&&!k.ctrlKey&&!k.altKey&&!k.metaKey&&k.key.length===1&&k.key.charCodeAt(0)>=65&&k.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(Y.key!==W.C0.ETX&&Y.key!==W.C0.CR||(this.textarea.value=""),this._onKey.fire({key:Y.key,domEvent:k}),this._showCursor(),this.coreService.triggerDataEvent(Y.key,!0),!this.optionsService.rawOptions.screenReaderMode||k.altKey||k.ctrlKey?this.cancel(k,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(k,F){const Y=k.isMac&&!this.options.macOptionIsMeta&&F.altKey&&!F.ctrlKey&&!F.metaKey||k.isWindows&&F.altKey&&F.ctrlKey&&!F.metaKey||k.isWindows&&F.getModifierState("AltGraph");return F.type==="keypress"?Y:Y&&(!F.keyCode||F.keyCode>47)}_keyUp(k){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(k)===!1||(function(F){return F.keyCode===16||F.keyCode===17||F.keyCode===18}(k)||this.focus(),this.updateCursorStyle(k),this._keyPressHandled=!1)}_keyPress(k){let F;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(k)===!1)return!1;if(this.cancel(k),k.charCode)F=k.charCode;else if(k.which===null||k.which===void 0)F=k.keyCode;else{if(k.which===0||k.charCode===0)return!1;F=k.which}return!(!F||(k.altKey||k.ctrlKey||k.metaKey)&&!this._isThirdLevelShift(this.browser,k)||(F=String.fromCharCode(F),this._onKey.fire({key:F,domEvent:k}),this._showCursor(),this.coreService.triggerDataEvent(F,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(k){if(k.data&&k.inputType==="insertText"&&(!k.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const F=k.data;return this.coreService.triggerDataEvent(F,!0),this.cancel(k),!0}return!1}resize(k,F){k!==this.cols||F!==this.rows?super.resize(k,F):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(k,F){var Y,V;(Y=this._charSizeService)===null||Y===void 0||Y.measure(),(V=this.viewport)===null||V===void 0||V.syncScrollArea(!0)}clear(){var k;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let F=1;F<this.rows;F++)this.buffer.lines.push(this.buffer.getBlankLine(z.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(k=this.viewport)===null||k===void 0||k.reset(),this.refresh(0,this.rows-1)}}reset(){var k,F;this.options.rows=this.rows,this.options.cols=this.cols;const Y=this._customKeyEventHandler;this._setup(),super.reset(),(k=this._selectionService)===null||k===void 0||k.reset(),this._decorationService.reset(),(F=this.viewport)===null||F===void 0||F.reset(),this._customKeyEventHandler=Y,this.refresh(0,this.rows-1)}clearTextureAtlas(){var k;(k=this._renderService)===null||k===void 0||k.clearTextureAtlas()}_reportFocus(){var k;!((k=this.element)===null||k===void 0)&&k.classList.contains("focus")?this.coreService.triggerDataEvent(W.C0.ESC+"[I"):this.coreService.triggerDataEvent(W.C0.ESC+"[O")}_reportWindowsOptions(k){if(this._renderService)switch(k){case se.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const F=this._renderService.dimensions.css.canvas.width.toFixed(0),Y=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${W.C0.ESC}[4;${Y};${F}t`);break;case se.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const V=this._renderService.dimensions.css.cell.width.toFixed(0),O=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${W.C0.ESC}[6;${O};${V}t`)}}cancel(k,F){if(this.options.cancelEvents||F)return k.preventDefault(),k.stopPropagation(),!1}}l.Terminal=re},9924:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TimeBasedDebouncer=void 0,l.TimeBasedDebouncer=class{constructor(h,p=1e3){this._renderCallback=h,this._debounceThresholdMS=p,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(h,p,b){this._rowCount=b,h=h!==void 0?h:0,p=p!==void 0?p:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,h):h,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,p):p;const f=Date.now();if(f-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=f,this._innerRefresh();else if(!this._additionalRefreshRequested){const v=f-this._lastRefreshMs,y=this._debounceThresholdMS-v;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},y)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const h=Math.max(this._rowStart,0),p=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(h,p)}}},1680:function(m,l,h){var p=this&&this.__decorate||function(u,c,d,g){var _,C=arguments.length,j=C<3?c:g===null?g=Object.getOwnPropertyDescriptor(c,d):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(u,c,d,g);else for(var x=u.length-1;x>=0;x--)(_=u[x])&&(j=(C<3?_(j):C>3?_(c,d,j):_(c,d))||j);return C>3&&j&&Object.defineProperty(c,d,j),j},b=this&&this.__param||function(u,c){return function(d,g){c(d,g,u)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Viewport=void 0;const f=h(3656),v=h(4725),y=h(8460),w=h(844),S=h(2585);let o=l.Viewport=class extends w.Disposable{constructor(u,c,d,g,_,C,j,x){super(),this._viewportElement=u,this._scrollArea=c,this._bufferService=d,this._optionsService=g,this._charSizeService=_,this._renderService=C,this._coreBrowserService=j,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new y.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(E=>this._activeBuffer=E.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(E=>this._renderDimensions=E)),this._handleThemeChange(x.colors),this.register(x.onChangeColors(E=>this._handleThemeChange(E))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(u){this._viewportElement.style.backgroundColor=u.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(u){if(u)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const c=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==c&&(this._lastRecordedBufferHeight=c,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const u=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==u&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=u),this._refreshAnimationFrame=null}syncScrollArea(u=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(u);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(u)}_handleScroll(u){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const c=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:c,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const u=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(u*(this._smoothScrollState.target-this._smoothScrollState.origin)),u<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(u,c){const d=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(c<0&&this._viewportElement.scrollTop!==0||c>0&&d<this._lastRecordedBufferHeight)||(u.cancelable&&u.preventDefault(),!1)}handleWheel(u){const c=this._getPixelsScrolled(u);return c!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+c:this._smoothScrollState.target+=c,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=c,this._bubbleScroll(u,c))}scrollLines(u){if(u!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const c=u*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+c,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:u,suppressScrollEvent:!1})}_getPixelsScrolled(u){if(u.deltaY===0||u.shiftKey)return 0;let c=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_LINE?c*=this._currentRowHeight:u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(c*=this._currentRowHeight*this._bufferService.rows),c}getBufferElements(u,c){var d;let g,_="";const C=[],j=c??this._bufferService.buffer.lines.length,x=this._bufferService.buffer.lines;for(let E=u;E<j;E++){const D=x.get(E);if(!D)continue;const A=(d=x.get(E+1))===null||d===void 0?void 0:d.isWrapped;if(_+=D.translateToString(!A),!A||E===x.length-1){const T=document.createElement("div");T.textContent=_,C.push(T),_.length>0&&(g=T),_=""}}return{bufferElements:C,cursorElement:g}}getLinesScrolled(u){if(u.deltaY===0||u.shiftKey)return 0;let c=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(c/=this._currentRowHeight+0,this._wheelPartialScroll+=c,c=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(c*=this._bufferService.rows),c}_applyScrollModifier(u,c){const d=this._optionsService.rawOptions.fastScrollModifier;return d==="alt"&&c.altKey||d==="ctrl"&&c.ctrlKey||d==="shift"&&c.shiftKey?u*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:u*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(u){this._lastTouchY=u.touches[0].pageY}handleTouchMove(u){const c=this._lastTouchY-u.touches[0].pageY;return this._lastTouchY=u.touches[0].pageY,c!==0&&(this._viewportElement.scrollTop+=c,this._bubbleScroll(u,c))}};l.Viewport=o=p([b(2,S.IBufferService),b(3,S.IOptionsService),b(4,v.ICharSizeService),b(5,v.IRenderService),b(6,v.ICoreBrowserService),b(7,v.IThemeService)],o)},3107:function(m,l,h){var p=this&&this.__decorate||function(o,u,c,d){var g,_=arguments.length,C=_<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,c):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(o,u,c,d);else for(var j=o.length-1;j>=0;j--)(g=o[j])&&(C=(_<3?g(C):_>3?g(u,c,C):g(u,c))||C);return _>3&&C&&Object.defineProperty(u,c,C),C},b=this&&this.__param||function(o,u){return function(c,d){u(c,d,o)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferDecorationRenderer=void 0;const f=h(3656),v=h(4725),y=h(844),w=h(2585);let S=l.BufferDecorationRenderer=class extends y.Disposable{constructor(o,u,c,d){super(),this._screenElement=o,this._bufferService=u,this._decorationService=c,this._renderService=d,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,f.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(g=>this._removeDecoration(g))),this.register((0,y.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const o of this._decorationService.decorations)this._renderDecoration(o);this._dimensionsChanged=!1}_renderDecoration(o){this._refreshStyle(o),this._dimensionsChanged&&this._refreshXPosition(o)}_createElement(o){var u,c;const d=document.createElement("div");d.classList.add("xterm-decoration"),d.classList.toggle("xterm-decoration-top-layer",((u=o==null?void 0:o.options)===null||u===void 0?void 0:u.layer)==="top"),d.style.width=`${Math.round((o.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,d.style.height=(o.options.height||1)*this._renderService.dimensions.css.cell.height+"px",d.style.top=(o.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",d.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const g=(c=o.options.x)!==null&&c!==void 0?c:0;return g&&g>this._bufferService.cols&&(d.style.display="none"),this._refreshXPosition(o,d),d}_refreshStyle(o){const u=o.marker.line-this._bufferService.buffers.active.ydisp;if(u<0||u>=this._bufferService.rows)o.element&&(o.element.style.display="none",o.onRenderEmitter.fire(o.element));else{let c=this._decorationElements.get(o);c||(c=this._createElement(o),o.element=c,this._decorationElements.set(o,c),this._container.appendChild(c),o.onDispose(()=>{this._decorationElements.delete(o),c.remove()})),c.style.top=u*this._renderService.dimensions.css.cell.height+"px",c.style.display=this._altBufferIsActive?"none":"block",o.onRenderEmitter.fire(c)}}_refreshXPosition(o,u=o.element){var c;if(!u)return;const d=(c=o.options.x)!==null&&c!==void 0?c:0;(o.options.anchor||"left")==="right"?u.style.right=d?d*this._renderService.dimensions.css.cell.width+"px":"":u.style.left=d?d*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(o){var u;(u=this._decorationElements.get(o))===null||u===void 0||u.remove(),this._decorationElements.delete(o),o.dispose()}};l.BufferDecorationRenderer=S=p([b(1,w.IBufferService),b(2,w.IDecorationService),b(3,v.IRenderService)],S)},5871:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorZoneStore=void 0,l.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(h){if(h.options.overviewRulerOptions){for(const p of this._zones)if(p.color===h.options.overviewRulerOptions.color&&p.position===h.options.overviewRulerOptions.position){if(this._lineIntersectsZone(p,h.marker.line))return;if(this._lineAdjacentToZone(p,h.marker.line,h.options.overviewRulerOptions.position))return void this._addLineToZone(p,h.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=h.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=h.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=h.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=h.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:h.options.overviewRulerOptions.color,position:h.options.overviewRulerOptions.position,startBufferLine:h.marker.line,endBufferLine:h.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(h){this._linePadding=h}_lineIntersectsZone(h,p){return p>=h.startBufferLine&&p<=h.endBufferLine}_lineAdjacentToZone(h,p,b){return p>=h.startBufferLine-this._linePadding[b||"full"]&&p<=h.endBufferLine+this._linePadding[b||"full"]}_addLineToZone(h,p){h.startBufferLine=Math.min(h.startBufferLine,p),h.endBufferLine=Math.max(h.endBufferLine,p)}}},5744:function(m,l,h){var p=this&&this.__decorate||function(g,_,C,j){var x,E=arguments.length,D=E<3?_:j===null?j=Object.getOwnPropertyDescriptor(_,C):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(g,_,C,j);else for(var A=g.length-1;A>=0;A--)(x=g[A])&&(D=(E<3?x(D):E>3?x(_,C,D):x(_,C))||D);return E>3&&D&&Object.defineProperty(_,C,D),D},b=this&&this.__param||function(g,_){return function(C,j){_(C,j,g)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OverviewRulerRenderer=void 0;const f=h(5871),v=h(3656),y=h(4725),w=h(844),S=h(2585),o={full:0,left:0,center:0,right:0},u={full:0,left:0,center:0,right:0},c={full:0,left:0,center:0,right:0};let d=l.OverviewRulerRenderer=class extends w.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(g,_,C,j,x,E,D){var A;super(),this._viewportElement=g,this._screenElement=_,this._bufferService=C,this._decorationService=j,this._renderService=x,this._optionsService=E,this._coreBrowseService=D,this._colorZoneStore=new f.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(A=this._viewportElement.parentElement)===null||A===void 0||A.insertBefore(this._canvas,this._viewportElement);const T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,w.toDisposable)(()=>{var R;(R=this._canvas)===null||R===void 0||R.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,v.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const g=Math.floor(this._canvas.width/3),_=Math.ceil(this._canvas.width/3);u.full=this._canvas.width,u.left=g,u.center=_,u.right=g,this._refreshDrawHeightConstants(),c.full=0,c.left=0,c.center=u.left,c.right=u.left+u.center}_refreshDrawHeightConstants(){o.full=Math.round(2*this._coreBrowseService.dpr);const g=this._canvas.height/this._bufferService.buffer.lines.length,_=Math.round(Math.max(Math.min(g,12),6)*this._coreBrowseService.dpr);o.left=_,o.center=_,o.right=_}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const _ of this._decorationService.decorations)this._colorZoneStore.addDecoration(_);this._ctx.lineWidth=1;const g=this._colorZoneStore.zones;for(const _ of g)_.position!=="full"&&this._renderColorZone(_);for(const _ of g)_.position==="full"&&this._renderColorZone(_);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(g){this._ctx.fillStyle=g.color,this._ctx.fillRect(c[g.position||"full"],Math.round((this._canvas.height-1)*(g.startBufferLine/this._bufferService.buffers.active.lines.length)-o[g.position||"full"]/2),u[g.position||"full"],Math.round((this._canvas.height-1)*((g.endBufferLine-g.startBufferLine)/this._bufferService.buffers.active.lines.length)+o[g.position||"full"]))}_queueRefresh(g,_){this._shouldUpdateDimensions=g||this._shouldUpdateDimensions,this._shouldUpdateAnchor=_||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};l.OverviewRulerRenderer=d=p([b(2,S.IBufferService),b(3,S.IDecorationService),b(4,y.IRenderService),b(5,S.IOptionsService),b(6,y.ICoreBrowserService)],d)},2950:function(m,l,h){var p=this&&this.__decorate||function(S,o,u,c){var d,g=arguments.length,_=g<3?o:c===null?c=Object.getOwnPropertyDescriptor(o,u):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(S,o,u,c);else for(var C=S.length-1;C>=0;C--)(d=S[C])&&(_=(g<3?d(_):g>3?d(o,u,_):d(o,u))||_);return g>3&&_&&Object.defineProperty(o,u,_),_},b=this&&this.__param||function(S,o){return function(u,c){o(u,c,S)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CompositionHelper=void 0;const f=h(4725),v=h(2585),y=h(2584);let w=l.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(S,o,u,c,d,g){this._textarea=S,this._compositionView=o,this._bufferService=u,this._optionsService=c,this._coreService=d,this._renderService=g,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(S){this._compositionView.textContent=S.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(S){if(this._isComposing||this._isSendingComposition){if(S.keyCode===229||S.keyCode===16||S.keyCode===17||S.keyCode===18)return!1;this._finalizeComposition(!1)}return S.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(S){if(this._compositionView.classList.remove("active"),this._isComposing=!1,S){const o={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let u;this._isSendingComposition=!1,o.start+=this._dataAlreadySent.length,u=this._isComposing?this._textarea.value.substring(o.start,o.end):this._textarea.value.substring(o.start),u.length>0&&this._coreService.triggerDataEvent(u,!0)}},0)}else{this._isSendingComposition=!1;const o=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(o,!0)}}_handleAnyTextareaChanges(){const S=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const o=this._textarea.value,u=o.replace(S,"");this._dataAlreadySent=u,o.length>S.length?this._coreService.triggerDataEvent(u,!0):o.length<S.length?this._coreService.triggerDataEvent(`${y.C0.DEL}`,!0):o.length===S.length&&o!==S&&this._coreService.triggerDataEvent(o,!0)}},0)}updateCompositionElements(S){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const o=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),u=this._renderService.dimensions.css.cell.height,c=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,d=o*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=d+"px",this._compositionView.style.top=c+"px",this._compositionView.style.height=u+"px",this._compositionView.style.lineHeight=u+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const g=this._compositionView.getBoundingClientRect();this._textarea.style.left=d+"px",this._textarea.style.top=c+"px",this._textarea.style.width=Math.max(g.width,1)+"px",this._textarea.style.height=Math.max(g.height,1)+"px",this._textarea.style.lineHeight=g.height+"px"}S||setTimeout(()=>this.updateCompositionElements(!0),0)}}};l.CompositionHelper=w=p([b(2,v.IBufferService),b(3,v.IOptionsService),b(4,v.ICoreService),b(5,f.IRenderService)],w)},9806:(m,l)=>{function h(p,b,f){const v=f.getBoundingClientRect(),y=p.getComputedStyle(f),w=parseInt(y.getPropertyValue("padding-left")),S=parseInt(y.getPropertyValue("padding-top"));return[b.clientX-v.left-w,b.clientY-v.top-S]}Object.defineProperty(l,"__esModule",{value:!0}),l.getCoords=l.getCoordsRelativeToElement=void 0,l.getCoordsRelativeToElement=h,l.getCoords=function(p,b,f,v,y,w,S,o,u){if(!w)return;const c=h(p,b,f);return c?(c[0]=Math.ceil((c[0]+(u?S/2:0))/S),c[1]=Math.ceil(c[1]/o),c[0]=Math.min(Math.max(c[0],1),v+(u?1:0)),c[1]=Math.min(Math.max(c[1],1),y),c):void 0}},9504:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.moveToCellSequence=void 0;const p=h(2584);function b(o,u,c,d){const g=o-f(o,c),_=u-f(u,c),C=Math.abs(g-_)-function(j,x,E){let D=0;const A=j-f(j,E),T=x-f(x,E);for(let R=0;R<Math.abs(A-T);R++){const q=v(j,x)==="A"?-1:1,G=E.buffer.lines.get(A+q*R);G!=null&&G.isWrapped&&D++}return D}(o,u,c);return S(C,w(v(o,u),d))}function f(o,u){let c=0,d=u.buffer.lines.get(o),g=d==null?void 0:d.isWrapped;for(;g&&o>=0&&o<u.rows;)c++,d=u.buffer.lines.get(--o),g=d==null?void 0:d.isWrapped;return c}function v(o,u){return o>u?"A":"B"}function y(o,u,c,d,g,_){let C=o,j=u,x="";for(;C!==c||j!==d;)C+=g?1:-1,g&&C>_.cols-1?(x+=_.buffer.translateBufferLineToString(j,!1,o,C),C=0,o=0,j++):!g&&C<0&&(x+=_.buffer.translateBufferLineToString(j,!1,0,o+1),C=_.cols-1,o=C,j--);return x+_.buffer.translateBufferLineToString(j,!1,o,C)}function w(o,u){const c=u?"O":"[";return p.C0.ESC+c+o}function S(o,u){o=Math.floor(o);let c="";for(let d=0;d<o;d++)c+=u;return c}l.moveToCellSequence=function(o,u,c,d){const g=c.buffer.x,_=c.buffer.y;if(!c.buffer.hasScrollback)return function(x,E,D,A,T,R){return b(E,A,T,R).length===0?"":S(y(x,E,x,E-f(E,T),!1,T).length,w("D",R))}(g,_,0,u,c,d)+b(_,u,c,d)+function(x,E,D,A,T,R){let q;q=b(E,A,T,R).length>0?A-f(A,T):E;const G=A,z=function(W,N,L,I,U,se){let ce;return ce=b(L,I,U,se).length>0?I-f(I,U):N,W<L&&ce<=I||W>=L&&ce<I?"C":"D"}(x,E,D,A,T,R);return S(y(x,q,D,G,z==="C",T).length,w(z,R))}(g,_,o,u,c,d);let C;if(_===u)return C=g>o?"D":"C",S(Math.abs(g-o),w(C,d));C=_>u?"D":"C";const j=Math.abs(_-u);return S(function(x,E){return E.cols-x}(_>u?o:g,c)+(j-1)*c.cols+1+((_>u?g:o)-1),w(C,d))}},1296:function(m,l,h){var p=this&&this.__decorate||function(T,R,q,G){var z,W=arguments.length,N=W<3?R:G===null?G=Object.getOwnPropertyDescriptor(R,q):G;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(T,R,q,G);else for(var L=T.length-1;L>=0;L--)(z=T[L])&&(N=(W<3?z(N):W>3?z(R,q,N):z(R,q))||N);return W>3&&N&&Object.defineProperty(R,q,N),N},b=this&&this.__param||function(T,R){return function(q,G){R(q,G,T)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRenderer=void 0;const f=h(3787),v=h(2550),y=h(2223),w=h(6171),S=h(4725),o=h(8055),u=h(8460),c=h(844),d=h(2585),g="xterm-dom-renderer-owner-",_="xterm-rows",C="xterm-fg-",j="xterm-bg-",x="xterm-focus",E="xterm-selection";let D=1,A=l.DomRenderer=class extends c.Disposable{constructor(T,R,q,G,z,W,N,L,I,U){super(),this._element=T,this._screenElement=R,this._viewportElement=q,this._linkifier2=G,this._charSizeService=W,this._optionsService=N,this._bufferService=L,this._coreBrowserService=I,this._themeService=U,this._terminalClass=D++,this._rowElements=[],this.onRequestRedraw=this.register(new u.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(_),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(E),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,w.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(se=>this._injectCss(se))),this._injectCss(this._themeService.colors),this._rowFactory=z.createInstance(f.DomRendererRowFactory,document),this._element.classList.add(g+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(se=>this._handleLinkHover(se))),this.register(this._linkifier2.onHideLinkUnderline(se=>this._handleLinkLeave(se))),this.register((0,c.toDisposable)(()=>{this._element.classList.remove(g+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new v.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const T=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*T,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*T),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/T),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/T),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const q of this._rowElements)q.style.width=`${this.dimensions.css.canvas.width}px`,q.style.height=`${this.dimensions.css.cell.height}px`,q.style.lineHeight=`${this.dimensions.css.cell.height}px`,q.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const R=`${this._terminalSelector} .${_} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=R,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(T){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let R=`${this._terminalSelector} .${_} { color: ${T.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;R+=`${this._terminalSelector} .${_} .xterm-dim { color: ${o.color.multiplyOpacity(T.foreground,.5).css};}`,R+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,R+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",R+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${T.cursor.css};  color: ${T.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${T.cursor.css}; }}`,R+=`${this._terminalSelector} .${_}.${x} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${_}.${x} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-block { background-color: ${T.cursor.css}; color: ${T.cursorAccent.css};}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${T.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${T.cursor.css} inset;}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${T.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,R+=`${this._terminalSelector} .${E} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${E} div { position: absolute; background-color: ${T.selectionBackgroundOpaque.css};}${this._terminalSelector} .${E} div { position: absolute; background-color: ${T.selectionInactiveBackgroundOpaque.css};}`;for(const[q,G]of T.ansi.entries())R+=`${this._terminalSelector} .${C}${q} { color: ${G.css}; }${this._terminalSelector} .${C}${q}.xterm-dim { color: ${o.color.multiplyOpacity(G,.5).css}; }${this._terminalSelector} .${j}${q} { background-color: ${G.css}; }`;R+=`${this._terminalSelector} .${C}${y.INVERTED_DEFAULT_COLOR} { color: ${o.color.opaque(T.background).css}; }${this._terminalSelector} .${C}${y.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${o.color.multiplyOpacity(o.color.opaque(T.background),.5).css}; }${this._terminalSelector} .${j}${y.INVERTED_DEFAULT_COLOR} { background-color: ${T.foreground.css}; }`,this._themeStyleElement.textContent=R}_setDefaultSpacing(){const T=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${T}px`,this._rowFactory.defaultSpacing=T}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(T,R){for(let q=this._rowElements.length;q<=R;q++){const G=document.createElement("div");this._rowContainer.appendChild(G),this._rowElements.push(G)}for(;this._rowElements.length>R;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(T,R){this._refreshRowElements(T,R),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(x)}handleFocus(){this._rowContainer.classList.add(x),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(T,R,q){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(T,R,q),this.renderRows(0,this._bufferService.rows-1),!T||!R)return;const G=T[1]-this._bufferService.buffer.ydisp,z=R[1]-this._bufferService.buffer.ydisp,W=Math.max(G,0),N=Math.min(z,this._bufferService.rows-1);if(W>=this._bufferService.rows||N<0)return;const L=document.createDocumentFragment();if(q){const I=T[0]>R[0];L.appendChild(this._createSelectionElement(W,I?R[0]:T[0],I?T[0]:R[0],N-W+1))}else{const I=G===W?T[0]:0,U=W===z?R[0]:this._bufferService.cols;L.appendChild(this._createSelectionElement(W,I,U));const se=N-W-1;if(L.appendChild(this._createSelectionElement(W+1,0,this._bufferService.cols,se)),W!==N){const ce=z===N?R[0]:this._bufferService.cols;L.appendChild(this._createSelectionElement(N,0,ce))}}this._selectionContainer.appendChild(L)}_createSelectionElement(T,R,q,G=1){const z=document.createElement("div");return z.style.height=G*this.dimensions.css.cell.height+"px",z.style.top=T*this.dimensions.css.cell.height+"px",z.style.left=R*this.dimensions.css.cell.width+"px",z.style.width=this.dimensions.css.cell.width*(q-R)+"px",z}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const T of this._rowElements)T.replaceChildren()}renderRows(T,R){const q=this._bufferService.buffer,G=q.ybase+q.y,z=Math.min(q.x,this._bufferService.cols-1),W=this._optionsService.rawOptions.cursorBlink,N=this._optionsService.rawOptions.cursorStyle,L=this._optionsService.rawOptions.cursorInactiveStyle;for(let I=T;I<=R;I++){const U=I+q.ydisp,se=this._rowElements[I],ce=q.lines.get(U);if(!se||!ce)break;se.replaceChildren(...this._rowFactory.createRow(ce,U,U===G,N,L,z,W,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${g}${this._terminalClass}`}_handleLinkHover(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!0)}_handleLinkLeave(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!1)}_setCellUnderline(T,R,q,G,z,W){q<0&&(T=0),G<0&&(R=0);const N=this._bufferService.rows-1;q=Math.max(Math.min(q,N),0),G=Math.max(Math.min(G,N),0),z=Math.min(z,this._bufferService.cols);const L=this._bufferService.buffer,I=L.ybase+L.y,U=Math.min(L.x,z-1),se=this._optionsService.rawOptions.cursorBlink,ce=this._optionsService.rawOptions.cursorStyle,Q=this._optionsService.rawOptions.cursorInactiveStyle;for(let re=q;re<=G;++re){const pe=re+L.ydisp,k=this._rowElements[re],F=L.lines.get(pe);if(!k||!F)break;k.replaceChildren(...this._rowFactory.createRow(F,pe,pe===I,ce,Q,U,se,this.dimensions.css.cell.width,this._widthCache,W?re===q?T:0:-1,W?(re===G?R:z)-1:-1))}}};l.DomRenderer=A=p([b(4,d.IInstantiationService),b(5,S.ICharSizeService),b(6,d.IOptionsService),b(7,d.IBufferService),b(8,S.ICoreBrowserService),b(9,S.IThemeService)],A)},3787:function(m,l,h){var p=this&&this.__decorate||function(C,j,x,E){var D,A=arguments.length,T=A<3?j:E===null?E=Object.getOwnPropertyDescriptor(j,x):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(C,j,x,E);else for(var R=C.length-1;R>=0;R--)(D=C[R])&&(T=(A<3?D(T):A>3?D(j,x,T):D(j,x))||T);return A>3&&T&&Object.defineProperty(j,x,T),T},b=this&&this.__param||function(C,j){return function(x,E){j(x,E,C)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRendererRowFactory=void 0;const f=h(2223),v=h(643),y=h(511),w=h(2585),S=h(8055),o=h(4725),u=h(4269),c=h(6171),d=h(3734);let g=l.DomRendererRowFactory=class{constructor(C,j,x,E,D,A,T){this._document=C,this._characterJoinerService=j,this._optionsService=x,this._coreBrowserService=E,this._coreService=D,this._decorationService=A,this._themeService=T,this._workCell=new y.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(C,j,x){this._selectionStart=C,this._selectionEnd=j,this._columnSelectMode=x}createRow(C,j,x,E,D,A,T,R,q,G,z){const W=[],N=this._characterJoinerService.getJoinedCharacters(j),L=this._themeService.colors;let I,U=C.getNoBgTrimmedLength();x&&U<A+1&&(U=A+1);let se=0,ce="",Q=0,re=0,pe=0,k=!1,F=0,Y=!1,V=0;const O=[],H=G!==-1&&z!==-1;for(let Z=0;Z<U;Z++){C.loadCell(Z,this._workCell);let ue=this._workCell.getWidth();if(ue===0)continue;let me=!1,ye=Z,P=this._workCell;if(N.length>0&&Z===N[0][0]){me=!0;const Ce=N.shift();P=new u.JoinedCellData(this._workCell,C.translateToString(!0,Ce[0],Ce[1]),Ce[1]-Ce[0]),ye=Ce[1]-1,ue=P.getWidth()}const B=this._isCellInSelection(Z,j),K=x&&Z===A,te=H&&Z>=G&&Z<=z;let de=!1;this._decorationService.forEachDecorationAtCell(Z,j,void 0,Ce=>{de=!0});let le=P.getChars()||v.WHITESPACE_CELL_CHAR;if(le===" "&&(P.isUnderline()||P.isOverline())&&(le=""),V=ue*R-q.get(le,P.isBold(),P.isItalic()),I){if(se&&(B&&Y||!B&&!Y&&P.bg===Q)&&(B&&Y&&L.selectionForeground||P.fg===re)&&P.extended.ext===pe&&te===k&&V===F&&!K&&!me&&!de){ce+=le,se++;continue}se&&(I.textContent=ce),I=this._document.createElement("span"),se=0,ce=""}else I=this._document.createElement("span");if(Q=P.bg,re=P.fg,pe=P.extended.ext,k=te,F=V,Y=B,me&&A>=Z&&A<=ye&&(A=Z),!this._coreService.isCursorHidden&&K){if(O.push("xterm-cursor"),this._coreBrowserService.isFocused)T&&O.push("xterm-cursor-blink"),O.push(E==="bar"?"xterm-cursor-bar":E==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(D)switch(D){case"outline":O.push("xterm-cursor-outline");break;case"block":O.push("xterm-cursor-block");break;case"bar":O.push("xterm-cursor-bar");break;case"underline":O.push("xterm-cursor-underline")}}if(P.isBold()&&O.push("xterm-bold"),P.isItalic()&&O.push("xterm-italic"),P.isDim()&&O.push("xterm-dim"),ce=P.isInvisible()?v.WHITESPACE_CELL_CHAR:P.getChars()||v.WHITESPACE_CELL_CHAR,P.isUnderline()&&(O.push(`xterm-underline-${P.extended.underlineStyle}`),ce===" "&&(ce=""),!P.isUnderlineColorDefault()))if(P.isUnderlineColorRGB())I.style.textDecorationColor=`rgb(${d.AttributeData.toColorRGB(P.getUnderlineColor()).join(",")})`;else{let Ce=P.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&P.isBold()&&Ce<8&&(Ce+=8),I.style.textDecorationColor=L.ansi[Ce].css}P.isOverline()&&(O.push("xterm-overline"),ce===" "&&(ce="")),P.isStrikethrough()&&O.push("xterm-strikethrough"),te&&(I.style.textDecoration="underline");let ae=P.getFgColor(),_e=P.getFgColorMode(),be=P.getBgColor(),Le=P.getBgColorMode();const Te=!!P.isInverse();if(Te){const Ce=ae;ae=be,be=Ce;const xt=_e;_e=Le,Le=xt}let Xe,as,Ke,He=!1;switch(this._decorationService.forEachDecorationAtCell(Z,j,void 0,Ce=>{Ce.options.layer!=="top"&&He||(Ce.backgroundColorRGB&&(Le=50331648,be=Ce.backgroundColorRGB.rgba>>8&16777215,Xe=Ce.backgroundColorRGB),Ce.foregroundColorRGB&&(_e=50331648,ae=Ce.foregroundColorRGB.rgba>>8&16777215,as=Ce.foregroundColorRGB),He=Ce.options.layer==="top")}),!He&&B&&(Xe=this._coreBrowserService.isFocused?L.selectionBackgroundOpaque:L.selectionInactiveBackgroundOpaque,be=Xe.rgba>>8&16777215,Le=50331648,He=!0,L.selectionForeground&&(_e=50331648,ae=L.selectionForeground.rgba>>8&16777215,as=L.selectionForeground)),He&&O.push("xterm-decoration-top"),Le){case 16777216:case 33554432:Ke=L.ansi[be],O.push(`xterm-bg-${be}`);break;case 50331648:Ke=S.rgba.toColor(be>>16,be>>8&255,255&be),this._addStyle(I,`background-color:#${_((be>>>0).toString(16),"0",6)}`);break;default:Te?(Ke=L.foreground,O.push(`xterm-bg-${f.INVERTED_DEFAULT_COLOR}`)):Ke=L.background}switch(Xe||P.isDim()&&(Xe=S.color.multiplyOpacity(Ke,.5)),_e){case 16777216:case 33554432:P.isBold()&&ae<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ae+=8),this._applyMinimumContrast(I,Ke,L.ansi[ae],P,Xe,void 0)||O.push(`xterm-fg-${ae}`);break;case 50331648:const Ce=S.rgba.toColor(ae>>16&255,ae>>8&255,255&ae);this._applyMinimumContrast(I,Ke,Ce,P,Xe,as)||this._addStyle(I,`color:#${_(ae.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(I,Ke,L.foreground,P,Xe,void 0)||Te&&O.push(`xterm-fg-${f.INVERTED_DEFAULT_COLOR}`)}O.length&&(I.className=O.join(" "),O.length=0),K||me||de?I.textContent=ce:se++,V!==this.defaultSpacing&&(I.style.letterSpacing=`${V}px`),W.push(I),Z=ye}return I&&se&&(I.textContent=ce),W}_applyMinimumContrast(C,j,x,E,D,A){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,c.excludeFromContrastRatioDemands)(E.getCode()))return!1;const T=this._getContrastCache(E);let R;if(D||A||(R=T.getColor(j.rgba,x.rgba)),R===void 0){const q=this._optionsService.rawOptions.minimumContrastRatio/(E.isDim()?2:1);R=S.color.ensureContrastRatio(D||j,A||x,q),T.setColor((D||j).rgba,(A||x).rgba,R??null)}return!!R&&(this._addStyle(C,`color:${R.css}`),!0)}_getContrastCache(C){return C.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(C,j){C.setAttribute("style",`${C.getAttribute("style")||""}${j};`)}_isCellInSelection(C,j){const x=this._selectionStart,E=this._selectionEnd;return!(!x||!E)&&(this._columnSelectMode?x[0]<=E[0]?C>=x[0]&&j>=x[1]&&C<E[0]&&j<=E[1]:C<x[0]&&j>=x[1]&&C>=E[0]&&j<=E[1]:j>x[1]&&j<E[1]||x[1]===E[1]&&j===x[1]&&C>=x[0]&&C<E[0]||x[1]<E[1]&&j===E[1]&&C<E[0]||x[1]<E[1]&&j===x[1]&&C>=x[0])}};function _(C,j,x){for(;C.length<x;)C=j+C;return C}l.DomRendererRowFactory=g=p([b(1,o.ICharacterJoinerService),b(2,w.IOptionsService),b(3,o.ICoreBrowserService),b(4,w.ICoreService),b(5,w.IDecorationService),b(6,o.IThemeService)],g)},2550:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WidthCache=void 0,l.WidthCache=class{constructor(h){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=h.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const p=h.createElement("span"),b=h.createElement("span");b.style.fontWeight="bold";const f=h.createElement("span");f.style.fontStyle="italic";const v=h.createElement("span");v.style.fontWeight="bold",v.style.fontStyle="italic",this._measureElements=[p,b,f,v],this._container.appendChild(p),this._container.appendChild(b),this._container.appendChild(f),this._container.appendChild(v),h.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(h,p,b,f){h===this._font&&p===this._fontSize&&b===this._weight&&f===this._weightBold||(this._font=h,this._fontSize=p,this._weight=b,this._weightBold=f,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${b}`,this._measureElements[1].style.fontWeight=`${f}`,this._measureElements[2].style.fontWeight=`${b}`,this._measureElements[3].style.fontWeight=`${f}`,this.clear())}get(h,p,b){let f=0;if(!p&&!b&&h.length===1&&(f=h.charCodeAt(0))<256)return this._flat[f]!==-9999?this._flat[f]:this._flat[f]=this._measure(h,0);let v=h;p&&(v+="B"),b&&(v+="I");let y=this._holey.get(v);if(y===void 0){let w=0;p&&(w|=1),b&&(w|=2),y=this._measure(h,w),this._holey.set(v,y)}return y}_measure(h,p){const b=this._measureElements[p];return b.textContent=h.repeat(32),b.offsetWidth/32}}},2223:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TEXT_BASELINE=l.DIM_OPACITY=l.INVERTED_DEFAULT_COLOR=void 0;const p=h(6114);l.INVERTED_DEFAULT_COLOR=257,l.DIM_OPACITY=.5,l.TEXT_BASELINE=p.isFirefox||p.isLegacyEdge?"bottom":"ideographic"},6171:(m,l)=>{function h(p){return 57508<=p&&p<=57558}Object.defineProperty(l,"__esModule",{value:!0}),l.createRenderDimensions=l.excludeFromContrastRatioDemands=l.isRestrictedPowerlineGlyph=l.isPowerlineGlyph=l.throwIfFalsy=void 0,l.throwIfFalsy=function(p){if(!p)throw new Error("value must not be falsy");return p},l.isPowerlineGlyph=h,l.isRestrictedPowerlineGlyph=function(p){return 57520<=p&&p<=57527},l.excludeFromContrastRatioDemands=function(p){return h(p)||function(b){return 9472<=b&&b<=9631}(p)},l.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionModel=void 0,l.SelectionModel=class{constructor(h){this._bufferService=h,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const h=this.selectionStart[0]+this.selectionStartLength;return h>this._bufferService.cols?h%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(h/this._bufferService.cols)-1]:[h%this._bufferService.cols,this.selectionStart[1]+Math.floor(h/this._bufferService.cols)]:[h,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const h=this.selectionStart[0]+this.selectionStartLength;return h>this._bufferService.cols?[h%this._bufferService.cols,this.selectionStart[1]+Math.floor(h/this._bufferService.cols)]:[Math.max(h,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const h=this.selectionStart,p=this.selectionEnd;return!(!h||!p)&&(h[1]>p[1]||h[1]===p[1]&&h[0]>p[0])}handleTrim(h){return this.selectionStart&&(this.selectionStart[1]-=h),this.selectionEnd&&(this.selectionEnd[1]-=h),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(m,l,h){var p=this&&this.__decorate||function(o,u,c,d){var g,_=arguments.length,C=_<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,c):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(o,u,c,d);else for(var j=o.length-1;j>=0;j--)(g=o[j])&&(C=(_<3?g(C):_>3?g(u,c,C):g(u,c))||C);return _>3&&C&&Object.defineProperty(u,c,C),C},b=this&&this.__param||function(o,u){return function(c,d){u(c,d,o)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharSizeService=void 0;const f=h(2585),v=h(8460),y=h(844);let w=l.CharSizeService=class extends y.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(o,u,c){super(),this._optionsService=c,this.width=0,this.height=0,this._onCharSizeChange=this.register(new v.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new S(o,u,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const o=this._measureStrategy.measure();o.width===this.width&&o.height===this.height||(this.width=o.width,this.height=o.height,this._onCharSizeChange.fire())}};l.CharSizeService=w=p([b(2,f.IOptionsService)],w);class S{constructor(u,c,d){this._document=u,this._parentElement=c,this._optionsService=d,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const u={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return u.width!==0&&u.height!==0&&(this._result.width=u.width/32,this._result.height=Math.ceil(u.height)),this._result}}},4269:function(m,l,h){var p=this&&this.__decorate||function(u,c,d,g){var _,C=arguments.length,j=C<3?c:g===null?g=Object.getOwnPropertyDescriptor(c,d):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(u,c,d,g);else for(var x=u.length-1;x>=0;x--)(_=u[x])&&(j=(C<3?_(j):C>3?_(c,d,j):_(c,d))||j);return C>3&&j&&Object.defineProperty(c,d,j),j},b=this&&this.__param||function(u,c){return function(d,g){c(d,g,u)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharacterJoinerService=l.JoinedCellData=void 0;const f=h(3734),v=h(643),y=h(511),w=h(2585);class S extends f.AttributeData{constructor(c,d,g){super(),this.content=0,this.combinedData="",this.fg=c.fg,this.bg=c.bg,this.combinedData=d,this._width=g}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(c){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.JoinedCellData=S;let o=l.CharacterJoinerService=class t0{constructor(c){this._bufferService=c,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new y.CellData}register(c){const d={id:this._nextCharacterJoinerId++,handler:c};return this._characterJoiners.push(d),d.id}deregister(c){for(let d=0;d<this._characterJoiners.length;d++)if(this._characterJoiners[d].id===c)return this._characterJoiners.splice(d,1),!0;return!1}getJoinedCharacters(c){if(this._characterJoiners.length===0)return[];const d=this._bufferService.buffer.lines.get(c);if(!d||d.length===0)return[];const g=[],_=d.translateToString(!0);let C=0,j=0,x=0,E=d.getFg(0),D=d.getBg(0);for(let A=0;A<d.getTrimmedLength();A++)if(d.loadCell(A,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==E||this._workCell.bg!==D){if(A-C>1){const T=this._getJoinedRanges(_,x,j,d,C);for(let R=0;R<T.length;R++)g.push(T[R])}C=A,x=j,E=this._workCell.fg,D=this._workCell.bg}j+=this._workCell.getChars().length||v.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-C>1){const A=this._getJoinedRanges(_,x,j,d,C);for(let T=0;T<A.length;T++)g.push(A[T])}return g}_getJoinedRanges(c,d,g,_,C){const j=c.substring(d,g);let x=[];try{x=this._characterJoiners[0].handler(j)}catch(E){console.error(E)}for(let E=1;E<this._characterJoiners.length;E++)try{const D=this._characterJoiners[E].handler(j);for(let A=0;A<D.length;A++)t0._mergeRanges(x,D[A])}catch(D){console.error(D)}return this._stringRangesToCellRanges(x,_,C),x}_stringRangesToCellRanges(c,d,g){let _=0,C=!1,j=0,x=c[_];if(x){for(let E=g;E<this._bufferService.cols;E++){const D=d.getWidth(E),A=d.getString(E).length||v.WHITESPACE_CELL_CHAR.length;if(D!==0){if(!C&&x[0]<=j&&(x[0]=E,C=!0),x[1]<=j){if(x[1]=E,x=c[++_],!x)break;x[0]<=j?(x[0]=E,C=!0):C=!1}j+=A}}x&&(x[1]=this._bufferService.cols)}}static _mergeRanges(c,d){let g=!1;for(let _=0;_<c.length;_++){const C=c[_];if(g){if(d[1]<=C[0])return c[_-1][1]=d[1],c;if(d[1]<=C[1])return c[_-1][1]=Math.max(d[1],C[1]),c.splice(_,1),c;c.splice(_,1),_--}else{if(d[1]<=C[0])return c.splice(_,0,d),c;if(d[1]<=C[1])return C[0]=Math.min(d[0],C[0]),c;d[0]<C[1]&&(C[0]=Math.min(d[0],C[0]),g=!0)}}return g?c[c.length-1][1]=d[1]:c.push(d),c}};l.CharacterJoinerService=o=p([b(0,w.IBufferService)],o)},5114:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreBrowserService=void 0,l.CoreBrowserService=class{constructor(h,p){this._textarea=h,this.window=p,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(m,l,h){var p=this&&this.__decorate||function(w,S,o,u){var c,d=arguments.length,g=d<3?S:u===null?u=Object.getOwnPropertyDescriptor(S,o):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(w,S,o,u);else for(var _=w.length-1;_>=0;_--)(c=w[_])&&(g=(d<3?c(g):d>3?c(S,o,g):c(S,o))||g);return d>3&&g&&Object.defineProperty(S,o,g),g},b=this&&this.__param||function(w,S){return function(o,u){S(o,u,w)}};Object.defineProperty(l,"__esModule",{value:!0}),l.MouseService=void 0;const f=h(4725),v=h(9806);let y=l.MouseService=class{constructor(w,S){this._renderService=w,this._charSizeService=S}getCoords(w,S,o,u,c){return(0,v.getCoords)(window,w,S,o,u,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,c)}getMouseReportCoords(w,S){const o=(0,v.getCoordsRelativeToElement)(window,w,S);if(this._charSizeService.hasValidSize)return o[0]=Math.min(Math.max(o[0],0),this._renderService.dimensions.css.canvas.width-1),o[1]=Math.min(Math.max(o[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(o[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(o[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(o[0]),y:Math.floor(o[1])}}};l.MouseService=y=p([b(0,f.IRenderService),b(1,f.ICharSizeService)],y)},3230:function(m,l,h){var p=this&&this.__decorate||function(g,_,C,j){var x,E=arguments.length,D=E<3?_:j===null?j=Object.getOwnPropertyDescriptor(_,C):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(g,_,C,j);else for(var A=g.length-1;A>=0;A--)(x=g[A])&&(D=(E<3?x(D):E>3?x(_,C,D):x(_,C))||D);return E>3&&D&&Object.defineProperty(_,C,D),D},b=this&&this.__param||function(g,_){return function(C,j){_(C,j,g)}};Object.defineProperty(l,"__esModule",{value:!0}),l.RenderService=void 0;const f=h(3656),v=h(6193),y=h(5596),w=h(4725),S=h(8460),o=h(844),u=h(7226),c=h(2585);let d=l.RenderService=class extends o.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(g,_,C,j,x,E,D,A){if(super(),this._rowCount=g,this._charSizeService=j,this._renderer=this.register(new o.MutableDisposable),this._pausedResizeTask=new u.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new S.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new S.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new S.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new S.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new v.RenderDebouncer(D.window,(T,R)=>this._renderRows(T,R)),this.register(this._renderDebouncer),this._screenDprMonitor=new y.ScreenDprMonitor(D.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(E.onResize(()=>this._fullRefresh())),this.register(E.buffers.onBufferActivate(()=>{var T;return(T=this._renderer.value)===null||T===void 0?void 0:T.clear()})),this.register(C.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(x.onDecorationRegistered(()=>this._fullRefresh())),this.register(x.onDecorationRemoved(()=>this._fullRefresh())),this.register(C.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(E.cols,E.rows),this._fullRefresh()})),this.register(C.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(E.buffer.y,E.buffer.y,!0))),this.register((0,f.addDisposableDomListener)(D.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(A.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in D.window){const T=new D.window.IntersectionObserver(R=>this._handleIntersectionChange(R[R.length-1]),{threshold:0});T.observe(_),this.register({dispose:()=>T.disconnect()})}}_handleIntersectionChange(g){this._isPaused=g.isIntersecting===void 0?g.intersectionRatio===0:!g.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(g,_,C=!1){this._isPaused?this._needsFullRefresh=!0:(C||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(g,_,this._rowCount))}_renderRows(g,_){this._renderer.value&&(g=Math.min(g,this._rowCount-1),_=Math.min(_,this._rowCount-1),this._renderer.value.renderRows(g,_),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:g,end:_}),this._onRender.fire({start:g,end:_}),this._isNextRenderRedrawOnly=!0)}resize(g,_){this._rowCount=_,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(g){this._renderer.value=g,this._renderer.value.onRequestRedraw(_=>this.refreshRows(_.start,_.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(g){return this._renderDebouncer.addRefreshCallback(g)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var g,_;this._renderer.value&&((_=(g=this._renderer.value).clearTextureAtlas)===null||_===void 0||_.call(g),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(g,_){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(g,_)):this._renderer.value.handleResize(g,_),this._fullRefresh())}handleCharSizeChanged(){var g;(g=this._renderer.value)===null||g===void 0||g.handleCharSizeChanged()}handleBlur(){var g;(g=this._renderer.value)===null||g===void 0||g.handleBlur()}handleFocus(){var g;(g=this._renderer.value)===null||g===void 0||g.handleFocus()}handleSelectionChanged(g,_,C){var j;this._selectionState.start=g,this._selectionState.end=_,this._selectionState.columnSelectMode=C,(j=this._renderer.value)===null||j===void 0||j.handleSelectionChanged(g,_,C)}handleCursorMove(){var g;(g=this._renderer.value)===null||g===void 0||g.handleCursorMove()}clear(){var g;(g=this._renderer.value)===null||g===void 0||g.clear()}};l.RenderService=d=p([b(2,c.IOptionsService),b(3,w.ICharSizeService),b(4,c.IDecorationService),b(5,c.IBufferService),b(6,w.ICoreBrowserService),b(7,w.IThemeService)],d)},9312:function(m,l,h){var p=this&&this.__decorate||function(x,E,D,A){var T,R=arguments.length,q=R<3?E:A===null?A=Object.getOwnPropertyDescriptor(E,D):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(x,E,D,A);else for(var G=x.length-1;G>=0;G--)(T=x[G])&&(q=(R<3?T(q):R>3?T(E,D,q):T(E,D))||q);return R>3&&q&&Object.defineProperty(E,D,q),q},b=this&&this.__param||function(x,E){return function(D,A){E(D,A,x)}};Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionService=void 0;const f=h(9806),v=h(9504),y=h(456),w=h(4725),S=h(8460),o=h(844),u=h(6114),c=h(4841),d=h(511),g=h(2585),_="",C=new RegExp(_,"g");let j=l.SelectionService=class extends o.Disposable{constructor(x,E,D,A,T,R,q,G,z){super(),this._element=x,this._screenElement=E,this._linkifier=D,this._bufferService=A,this._coreService=T,this._mouseService=R,this._optionsService=q,this._renderService=G,this._coreBrowserService=z,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new d.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new S.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new S.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new S.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new S.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=W=>this._handleMouseMove(W),this._mouseUpListener=W=>this._handleMouseUp(W),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(W=>this._handleTrim(W)),this.register(this._bufferService.buffers.onBufferActivate(W=>this._handleBufferActivate(W))),this.enable(),this._model=new y.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,o.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const x=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!(!x||!E||x[0]===E[0]&&x[1]===E[1])}get selectionText(){const x=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;if(!x||!E)return"";const D=this._bufferService.buffer,A=[];if(this._activeSelectionMode===3){if(x[0]===E[0])return"";const T=x[0]<E[0]?x[0]:E[0],R=x[0]<E[0]?E[0]:x[0];for(let q=x[1];q<=E[1];q++){const G=D.translateBufferLineToString(q,!0,T,R);A.push(G)}}else{const T=x[1]===E[1]?E[0]:void 0;A.push(D.translateBufferLineToString(x[1],!0,x[0],T));for(let R=x[1]+1;R<=E[1]-1;R++){const q=D.lines.get(R),G=D.translateBufferLineToString(R,!0);q!=null&&q.isWrapped?A[A.length-1]+=G:A.push(G)}if(x[1]!==E[1]){const R=D.lines.get(E[1]),q=D.translateBufferLineToString(E[1],!0,0,E[0]);R&&R.isWrapped?A[A.length-1]+=q:A.push(q)}}return A.map(T=>T.replace(C," ")).join(u.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(x){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),u.isLinux&&x&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(x){const E=this._getMouseBufferCoords(x),D=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!!(D&&A&&E)&&this._areCoordsInSelection(E,D,A)}isCellInSelection(x,E){const D=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!(!D||!A)&&this._areCoordsInSelection([x,E],D,A)}_areCoordsInSelection(x,E,D){return x[1]>E[1]&&x[1]<D[1]||E[1]===D[1]&&x[1]===E[1]&&x[0]>=E[0]&&x[0]<D[0]||E[1]<D[1]&&x[1]===D[1]&&x[0]<D[0]||E[1]<D[1]&&x[1]===E[1]&&x[0]>=E[0]}_selectWordAtCursor(x,E){var D,A;const T=(A=(D=this._linkifier.currentLink)===null||D===void 0?void 0:D.link)===null||A===void 0?void 0:A.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,c.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const R=this._getMouseBufferCoords(x);return!!R&&(this._selectWordAt(R,E),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(x,E){this._model.clearSelection(),x=Math.max(x,0),E=Math.min(E,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,x],this._model.selectionEnd=[this._bufferService.cols,E],this.refresh(),this._onSelectionChange.fire()}_handleTrim(x){this._model.handleTrim(x)&&this.refresh()}_getMouseBufferCoords(x){const E=this._mouseService.getCoords(x,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(E)return E[0]--,E[1]--,E[1]+=this._bufferService.buffer.ydisp,E}_getMouseEventScrollAmount(x){let E=(0,f.getCoordsRelativeToElement)(this._coreBrowserService.window,x,this._screenElement)[1];const D=this._renderService.dimensions.css.canvas.height;return E>=0&&E<=D?0:(E>D&&(E-=D),E=Math.min(Math.max(E,-50),50),E/=50,E/Math.abs(E)+Math.round(14*E))}shouldForceSelection(x){return u.isMac?x.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:x.shiftKey}handleMouseDown(x){if(this._mouseDownTimeStamp=x.timeStamp,(x.button!==2||!this.hasSelection)&&x.button===0){if(!this._enabled){if(!this.shouldForceSelection(x))return;x.stopPropagation()}x.preventDefault(),this._dragScrollAmount=0,this._enabled&&x.shiftKey?this._handleIncrementalClick(x):x.detail===1?this._handleSingleClick(x):x.detail===2?this._handleDoubleClick(x):x.detail===3&&this._handleTripleClick(x),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(x){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(x))}_handleSingleClick(x){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(x)?3:0,this._model.selectionStart=this._getMouseBufferCoords(x),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const E=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);E&&E.length!==this._model.selectionStart[0]&&E.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(x){this._selectWordAtCursor(x,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(x){const E=this._getMouseBufferCoords(x);E&&(this._activeSelectionMode=2,this._selectLineAt(E[1]))}shouldColumnSelect(x){return x.altKey&&!(u.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(x){if(x.stopImmediatePropagation(),!this._model.selectionStart)return;const E=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(x),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(x),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const D=this._bufferService.buffer;if(this._model.selectionEnd[1]<D.lines.length){const A=D.lines.get(this._model.selectionEnd[1]);A&&A.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}E&&E[0]===this._model.selectionEnd[0]&&E[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const x=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(x.ydisp+this._bufferService.rows,x.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=x.ydisp),this.refresh()}}_handleMouseUp(x){const E=x.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&E<500&&x.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const D=this._mouseService.getCoords(x,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(D&&D[0]!==void 0&&D[1]!==void 0){const A=(0,v.moveToCellSequence)(D[0]-1,D[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(A,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const x=this._model.finalSelectionStart,E=this._model.finalSelectionEnd,D=!(!x||!E||x[0]===E[0]&&x[1]===E[1]);D?x&&E&&(this._oldSelectionStart&&this._oldSelectionEnd&&x[0]===this._oldSelectionStart[0]&&x[1]===this._oldSelectionStart[1]&&E[0]===this._oldSelectionEnd[0]&&E[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(x,E,D)):this._oldHasSelection&&this._fireOnSelectionChange(x,E,D)}_fireOnSelectionChange(x,E,D){this._oldSelectionStart=x,this._oldSelectionEnd=E,this._oldHasSelection=D,this._onSelectionChange.fire()}_handleBufferActivate(x){this.clearSelection(),this._trimListener.dispose(),this._trimListener=x.activeBuffer.lines.onTrim(E=>this._handleTrim(E))}_convertViewportColToCharacterIndex(x,E){let D=E;for(let A=0;E>=A;A++){const T=x.loadCell(A,this._workCell).getChars().length;this._workCell.getWidth()===0?D--:T>1&&E!==A&&(D+=T-1)}return D}setSelection(x,E,D){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[x,E],this._model.selectionStartLength=D,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(x){this._isClickInSelection(x)||(this._selectWordAtCursor(x,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(x,E,D=!0,A=!0){if(x[0]>=this._bufferService.cols)return;const T=this._bufferService.buffer,R=T.lines.get(x[1]);if(!R)return;const q=T.translateBufferLineToString(x[1],!1);let G=this._convertViewportColToCharacterIndex(R,x[0]),z=G;const W=x[0]-G;let N=0,L=0,I=0,U=0;if(q.charAt(G)===" "){for(;G>0&&q.charAt(G-1)===" ";)G--;for(;z<q.length&&q.charAt(z+1)===" ";)z++}else{let Q=x[0],re=x[0];R.getWidth(Q)===0&&(N++,Q--),R.getWidth(re)===2&&(L++,re++);const pe=R.getString(re).length;for(pe>1&&(U+=pe-1,z+=pe-1);Q>0&&G>0&&!this._isCharWordSeparator(R.loadCell(Q-1,this._workCell));){R.loadCell(Q-1,this._workCell);const k=this._workCell.getChars().length;this._workCell.getWidth()===0?(N++,Q--):k>1&&(I+=k-1,G-=k-1),G--,Q--}for(;re<R.length&&z+1<q.length&&!this._isCharWordSeparator(R.loadCell(re+1,this._workCell));){R.loadCell(re+1,this._workCell);const k=this._workCell.getChars().length;this._workCell.getWidth()===2?(L++,re++):k>1&&(U+=k-1,z+=k-1),z++,re++}}z++;let se=G+W-N+I,ce=Math.min(this._bufferService.cols,z-G+N+L-I-U);if(E||q.slice(G,z).trim()!==""){if(D&&se===0&&R.getCodePoint(0)!==32){const Q=T.lines.get(x[1]-1);if(Q&&R.isWrapped&&Q.getCodePoint(this._bufferService.cols-1)!==32){const re=this._getWordAt([this._bufferService.cols-1,x[1]-1],!1,!0,!1);if(re){const pe=this._bufferService.cols-re.start;se-=pe,ce+=pe}}}if(A&&se+ce===this._bufferService.cols&&R.getCodePoint(this._bufferService.cols-1)!==32){const Q=T.lines.get(x[1]+1);if(Q!=null&&Q.isWrapped&&Q.getCodePoint(0)!==32){const re=this._getWordAt([0,x[1]+1],!1,!1,!0);re&&(ce+=re.length)}}return{start:se,length:ce}}}_selectWordAt(x,E){const D=this._getWordAt(x,E);if(D){for(;D.start<0;)D.start+=this._bufferService.cols,x[1]--;this._model.selectionStart=[D.start,x[1]],this._model.selectionStartLength=D.length}}_selectToWordAt(x){const E=this._getWordAt(x,!0);if(E){let D=x[1];for(;E.start<0;)E.start+=this._bufferService.cols,D--;if(!this._model.areSelectionValuesReversed())for(;E.start+E.length>this._bufferService.cols;)E.length-=this._bufferService.cols,D++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?E.start:E.start+E.length,D]}}_isCharWordSeparator(x){return x.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(x.getChars())>=0}_selectLineAt(x){const E=this._bufferService.buffer.getWrappedRangeForLine(x),D={start:{x:0,y:E.first},end:{x:this._bufferService.cols-1,y:E.last}};this._model.selectionStart=[0,E.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,c.getRangeLength)(D,this._bufferService.cols)}};l.SelectionService=j=p([b(3,g.IBufferService),b(4,g.ICoreService),b(5,w.IMouseService),b(6,g.IOptionsService),b(7,w.IRenderService),b(8,w.ICoreBrowserService)],j)},4725:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IThemeService=l.ICharacterJoinerService=l.ISelectionService=l.IRenderService=l.IMouseService=l.ICoreBrowserService=l.ICharSizeService=void 0;const p=h(8343);l.ICharSizeService=(0,p.createDecorator)("CharSizeService"),l.ICoreBrowserService=(0,p.createDecorator)("CoreBrowserService"),l.IMouseService=(0,p.createDecorator)("MouseService"),l.IRenderService=(0,p.createDecorator)("RenderService"),l.ISelectionService=(0,p.createDecorator)("SelectionService"),l.ICharacterJoinerService=(0,p.createDecorator)("CharacterJoinerService"),l.IThemeService=(0,p.createDecorator)("ThemeService")},6731:function(m,l,h){var p=this&&this.__decorate||function(j,x,E,D){var A,T=arguments.length,R=T<3?x:D===null?D=Object.getOwnPropertyDescriptor(x,E):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(j,x,E,D);else for(var q=j.length-1;q>=0;q--)(A=j[q])&&(R=(T<3?A(R):T>3?A(x,E,R):A(x,E))||R);return T>3&&R&&Object.defineProperty(x,E,R),R},b=this&&this.__param||function(j,x){return function(E,D){x(E,D,j)}};Object.defineProperty(l,"__esModule",{value:!0}),l.ThemeService=l.DEFAULT_ANSI_COLORS=void 0;const f=h(7239),v=h(8055),y=h(8460),w=h(844),S=h(2585),o=v.css.toColor("#ffffff"),u=v.css.toColor("#000000"),c=v.css.toColor("#ffffff"),d=v.css.toColor("#000000"),g={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};l.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const j=[v.css.toColor("#2e3436"),v.css.toColor("#cc0000"),v.css.toColor("#4e9a06"),v.css.toColor("#c4a000"),v.css.toColor("#3465a4"),v.css.toColor("#75507b"),v.css.toColor("#06989a"),v.css.toColor("#d3d7cf"),v.css.toColor("#555753"),v.css.toColor("#ef2929"),v.css.toColor("#8ae234"),v.css.toColor("#fce94f"),v.css.toColor("#729fcf"),v.css.toColor("#ad7fa8"),v.css.toColor("#34e2e2"),v.css.toColor("#eeeeec")],x=[0,95,135,175,215,255];for(let E=0;E<216;E++){const D=x[E/36%6|0],A=x[E/6%6|0],T=x[E%6];j.push({css:v.channels.toCss(D,A,T),rgba:v.channels.toRgba(D,A,T)})}for(let E=0;E<24;E++){const D=8+10*E;j.push({css:v.channels.toCss(D,D,D),rgba:v.channels.toRgba(D,D,D)})}return j})());let _=l.ThemeService=class extends w.Disposable{get colors(){return this._colors}constructor(j){super(),this._optionsService=j,this._contrastCache=new f.ColorContrastCache,this._halfContrastCache=new f.ColorContrastCache,this._onChangeColors=this.register(new y.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:o,background:u,cursor:c,cursorAccent:d,selectionForeground:void 0,selectionBackgroundTransparent:g,selectionBackgroundOpaque:v.color.blend(u,g),selectionInactiveBackgroundTransparent:g,selectionInactiveBackgroundOpaque:v.color.blend(u,g),ansi:l.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(j={}){const x=this._colors;if(x.foreground=C(j.foreground,o),x.background=C(j.background,u),x.cursor=C(j.cursor,c),x.cursorAccent=C(j.cursorAccent,d),x.selectionBackgroundTransparent=C(j.selectionBackground,g),x.selectionBackgroundOpaque=v.color.blend(x.background,x.selectionBackgroundTransparent),x.selectionInactiveBackgroundTransparent=C(j.selectionInactiveBackground,x.selectionBackgroundTransparent),x.selectionInactiveBackgroundOpaque=v.color.blend(x.background,x.selectionInactiveBackgroundTransparent),x.selectionForeground=j.selectionForeground?C(j.selectionForeground,v.NULL_COLOR):void 0,x.selectionForeground===v.NULL_COLOR&&(x.selectionForeground=void 0),v.color.isOpaque(x.selectionBackgroundTransparent)&&(x.selectionBackgroundTransparent=v.color.opacity(x.selectionBackgroundTransparent,.3)),v.color.isOpaque(x.selectionInactiveBackgroundTransparent)&&(x.selectionInactiveBackgroundTransparent=v.color.opacity(x.selectionInactiveBackgroundTransparent,.3)),x.ansi=l.DEFAULT_ANSI_COLORS.slice(),x.ansi[0]=C(j.black,l.DEFAULT_ANSI_COLORS[0]),x.ansi[1]=C(j.red,l.DEFAULT_ANSI_COLORS[1]),x.ansi[2]=C(j.green,l.DEFAULT_ANSI_COLORS[2]),x.ansi[3]=C(j.yellow,l.DEFAULT_ANSI_COLORS[3]),x.ansi[4]=C(j.blue,l.DEFAULT_ANSI_COLORS[4]),x.ansi[5]=C(j.magenta,l.DEFAULT_ANSI_COLORS[5]),x.ansi[6]=C(j.cyan,l.DEFAULT_ANSI_COLORS[6]),x.ansi[7]=C(j.white,l.DEFAULT_ANSI_COLORS[7]),x.ansi[8]=C(j.brightBlack,l.DEFAULT_ANSI_COLORS[8]),x.ansi[9]=C(j.brightRed,l.DEFAULT_ANSI_COLORS[9]),x.ansi[10]=C(j.brightGreen,l.DEFAULT_ANSI_COLORS[10]),x.ansi[11]=C(j.brightYellow,l.DEFAULT_ANSI_COLORS[11]),x.ansi[12]=C(j.brightBlue,l.DEFAULT_ANSI_COLORS[12]),x.ansi[13]=C(j.brightMagenta,l.DEFAULT_ANSI_COLORS[13]),x.ansi[14]=C(j.brightCyan,l.DEFAULT_ANSI_COLORS[14]),x.ansi[15]=C(j.brightWhite,l.DEFAULT_ANSI_COLORS[15]),j.extendedAnsi){const E=Math.min(x.ansi.length-16,j.extendedAnsi.length);for(let D=0;D<E;D++)x.ansi[D+16]=C(j.extendedAnsi[D],l.DEFAULT_ANSI_COLORS[D+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(j){this._restoreColor(j),this._onChangeColors.fire(this.colors)}_restoreColor(j){if(j!==void 0)switch(j){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[j]=this._restoreColors.ansi[j]}else for(let x=0;x<this._restoreColors.ansi.length;++x)this._colors.ansi[x]=this._restoreColors.ansi[x]}modifyColors(j){j(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function C(j,x){if(j!==void 0)try{return v.css.toColor(j)}catch{}return x}l.ThemeService=_=p([b(0,S.IOptionsService)],_)},6349:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CircularList=void 0;const p=h(8460),b=h(844);class f extends b.Disposable{constructor(y){super(),this._maxLength=y,this.onDeleteEmitter=this.register(new p.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new p.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new p.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(y){if(this._maxLength===y)return;const w=new Array(y);for(let S=0;S<Math.min(y,this.length);S++)w[S]=this._array[this._getCyclicIndex(S)];this._array=w,this._maxLength=y,this._startIndex=0}get length(){return this._length}set length(y){if(y>this._length)for(let w=this._length;w<y;w++)this._array[w]=void 0;this._length=y}get(y){return this._array[this._getCyclicIndex(y)]}set(y,w){this._array[this._getCyclicIndex(y)]=w}push(y){this._array[this._getCyclicIndex(this._length)]=y,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(y,w,...S){if(w){for(let o=y;o<this._length-w;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+w)];this._length-=w,this.onDeleteEmitter.fire({index:y,amount:w})}for(let o=this._length-1;o>=y;o--)this._array[this._getCyclicIndex(o+S.length)]=this._array[this._getCyclicIndex(o)];for(let o=0;o<S.length;o++)this._array[this._getCyclicIndex(y+o)]=S[o];if(S.length&&this.onInsertEmitter.fire({index:y,amount:S.length}),this._length+S.length>this._maxLength){const o=this._length+S.length-this._maxLength;this._startIndex+=o,this._length=this._maxLength,this.onTrimEmitter.fire(o)}else this._length+=S.length}trimStart(y){y>this._length&&(y=this._length),this._startIndex+=y,this._length-=y,this.onTrimEmitter.fire(y)}shiftElements(y,w,S){if(!(w<=0)){if(y<0||y>=this._length)throw new Error("start argument out of range");if(y+S<0)throw new Error("Cannot shift elements in list beyond index 0");if(S>0){for(let u=w-1;u>=0;u--)this.set(y+u+S,this.get(y+u));const o=y+w+S-this._length;if(o>0)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let o=0;o<w;o++)this.set(y+o+S,this.get(y+o))}}_getCyclicIndex(y){return(this._startIndex+y)%this._maxLength}}l.CircularList=f},1439:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.clone=void 0,l.clone=function h(p,b=5){if(typeof p!="object")return p;const f=Array.isArray(p)?[]:{};for(const v in p)f[v]=b<=1?p[v]:p[v]&&h(p[v],b-1);return f}},8055:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.contrastRatio=l.toPaddedHex=l.rgba=l.rgb=l.css=l.color=l.channels=l.NULL_COLOR=void 0;const p=h(6114);let b=0,f=0,v=0,y=0;var w,S,o,u,c;function d(_){const C=_.toString(16);return C.length<2?"0"+C:C}function g(_,C){return _<C?(C+.05)/(_+.05):(_+.05)/(C+.05)}l.NULL_COLOR={css:"#00000000",rgba:0},function(_){_.toCss=function(C,j,x,E){return E!==void 0?`#${d(C)}${d(j)}${d(x)}${d(E)}`:`#${d(C)}${d(j)}${d(x)}`},_.toRgba=function(C,j,x,E=255){return(C<<24|j<<16|x<<8|E)>>>0}}(w||(l.channels=w={})),function(_){function C(j,x){return y=Math.round(255*x),[b,f,v]=c.toChannels(j.rgba),{css:w.toCss(b,f,v,y),rgba:w.toRgba(b,f,v,y)}}_.blend=function(j,x){if(y=(255&x.rgba)/255,y===1)return{css:x.css,rgba:x.rgba};const E=x.rgba>>24&255,D=x.rgba>>16&255,A=x.rgba>>8&255,T=j.rgba>>24&255,R=j.rgba>>16&255,q=j.rgba>>8&255;return b=T+Math.round((E-T)*y),f=R+Math.round((D-R)*y),v=q+Math.round((A-q)*y),{css:w.toCss(b,f,v),rgba:w.toRgba(b,f,v)}},_.isOpaque=function(j){return(255&j.rgba)==255},_.ensureContrastRatio=function(j,x,E){const D=c.ensureContrastRatio(j.rgba,x.rgba,E);if(D)return c.toColor(D>>24&255,D>>16&255,D>>8&255)},_.opaque=function(j){const x=(255|j.rgba)>>>0;return[b,f,v]=c.toChannels(x),{css:w.toCss(b,f,v),rgba:x}},_.opacity=C,_.multiplyOpacity=function(j,x){return y=255&j.rgba,C(j,y*x/255)},_.toColorRGB=function(j){return[j.rgba>>24&255,j.rgba>>16&255,j.rgba>>8&255]}}(S||(l.color=S={})),function(_){let C,j;if(!p.isNode){const x=document.createElement("canvas");x.width=1,x.height=1;const E=x.getContext("2d",{willReadFrequently:!0});E&&(C=E,C.globalCompositeOperation="copy",j=C.createLinearGradient(0,0,1,1))}_.toColor=function(x){if(x.match(/#[\da-f]{3,8}/i))switch(x.length){case 4:return b=parseInt(x.slice(1,2).repeat(2),16),f=parseInt(x.slice(2,3).repeat(2),16),v=parseInt(x.slice(3,4).repeat(2),16),c.toColor(b,f,v);case 5:return b=parseInt(x.slice(1,2).repeat(2),16),f=parseInt(x.slice(2,3).repeat(2),16),v=parseInt(x.slice(3,4).repeat(2),16),y=parseInt(x.slice(4,5).repeat(2),16),c.toColor(b,f,v,y);case 7:return{css:x,rgba:(parseInt(x.slice(1),16)<<8|255)>>>0};case 9:return{css:x,rgba:parseInt(x.slice(1),16)>>>0}}const E=x.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(E)return b=parseInt(E[1]),f=parseInt(E[2]),v=parseInt(E[3]),y=Math.round(255*(E[5]===void 0?1:parseFloat(E[5]))),c.toColor(b,f,v,y);if(!C||!j)throw new Error("css.toColor: Unsupported css format");if(C.fillStyle=j,C.fillStyle=x,typeof C.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(C.fillRect(0,0,1,1),[b,f,v,y]=C.getImageData(0,0,1,1).data,y!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:w.toRgba(b,f,v,y),css:x}}}(o||(l.css=o={})),function(_){function C(j,x,E){const D=j/255,A=x/255,T=E/255;return .2126*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))+.7152*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}_.relativeLuminance=function(j){return C(j>>16&255,j>>8&255,255&j)},_.relativeLuminance2=C}(u||(l.rgb=u={})),function(_){function C(x,E,D){const A=x>>24&255,T=x>>16&255,R=x>>8&255;let q=E>>24&255,G=E>>16&255,z=E>>8&255,W=g(u.relativeLuminance2(q,G,z),u.relativeLuminance2(A,T,R));for(;W<D&&(q>0||G>0||z>0);)q-=Math.max(0,Math.ceil(.1*q)),G-=Math.max(0,Math.ceil(.1*G)),z-=Math.max(0,Math.ceil(.1*z)),W=g(u.relativeLuminance2(q,G,z),u.relativeLuminance2(A,T,R));return(q<<24|G<<16|z<<8|255)>>>0}function j(x,E,D){const A=x>>24&255,T=x>>16&255,R=x>>8&255;let q=E>>24&255,G=E>>16&255,z=E>>8&255,W=g(u.relativeLuminance2(q,G,z),u.relativeLuminance2(A,T,R));for(;W<D&&(q<255||G<255||z<255);)q=Math.min(255,q+Math.ceil(.1*(255-q))),G=Math.min(255,G+Math.ceil(.1*(255-G))),z=Math.min(255,z+Math.ceil(.1*(255-z))),W=g(u.relativeLuminance2(q,G,z),u.relativeLuminance2(A,T,R));return(q<<24|G<<16|z<<8|255)>>>0}_.ensureContrastRatio=function(x,E,D){const A=u.relativeLuminance(x>>8),T=u.relativeLuminance(E>>8);if(g(A,T)<D){if(T<A){const G=C(x,E,D),z=g(A,u.relativeLuminance(G>>8));if(z<D){const W=j(x,E,D);return z>g(A,u.relativeLuminance(W>>8))?G:W}return G}const R=j(x,E,D),q=g(A,u.relativeLuminance(R>>8));if(q<D){const G=C(x,E,D);return q>g(A,u.relativeLuminance(G>>8))?R:G}return R}},_.reduceLuminance=C,_.increaseLuminance=j,_.toChannels=function(x){return[x>>24&255,x>>16&255,x>>8&255,255&x]},_.toColor=function(x,E,D,A){return{css:w.toCss(x,E,D,A),rgba:w.toRgba(x,E,D,A)}}}(c||(l.rgba=c={})),l.toPaddedHex=d,l.contrastRatio=g},8969:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreTerminal=void 0;const p=h(844),b=h(2585),f=h(4348),v=h(7866),y=h(744),w=h(7302),S=h(6975),o=h(8460),u=h(1753),c=h(1480),d=h(7994),g=h(9282),_=h(5435),C=h(5981),j=h(2660);let x=!1;class E extends p.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new o.EventEmitter),this._onScroll.event(A=>{var T;(T=this._onScrollApi)===null||T===void 0||T.fire(A.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(A){for(const T in A)this.optionsService.options[T]=A[T]}constructor(A){super(),this._windowsWrappingHeuristics=this.register(new p.MutableDisposable),this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new o.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new o.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new o.EventEmitter),this._instantiationService=new f.InstantiationService,this.optionsService=this.register(new w.OptionsService(A)),this._instantiationService.setService(b.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(y.BufferService)),this._instantiationService.setService(b.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(v.LogService)),this._instantiationService.setService(b.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(S.CoreService)),this._instantiationService.setService(b.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(u.CoreMouseService)),this._instantiationService.setService(b.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(c.UnicodeService)),this._instantiationService.setService(b.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(d.CharsetService),this._instantiationService.setService(b.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(j.OscLinkService),this._instantiationService.setService(b.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new _.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,o.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,o.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,o.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,o.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new C.WriteBuffer((T,R)=>this._inputHandler.parse(T,R))),this.register((0,o.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(A,T){this._writeBuffer.write(A,T)}writeSync(A,T){this._logService.logLevel<=b.LogLevelEnum.WARN&&!x&&(this._logService.warn("writeSync is unreliable and will be removed soon."),x=!0),this._writeBuffer.writeSync(A,T)}resize(A,T){isNaN(A)||isNaN(T)||(A=Math.max(A,y.MINIMUM_COLS),T=Math.max(T,y.MINIMUM_ROWS),this._bufferService.resize(A,T))}scroll(A,T=!1){this._bufferService.scroll(A,T)}scrollLines(A,T,R){this._bufferService.scrollLines(A,T,R)}scrollPages(A){this.scrollLines(A*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(A){const T=A-this._bufferService.buffer.ydisp;T!==0&&this.scrollLines(T)}registerEscHandler(A,T){return this._inputHandler.registerEscHandler(A,T)}registerDcsHandler(A,T){return this._inputHandler.registerDcsHandler(A,T)}registerCsiHandler(A,T){return this._inputHandler.registerCsiHandler(A,T)}registerOscHandler(A,T){return this._inputHandler.registerOscHandler(A,T)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let A=!1;const T=this.optionsService.rawOptions.windowsPty;T&&T.buildNumber!==void 0&&T.buildNumber!==void 0?A=T.backend==="conpty"&&T.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(A=!0),A?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const A=[];A.push(this.onLineFeed(g.updateWindowsModeWrappedState.bind(null,this._bufferService))),A.push(this.registerCsiHandler({final:"H"},()=>((0,g.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,p.toDisposable)(()=>{for(const T of A)T.dispose()})}}}l.CoreTerminal=E},8460:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.forwardEvent=l.EventEmitter=void 0,l.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=h=>(this._listeners.push(h),{dispose:()=>{if(!this._disposed){for(let p=0;p<this._listeners.length;p++)if(this._listeners[p]===h)return void this._listeners.splice(p,1)}}})),this._event}fire(h,p){const b=[];for(let f=0;f<this._listeners.length;f++)b.push(this._listeners[f]);for(let f=0;f<b.length;f++)b[f].call(void 0,h,p)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},l.forwardEvent=function(h,p){return h(b=>p.fire(b))}},5435:function(m,l,h){var p=this&&this.__decorate||function(W,N,L,I){var U,se=arguments.length,ce=se<3?N:I===null?I=Object.getOwnPropertyDescriptor(N,L):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ce=Reflect.decorate(W,N,L,I);else for(var Q=W.length-1;Q>=0;Q--)(U=W[Q])&&(ce=(se<3?U(ce):se>3?U(N,L,ce):U(N,L))||ce);return se>3&&ce&&Object.defineProperty(N,L,ce),ce},b=this&&this.__param||function(W,N){return function(L,I){N(L,I,W)}};Object.defineProperty(l,"__esModule",{value:!0}),l.InputHandler=l.WindowsOptionsReportType=void 0;const f=h(2584),v=h(7116),y=h(2015),w=h(844),S=h(482),o=h(8437),u=h(8460),c=h(643),d=h(511),g=h(3734),_=h(2585),C=h(6242),j=h(6351),x=h(5941),E={"(":0,")":1,"*":2,"+":3,"-":1,".":2},D=131072;function A(W,N){if(W>24)return N.setWinLines||!1;switch(W){case 1:return!!N.restoreWin;case 2:return!!N.minimizeWin;case 3:return!!N.setWinPosition;case 4:return!!N.setWinSizePixels;case 5:return!!N.raiseWin;case 6:return!!N.lowerWin;case 7:return!!N.refreshWin;case 8:return!!N.setWinSizeChars;case 9:return!!N.maximizeWin;case 10:return!!N.fullscreenWin;case 11:return!!N.getWinState;case 13:return!!N.getWinPosition;case 14:return!!N.getWinSizePixels;case 15:return!!N.getScreenSizePixels;case 16:return!!N.getCellSizePixels;case 18:return!!N.getWinSizeChars;case 19:return!!N.getScreenSizeChars;case 20:return!!N.getIconTitle;case 21:return!!N.getWinTitle;case 22:return!!N.pushTitle;case 23:return!!N.popTitle;case 24:return!!N.setWinLines}return!1}var T;(function(W){W[W.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",W[W.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(T||(l.WindowsOptionsReportType=T={}));let R=0;class q extends w.Disposable{getAttrData(){return this._curAttrData}constructor(N,L,I,U,se,ce,Q,re,pe=new y.EscapeSequenceParser){super(),this._bufferService=N,this._charsetService=L,this._coreService=I,this._logService=U,this._optionsService=se,this._oscLinkService=ce,this._coreMouseService=Q,this._unicodeService=re,this._parser=pe,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new S.StringToUtf32,this._utf8Decoder=new S.Utf8ToUtf32,this._workCell=new d.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new u.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new u.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new u.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new u.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new u.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new u.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new u.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new u.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new u.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new u.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new u.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new u.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new G(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(k=>this._activeBuffer=k.activeBuffer)),this._parser.setCsiHandlerFallback((k,F)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(k),params:F.toArray()})}),this._parser.setEscHandlerFallback(k=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(k)})}),this._parser.setExecuteHandlerFallback(k=>{this._logService.debug("Unknown EXECUTE code: ",{code:k})}),this._parser.setOscHandlerFallback((k,F,Y)=>{this._logService.debug("Unknown OSC code: ",{identifier:k,action:F,data:Y})}),this._parser.setDcsHandlerFallback((k,F,Y)=>{F==="HOOK"&&(Y=Y.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(k),action:F,payload:Y})}),this._parser.setPrintHandler((k,F,Y)=>this.print(k,F,Y)),this._parser.registerCsiHandler({final:"@"},k=>this.insertChars(k)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},k=>this.scrollLeft(k)),this._parser.registerCsiHandler({final:"A"},k=>this.cursorUp(k)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},k=>this.scrollRight(k)),this._parser.registerCsiHandler({final:"B"},k=>this.cursorDown(k)),this._parser.registerCsiHandler({final:"C"},k=>this.cursorForward(k)),this._parser.registerCsiHandler({final:"D"},k=>this.cursorBackward(k)),this._parser.registerCsiHandler({final:"E"},k=>this.cursorNextLine(k)),this._parser.registerCsiHandler({final:"F"},k=>this.cursorPrecedingLine(k)),this._parser.registerCsiHandler({final:"G"},k=>this.cursorCharAbsolute(k)),this._parser.registerCsiHandler({final:"H"},k=>this.cursorPosition(k)),this._parser.registerCsiHandler({final:"I"},k=>this.cursorForwardTab(k)),this._parser.registerCsiHandler({final:"J"},k=>this.eraseInDisplay(k,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},k=>this.eraseInDisplay(k,!0)),this._parser.registerCsiHandler({final:"K"},k=>this.eraseInLine(k,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},k=>this.eraseInLine(k,!0)),this._parser.registerCsiHandler({final:"L"},k=>this.insertLines(k)),this._parser.registerCsiHandler({final:"M"},k=>this.deleteLines(k)),this._parser.registerCsiHandler({final:"P"},k=>this.deleteChars(k)),this._parser.registerCsiHandler({final:"S"},k=>this.scrollUp(k)),this._parser.registerCsiHandler({final:"T"},k=>this.scrollDown(k)),this._parser.registerCsiHandler({final:"X"},k=>this.eraseChars(k)),this._parser.registerCsiHandler({final:"Z"},k=>this.cursorBackwardTab(k)),this._parser.registerCsiHandler({final:"`"},k=>this.charPosAbsolute(k)),this._parser.registerCsiHandler({final:"a"},k=>this.hPositionRelative(k)),this._parser.registerCsiHandler({final:"b"},k=>this.repeatPrecedingCharacter(k)),this._parser.registerCsiHandler({final:"c"},k=>this.sendDeviceAttributesPrimary(k)),this._parser.registerCsiHandler({prefix:">",final:"c"},k=>this.sendDeviceAttributesSecondary(k)),this._parser.registerCsiHandler({final:"d"},k=>this.linePosAbsolute(k)),this._parser.registerCsiHandler({final:"e"},k=>this.vPositionRelative(k)),this._parser.registerCsiHandler({final:"f"},k=>this.hVPosition(k)),this._parser.registerCsiHandler({final:"g"},k=>this.tabClear(k)),this._parser.registerCsiHandler({final:"h"},k=>this.setMode(k)),this._parser.registerCsiHandler({prefix:"?",final:"h"},k=>this.setModePrivate(k)),this._parser.registerCsiHandler({final:"l"},k=>this.resetMode(k)),this._parser.registerCsiHandler({prefix:"?",final:"l"},k=>this.resetModePrivate(k)),this._parser.registerCsiHandler({final:"m"},k=>this.charAttributes(k)),this._parser.registerCsiHandler({final:"n"},k=>this.deviceStatus(k)),this._parser.registerCsiHandler({prefix:"?",final:"n"},k=>this.deviceStatusPrivate(k)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},k=>this.softReset(k)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},k=>this.setCursorStyle(k)),this._parser.registerCsiHandler({final:"r"},k=>this.setScrollRegion(k)),this._parser.registerCsiHandler({final:"s"},k=>this.saveCursor(k)),this._parser.registerCsiHandler({final:"t"},k=>this.windowOptions(k)),this._parser.registerCsiHandler({final:"u"},k=>this.restoreCursor(k)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},k=>this.insertColumns(k)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},k=>this.deleteColumns(k)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},k=>this.selectProtected(k)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},k=>this.requestMode(k,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},k=>this.requestMode(k,!1)),this._parser.setExecuteHandler(f.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(f.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(f.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(f.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(f.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(f.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(f.C1.IND,()=>this.index()),this._parser.setExecuteHandler(f.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(f.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new C.OscHandler(k=>(this.setTitle(k),this.setIconName(k),!0))),this._parser.registerOscHandler(1,new C.OscHandler(k=>this.setIconName(k))),this._parser.registerOscHandler(2,new C.OscHandler(k=>this.setTitle(k))),this._parser.registerOscHandler(4,new C.OscHandler(k=>this.setOrReportIndexedColor(k))),this._parser.registerOscHandler(8,new C.OscHandler(k=>this.setHyperlink(k))),this._parser.registerOscHandler(10,new C.OscHandler(k=>this.setOrReportFgColor(k))),this._parser.registerOscHandler(11,new C.OscHandler(k=>this.setOrReportBgColor(k))),this._parser.registerOscHandler(12,new C.OscHandler(k=>this.setOrReportCursorColor(k))),this._parser.registerOscHandler(104,new C.OscHandler(k=>this.restoreIndexedColor(k))),this._parser.registerOscHandler(110,new C.OscHandler(k=>this.restoreFgColor(k))),this._parser.registerOscHandler(111,new C.OscHandler(k=>this.restoreBgColor(k))),this._parser.registerOscHandler(112,new C.OscHandler(k=>this.restoreCursorColor(k))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const k in v.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:k},()=>this.selectCharset("("+k)),this._parser.registerEscHandler({intermediates:")",final:k},()=>this.selectCharset(")"+k)),this._parser.registerEscHandler({intermediates:"*",final:k},()=>this.selectCharset("*"+k)),this._parser.registerEscHandler({intermediates:"+",final:k},()=>this.selectCharset("+"+k)),this._parser.registerEscHandler({intermediates:"-",final:k},()=>this.selectCharset("-"+k)),this._parser.registerEscHandler({intermediates:".",final:k},()=>this.selectCharset("."+k)),this._parser.registerEscHandler({intermediates:"/",final:k},()=>this.selectCharset("/"+k));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(k=>(this._logService.error("Parsing error: ",k),k)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new j.DcsHandler((k,F)=>this.requestStatusString(k,F)))}_preserveStack(N,L,I,U){this._parseStack.paused=!0,this._parseStack.cursorStartX=N,this._parseStack.cursorStartY=L,this._parseStack.decodedLength=I,this._parseStack.position=U}_logSlowResolvingAsync(N){this._logService.logLevel<=_.LogLevelEnum.WARN&&Promise.race([N,new Promise((L,I)=>setTimeout(()=>I("#SLOW_TIMEOUT"),5e3))]).catch(L=>{if(L!=="#SLOW_TIMEOUT")throw L;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(N,L){let I,U=this._activeBuffer.x,se=this._activeBuffer.y,ce=0;const Q=this._parseStack.paused;if(Q){if(I=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,L))return this._logSlowResolvingAsync(I),I;U=this._parseStack.cursorStartX,se=this._parseStack.cursorStartY,this._parseStack.paused=!1,N.length>D&&(ce=this._parseStack.position+D)}if(this._logService.logLevel<=_.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof N=="string"?` "${N}"`:` "${Array.prototype.map.call(N,re=>String.fromCharCode(re)).join("")}"`),typeof N=="string"?N.split("").map(re=>re.charCodeAt(0)):N),this._parseBuffer.length<N.length&&this._parseBuffer.length<D&&(this._parseBuffer=new Uint32Array(Math.min(N.length,D))),Q||this._dirtyRowTracker.clearRange(),N.length>D)for(let re=ce;re<N.length;re+=D){const pe=re+D<N.length?re+D:N.length,k=typeof N=="string"?this._stringDecoder.decode(N.substring(re,pe),this._parseBuffer):this._utf8Decoder.decode(N.subarray(re,pe),this._parseBuffer);if(I=this._parser.parse(this._parseBuffer,k))return this._preserveStack(U,se,k,re),this._logSlowResolvingAsync(I),I}else if(!Q){const re=typeof N=="string"?this._stringDecoder.decode(N,this._parseBuffer):this._utf8Decoder.decode(N,this._parseBuffer);if(I=this._parser.parse(this._parseBuffer,re))return this._preserveStack(U,se,re,0),this._logSlowResolvingAsync(I),I}this._activeBuffer.x===U&&this._activeBuffer.y===se||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(N,L,I){let U,se;const ce=this._charsetService.charset,Q=this._optionsService.rawOptions.screenReaderMode,re=this._bufferService.cols,pe=this._coreService.decPrivateModes.wraparound,k=this._coreService.modes.insertMode,F=this._curAttrData;let Y=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&I-L>0&&Y.getWidth(this._activeBuffer.x-1)===2&&Y.setCellFromCodePoint(this._activeBuffer.x-1,0,1,F.fg,F.bg,F.extended);for(let V=L;V<I;++V){if(U=N[V],se=this._unicodeService.wcwidth(U),U<127&&ce){const O=ce[String.fromCharCode(U)];O&&(U=O.charCodeAt(0))}if(Q&&this._onA11yChar.fire((0,S.stringFromCodePoint)(U)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),se||!this._activeBuffer.x){if(this._activeBuffer.x+se-1>=re){if(pe){for(;this._activeBuffer.x<re;)Y.setCellFromCodePoint(this._activeBuffer.x++,0,1,F.fg,F.bg,F.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),Y=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=re-1,se===2)continue}if(k&&(Y.insertCells(this._activeBuffer.x,se,this._activeBuffer.getNullCell(F),F),Y.getWidth(re-1)===2&&Y.setCellFromCodePoint(re-1,c.NULL_CELL_CODE,c.NULL_CELL_WIDTH,F.fg,F.bg,F.extended)),Y.setCellFromCodePoint(this._activeBuffer.x++,U,se,F.fg,F.bg,F.extended),se>0)for(;--se;)Y.setCellFromCodePoint(this._activeBuffer.x++,0,0,F.fg,F.bg,F.extended)}else Y.getWidth(this._activeBuffer.x-1)?Y.addCodepointToCell(this._activeBuffer.x-1,U):Y.addCodepointToCell(this._activeBuffer.x-2,U)}I-L>0&&(Y.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<re&&I-L>0&&Y.getWidth(this._activeBuffer.x)===0&&!Y.hasContent(this._activeBuffer.x)&&Y.setCellFromCodePoint(this._activeBuffer.x,0,1,F.fg,F.bg,F.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(N,L){return N.final!=="t"||N.prefix||N.intermediates?this._parser.registerCsiHandler(N,L):this._parser.registerCsiHandler(N,I=>!A(I.params[0],this._optionsService.rawOptions.windowOptions)||L(I))}registerDcsHandler(N,L){return this._parser.registerDcsHandler(N,new j.DcsHandler(L))}registerEscHandler(N,L){return this._parser.registerEscHandler(N,L)}registerOscHandler(N,L){return this._parser.registerOscHandler(N,new C.OscHandler(L))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var N;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||N===void 0)&&N.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);L.hasWidth(this._activeBuffer.x)&&!L.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const N=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-N),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(N=this._bufferService.cols-1){this._activeBuffer.x=Math.min(N,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(N,L){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=N,this._activeBuffer.y=this._activeBuffer.scrollTop+L):(this._activeBuffer.x=N,this._activeBuffer.y=L),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(N,L){this._restrictCursor(),this._setCursor(this._activeBuffer.x+N,this._activeBuffer.y+L)}cursorUp(N){const L=this._activeBuffer.y-this._activeBuffer.scrollTop;return L>=0?this._moveCursor(0,-Math.min(L,N.params[0]||1)):this._moveCursor(0,-(N.params[0]||1)),!0}cursorDown(N){const L=this._activeBuffer.scrollBottom-this._activeBuffer.y;return L>=0?this._moveCursor(0,Math.min(L,N.params[0]||1)):this._moveCursor(0,N.params[0]||1),!0}cursorForward(N){return this._moveCursor(N.params[0]||1,0),!0}cursorBackward(N){return this._moveCursor(-(N.params[0]||1),0),!0}cursorNextLine(N){return this.cursorDown(N),this._activeBuffer.x=0,!0}cursorPrecedingLine(N){return this.cursorUp(N),this._activeBuffer.x=0,!0}cursorCharAbsolute(N){return this._setCursor((N.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(N){return this._setCursor(N.length>=2?(N.params[1]||1)-1:0,(N.params[0]||1)-1),!0}charPosAbsolute(N){return this._setCursor((N.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(N){return this._moveCursor(N.params[0]||1,0),!0}linePosAbsolute(N){return this._setCursor(this._activeBuffer.x,(N.params[0]||1)-1),!0}vPositionRelative(N){return this._moveCursor(0,N.params[0]||1),!0}hVPosition(N){return this.cursorPosition(N),!0}tabClear(N){const L=N.params[0];return L===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:L===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(N){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let L=N.params[0]||1;for(;L--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(N){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let L=N.params[0]||1;for(;L--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(N){const L=N.params[0];return L===1&&(this._curAttrData.bg|=536870912),L!==2&&L!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(N,L,I,U=!1,se=!1){const ce=this._activeBuffer.lines.get(this._activeBuffer.ybase+N);ce.replaceCells(L,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),se),U&&(ce.isWrapped=!1)}_resetBufferLine(N,L=!1){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+N);I&&(I.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),L),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+N),I.isWrapped=!1)}eraseInDisplay(N,L=!1){let I;switch(this._restrictCursor(this._bufferService.cols),N.params[0]){case 0:for(I=this._activeBuffer.y,this._dirtyRowTracker.markDirty(I),this._eraseInBufferLine(I++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,L);I<this._bufferService.rows;I++)this._resetBufferLine(I,L);this._dirtyRowTracker.markDirty(I);break;case 1:for(I=this._activeBuffer.y,this._dirtyRowTracker.markDirty(I),this._eraseInBufferLine(I,0,this._activeBuffer.x+1,!0,L),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(I+1).isWrapped=!1);I--;)this._resetBufferLine(I,L);this._dirtyRowTracker.markDirty(0);break;case 2:for(I=this._bufferService.rows,this._dirtyRowTracker.markDirty(I-1);I--;)this._resetBufferLine(I,L);this._dirtyRowTracker.markDirty(0);break;case 3:const U=this._activeBuffer.lines.length-this._bufferService.rows;U>0&&(this._activeBuffer.lines.trimStart(U),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-U,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-U,0),this._onScroll.fire(0))}return!0}eraseInLine(N,L=!1){switch(this._restrictCursor(this._bufferService.cols),N.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,L);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,L);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,L)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(N){this._restrictCursor();let L=N.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=this._activeBuffer.ybase+this._activeBuffer.y,U=this._bufferService.rows-1-this._activeBuffer.scrollBottom,se=this._bufferService.rows-1+this._activeBuffer.ybase-U+1;for(;L--;)this._activeBuffer.lines.splice(se-1,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(N){this._restrictCursor();let L=N.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=this._activeBuffer.ybase+this._activeBuffer.y;let U;for(U=this._bufferService.rows-1-this._activeBuffer.scrollBottom,U=this._bufferService.rows-1+this._activeBuffer.ybase-U;L--;)this._activeBuffer.lines.splice(I,1),this._activeBuffer.lines.splice(U,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(N){this._restrictCursor();const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.insertCells(this._activeBuffer.x,N.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(N){this._restrictCursor();const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.deleteCells(this._activeBuffer.x,N.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(N){let L=N.params[0]||1;for(;L--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(N){let L=N.params[0]||1;for(;L--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(o.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const L=N.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);U.deleteCells(0,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),U.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const L=N.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);U.insertCells(0,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),U.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const L=N.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);U.insertCells(this._activeBuffer.x,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),U.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const L=N.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);U.deleteCells(this._activeBuffer.x,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),U.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(N){this._restrictCursor();const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(N.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(N){if(!this._parser.precedingCodepoint)return!0;const L=N.params[0]||1,I=new Uint32Array(L);for(let U=0;U<L;++U)I[U]=this._parser.precedingCodepoint;return this.print(I,0,I.length),!0}sendDeviceAttributesPrimary(N){return N.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(f.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(f.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(N){return N.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(f.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(f.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(N.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(f.C0.ESC+"[>83;40003;0c")),!0}_is(N){return(this._optionsService.rawOptions.termName+"").indexOf(N)===0}setMode(N){for(let L=0;L<N.length;L++)switch(N.params[L]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(N){for(let L=0;L<N.length;L++)switch(N.params[L]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),this._charsetService.setgCharset(1,v.DEFAULT_CHARSET),this._charsetService.setgCharset(2,v.DEFAULT_CHARSET),this._charsetService.setgCharset(3,v.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(N){for(let L=0;L<N.length;L++)switch(N.params[L]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(N){for(let L=0;L<N.length;L++)switch(N.params[L]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),N.params[L]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(N,L){const I=this._coreService.decPrivateModes,{activeProtocol:U,activeEncoding:se}=this._coreMouseService,ce=this._coreService,{buffers:Q,cols:re}=this._bufferService,{active:pe,alt:k}=Q,F=this._optionsService.rawOptions,Y=Z=>Z?1:2,V=N.params[0];return O=V,H=L?V===2?4:V===4?Y(ce.modes.insertMode):V===12?3:V===20?Y(F.convertEol):0:V===1?Y(I.applicationCursorKeys):V===3?F.windowOptions.setWinLines?re===80?2:re===132?1:0:0:V===6?Y(I.origin):V===7?Y(I.wraparound):V===8?3:V===9?Y(U==="X10"):V===12?Y(F.cursorBlink):V===25?Y(!ce.isCursorHidden):V===45?Y(I.reverseWraparound):V===66?Y(I.applicationKeypad):V===67?4:V===1e3?Y(U==="VT200"):V===1002?Y(U==="DRAG"):V===1003?Y(U==="ANY"):V===1004?Y(I.sendFocus):V===1005?4:V===1006?Y(se==="SGR"):V===1015?4:V===1016?Y(se==="SGR_PIXELS"):V===1048?1:V===47||V===1047||V===1049?Y(pe===k):V===2004?Y(I.bracketedPasteMode):0,ce.triggerDataEvent(`${f.C0.ESC}[${L?"":"?"}${O};${H}$y`),!0;var O,H}_updateAttrColor(N,L,I,U,se){return L===2?(N|=50331648,N&=-16777216,N|=g.AttributeData.fromColorRGB([I,U,se])):L===5&&(N&=-50331904,N|=33554432|255&I),N}_extractColor(N,L,I){const U=[0,0,-1,0,0,0];let se=0,ce=0;do{if(U[ce+se]=N.params[L+ce],N.hasSubParams(L+ce)){const Q=N.getSubParams(L+ce);let re=0;do U[1]===5&&(se=1),U[ce+re+1+se]=Q[re];while(++re<Q.length&&re+ce+1+se<U.length);break}if(U[1]===5&&ce+se>=2||U[1]===2&&ce+se>=5)break;U[1]&&(se=1)}while(++ce+L<N.length&&ce+se<U.length);for(let Q=2;Q<U.length;++Q)U[Q]===-1&&(U[Q]=0);switch(U[0]){case 38:I.fg=this._updateAttrColor(I.fg,U[1],U[3],U[4],U[5]);break;case 48:I.bg=this._updateAttrColor(I.bg,U[1],U[3],U[4],U[5]);break;case 58:I.extended=I.extended.clone(),I.extended.underlineColor=this._updateAttrColor(I.extended.underlineColor,U[1],U[3],U[4],U[5])}return ce}_processUnderline(N,L){L.extended=L.extended.clone(),(!~N||N>5)&&(N=1),L.extended.underlineStyle=N,L.fg|=268435456,N===0&&(L.fg&=-268435457),L.updateExtended()}_processSGR0(N){N.fg=o.DEFAULT_ATTR_DATA.fg,N.bg=o.DEFAULT_ATTR_DATA.bg,N.extended=N.extended.clone(),N.extended.underlineStyle=0,N.extended.underlineColor&=-67108864,N.updateExtended()}charAttributes(N){if(N.length===1&&N.params[0]===0)return this._processSGR0(this._curAttrData),!0;const L=N.length;let I;const U=this._curAttrData;for(let se=0;se<L;se++)I=N.params[se],I>=30&&I<=37?(U.fg&=-50331904,U.fg|=16777216|I-30):I>=40&&I<=47?(U.bg&=-50331904,U.bg|=16777216|I-40):I>=90&&I<=97?(U.fg&=-50331904,U.fg|=16777224|I-90):I>=100&&I<=107?(U.bg&=-50331904,U.bg|=16777224|I-100):I===0?this._processSGR0(U):I===1?U.fg|=134217728:I===3?U.bg|=67108864:I===4?(U.fg|=268435456,this._processUnderline(N.hasSubParams(se)?N.getSubParams(se)[0]:1,U)):I===5?U.fg|=536870912:I===7?U.fg|=67108864:I===8?U.fg|=1073741824:I===9?U.fg|=2147483648:I===2?U.bg|=134217728:I===21?this._processUnderline(2,U):I===22?(U.fg&=-134217729,U.bg&=-134217729):I===23?U.bg&=-67108865:I===24?(U.fg&=-268435457,this._processUnderline(0,U)):I===25?U.fg&=-536870913:I===27?U.fg&=-67108865:I===28?U.fg&=-1073741825:I===29?U.fg&=2147483647:I===39?(U.fg&=-67108864,U.fg|=16777215&o.DEFAULT_ATTR_DATA.fg):I===49?(U.bg&=-67108864,U.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):I===38||I===48||I===58?se+=this._extractColor(N,se,U):I===53?U.bg|=1073741824:I===55?U.bg&=-1073741825:I===59?(U.extended=U.extended.clone(),U.extended.underlineColor=-1,U.updateExtended()):I===100?(U.fg&=-67108864,U.fg|=16777215&o.DEFAULT_ATTR_DATA.fg,U.bg&=-67108864,U.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",I);return!0}deviceStatus(N){switch(N.params[0]){case 5:this._coreService.triggerDataEvent(`${f.C0.ESC}[0n`);break;case 6:const L=this._activeBuffer.y+1,I=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[${L};${I}R`)}return!0}deviceStatusPrivate(N){if(N.params[0]===6){const L=this._activeBuffer.y+1,I=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[?${L};${I}R`)}return!0}softReset(N){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(N){const L=N.params[0]||1;switch(L){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const I=L%2==1;return this._optionsService.options.cursorBlink=I,!0}setScrollRegion(N){const L=N.params[0]||1;let I;return(N.length<2||(I=N.params[1])>this._bufferService.rows||I===0)&&(I=this._bufferService.rows),I>L&&(this._activeBuffer.scrollTop=L-1,this._activeBuffer.scrollBottom=I-1,this._setCursor(0,0)),!0}windowOptions(N){if(!A(N.params[0],this._optionsService.rawOptions.windowOptions))return!0;const L=N.length>1?N.params[1]:0;switch(N.params[0]){case 14:L!==2&&this._onRequestWindowsOptionsReport.fire(T.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(T.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${f.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:L!==0&&L!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),L!==0&&L!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:L!==0&&L!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),L!==0&&L!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(N){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(N){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(N){return this._windowTitle=N,this._onTitleChange.fire(N),!0}setIconName(N){return this._iconName=N,!0}setOrReportIndexedColor(N){const L=[],I=N.split(";");for(;I.length>1;){const U=I.shift(),se=I.shift();if(/^\d+$/.exec(U)){const ce=parseInt(U);if(z(ce))if(se==="?")L.push({type:0,index:ce});else{const Q=(0,x.parseColor)(se);Q&&L.push({type:1,index:ce,color:Q})}}}return L.length&&this._onColor.fire(L),!0}setHyperlink(N){const L=N.split(";");return!(L.length<2)&&(L[1]?this._createHyperlink(L[0],L[1]):!L[0]&&this._finishHyperlink())}_createHyperlink(N,L){this._getCurrentLinkId()&&this._finishHyperlink();const I=N.split(":");let U;const se=I.findIndex(ce=>ce.startsWith("id="));return se!==-1&&(U=I[se].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:U,uri:L}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(N,L){const I=N.split(";");for(let U=0;U<I.length&&!(L>=this._specialColors.length);++U,++L)if(I[U]==="?")this._onColor.fire([{type:0,index:this._specialColors[L]}]);else{const se=(0,x.parseColor)(I[U]);se&&this._onColor.fire([{type:1,index:this._specialColors[L],color:se}])}return!0}setOrReportFgColor(N){return this._setOrReportSpecialColor(N,0)}setOrReportBgColor(N){return this._setOrReportSpecialColor(N,1)}setOrReportCursorColor(N){return this._setOrReportSpecialColor(N,2)}restoreIndexedColor(N){if(!N)return this._onColor.fire([{type:2}]),!0;const L=[],I=N.split(";");for(let U=0;U<I.length;++U)if(/^\d+$/.exec(I[U])){const se=parseInt(I[U]);z(se)&&L.push({type:2,index:se})}return L.length&&this._onColor.fire(L),!0}restoreFgColor(N){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(N){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(N){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),!0}selectCharset(N){return N.length!==2?(this.selectDefaultCharset(),!0):(N[0]==="/"||this._charsetService.setgCharset(E[N[0]],v.CHARSETS[N[1]]||v.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const N=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,N,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(N){return this._charsetService.setgLevel(N),!0}screenAlignmentPattern(){const N=new d.CellData;N.content=4194373,N.fg=this._curAttrData.fg,N.bg=this._curAttrData.bg,this._setCursor(0,0);for(let L=0;L<this._bufferService.rows;++L){const I=this._activeBuffer.ybase+this._activeBuffer.y+L,U=this._activeBuffer.lines.get(I);U&&(U.fill(N),U.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(N,L){const I=this._bufferService.buffer,U=this._optionsService.rawOptions;return(se=>(this._coreService.triggerDataEvent(`${f.C0.ESC}${se}${f.C0.ESC}\\`),!0))(N==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:N==='"p'?'P1$r61;1"p':N==="r"?`P1$r${I.scrollTop+1};${I.scrollBottom+1}r`:N==="m"?"P1$r0m":N===" q"?`P1$r${{block:2,underline:4,bar:6}[U.cursorStyle]-(U.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(N,L){this._dirtyRowTracker.markRangeDirty(N,L)}}l.InputHandler=q;let G=class{constructor(W){this._bufferService=W,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(W){W<this.start?this.start=W:W>this.end&&(this.end=W)}markRangeDirty(W,N){W>N&&(R=W,W=N,N=R),W<this.start&&(this.start=W),N>this.end&&(this.end=N)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function z(W){return 0<=W&&W<256}G=p([b(0,_.IBufferService)],G)},844:(m,l)=>{function h(p){for(const b of p)b.dispose();p.length=0}Object.defineProperty(l,"__esModule",{value:!0}),l.getDisposeArrayDisposable=l.disposeArray=l.toDisposable=l.MutableDisposable=l.Disposable=void 0,l.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const p of this._disposables)p.dispose();this._disposables.length=0}register(p){return this._disposables.push(p),p}unregister(p){const b=this._disposables.indexOf(p);b!==-1&&this._disposables.splice(b,1)}},l.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(p){var b;this._isDisposed||p===this._value||((b=this._value)===null||b===void 0||b.dispose(),this._value=p)}clear(){this.value=void 0}dispose(){var p;this._isDisposed=!0,(p=this._value)===null||p===void 0||p.dispose(),this._value=void 0}},l.toDisposable=function(p){return{dispose:p}},l.disposeArray=h,l.getDisposeArrayDisposable=function(p){return{dispose:()=>h(p)}}},1505:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FourKeyMap=l.TwoKeyMap=void 0;class h{constructor(){this._data={}}set(b,f,v){this._data[b]||(this._data[b]={}),this._data[b][f]=v}get(b,f){return this._data[b]?this._data[b][f]:void 0}clear(){this._data={}}}l.TwoKeyMap=h,l.FourKeyMap=class{constructor(){this._data=new h}set(p,b,f,v,y){this._data.get(p,b)||this._data.set(p,b,new h),this._data.get(p,b).set(f,v,y)}get(p,b,f,v){var y;return(y=this._data.get(p,b))===null||y===void 0?void 0:y.get(f,v)}clear(){this._data.clear()}}},6114:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.isChromeOS=l.isLinux=l.isWindows=l.isIphone=l.isIpad=l.isMac=l.getSafariVersion=l.isSafari=l.isLegacyEdge=l.isFirefox=l.isNode=void 0,l.isNode=typeof navigator>"u";const h=l.isNode?"node":navigator.userAgent,p=l.isNode?"node":navigator.platform;l.isFirefox=h.includes("Firefox"),l.isLegacyEdge=h.includes("Edge"),l.isSafari=/^((?!chrome|android).)*safari/i.test(h),l.getSafariVersion=function(){if(!l.isSafari)return 0;const b=h.match(/Version\/(\d+)/);return b===null||b.length<2?0:parseInt(b[1])},l.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(p),l.isIpad=p==="iPad",l.isIphone=p==="iPhone",l.isWindows=["Windows","Win16","Win32","WinCE"].includes(p),l.isLinux=p.indexOf("Linux")>=0,l.isChromeOS=/\bCrOS\b/.test(h)},6106:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SortedList=void 0;let h=0;l.SortedList=class{constructor(p){this._getKey=p,this._array=[]}clear(){this._array.length=0}insert(p){this._array.length!==0?(h=this._search(this._getKey(p)),this._array.splice(h,0,p)):this._array.push(p)}delete(p){if(this._array.length===0)return!1;const b=this._getKey(p);if(b===void 0||(h=this._search(b),h===-1)||this._getKey(this._array[h])!==b)return!1;do if(this._array[h]===p)return this._array.splice(h,1),!0;while(++h<this._array.length&&this._getKey(this._array[h])===b);return!1}*getKeyIterator(p){if(this._array.length!==0&&(h=this._search(p),!(h<0||h>=this._array.length)&&this._getKey(this._array[h])===p))do yield this._array[h];while(++h<this._array.length&&this._getKey(this._array[h])===p)}forEachByKey(p,b){if(this._array.length!==0&&(h=this._search(p),!(h<0||h>=this._array.length)&&this._getKey(this._array[h])===p))do b(this._array[h]);while(++h<this._array.length&&this._getKey(this._array[h])===p)}values(){return[...this._array].values()}_search(p){let b=0,f=this._array.length-1;for(;f>=b;){let v=b+f>>1;const y=this._getKey(this._array[v]);if(y>p)f=v-1;else{if(!(y<p)){for(;v>0&&this._getKey(this._array[v-1])===p;)v--;return v}b=v+1}}return b}}},7226:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DebouncedIdleTask=l.IdleTaskQueue=l.PriorityTaskQueue=void 0;const p=h(6114);class b{constructor(){this._tasks=[],this._i=0}enqueue(y){this._tasks.push(y),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(y){this._idleCallback=void 0;let w=0,S=0,o=y.timeRemaining(),u=0;for(;this._i<this._tasks.length;){if(w=Date.now(),this._tasks[this._i]()||this._i++,w=Math.max(1,Date.now()-w),S=Math.max(w,S),u=y.timeRemaining(),1.5*S>u)return o-w<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(o-w))}ms`),void this._start();o=u}this.clear()}}class f extends b{_requestCallback(y){return setTimeout(()=>y(this._createDeadline(16)))}_cancelCallback(y){clearTimeout(y)}_createDeadline(y){const w=Date.now()+y;return{timeRemaining:()=>Math.max(0,w-Date.now())}}}l.PriorityTaskQueue=f,l.IdleTaskQueue=!p.isNode&&"requestIdleCallback"in window?class extends b{_requestCallback(v){return requestIdleCallback(v)}_cancelCallback(v){cancelIdleCallback(v)}}:f,l.DebouncedIdleTask=class{constructor(){this._queue=new l.IdleTaskQueue}set(v){this._queue.clear(),this._queue.enqueue(v)}flush(){this._queue.flush()}}},9282:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.updateWindowsModeWrappedState=void 0;const p=h(643);l.updateWindowsModeWrappedState=function(b){const f=b.buffer.lines.get(b.buffer.ybase+b.buffer.y-1),v=f==null?void 0:f.get(b.cols-1),y=b.buffer.lines.get(b.buffer.ybase+b.buffer.y);y&&v&&(y.isWrapped=v[p.CHAR_DATA_CODE_INDEX]!==p.NULL_CELL_CODE&&v[p.CHAR_DATA_CODE_INDEX]!==p.WHITESPACE_CELL_CODE)}},3734:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ExtendedAttrs=l.AttributeData=void 0;class h{constructor(){this.fg=0,this.bg=0,this.extended=new p}static toColorRGB(f){return[f>>>16&255,f>>>8&255,255&f]}static fromColorRGB(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]}clone(){const f=new h;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}l.AttributeData=h;class p{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(f){this._ext=f}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(f){this._ext&=-469762049,this._ext|=f<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(f){this._ext&=-67108864,this._ext|=67108863&f}get urlId(){return this._urlId}set urlId(f){this._urlId=f}constructor(f=0,v=0){this._ext=0,this._urlId=0,this._ext=f,this._urlId=v}clone(){return new p(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}l.ExtendedAttrs=p},9092:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Buffer=l.MAX_BUFFER_SIZE=void 0;const p=h(6349),b=h(7226),f=h(3734),v=h(8437),y=h(4634),w=h(511),S=h(643),o=h(4863),u=h(7116);l.MAX_BUFFER_SIZE=4294967295,l.Buffer=class{constructor(c,d,g){this._hasScrollback=c,this._optionsService=d,this._bufferService=g,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=v.DEFAULT_ATTR_DATA.clone(),this.savedCharset=u.DEFAULT_CHARSET,this.markers=[],this._nullCell=w.CellData.fromCharData([0,S.NULL_CELL_CHAR,S.NULL_CELL_WIDTH,S.NULL_CELL_CODE]),this._whitespaceCell=w.CellData.fromCharData([0,S.WHITESPACE_CELL_CHAR,S.WHITESPACE_CELL_WIDTH,S.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new b.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new p.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(c){return c?(this._nullCell.fg=c.fg,this._nullCell.bg=c.bg,this._nullCell.extended=c.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new f.ExtendedAttrs),this._nullCell}getWhitespaceCell(c){return c?(this._whitespaceCell.fg=c.fg,this._whitespaceCell.bg=c.bg,this._whitespaceCell.extended=c.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new f.ExtendedAttrs),this._whitespaceCell}getBlankLine(c,d){return new v.BufferLine(this._bufferService.cols,this.getNullCell(c),d)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const c=this.ybase+this.y-this.ydisp;return c>=0&&c<this._rows}_getCorrectBufferLength(c){if(!this._hasScrollback)return c;const d=c+this._optionsService.rawOptions.scrollback;return d>l.MAX_BUFFER_SIZE?l.MAX_BUFFER_SIZE:d}fillViewportRows(c){if(this.lines.length===0){c===void 0&&(c=v.DEFAULT_ATTR_DATA);let d=this._rows;for(;d--;)this.lines.push(this.getBlankLine(c))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new p.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(c,d){const g=this.getNullCell(v.DEFAULT_ATTR_DATA);let _=0;const C=this._getCorrectBufferLength(d);if(C>this.lines.maxLength&&(this.lines.maxLength=C),this.lines.length>0){if(this._cols<c)for(let x=0;x<this.lines.length;x++)_+=+this.lines.get(x).resize(c,g);let j=0;if(this._rows<d)for(let x=this._rows;x<d;x++)this.lines.length<d+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new v.BufferLine(c,g)):this.ybase>0&&this.lines.length<=this.ybase+this.y+j+1?(this.ybase--,j++,this.ydisp>0&&this.ydisp--):this.lines.push(new v.BufferLine(c,g)));else for(let x=this._rows;x>d;x--)this.lines.length>d+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(C<this.lines.maxLength){const x=this.lines.length-C;x>0&&(this.lines.trimStart(x),this.ybase=Math.max(this.ybase-x,0),this.ydisp=Math.max(this.ydisp-x,0),this.savedY=Math.max(this.savedY-x,0)),this.lines.maxLength=C}this.x=Math.min(this.x,c-1),this.y=Math.min(this.y,d-1),j&&(this.y+=j),this.savedX=Math.min(this.savedX,c-1),this.scrollTop=0}if(this.scrollBottom=d-1,this._isReflowEnabled&&(this._reflow(c,d),this._cols>c))for(let j=0;j<this.lines.length;j++)_+=+this.lines.get(j).resize(c,g);this._cols=c,this._rows=d,this._memoryCleanupQueue.clear(),_>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let c=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,c=!1);let d=0;for(;this._memoryCleanupPosition<this.lines.length;)if(d+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),d>100)return!0;return c}get _isReflowEnabled(){const c=this._optionsService.rawOptions.windowsPty;return c&&c.buildNumber?this._hasScrollback&&c.backend==="conpty"&&c.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(c,d){this._cols!==c&&(c>this._cols?this._reflowLarger(c,d):this._reflowSmaller(c,d))}_reflowLarger(c,d){const g=(0,y.reflowLargerGetLinesToRemove)(this.lines,this._cols,c,this.ybase+this.y,this.getNullCell(v.DEFAULT_ATTR_DATA));if(g.length>0){const _=(0,y.reflowLargerCreateNewLayout)(this.lines,g);(0,y.reflowLargerApplyNewLayout)(this.lines,_.layout),this._reflowLargerAdjustViewport(c,d,_.countRemoved)}}_reflowLargerAdjustViewport(c,d,g){const _=this.getNullCell(v.DEFAULT_ATTR_DATA);let C=g;for(;C-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<d&&this.lines.push(new v.BufferLine(c,_))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-g,0)}_reflowSmaller(c,d){const g=this.getNullCell(v.DEFAULT_ATTR_DATA),_=[];let C=0;for(let j=this.lines.length-1;j>=0;j--){let x=this.lines.get(j);if(!x||!x.isWrapped&&x.getTrimmedLength()<=c)continue;const E=[x];for(;x.isWrapped&&j>0;)x=this.lines.get(--j),E.unshift(x);const D=this.ybase+this.y;if(D>=j&&D<j+E.length)continue;const A=E[E.length-1].getTrimmedLength(),T=(0,y.reflowSmallerGetNewLineLengths)(E,this._cols,c),R=T.length-E.length;let q;q=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+R):Math.max(0,this.lines.length-this.lines.maxLength+R);const G=[];for(let U=0;U<R;U++){const se=this.getBlankLine(v.DEFAULT_ATTR_DATA,!0);G.push(se)}G.length>0&&(_.push({start:j+E.length+C,newLines:G}),C+=G.length),E.push(...G);let z=T.length-1,W=T[z];W===0&&(z--,W=T[z]);let N=E.length-R-1,L=A;for(;N>=0;){const U=Math.min(L,W);if(E[z]===void 0)break;if(E[z].copyCellsFrom(E[N],L-U,W-U,U,!0),W-=U,W===0&&(z--,W=T[z]),L-=U,L===0){N--;const se=Math.max(N,0);L=(0,y.getWrappedLineTrimmedLength)(E,se,this._cols)}}for(let U=0;U<E.length;U++)T[U]<c&&E[U].setCell(T[U],g);let I=R-q;for(;I-- >0;)this.ybase===0?this.y<d-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+C)-d&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+R,this.ybase+d-1)}if(_.length>0){const j=[],x=[];for(let z=0;z<this.lines.length;z++)x.push(this.lines.get(z));const E=this.lines.length;let D=E-1,A=0,T=_[A];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+C);let R=0;for(let z=Math.min(this.lines.maxLength-1,E+C-1);z>=0;z--)if(T&&T.start>D+R){for(let W=T.newLines.length-1;W>=0;W--)this.lines.set(z--,T.newLines[W]);z++,j.push({index:D+1,amount:T.newLines.length}),R+=T.newLines.length,T=_[++A]}else this.lines.set(z,x[D--]);let q=0;for(let z=j.length-1;z>=0;z--)j[z].index+=q,this.lines.onInsertEmitter.fire(j[z]),q+=j[z].amount;const G=Math.max(0,E+C-this.lines.maxLength);G>0&&this.lines.onTrimEmitter.fire(G)}}translateBufferLineToString(c,d,g=0,_){const C=this.lines.get(c);return C?C.translateToString(d,g,_):""}getWrappedRangeForLine(c){let d=c,g=c;for(;d>0&&this.lines.get(d).isWrapped;)d--;for(;g+1<this.lines.length&&this.lines.get(g+1).isWrapped;)g++;return{first:d,last:g}}setupTabStops(c){for(c!=null?this.tabs[c]||(c=this.prevStop(c)):(this.tabs={},c=0);c<this._cols;c+=this._optionsService.rawOptions.tabStopWidth)this.tabs[c]=!0}prevStop(c){for(c==null&&(c=this.x);!this.tabs[--c]&&c>0;);return c>=this._cols?this._cols-1:c<0?0:c}nextStop(c){for(c==null&&(c=this.x);!this.tabs[++c]&&c<this._cols;);return c>=this._cols?this._cols-1:c<0?0:c}clearMarkers(c){this._isClearing=!0;for(let d=0;d<this.markers.length;d++)this.markers[d].line===c&&(this.markers[d].dispose(),this.markers.splice(d--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].dispose(),this.markers.splice(c--,1);this._isClearing=!1}addMarker(c){const d=new o.Marker(c);return this.markers.push(d),d.register(this.lines.onTrim(g=>{d.line-=g,d.line<0&&d.dispose()})),d.register(this.lines.onInsert(g=>{d.line>=g.index&&(d.line+=g.amount)})),d.register(this.lines.onDelete(g=>{d.line>=g.index&&d.line<g.index+g.amount&&d.dispose(),d.line>g.index&&(d.line-=g.amount)})),d.register(d.onDispose(()=>this._removeMarker(d))),d}_removeMarker(c){this._isClearing||this.markers.splice(this.markers.indexOf(c),1)}}},8437:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLine=l.DEFAULT_ATTR_DATA=void 0;const p=h(3734),b=h(511),f=h(643),v=h(482);l.DEFAULT_ATTR_DATA=Object.freeze(new p.AttributeData);let y=0;class w{constructor(o,u,c=!1){this.isWrapped=c,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*o);const d=u||b.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]);for(let g=0;g<o;++g)this.setCell(g,d);this.length=o}get(o){const u=this._data[3*o+0],c=2097151&u;return[this._data[3*o+1],2097152&u?this._combined[o]:c?(0,v.stringFromCodePoint)(c):"",u>>22,2097152&u?this._combined[o].charCodeAt(this._combined[o].length-1):c]}set(o,u){this._data[3*o+1]=u[f.CHAR_DATA_ATTR_INDEX],u[f.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[o]=u[1],this._data[3*o+0]=2097152|o|u[f.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*o+0]=u[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|u[f.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(o){return this._data[3*o+0]>>22}hasWidth(o){return 12582912&this._data[3*o+0]}getFg(o){return this._data[3*o+1]}getBg(o){return this._data[3*o+2]}hasContent(o){return 4194303&this._data[3*o+0]}getCodePoint(o){const u=this._data[3*o+0];return 2097152&u?this._combined[o].charCodeAt(this._combined[o].length-1):2097151&u}isCombined(o){return 2097152&this._data[3*o+0]}getString(o){const u=this._data[3*o+0];return 2097152&u?this._combined[o]:2097151&u?(0,v.stringFromCodePoint)(2097151&u):""}isProtected(o){return 536870912&this._data[3*o+2]}loadCell(o,u){return y=3*o,u.content=this._data[y+0],u.fg=this._data[y+1],u.bg=this._data[y+2],2097152&u.content&&(u.combinedData=this._combined[o]),268435456&u.bg&&(u.extended=this._extendedAttrs[o]),u}setCell(o,u){2097152&u.content&&(this._combined[o]=u.combinedData),268435456&u.bg&&(this._extendedAttrs[o]=u.extended),this._data[3*o+0]=u.content,this._data[3*o+1]=u.fg,this._data[3*o+2]=u.bg}setCellFromCodePoint(o,u,c,d,g,_){268435456&g&&(this._extendedAttrs[o]=_),this._data[3*o+0]=u|c<<22,this._data[3*o+1]=d,this._data[3*o+2]=g}addCodepointToCell(o,u){let c=this._data[3*o+0];2097152&c?this._combined[o]+=(0,v.stringFromCodePoint)(u):(2097151&c?(this._combined[o]=(0,v.stringFromCodePoint)(2097151&c)+(0,v.stringFromCodePoint)(u),c&=-2097152,c|=2097152):c=u|4194304,this._data[3*o+0]=c)}insertCells(o,u,c,d){if((o%=this.length)&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new p.ExtendedAttrs),u<this.length-o){const g=new b.CellData;for(let _=this.length-o-u-1;_>=0;--_)this.setCell(o+u+_,this.loadCell(o+_,g));for(let _=0;_<u;++_)this.setCell(o+_,c)}else for(let g=o;g<this.length;++g)this.setCell(g,c);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new p.ExtendedAttrs)}deleteCells(o,u,c,d){if(o%=this.length,u<this.length-o){const g=new b.CellData;for(let _=0;_<this.length-o-u;++_)this.setCell(o+_,this.loadCell(o+u+_,g));for(let _=this.length-u;_<this.length;++_)this.setCell(_,c)}else for(let g=o;g<this.length;++g)this.setCell(g,c);o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new p.ExtendedAttrs),this.getWidth(o)!==0||this.hasContent(o)||this.setCellFromCodePoint(o,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new p.ExtendedAttrs)}replaceCells(o,u,c,d,g=!1){if(g)for(o&&this.getWidth(o-1)===2&&!this.isProtected(o-1)&&this.setCellFromCodePoint(o-1,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new p.ExtendedAttrs),u<this.length&&this.getWidth(u-1)===2&&!this.isProtected(u)&&this.setCellFromCodePoint(u,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new p.ExtendedAttrs);o<u&&o<this.length;)this.isProtected(o)||this.setCell(o,c),o++;else for(o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new p.ExtendedAttrs),u<this.length&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new p.ExtendedAttrs);o<u&&o<this.length;)this.setCell(o++,c)}resize(o,u){if(o===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const c=3*o;if(o>this.length){if(this._data.buffer.byteLength>=4*c)this._data=new Uint32Array(this._data.buffer,0,c);else{const d=new Uint32Array(c);d.set(this._data),this._data=d}for(let d=this.length;d<o;++d)this.setCell(d,u)}else{this._data=this._data.subarray(0,c);const d=Object.keys(this._combined);for(let _=0;_<d.length;_++){const C=parseInt(d[_],10);C>=o&&delete this._combined[C]}const g=Object.keys(this._extendedAttrs);for(let _=0;_<g.length;_++){const C=parseInt(g[_],10);C>=o&&delete this._extendedAttrs[C]}}return this.length=o,4*c*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const o=new Uint32Array(this._data.length);return o.set(this._data),this._data=o,1}return 0}fill(o,u=!1){if(u)for(let c=0;c<this.length;++c)this.isProtected(c)||this.setCell(c,o);else{this._combined={},this._extendedAttrs={};for(let c=0;c<this.length;++c)this.setCell(c,o)}}copyFrom(o){this.length!==o.length?this._data=new Uint32Array(o._data):this._data.set(o._data),this.length=o.length,this._combined={};for(const u in o._combined)this._combined[u]=o._combined[u];this._extendedAttrs={};for(const u in o._extendedAttrs)this._extendedAttrs[u]=o._extendedAttrs[u];this.isWrapped=o.isWrapped}clone(){const o=new w(0);o._data=new Uint32Array(this._data),o.length=this.length;for(const u in this._combined)o._combined[u]=this._combined[u];for(const u in this._extendedAttrs)o._extendedAttrs[u]=this._extendedAttrs[u];return o.isWrapped=this.isWrapped,o}getTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0])return o+(this._data[3*o+0]>>22);return 0}getNoBgTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0]||50331648&this._data[3*o+2])return o+(this._data[3*o+0]>>22);return 0}copyCellsFrom(o,u,c,d,g){const _=o._data;if(g)for(let j=d-1;j>=0;j--){for(let x=0;x<3;x++)this._data[3*(c+j)+x]=_[3*(u+j)+x];268435456&_[3*(u+j)+2]&&(this._extendedAttrs[c+j]=o._extendedAttrs[u+j])}else for(let j=0;j<d;j++){for(let x=0;x<3;x++)this._data[3*(c+j)+x]=_[3*(u+j)+x];268435456&_[3*(u+j)+2]&&(this._extendedAttrs[c+j]=o._extendedAttrs[u+j])}const C=Object.keys(o._combined);for(let j=0;j<C.length;j++){const x=parseInt(C[j],10);x>=u&&(this._combined[x-u+c]=o._combined[x])}}translateToString(o=!1,u=0,c=this.length){o&&(c=Math.min(c,this.getTrimmedLength()));let d="";for(;u<c;){const g=this._data[3*u+0],_=2097151&g;d+=2097152&g?this._combined[u]:_?(0,v.stringFromCodePoint)(_):f.WHITESPACE_CELL_CHAR,u+=g>>22||1}return d}}l.BufferLine=w},4841:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getRangeLength=void 0,l.getRangeLength=function(h,p){if(h.start.y>h.end.y)throw new Error(`Buffer range end (${h.end.x}, ${h.end.y}) cannot be before start (${h.start.x}, ${h.start.y})`);return p*(h.end.y-h.start.y)+(h.end.x-h.start.x+1)}},4634:(m,l)=>{function h(p,b,f){if(b===p.length-1)return p[b].getTrimmedLength();const v=!p[b].hasContent(f-1)&&p[b].getWidth(f-1)===1,y=p[b+1].getWidth(0)===2;return v&&y?f-1:f}Object.defineProperty(l,"__esModule",{value:!0}),l.getWrappedLineTrimmedLength=l.reflowSmallerGetNewLineLengths=l.reflowLargerApplyNewLayout=l.reflowLargerCreateNewLayout=l.reflowLargerGetLinesToRemove=void 0,l.reflowLargerGetLinesToRemove=function(p,b,f,v,y){const w=[];for(let S=0;S<p.length-1;S++){let o=S,u=p.get(++o);if(!u.isWrapped)continue;const c=[p.get(S)];for(;o<p.length&&u.isWrapped;)c.push(u),u=p.get(++o);if(v>=S&&v<o){S+=c.length-1;continue}let d=0,g=h(c,d,b),_=1,C=0;for(;_<c.length;){const x=h(c,_,b),E=x-C,D=f-g,A=Math.min(E,D);c[d].copyCellsFrom(c[_],C,g,A,!1),g+=A,g===f&&(d++,g=0),C+=A,C===x&&(_++,C=0),g===0&&d!==0&&c[d-1].getWidth(f-1)===2&&(c[d].copyCellsFrom(c[d-1],f-1,g++,1,!1),c[d-1].setCell(f-1,y))}c[d].replaceCells(g,f,y);let j=0;for(let x=c.length-1;x>0&&(x>d||c[x].getTrimmedLength()===0);x--)j++;j>0&&(w.push(S+c.length-j),w.push(j)),S+=c.length-1}return w},l.reflowLargerCreateNewLayout=function(p,b){const f=[];let v=0,y=b[v],w=0;for(let S=0;S<p.length;S++)if(y===S){const o=b[++v];p.onDeleteEmitter.fire({index:S-w,amount:o}),S+=o-1,w+=o,y=b[++v]}else f.push(S);return{layout:f,countRemoved:w}},l.reflowLargerApplyNewLayout=function(p,b){const f=[];for(let v=0;v<b.length;v++)f.push(p.get(b[v]));for(let v=0;v<f.length;v++)p.set(v,f[v]);p.length=b.length},l.reflowSmallerGetNewLineLengths=function(p,b,f){const v=[],y=p.map((u,c)=>h(p,c,b)).reduce((u,c)=>u+c);let w=0,S=0,o=0;for(;o<y;){if(y-o<f){v.push(y-o);break}w+=f;const u=h(p,S,b);w>u&&(w-=u,S++);const c=p[S].getWidth(w-1)===2;c&&w--;const d=c?f-1:f;v.push(d),o+=d}return v},l.getWrappedLineTrimmedLength=h},5295:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferSet=void 0;const p=h(8460),b=h(844),f=h(9092);class v extends b.Disposable{constructor(w,S){super(),this._optionsService=w,this._bufferService=S,this._onBufferActivate=this.register(new p.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(w){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(w),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(w,S){this._normal.resize(w,S),this._alt.resize(w,S),this.setupTabStops(w)}setupTabStops(w){this._normal.setupTabStops(w),this._alt.setupTabStops(w)}}l.BufferSet=v},511:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CellData=void 0;const p=h(482),b=h(643),f=h(3734);class v extends f.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new f.ExtendedAttrs,this.combinedData=""}static fromCharData(w){const S=new v;return S.setFromCharData(w),S}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,p.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(w){this.fg=w[b.CHAR_DATA_ATTR_INDEX],this.bg=0;let S=!1;if(w[b.CHAR_DATA_CHAR_INDEX].length>2)S=!0;else if(w[b.CHAR_DATA_CHAR_INDEX].length===2){const o=w[b.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=o&&o<=56319){const u=w[b.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=u&&u<=57343?this.content=1024*(o-55296)+u-56320+65536|w[b.CHAR_DATA_WIDTH_INDEX]<<22:S=!0}else S=!0}else this.content=w[b.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|w[b.CHAR_DATA_WIDTH_INDEX]<<22;S&&(this.combinedData=w[b.CHAR_DATA_CHAR_INDEX],this.content=2097152|w[b.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.CellData=v},643:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WHITESPACE_CELL_CODE=l.WHITESPACE_CELL_WIDTH=l.WHITESPACE_CELL_CHAR=l.NULL_CELL_CODE=l.NULL_CELL_WIDTH=l.NULL_CELL_CHAR=l.CHAR_DATA_CODE_INDEX=l.CHAR_DATA_WIDTH_INDEX=l.CHAR_DATA_CHAR_INDEX=l.CHAR_DATA_ATTR_INDEX=l.DEFAULT_EXT=l.DEFAULT_ATTR=l.DEFAULT_COLOR=void 0,l.DEFAULT_COLOR=0,l.DEFAULT_ATTR=256|l.DEFAULT_COLOR<<9,l.DEFAULT_EXT=0,l.CHAR_DATA_ATTR_INDEX=0,l.CHAR_DATA_CHAR_INDEX=1,l.CHAR_DATA_WIDTH_INDEX=2,l.CHAR_DATA_CODE_INDEX=3,l.NULL_CELL_CHAR="",l.NULL_CELL_WIDTH=1,l.NULL_CELL_CODE=0,l.WHITESPACE_CELL_CHAR=" ",l.WHITESPACE_CELL_WIDTH=1,l.WHITESPACE_CELL_CODE=32},4863:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Marker=void 0;const p=h(8460),b=h(844);class f{get id(){return this._id}constructor(y){this.line=y,this.isDisposed=!1,this._disposables=[],this._id=f._nextId++,this._onDispose=this.register(new p.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,b.disposeArray)(this._disposables),this._disposables.length=0)}register(y){return this._disposables.push(y),y}}l.Marker=f,f._nextId=1},7116:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_CHARSET=l.CHARSETS=void 0,l.CHARSETS={},l.DEFAULT_CHARSET=l.CHARSETS.B,l.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},l.CHARSETS.A={"#":""},l.CHARSETS.B=void 0,l.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},l.CHARSETS.C=l.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},l.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},l.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.E=l.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},l.CHARSETS.H=l.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(m,l)=>{var h,p,b;Object.defineProperty(l,"__esModule",{value:!0}),l.C1_ESCAPED=l.C1=l.C0=void 0,function(f){f.NUL="\0",f.SOH="",f.STX="",f.ETX="",f.EOT="",f.ENQ="",f.ACK="",f.BEL="\x07",f.BS="\b",f.HT="	",f.LF=`
`,f.VT="\v",f.FF="\f",f.CR="\r",f.SO="",f.SI="",f.DLE="",f.DC1="",f.DC2="",f.DC3="",f.DC4="",f.NAK="",f.SYN="",f.ETB="",f.CAN="",f.EM="",f.SUB="",f.ESC="\x1B",f.FS="",f.GS="",f.RS="",f.US="",f.SP=" ",f.DEL=""}(h||(l.C0=h={})),function(f){f.PAD="",f.HOP="",f.BPH="",f.NBH="",f.IND="",f.NEL="",f.SSA="",f.ESA="",f.HTS="",f.HTJ="",f.VTS="",f.PLD="",f.PLU="",f.RI="",f.SS2="",f.SS3="",f.DCS="",f.PU1="",f.PU2="",f.STS="",f.CCH="",f.MW="",f.SPA="",f.EPA="",f.SOS="",f.SGCI="",f.SCI="",f.CSI="",f.ST="",f.OSC="",f.PM="",f.APC=""}(p||(l.C1=p={})),function(f){f.ST=`${h.ESC}\\`}(b||(l.C1_ESCAPED=b={}))},7399:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.evaluateKeyboardEvent=void 0;const p=h(2584),b={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};l.evaluateKeyboardEvent=function(f,v,y,w){const S={type:0,cancel:!1,key:void 0},o=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?S.key=v?p.C0.ESC+"OA":p.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?S.key=v?p.C0.ESC+"OD":p.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?S.key=v?p.C0.ESC+"OC":p.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(S.key=v?p.C0.ESC+"OB":p.C0.ESC+"[B");break;case 8:if(f.altKey){S.key=p.C0.ESC+p.C0.DEL;break}S.key=p.C0.DEL;break;case 9:if(f.shiftKey){S.key=p.C0.ESC+"[Z";break}S.key=p.C0.HT,S.cancel=!0;break;case 13:S.key=f.altKey?p.C0.ESC+p.C0.CR:p.C0.CR,S.cancel=!0;break;case 27:S.key=p.C0.ESC,f.altKey&&(S.key=p.C0.ESC+p.C0.ESC),S.cancel=!0;break;case 37:if(f.metaKey)break;o?(S.key=p.C0.ESC+"[1;"+(o+1)+"D",S.key===p.C0.ESC+"[1;3D"&&(S.key=p.C0.ESC+(y?"b":"[1;5D"))):S.key=v?p.C0.ESC+"OD":p.C0.ESC+"[D";break;case 39:if(f.metaKey)break;o?(S.key=p.C0.ESC+"[1;"+(o+1)+"C",S.key===p.C0.ESC+"[1;3C"&&(S.key=p.C0.ESC+(y?"f":"[1;5C"))):S.key=v?p.C0.ESC+"OC":p.C0.ESC+"[C";break;case 38:if(f.metaKey)break;o?(S.key=p.C0.ESC+"[1;"+(o+1)+"A",y||S.key!==p.C0.ESC+"[1;3A"||(S.key=p.C0.ESC+"[1;5A")):S.key=v?p.C0.ESC+"OA":p.C0.ESC+"[A";break;case 40:if(f.metaKey)break;o?(S.key=p.C0.ESC+"[1;"+(o+1)+"B",y||S.key!==p.C0.ESC+"[1;3B"||(S.key=p.C0.ESC+"[1;5B")):S.key=v?p.C0.ESC+"OB":p.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(S.key=p.C0.ESC+"[2~");break;case 46:S.key=o?p.C0.ESC+"[3;"+(o+1)+"~":p.C0.ESC+"[3~";break;case 36:S.key=o?p.C0.ESC+"[1;"+(o+1)+"H":v?p.C0.ESC+"OH":p.C0.ESC+"[H";break;case 35:S.key=o?p.C0.ESC+"[1;"+(o+1)+"F":v?p.C0.ESC+"OF":p.C0.ESC+"[F";break;case 33:f.shiftKey?S.type=2:f.ctrlKey?S.key=p.C0.ESC+"[5;"+(o+1)+"~":S.key=p.C0.ESC+"[5~";break;case 34:f.shiftKey?S.type=3:f.ctrlKey?S.key=p.C0.ESC+"[6;"+(o+1)+"~":S.key=p.C0.ESC+"[6~";break;case 112:S.key=o?p.C0.ESC+"[1;"+(o+1)+"P":p.C0.ESC+"OP";break;case 113:S.key=o?p.C0.ESC+"[1;"+(o+1)+"Q":p.C0.ESC+"OQ";break;case 114:S.key=o?p.C0.ESC+"[1;"+(o+1)+"R":p.C0.ESC+"OR";break;case 115:S.key=o?p.C0.ESC+"[1;"+(o+1)+"S":p.C0.ESC+"OS";break;case 116:S.key=o?p.C0.ESC+"[15;"+(o+1)+"~":p.C0.ESC+"[15~";break;case 117:S.key=o?p.C0.ESC+"[17;"+(o+1)+"~":p.C0.ESC+"[17~";break;case 118:S.key=o?p.C0.ESC+"[18;"+(o+1)+"~":p.C0.ESC+"[18~";break;case 119:S.key=o?p.C0.ESC+"[19;"+(o+1)+"~":p.C0.ESC+"[19~";break;case 120:S.key=o?p.C0.ESC+"[20;"+(o+1)+"~":p.C0.ESC+"[20~";break;case 121:S.key=o?p.C0.ESC+"[21;"+(o+1)+"~":p.C0.ESC+"[21~";break;case 122:S.key=o?p.C0.ESC+"[23;"+(o+1)+"~":p.C0.ESC+"[23~";break;case 123:S.key=o?p.C0.ESC+"[24;"+(o+1)+"~":p.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(y&&!w||!f.altKey||f.metaKey)!y||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?S.key=f.key:f.key&&f.ctrlKey&&(f.key==="_"&&(S.key=p.C0.US),f.key==="@"&&(S.key=p.C0.NUL)):f.keyCode===65&&(S.type=1);else{const u=b[f.keyCode],c=u==null?void 0:u[f.shiftKey?1:0];if(c)S.key=p.C0.ESC+c;else if(f.keyCode>=65&&f.keyCode<=90){const d=f.ctrlKey?f.keyCode-64:f.keyCode+32;let g=String.fromCharCode(d);f.shiftKey&&(g=g.toUpperCase()),S.key=p.C0.ESC+g}else if(f.keyCode===32)S.key=p.C0.ESC+(f.ctrlKey?p.C0.NUL:" ");else if(f.key==="Dead"&&f.code.startsWith("Key")){let d=f.code.slice(3,4);f.shiftKey||(d=d.toLowerCase()),S.key=p.C0.ESC+d,S.cancel=!0}}else f.keyCode>=65&&f.keyCode<=90?S.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?S.key=p.C0.NUL:f.keyCode>=51&&f.keyCode<=55?S.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?S.key=p.C0.DEL:f.keyCode===219?S.key=p.C0.ESC:f.keyCode===220?S.key=p.C0.FS:f.keyCode===221&&(S.key=p.C0.GS)}return S}},482:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Utf8ToUtf32=l.StringToUtf32=l.utf32ToString=l.stringFromCodePoint=void 0,l.stringFromCodePoint=function(h){return h>65535?(h-=65536,String.fromCharCode(55296+(h>>10))+String.fromCharCode(h%1024+56320)):String.fromCharCode(h)},l.utf32ToString=function(h,p=0,b=h.length){let f="";for(let v=p;v<b;++v){let y=h[v];y>65535?(y-=65536,f+=String.fromCharCode(55296+(y>>10))+String.fromCharCode(y%1024+56320)):f+=String.fromCharCode(y)}return f},l.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(h,p){const b=h.length;if(!b)return 0;let f=0,v=0;if(this._interim){const y=h.charCodeAt(v++);56320<=y&&y<=57343?p[f++]=1024*(this._interim-55296)+y-56320+65536:(p[f++]=this._interim,p[f++]=y),this._interim=0}for(let y=v;y<b;++y){const w=h.charCodeAt(y);if(55296<=w&&w<=56319){if(++y>=b)return this._interim=w,f;const S=h.charCodeAt(y);56320<=S&&S<=57343?p[f++]=1024*(w-55296)+S-56320+65536:(p[f++]=w,p[f++]=S)}else w!==65279&&(p[f++]=w)}return f}},l.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(h,p){const b=h.length;if(!b)return 0;let f,v,y,w,S=0,o=0,u=0;if(this.interim[0]){let g=!1,_=this.interim[0];_&=(224&_)==192?31:(240&_)==224?15:7;let C,j=0;for(;(C=63&this.interim[++j])&&j<4;)_<<=6,_|=C;const x=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,E=x-j;for(;u<E;){if(u>=b)return 0;if(C=h[u++],(192&C)!=128){u--,g=!0;break}this.interim[j++]=C,_<<=6,_|=63&C}g||(x===2?_<128?u--:p[S++]=_:x===3?_<2048||_>=55296&&_<=57343||_===65279||(p[S++]=_):_<65536||_>1114111||(p[S++]=_)),this.interim.fill(0)}const c=b-4;let d=u;for(;d<b;){for(;!(!(d<c)||128&(f=h[d])||128&(v=h[d+1])||128&(y=h[d+2])||128&(w=h[d+3]));)p[S++]=f,p[S++]=v,p[S++]=y,p[S++]=w,d+=4;if(f=h[d++],f<128)p[S++]=f;else if((224&f)==192){if(d>=b)return this.interim[0]=f,S;if(v=h[d++],(192&v)!=128){d--;continue}if(o=(31&f)<<6|63&v,o<128){d--;continue}p[S++]=o}else if((240&f)==224){if(d>=b)return this.interim[0]=f,S;if(v=h[d++],(192&v)!=128){d--;continue}if(d>=b)return this.interim[0]=f,this.interim[1]=v,S;if(y=h[d++],(192&y)!=128){d--;continue}if(o=(15&f)<<12|(63&v)<<6|63&y,o<2048||o>=55296&&o<=57343||o===65279)continue;p[S++]=o}else if((248&f)==240){if(d>=b)return this.interim[0]=f,S;if(v=h[d++],(192&v)!=128){d--;continue}if(d>=b)return this.interim[0]=f,this.interim[1]=v,S;if(y=h[d++],(192&y)!=128){d--;continue}if(d>=b)return this.interim[0]=f,this.interim[1]=v,this.interim[2]=y,S;if(w=h[d++],(192&w)!=128){d--;continue}if(o=(7&f)<<18|(63&v)<<12|(63&y)<<6|63&w,o<65536||o>1114111)continue;p[S++]=o}}return S}}},225:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeV6=void 0;const h=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],p=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let b;l.UnicodeV6=class{constructor(){if(this.version="6",!b){b=new Uint8Array(65536),b.fill(1),b[0]=0,b.fill(0,1,32),b.fill(0,127,160),b.fill(2,4352,4448),b[9001]=2,b[9002]=2,b.fill(2,11904,42192),b[12351]=1,b.fill(2,44032,55204),b.fill(2,63744,64256),b.fill(2,65040,65050),b.fill(2,65072,65136),b.fill(2,65280,65377),b.fill(2,65504,65511);for(let f=0;f<h.length;++f)b.fill(0,h[f][0],h[f][1]+1)}}wcwidth(f){return f<32?0:f<127?1:f<65536?b[f]:function(v,y){let w,S=0,o=y.length-1;if(v<y[0][0]||v>y[o][1])return!1;for(;o>=S;)if(w=S+o>>1,v>y[w][1])S=w+1;else{if(!(v<y[w][0]))return!0;o=w-1}return!1}(f,p)?0:f>=131072&&f<=196605||f>=196608&&f<=262141?2:1}}},5981:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WriteBuffer=void 0;const p=h(8460),b=h(844);class f extends b.Disposable{constructor(y){super(),this._action=y,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new p.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(y,w){if(w!==void 0&&this._syncCalls>w)return void(this._syncCalls=0);if(this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let S;for(this._isSyncWriting=!0;S=this._writeBuffer.shift();){this._action(S);const o=this._callbacks.shift();o&&o()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(y,w){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(w),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(w)}_innerWrite(y=0,w=!0){const S=y||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const o=this._writeBuffer[this._bufferOffset],u=this._action(o,w);if(u){const d=g=>Date.now()-S>=12?setTimeout(()=>this._innerWrite(0,g)):this._innerWrite(S,g);return void u.catch(g=>(queueMicrotask(()=>{throw g}),Promise.resolve(!1))).then(d)}const c=this._callbacks[this._bufferOffset];if(c&&c(),this._bufferOffset++,this._pendingData-=o.length,Date.now()-S>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}l.WriteBuffer=f},5941:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.toRgbString=l.parseColor=void 0;const h=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,p=/^[\da-f]+$/;function b(f,v){const y=f.toString(16),w=y.length<2?"0"+y:y;switch(v){case 4:return y[0];case 8:return w;case 12:return(w+w).slice(0,3);default:return w+w}}l.parseColor=function(f){if(!f)return;let v=f.toLowerCase();if(v.indexOf("rgb:")===0){v=v.slice(4);const y=h.exec(v);if(y){const w=y[1]?15:y[4]?255:y[7]?4095:65535;return[Math.round(parseInt(y[1]||y[4]||y[7]||y[10],16)/w*255),Math.round(parseInt(y[2]||y[5]||y[8]||y[11],16)/w*255),Math.round(parseInt(y[3]||y[6]||y[9]||y[12],16)/w*255)]}}else if(v.indexOf("#")===0&&(v=v.slice(1),p.exec(v)&&[3,6,9,12].includes(v.length))){const y=v.length/3,w=[0,0,0];for(let S=0;S<3;++S){const o=parseInt(v.slice(y*S,y*S+y),16);w[S]=y===1?o<<4:y===2?o:y===3?o>>4:o>>8}return w}},l.toRgbString=function(f,v=16){const[y,w,S]=f;return`rgb:${b(y,v)}/${b(w,v)}/${b(S,v)}`}},5770:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PAYLOAD_LIMIT=void 0,l.PAYLOAD_LIMIT=1e7},6351:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DcsHandler=l.DcsParser=void 0;const p=h(482),b=h(8742),f=h(5770),v=[];l.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=v,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=v}registerHandler(w,S){this._handlers[w]===void 0&&(this._handlers[w]=[]);const o=this._handlers[w];return o.push(S),{dispose:()=>{const u=o.indexOf(S);u!==-1&&o.splice(u,1)}}}clearHandler(w){this._handlers[w]&&delete this._handlers[w]}setHandlerFallback(w){this._handlerFb=w}reset(){if(this._active.length)for(let w=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;w>=0;--w)this._active[w].unhook(!1);this._stack.paused=!1,this._active=v,this._ident=0}hook(w,S){if(this.reset(),this._ident=w,this._active=this._handlers[w]||v,this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].hook(S);else this._handlerFb(this._ident,"HOOK",S)}put(w,S,o){if(this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].put(w,S,o);else this._handlerFb(this._ident,"PUT",(0,p.utf32ToString)(w,S,o))}unhook(w,S=!0){if(this._active.length){let o=!1,u=this._active.length-1,c=!1;if(this._stack.paused&&(u=this._stack.loopPosition-1,o=S,c=this._stack.fallThrough,this._stack.paused=!1),!c&&o===!1){for(;u>=0&&(o=this._active[u].unhook(w),o!==!0);u--)if(o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!1,o;u--}for(;u>=0;u--)if(o=this._active[u].unhook(!1),o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!0,o}else this._handlerFb(this._ident,"UNHOOK",w);this._active=v,this._ident=0}};const y=new b.Params;y.addParam(0),l.DcsHandler=class{constructor(w){this._handler=w,this._data="",this._params=y,this._hitLimit=!1}hook(w){this._params=w.length>1||w.params[0]?w.clone():y,this._data="",this._hitLimit=!1}put(w,S,o){this._hitLimit||(this._data+=(0,p.utf32ToString)(w,S,o),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(w){let S=!1;if(this._hitLimit)S=!1;else if(w&&(S=this._handler(this._data,this._params),S instanceof Promise))return S.then(o=>(this._params=y,this._data="",this._hitLimit=!1,o));return this._params=y,this._data="",this._hitLimit=!1,S}}},2015:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.EscapeSequenceParser=l.VT500_TRANSITION_TABLE=l.TransitionTable=void 0;const p=h(844),b=h(8742),f=h(6242),v=h(6351);class y{constructor(u){this.table=new Uint8Array(u)}setDefault(u,c){this.table.fill(u<<4|c)}add(u,c,d,g){this.table[c<<8|u]=d<<4|g}addMany(u,c,d,g){for(let _=0;_<u.length;_++)this.table[c<<8|u[_]]=d<<4|g}}l.TransitionTable=y;const w=160;l.VT500_TRANSITION_TABLE=function(){const o=new y(4095),u=Array.apply(null,Array(256)).map((j,x)=>x),c=(j,x)=>u.slice(j,x),d=c(32,127),g=c(0,24);g.push(25),g.push.apply(g,c(28,32));const _=c(0,14);let C;for(C in o.setDefault(1,0),o.addMany(d,0,2,0),_)o.addMany([24,26,153,154],C,3,0),o.addMany(c(128,144),C,3,0),o.addMany(c(144,152),C,3,0),o.add(156,C,0,0),o.add(27,C,11,1),o.add(157,C,4,8),o.addMany([152,158,159],C,0,7),o.add(155,C,11,3),o.add(144,C,11,9);return o.addMany(g,0,3,0),o.addMany(g,1,3,1),o.add(127,1,0,1),o.addMany(g,8,0,8),o.addMany(g,3,3,3),o.add(127,3,0,3),o.addMany(g,4,3,4),o.add(127,4,0,4),o.addMany(g,6,3,6),o.addMany(g,5,3,5),o.add(127,5,0,5),o.addMany(g,2,3,2),o.add(127,2,0,2),o.add(93,1,4,8),o.addMany(d,8,5,8),o.add(127,8,5,8),o.addMany([156,27,24,26,7],8,6,0),o.addMany(c(28,32),8,0,8),o.addMany([88,94,95],1,0,7),o.addMany(d,7,0,7),o.addMany(g,7,0,7),o.add(156,7,0,0),o.add(127,7,0,7),o.add(91,1,11,3),o.addMany(c(64,127),3,7,0),o.addMany(c(48,60),3,8,4),o.addMany([60,61,62,63],3,9,4),o.addMany(c(48,60),4,8,4),o.addMany(c(64,127),4,7,0),o.addMany([60,61,62,63],4,0,6),o.addMany(c(32,64),6,0,6),o.add(127,6,0,6),o.addMany(c(64,127),6,0,0),o.addMany(c(32,48),3,9,5),o.addMany(c(32,48),5,9,5),o.addMany(c(48,64),5,0,6),o.addMany(c(64,127),5,7,0),o.addMany(c(32,48),4,9,5),o.addMany(c(32,48),1,9,2),o.addMany(c(32,48),2,9,2),o.addMany(c(48,127),2,10,0),o.addMany(c(48,80),1,10,0),o.addMany(c(81,88),1,10,0),o.addMany([89,90,92],1,10,0),o.addMany(c(96,127),1,10,0),o.add(80,1,11,9),o.addMany(g,9,0,9),o.add(127,9,0,9),o.addMany(c(28,32),9,0,9),o.addMany(c(32,48),9,9,12),o.addMany(c(48,60),9,8,10),o.addMany([60,61,62,63],9,9,10),o.addMany(g,11,0,11),o.addMany(c(32,128),11,0,11),o.addMany(c(28,32),11,0,11),o.addMany(g,10,0,10),o.add(127,10,0,10),o.addMany(c(28,32),10,0,10),o.addMany(c(48,60),10,8,10),o.addMany([60,61,62,63],10,0,11),o.addMany(c(32,48),10,9,12),o.addMany(g,12,0,12),o.add(127,12,0,12),o.addMany(c(28,32),12,0,12),o.addMany(c(32,48),12,9,12),o.addMany(c(48,64),12,0,11),o.addMany(c(64,127),12,12,13),o.addMany(c(64,127),10,12,13),o.addMany(c(64,127),9,12,13),o.addMany(g,13,13,13),o.addMany(d,13,13,13),o.add(127,13,0,13),o.addMany([27,156,24,26],13,14,0),o.add(w,0,2,0),o.add(w,8,5,8),o.add(w,6,0,6),o.add(w,11,0,11),o.add(w,13,13,13),o}();class S extends p.Disposable{constructor(u=l.VT500_TRANSITION_TABLE){super(),this._transitions=u,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new b.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(c,d,g)=>{},this._executeHandlerFb=c=>{},this._csiHandlerFb=(c,d)=>{},this._escHandlerFb=c=>{},this._errorHandlerFb=c=>c,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,p.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new f.OscParser),this._dcsParser=this.register(new v.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(u,c=[64,126]){let d=0;if(u.prefix){if(u.prefix.length>1)throw new Error("only one byte as prefix supported");if(d=u.prefix.charCodeAt(0),d&&60>d||d>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(u.intermediates){if(u.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let _=0;_<u.intermediates.length;++_){const C=u.intermediates.charCodeAt(_);if(32>C||C>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");d<<=8,d|=C}}if(u.final.length!==1)throw new Error("final must be a single byte");const g=u.final.charCodeAt(0);if(c[0]>g||g>c[1])throw new Error(`final must be in range ${c[0]} .. ${c[1]}`);return d<<=8,d|=g,d}identToString(u){const c=[];for(;u;)c.push(String.fromCharCode(255&u)),u>>=8;return c.reverse().join("")}setPrintHandler(u){this._printHandler=u}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(u,c){const d=this._identifier(u,[48,126]);this._escHandlers[d]===void 0&&(this._escHandlers[d]=[]);const g=this._escHandlers[d];return g.push(c),{dispose:()=>{const _=g.indexOf(c);_!==-1&&g.splice(_,1)}}}clearEscHandler(u){this._escHandlers[this._identifier(u,[48,126])]&&delete this._escHandlers[this._identifier(u,[48,126])]}setEscHandlerFallback(u){this._escHandlerFb=u}setExecuteHandler(u,c){this._executeHandlers[u.charCodeAt(0)]=c}clearExecuteHandler(u){this._executeHandlers[u.charCodeAt(0)]&&delete this._executeHandlers[u.charCodeAt(0)]}setExecuteHandlerFallback(u){this._executeHandlerFb=u}registerCsiHandler(u,c){const d=this._identifier(u);this._csiHandlers[d]===void 0&&(this._csiHandlers[d]=[]);const g=this._csiHandlers[d];return g.push(c),{dispose:()=>{const _=g.indexOf(c);_!==-1&&g.splice(_,1)}}}clearCsiHandler(u){this._csiHandlers[this._identifier(u)]&&delete this._csiHandlers[this._identifier(u)]}setCsiHandlerFallback(u){this._csiHandlerFb=u}registerDcsHandler(u,c){return this._dcsParser.registerHandler(this._identifier(u),c)}clearDcsHandler(u){this._dcsParser.clearHandler(this._identifier(u))}setDcsHandlerFallback(u){this._dcsParser.setHandlerFallback(u)}registerOscHandler(u,c){return this._oscParser.registerHandler(u,c)}clearOscHandler(u){this._oscParser.clearHandler(u)}setOscHandlerFallback(u){this._oscParser.setHandlerFallback(u)}setErrorHandler(u){this._errorHandler=u}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(u,c,d,g,_){this._parseStack.state=u,this._parseStack.handlers=c,this._parseStack.handlerPos=d,this._parseStack.transition=g,this._parseStack.chunkPos=_}parse(u,c,d){let g,_=0,C=0,j=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,j=this._parseStack.chunkPos+1;else{if(d===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const x=this._parseStack.handlers;let E=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(d===!1&&E>-1){for(;E>=0&&(g=x[E](this._params),g!==!0);E--)if(g instanceof Promise)return this._parseStack.handlerPos=E,g}this._parseStack.handlers=[];break;case 4:if(d===!1&&E>-1){for(;E>=0&&(g=x[E](),g!==!0);E--)if(g instanceof Promise)return this._parseStack.handlerPos=E,g}this._parseStack.handlers=[];break;case 6:if(_=u[this._parseStack.chunkPos],g=this._dcsParser.unhook(_!==24&&_!==26,d),g)return g;_===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(_=u[this._parseStack.chunkPos],g=this._oscParser.end(_!==24&&_!==26,d),g)return g;_===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,j=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let x=j;x<c;++x){switch(_=u[x],C=this._transitions.table[this.currentState<<8|(_<160?_:w)],C>>4){case 2:for(let R=x+1;;++R){if(R>=c||(_=u[R])<32||_>126&&_<w){this._printHandler(u,x,R),x=R-1;break}if(++R>=c||(_=u[R])<32||_>126&&_<w){this._printHandler(u,x,R),x=R-1;break}if(++R>=c||(_=u[R])<32||_>126&&_<w){this._printHandler(u,x,R),x=R-1;break}if(++R>=c||(_=u[R])<32||_>126&&_<w){this._printHandler(u,x,R),x=R-1;break}}break;case 3:this._executeHandlers[_]?this._executeHandlers[_]():this._executeHandlerFb(_),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:x,code:_,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const E=this._csiHandlers[this._collect<<8|_];let D=E?E.length-1:-1;for(;D>=0&&(g=E[D](this._params),g!==!0);D--)if(g instanceof Promise)return this._preserveStack(3,E,D,C,x),g;D<0&&this._csiHandlerFb(this._collect<<8|_,this._params),this.precedingCodepoint=0;break;case 8:do switch(_){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(_-48)}while(++x<c&&(_=u[x])>47&&_<60);x--;break;case 9:this._collect<<=8,this._collect|=_;break;case 10:const A=this._escHandlers[this._collect<<8|_];let T=A?A.length-1:-1;for(;T>=0&&(g=A[T](),g!==!0);T--)if(g instanceof Promise)return this._preserveStack(4,A,T,C,x),g;T<0&&this._escHandlerFb(this._collect<<8|_),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|_,this._params);break;case 13:for(let R=x+1;;++R)if(R>=c||(_=u[R])===24||_===26||_===27||_>127&&_<w){this._dcsParser.put(u,x,R),x=R-1;break}break;case 14:if(g=this._dcsParser.unhook(_!==24&&_!==26),g)return this._preserveStack(6,[],0,C,x),g;_===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let R=x+1;;R++)if(R>=c||(_=u[R])<32||_>127&&_<w){this._oscParser.put(u,x,R),x=R-1;break}break;case 6:if(g=this._oscParser.end(_!==24&&_!==26),g)return this._preserveStack(5,[],0,C,x),g;_===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&C}}}l.EscapeSequenceParser=S},6242:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OscHandler=l.OscParser=void 0;const p=h(5770),b=h(482),f=[];l.OscParser=class{constructor(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(v,y){this._handlers[v]===void 0&&(this._handlers[v]=[]);const w=this._handlers[v];return w.push(y),{dispose:()=>{const S=w.indexOf(y);S!==-1&&w.splice(S,1)}}}clearHandler(v){this._handlers[v]&&delete this._handlers[v]}setHandlerFallback(v){this._handlerFb=v}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=f}reset(){if(this._state===2)for(let v=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;v>=0;--v)this._active[v].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||f,this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].start();else this._handlerFb(this._id,"START")}_put(v,y,w){if(this._active.length)for(let S=this._active.length-1;S>=0;S--)this._active[S].put(v,y,w);else this._handlerFb(this._id,"PUT",(0,b.utf32ToString)(v,y,w))}start(){this.reset(),this._state=1}put(v,y,w){if(this._state!==3){if(this._state===1)for(;y<w;){const S=v[y++];if(S===59){this._state=2,this._start();break}if(S<48||57<S)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+S-48}this._state===2&&w-y>0&&this._put(v,y,w)}}end(v,y=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let w=!1,S=this._active.length-1,o=!1;if(this._stack.paused&&(S=this._stack.loopPosition-1,w=y,o=this._stack.fallThrough,this._stack.paused=!1),!o&&w===!1){for(;S>=0&&(w=this._active[S].end(v),w!==!0);S--)if(w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=S,this._stack.fallThrough=!1,w;S--}for(;S>=0;S--)if(w=this._active[S].end(!1),w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=S,this._stack.fallThrough=!0,w}else this._handlerFb(this._id,"END",v);this._active=f,this._id=-1,this._state=0}}},l.OscHandler=class{constructor(v){this._handler=v,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(v,y,w){this._hitLimit||(this._data+=(0,b.utf32ToString)(v,y,w),this._data.length>p.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(v){let y=!1;if(this._hitLimit)y=!1;else if(v&&(y=this._handler(this._data),y instanceof Promise))return y.then(w=>(this._data="",this._hitLimit=!1,w));return this._data="",this._hitLimit=!1,y}}},8742:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Params=void 0;const h=2147483647;class p{static fromArray(f){const v=new p;if(!f.length)return v;for(let y=Array.isArray(f[0])?1:0;y<f.length;++y){const w=f[y];if(Array.isArray(w))for(let S=0;S<w.length;++S)v.addSubParam(w[S]);else v.addParam(w)}return v}constructor(f=32,v=32){if(this.maxLength=f,this.maxSubParamsLength=v,v>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(v),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const f=new p(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f}toArray(){const f=[];for(let v=0;v<this.length;++v){f.push(this.params[v]);const y=this._subParamsIdx[v]>>8,w=255&this._subParamsIdx[v];w-y>0&&f.push(Array.prototype.slice.call(this._subParams,y,w))}return f}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>h?h:f}}addSubParam(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>h?h:f,this._subParamsIdx[this.length-1]++}}hasSubParams(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0}getSubParams(f){const v=this._subParamsIdx[f]>>8,y=255&this._subParamsIdx[f];return y-v>0?this._subParams.subarray(v,y):null}getSubParamsAll(){const f={};for(let v=0;v<this.length;++v){const y=this._subParamsIdx[v]>>8,w=255&this._subParamsIdx[v];w-y>0&&(f[v]=this._subParams.slice(y,w))}return f}addDigit(f){let v;if(this._rejectDigits||!(v=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const y=this._digitIsSub?this._subParams:this.params,w=y[v-1];y[v-1]=~w?Math.min(10*w+f,h):f}}l.Params=p},5741:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AddonManager=void 0,l.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let h=this._addons.length-1;h>=0;h--)this._addons[h].instance.dispose()}loadAddon(h,p){const b={instance:p,dispose:p.dispose,isDisposed:!1};this._addons.push(b),p.dispose=()=>this._wrappedAddonDispose(b),p.activate(h)}_wrappedAddonDispose(h){if(h.isDisposed)return;let p=-1;for(let b=0;b<this._addons.length;b++)if(this._addons[b]===h){p=b;break}if(p===-1)throw new Error("Could not dispose an addon that has not been loaded");h.isDisposed=!0,h.dispose.apply(h.instance),this._addons.splice(p,1)}}},8771:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferApiView=void 0;const p=h(3785),b=h(511);l.BufferApiView=class{constructor(f,v){this._buffer=f,this.type=v}init(f){return this._buffer=f,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(f){const v=this._buffer.lines.get(f);if(v)return new p.BufferLineApiView(v)}getNullCell(){return new b.CellData}}},3785:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLineApiView=void 0;const p=h(511);l.BufferLineApiView=class{constructor(b){this._line=b}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(b,f){if(!(b<0||b>=this._line.length))return f?(this._line.loadCell(b,f),f):this._line.loadCell(b,new p.CellData)}translateToString(b,f,v){return this._line.translateToString(b,f,v)}}},8285:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferNamespaceApi=void 0;const p=h(8771),b=h(8460),f=h(844);class v extends f.Disposable{constructor(w){super(),this._core=w,this._onBufferChange=this.register(new b.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new p.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new p.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}l.BufferNamespaceApi=v},7975:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ParserApi=void 0,l.ParserApi=class{constructor(h){this._core=h}registerCsiHandler(h,p){return this._core.registerCsiHandler(h,b=>p(b.toArray()))}addCsiHandler(h,p){return this.registerCsiHandler(h,p)}registerDcsHandler(h,p){return this._core.registerDcsHandler(h,(b,f)=>p(b,f.toArray()))}addDcsHandler(h,p){return this.registerDcsHandler(h,p)}registerEscHandler(h,p){return this._core.registerEscHandler(h,p)}addEscHandler(h,p){return this.registerEscHandler(h,p)}registerOscHandler(h,p){return this._core.registerOscHandler(h,p)}addOscHandler(h,p){return this.registerOscHandler(h,p)}}},7090:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeApi=void 0,l.UnicodeApi=class{constructor(h){this._core=h}register(h){this._core.unicodeService.register(h)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(h){this._core.unicodeService.activeVersion=h}}},744:function(m,l,h){var p=this&&this.__decorate||function(o,u,c,d){var g,_=arguments.length,C=_<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,c):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(o,u,c,d);else for(var j=o.length-1;j>=0;j--)(g=o[j])&&(C=(_<3?g(C):_>3?g(u,c,C):g(u,c))||C);return _>3&&C&&Object.defineProperty(u,c,C),C},b=this&&this.__param||function(o,u){return function(c,d){u(c,d,o)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferService=l.MINIMUM_ROWS=l.MINIMUM_COLS=void 0;const f=h(8460),v=h(844),y=h(5295),w=h(2585);l.MINIMUM_COLS=2,l.MINIMUM_ROWS=1;let S=l.BufferService=class extends v.Disposable{get buffer(){return this.buffers.active}constructor(o){super(),this.isUserScrolling=!1,this._onResize=this.register(new f.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new f.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(o.rawOptions.cols||0,l.MINIMUM_COLS),this.rows=Math.max(o.rawOptions.rows||0,l.MINIMUM_ROWS),this.buffers=this.register(new y.BufferSet(o,this))}resize(o,u){this.cols=o,this.rows=u,this.buffers.resize(o,u),this._onResize.fire({cols:o,rows:u})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(o,u=!1){const c=this.buffer;let d;d=this._cachedBlankLine,d&&d.length===this.cols&&d.getFg(0)===o.fg&&d.getBg(0)===o.bg||(d=c.getBlankLine(o,u),this._cachedBlankLine=d),d.isWrapped=u;const g=c.ybase+c.scrollTop,_=c.ybase+c.scrollBottom;if(c.scrollTop===0){const C=c.lines.isFull;_===c.lines.length-1?C?c.lines.recycle().copyFrom(d):c.lines.push(d.clone()):c.lines.splice(_+1,0,d.clone()),C?this.isUserScrolling&&(c.ydisp=Math.max(c.ydisp-1,0)):(c.ybase++,this.isUserScrolling||c.ydisp++)}else{const C=_-g+1;c.lines.shiftElements(g+1,C-1,-1),c.lines.set(_,d.clone())}this.isUserScrolling||(c.ydisp=c.ybase),this._onScroll.fire(c.ydisp)}scrollLines(o,u,c){const d=this.buffer;if(o<0){if(d.ydisp===0)return;this.isUserScrolling=!0}else o+d.ydisp>=d.ybase&&(this.isUserScrolling=!1);const g=d.ydisp;d.ydisp=Math.max(Math.min(d.ydisp+o,d.ybase),0),g!==d.ydisp&&(u||this._onScroll.fire(d.ydisp))}};l.BufferService=S=p([b(0,w.IOptionsService)],S)},7994:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CharsetService=void 0,l.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(h){this.glevel=h,this.charset=this._charsets[h]}setgCharset(h,p){this._charsets[h]=p,this.glevel===h&&(this.charset=p)}}},1753:function(m,l,h){var p=this&&this.__decorate||function(d,g,_,C){var j,x=arguments.length,E=x<3?g:C===null?C=Object.getOwnPropertyDescriptor(g,_):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(d,g,_,C);else for(var D=d.length-1;D>=0;D--)(j=d[D])&&(E=(x<3?j(E):x>3?j(g,_,E):j(g,_))||E);return x>3&&E&&Object.defineProperty(g,_,E),E},b=this&&this.__param||function(d,g){return function(_,C){g(_,C,d)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreMouseService=void 0;const f=h(2585),v=h(8460),y=h(844),w={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:d=>d.button!==4&&d.action===1&&(d.ctrl=!1,d.alt=!1,d.shift=!1,!0)},VT200:{events:19,restrict:d=>d.action!==32},DRAG:{events:23,restrict:d=>d.action!==32||d.button!==3},ANY:{events:31,restrict:d=>!0}};function S(d,g){let _=(d.ctrl?16:0)|(d.shift?4:0)|(d.alt?8:0);return d.button===4?(_|=64,_|=d.action):(_|=3&d.button,4&d.button&&(_|=64),8&d.button&&(_|=128),d.action===32?_|=32:d.action!==0||g||(_|=3)),_}const o=String.fromCharCode,u={DEFAULT:d=>{const g=[S(d,!1)+32,d.col+32,d.row+32];return g[0]>255||g[1]>255||g[2]>255?"":`\x1B[M${o(g[0])}${o(g[1])}${o(g[2])}`},SGR:d=>{const g=d.action===0&&d.button!==4?"m":"M";return`\x1B[<${S(d,!0)};${d.col};${d.row}${g}`},SGR_PIXELS:d=>{const g=d.action===0&&d.button!==4?"m":"M";return`\x1B[<${S(d,!0)};${d.x};${d.y}${g}`}};let c=l.CoreMouseService=class extends y.Disposable{constructor(d,g){super(),this._bufferService=d,this._coreService=g,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new v.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const _ of Object.keys(w))this.addProtocol(_,w[_]);for(const _ of Object.keys(u))this.addEncoding(_,u[_]);this.reset()}addProtocol(d,g){this._protocols[d]=g}addEncoding(d,g){this._encodings[d]=g}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(d){if(!this._protocols[d])throw new Error(`unknown protocol "${d}"`);this._activeProtocol=d,this._onProtocolChange.fire(this._protocols[d].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(d){if(!this._encodings[d])throw new Error(`unknown encoding "${d}"`);this._activeEncoding=d}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(d){if(d.col<0||d.col>=this._bufferService.cols||d.row<0||d.row>=this._bufferService.rows||d.button===4&&d.action===32||d.button===3&&d.action!==32||d.button!==4&&(d.action===2||d.action===3)||(d.col++,d.row++,d.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,d,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(d))return!1;const g=this._encodings[this._activeEncoding](d);return g&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(g):this._coreService.triggerDataEvent(g,!0)),this._lastEvent=d,!0}explainEvents(d){return{down:!!(1&d),up:!!(2&d),drag:!!(4&d),move:!!(8&d),wheel:!!(16&d)}}_equalEvents(d,g,_){if(_){if(d.x!==g.x||d.y!==g.y)return!1}else if(d.col!==g.col||d.row!==g.row)return!1;return d.button===g.button&&d.action===g.action&&d.ctrl===g.ctrl&&d.alt===g.alt&&d.shift===g.shift}};l.CoreMouseService=c=p([b(0,f.IBufferService),b(1,f.ICoreService)],c)},6975:function(m,l,h){var p=this&&this.__decorate||function(c,d,g,_){var C,j=arguments.length,x=j<3?d:_===null?_=Object.getOwnPropertyDescriptor(d,g):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(c,d,g,_);else for(var E=c.length-1;E>=0;E--)(C=c[E])&&(x=(j<3?C(x):j>3?C(d,g,x):C(d,g))||x);return j>3&&x&&Object.defineProperty(d,g,x),x},b=this&&this.__param||function(c,d){return function(g,_){d(g,_,c)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreService=void 0;const f=h(1439),v=h(8460),y=h(844),w=h(2585),S=Object.freeze({insertMode:!1}),o=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let u=l.CoreService=class extends y.Disposable{constructor(c,d,g){super(),this._bufferService=c,this._logService=d,this._optionsService=g,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new v.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new v.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new v.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new v.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,f.clone)(S),this.decPrivateModes=(0,f.clone)(o)}reset(){this.modes=(0,f.clone)(S),this.decPrivateModes=(0,f.clone)(o)}triggerDataEvent(c,d=!1){if(this._optionsService.rawOptions.disableStdin)return;const g=this._bufferService.buffer;d&&this._optionsService.rawOptions.scrollOnUserInput&&g.ybase!==g.ydisp&&this._onRequestScrollToBottom.fire(),d&&this._onUserInput.fire(),this._logService.debug(`sending data "${c}"`,()=>c.split("").map(_=>_.charCodeAt(0))),this._onData.fire(c)}triggerBinaryEvent(c){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${c}"`,()=>c.split("").map(d=>d.charCodeAt(0))),this._onBinary.fire(c))}};l.CoreService=u=p([b(0,w.IBufferService),b(1,w.ILogService),b(2,w.IOptionsService)],u)},9074:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DecorationService=void 0;const p=h(8055),b=h(8460),f=h(844),v=h(6106);let y=0,w=0;class S extends f.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new v.SortedList(c=>c==null?void 0:c.marker.line),this._onDecorationRegistered=this.register(new b.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new b.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,f.toDisposable)(()=>this.reset()))}registerDecoration(c){if(c.marker.isDisposed)return;const d=new o(c);if(d){const g=d.marker.onDispose(()=>d.dispose());d.onDispose(()=>{d&&(this._decorations.delete(d)&&this._onDecorationRemoved.fire(d),g.dispose())}),this._decorations.insert(d),this._onDecorationRegistered.fire(d)}return d}reset(){for(const c of this._decorations.values())c.dispose();this._decorations.clear()}*getDecorationsAtCell(c,d,g){var _,C,j;let x=0,E=0;for(const D of this._decorations.getKeyIterator(d))x=(_=D.options.x)!==null&&_!==void 0?_:0,E=x+((C=D.options.width)!==null&&C!==void 0?C:1),c>=x&&c<E&&(!g||((j=D.options.layer)!==null&&j!==void 0?j:"bottom")===g)&&(yield D)}forEachDecorationAtCell(c,d,g,_){this._decorations.forEachByKey(d,C=>{var j,x,E;y=(j=C.options.x)!==null&&j!==void 0?j:0,w=y+((x=C.options.width)!==null&&x!==void 0?x:1),c>=y&&c<w&&(!g||((E=C.options.layer)!==null&&E!==void 0?E:"bottom")===g)&&_(C)})}}l.DecorationService=S;class o extends f.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=p.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=p.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(c){super(),this.options=c,this.onRenderEmitter=this.register(new b.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new b.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=c.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.InstantiationService=l.ServiceCollection=void 0;const p=h(2585),b=h(8343);class f{constructor(...y){this._entries=new Map;for(const[w,S]of y)this.set(w,S)}set(y,w){const S=this._entries.get(y);return this._entries.set(y,w),S}forEach(y){for(const[w,S]of this._entries.entries())y(w,S)}has(y){return this._entries.has(y)}get(y){return this._entries.get(y)}}l.ServiceCollection=f,l.InstantiationService=class{constructor(){this._services=new f,this._services.set(p.IInstantiationService,this)}setService(v,y){this._services.set(v,y)}getService(v){return this._services.get(v)}createInstance(v,...y){const w=(0,b.getServiceDependencies)(v).sort((u,c)=>u.index-c.index),S=[];for(const u of w){const c=this._services.get(u.id);if(!c)throw new Error(`[createInstance] ${v.name} depends on UNKNOWN service ${u.id}.`);S.push(c)}const o=w.length>0?w[0].index:y.length;if(y.length!==o)throw new Error(`[createInstance] First service dependency of ${v.name} at position ${o+1} conflicts with ${y.length} static arguments`);return new v(...y,...S)}}},7866:function(m,l,h){var p=this&&this.__decorate||function(o,u,c,d){var g,_=arguments.length,C=_<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,c):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(o,u,c,d);else for(var j=o.length-1;j>=0;j--)(g=o[j])&&(C=(_<3?g(C):_>3?g(u,c,C):g(u,c))||C);return _>3&&C&&Object.defineProperty(u,c,C),C},b=this&&this.__param||function(o,u){return function(c,d){u(c,d,o)}};Object.defineProperty(l,"__esModule",{value:!0}),l.traceCall=l.setTraceLogger=l.LogService=void 0;const f=h(844),v=h(2585),y={trace:v.LogLevelEnum.TRACE,debug:v.LogLevelEnum.DEBUG,info:v.LogLevelEnum.INFO,warn:v.LogLevelEnum.WARN,error:v.LogLevelEnum.ERROR,off:v.LogLevelEnum.OFF};let w,S=l.LogService=class extends f.Disposable{get logLevel(){return this._logLevel}constructor(o){super(),this._optionsService=o,this._logLevel=v.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),w=this}_updateLogLevel(){this._logLevel=y[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(o){for(let u=0;u<o.length;u++)typeof o[u]=="function"&&(o[u]=o[u]())}_log(o,u,c){this._evalLazyOptionalParams(c),o.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+u,...c)}trace(o,...u){var c,d;this._logLevel<=v.LogLevelEnum.TRACE&&this._log((d=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.trace.bind(this._optionsService.options.logger))!==null&&d!==void 0?d:console.log,o,u)}debug(o,...u){var c,d;this._logLevel<=v.LogLevelEnum.DEBUG&&this._log((d=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.debug.bind(this._optionsService.options.logger))!==null&&d!==void 0?d:console.log,o,u)}info(o,...u){var c,d;this._logLevel<=v.LogLevelEnum.INFO&&this._log((d=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.info.bind(this._optionsService.options.logger))!==null&&d!==void 0?d:console.info,o,u)}warn(o,...u){var c,d;this._logLevel<=v.LogLevelEnum.WARN&&this._log((d=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.warn.bind(this._optionsService.options.logger))!==null&&d!==void 0?d:console.warn,o,u)}error(o,...u){var c,d;this._logLevel<=v.LogLevelEnum.ERROR&&this._log((d=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.error.bind(this._optionsService.options.logger))!==null&&d!==void 0?d:console.error,o,u)}};l.LogService=S=p([b(0,v.IOptionsService)],S),l.setTraceLogger=function(o){w=o},l.traceCall=function(o,u,c){if(typeof c.value!="function")throw new Error("not supported");const d=c.value;c.value=function(...g){if(w.logLevel!==v.LogLevelEnum.TRACE)return d.apply(this,g);w.trace(`GlyphRenderer#${d.name}(${g.map(C=>JSON.stringify(C)).join(", ")})`);const _=d.apply(this,g);return w.trace(`GlyphRenderer#${d.name} return`,_),_}}},7302:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OptionsService=l.DEFAULT_OPTIONS=void 0;const p=h(8460),b=h(844),f=h(6114);l.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:f.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const v=["normal","bold","100","200","300","400","500","600","700","800","900"];class y extends b.Disposable{constructor(S){super(),this._onOptionChange=this.register(new p.EventEmitter),this.onOptionChange=this._onOptionChange.event;const o=Object.assign({},l.DEFAULT_OPTIONS);for(const u in S)if(u in o)try{const c=S[u];o[u]=this._sanitizeAndValidateOption(u,c)}catch(c){console.error(c)}this.rawOptions=o,this.options=Object.assign({},o),this._setupOptions()}onSpecificOptionChange(S,o){return this.onOptionChange(u=>{u===S&&o(this.rawOptions[S])})}onMultipleOptionChange(S,o){return this.onOptionChange(u=>{S.indexOf(u)!==-1&&o()})}_setupOptions(){const S=u=>{if(!(u in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${u}"`);return this.rawOptions[u]},o=(u,c)=>{if(!(u in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${u}"`);c=this._sanitizeAndValidateOption(u,c),this.rawOptions[u]!==c&&(this.rawOptions[u]=c,this._onOptionChange.fire(u))};for(const u in this.rawOptions){const c={get:S.bind(this,u),set:o.bind(this,u)};Object.defineProperty(this.options,u,c)}}_sanitizeAndValidateOption(S,o){switch(S){case"cursorStyle":if(o||(o=l.DEFAULT_OPTIONS[S]),!function(u){return u==="block"||u==="underline"||u==="bar"}(o))throw new Error(`"${o}" is not a valid value for ${S}`);break;case"wordSeparator":o||(o=l.DEFAULT_OPTIONS[S]);break;case"fontWeight":case"fontWeightBold":if(typeof o=="number"&&1<=o&&o<=1e3)break;o=v.includes(o)?o:l.DEFAULT_OPTIONS[S];break;case"cursorWidth":o=Math.floor(o);case"lineHeight":case"tabStopWidth":if(o<1)throw new Error(`${S} cannot be less than 1, value: ${o}`);break;case"minimumContrastRatio":o=Math.max(1,Math.min(21,Math.round(10*o)/10));break;case"scrollback":if((o=Math.min(o,4294967295))<0)throw new Error(`${S} cannot be less than 0, value: ${o}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(o<=0)throw new Error(`${S} cannot be less than or equal to 0, value: ${o}`);break;case"rows":case"cols":if(!o&&o!==0)throw new Error(`${S} must be numeric, value: ${o}`);break;case"windowsPty":o=o??{}}return o}}l.OptionsService=y},2660:function(m,l,h){var p=this&&this.__decorate||function(y,w,S,o){var u,c=arguments.length,d=c<3?w:o===null?o=Object.getOwnPropertyDescriptor(w,S):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(y,w,S,o);else for(var g=y.length-1;g>=0;g--)(u=y[g])&&(d=(c<3?u(d):c>3?u(w,S,d):u(w,S))||d);return c>3&&d&&Object.defineProperty(w,S,d),d},b=this&&this.__param||function(y,w){return function(S,o){w(S,o,y)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkService=void 0;const f=h(2585);let v=l.OscLinkService=class{constructor(y){this._bufferService=y,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(y){const w=this._bufferService.buffer;if(y.id===void 0){const g=w.addMarker(w.ybase+w.y),_={data:y,id:this._nextId++,lines:[g]};return g.onDispose(()=>this._removeMarkerFromLink(_,g)),this._dataByLinkId.set(_.id,_),_.id}const S=y,o=this._getEntryIdKey(S),u=this._entriesWithId.get(o);if(u)return this.addLineToLink(u.id,w.ybase+w.y),u.id;const c=w.addMarker(w.ybase+w.y),d={id:this._nextId++,key:this._getEntryIdKey(S),data:S,lines:[c]};return c.onDispose(()=>this._removeMarkerFromLink(d,c)),this._entriesWithId.set(d.key,d),this._dataByLinkId.set(d.id,d),d.id}addLineToLink(y,w){const S=this._dataByLinkId.get(y);if(S&&S.lines.every(o=>o.line!==w)){const o=this._bufferService.buffer.addMarker(w);S.lines.push(o),o.onDispose(()=>this._removeMarkerFromLink(S,o))}}getLinkData(y){var w;return(w=this._dataByLinkId.get(y))===null||w===void 0?void 0:w.data}_getEntryIdKey(y){return`${y.id};;${y.uri}`}_removeMarkerFromLink(y,w){const S=y.lines.indexOf(w);S!==-1&&(y.lines.splice(S,1),y.lines.length===0&&(y.data.id!==void 0&&this._entriesWithId.delete(y.key),this._dataByLinkId.delete(y.id)))}};l.OscLinkService=v=p([b(0,f.IBufferService)],v)},8343:(m,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createDecorator=l.getServiceDependencies=l.serviceRegistry=void 0;const h="di$target",p="di$dependencies";l.serviceRegistry=new Map,l.getServiceDependencies=function(b){return b[p]||[]},l.createDecorator=function(b){if(l.serviceRegistry.has(b))return l.serviceRegistry.get(b);const f=function(v,y,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(S,o,u){o[h]===o?o[p].push({id:S,index:u}):(o[p]=[{id:S,index:u}],o[h]=o)})(f,v,w)};return f.toString=()=>b,l.serviceRegistry.set(b,f),f}},2585:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IDecorationService=l.IUnicodeService=l.IOscLinkService=l.IOptionsService=l.ILogService=l.LogLevelEnum=l.IInstantiationService=l.ICharsetService=l.ICoreService=l.ICoreMouseService=l.IBufferService=void 0;const p=h(8343);var b;l.IBufferService=(0,p.createDecorator)("BufferService"),l.ICoreMouseService=(0,p.createDecorator)("CoreMouseService"),l.ICoreService=(0,p.createDecorator)("CoreService"),l.ICharsetService=(0,p.createDecorator)("CharsetService"),l.IInstantiationService=(0,p.createDecorator)("InstantiationService"),function(f){f[f.TRACE=0]="TRACE",f[f.DEBUG=1]="DEBUG",f[f.INFO=2]="INFO",f[f.WARN=3]="WARN",f[f.ERROR=4]="ERROR",f[f.OFF=5]="OFF"}(b||(l.LogLevelEnum=b={})),l.ILogService=(0,p.createDecorator)("LogService"),l.IOptionsService=(0,p.createDecorator)("OptionsService"),l.IOscLinkService=(0,p.createDecorator)("OscLinkService"),l.IUnicodeService=(0,p.createDecorator)("UnicodeService"),l.IDecorationService=(0,p.createDecorator)("DecorationService")},1480:(m,l,h)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeService=void 0;const p=h(8460),b=h(225);l.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new p.EventEmitter,this.onChange=this._onChange.event;const f=new b.UnicodeV6;this.register(f),this._active=f.version,this._activeProvider=f}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(f){if(!this._providers[f])throw new Error(`unknown Unicode version "${f}"`);this._active=f,this._activeProvider=this._providers[f],this._onChange.fire(f)}register(f){this._providers[f.version]=f}wcwidth(f){return this._activeProvider.wcwidth(f)}getStringCellWidth(f){let v=0;const y=f.length;for(let w=0;w<y;++w){let S=f.charCodeAt(w);if(55296<=S&&S<=56319){if(++w>=y)return v+this.wcwidth(S);const o=f.charCodeAt(w);56320<=o&&o<=57343?S=1024*(S-55296)+o-56320+65536:v+=this.wcwidth(o)}v+=this.wcwidth(S)}return v}}}},i={};function a(m){var l=i[m];if(l!==void 0)return l.exports;var h=i[m]={exports:{}};return s[m].call(h.exports,h,h.exports,a),h.exports}var n={};return(()=>{var m=n;Object.defineProperty(m,"__esModule",{value:!0}),m.Terminal=void 0;const l=a(9042),h=a(3236),p=a(844),b=a(5741),f=a(8285),v=a(7975),y=a(7090),w=["cols","rows"];class S extends p.Disposable{constructor(u){super(),this._core=this.register(new h.Terminal(u)),this._addonManager=this.register(new b.AddonManager),this._publicOptions=Object.assign({},this._core.options);const c=g=>this._core.options[g],d=(g,_)=>{this._checkReadonlyOptions(g),this._core.options[g]=_};for(const g in this._core.options){const _={get:c.bind(this,g),set:d.bind(this,g)};Object.defineProperty(this._publicOptions,g,_)}}_checkReadonlyOptions(u){if(w.includes(u))throw new Error(`Option "${u}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new v.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new y.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new f.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const u=this._core.coreService.decPrivateModes;let c="none";switch(this._core.coreMouseService.activeProtocol){case"X10":c="x10";break;case"VT200":c="vt200";break;case"DRAG":c="drag";break;case"ANY":c="any"}return{applicationCursorKeysMode:u.applicationCursorKeys,applicationKeypadMode:u.applicationKeypad,bracketedPasteMode:u.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:c,originMode:u.origin,reverseWraparoundMode:u.reverseWraparound,sendFocusMode:u.sendFocus,wraparoundMode:u.wraparound}}get options(){return this._publicOptions}set options(u){for(const c in u)this._publicOptions[c]=u[c]}blur(){this._core.blur()}focus(){this._core.focus()}resize(u,c){this._verifyIntegers(u,c),this._core.resize(u,c)}open(u){this._core.open(u)}attachCustomKeyEventHandler(u){this._core.attachCustomKeyEventHandler(u)}registerLinkProvider(u){return this._core.registerLinkProvider(u)}registerCharacterJoiner(u){return this._checkProposedApi(),this._core.registerCharacterJoiner(u)}deregisterCharacterJoiner(u){this._checkProposedApi(),this._core.deregisterCharacterJoiner(u)}registerMarker(u=0){return this._verifyIntegers(u),this._core.registerMarker(u)}registerDecoration(u){var c,d,g;return this._checkProposedApi(),this._verifyPositiveIntegers((c=u.x)!==null&&c!==void 0?c:0,(d=u.width)!==null&&d!==void 0?d:0,(g=u.height)!==null&&g!==void 0?g:0),this._core.registerDecoration(u)}hasSelection(){return this._core.hasSelection()}select(u,c,d){this._verifyIntegers(u,c,d),this._core.select(u,c,d)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(u,c){this._verifyIntegers(u,c),this._core.selectLines(u,c)}dispose(){super.dispose()}scrollLines(u){this._verifyIntegers(u),this._core.scrollLines(u)}scrollPages(u){this._verifyIntegers(u),this._core.scrollPages(u)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(u){this._verifyIntegers(u),this._core.scrollToLine(u)}clear(){this._core.clear()}write(u,c){this._core.write(u,c)}writeln(u,c){this._core.write(u),this._core.write(`\r
`,c)}paste(u){this._core.paste(u)}refresh(u,c){this._verifyIntegers(u,c),this._core.refresh(u,c)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(u){this._addonManager.loadAddon(this,u)}static get strings(){return l}_verifyIntegers(...u){for(const c of u)if(c===1/0||isNaN(c)||c%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...u){for(const c of u)if(c&&(c===1/0||isNaN(c)||c%1!=0||c<0))throw new Error("This API only accepts positive integers")}}m.Terminal=S})(),n})())})(e0);var s0=e0.exports,i0={exports:{}};(function(e,t){(function(s,i){e.exports=i()})(self,()=>(()=>{var s={};return(()=>{var i=s;Object.defineProperty(i,"__esModule",{value:!0}),i.FitAddon=void 0,i.FitAddon=class{activate(a){this._terminal=a}dispose(){}fit(){const a=this.proposeDimensions();if(!a||!this._terminal||isNaN(a.cols)||isNaN(a.rows))return;const n=this._terminal._core;this._terminal.rows===a.rows&&this._terminal.cols===a.cols||(n._renderService.clear(),this._terminal.resize(a.cols,a.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const a=this._terminal._core,n=a._renderService.dimensions;if(n.css.cell.width===0||n.css.cell.height===0)return;const m=this._terminal.options.scrollback===0?0:a.viewport.scrollBarWidth,l=window.getComputedStyle(this._terminal.element.parentElement),h=parseInt(l.getPropertyValue("height")),p=Math.max(0,parseInt(l.getPropertyValue("width"))),b=window.getComputedStyle(this._terminal.element),f=h-(parseInt(b.getPropertyValue("padding-top"))+parseInt(b.getPropertyValue("padding-bottom"))),v=p-(parseInt(b.getPropertyValue("padding-right"))+parseInt(b.getPropertyValue("padding-left")))-m;return{cols:Math.max(2,Math.floor(v/n.css.cell.width)),rows:Math.max(1,Math.floor(f/n.css.cell.height))}}}})(),s})())})(i0);var r0=i0.exports;function K2(){var i,a,n,m;const e=(a=(i=import.meta)==null?void 0:i.env)==null?void 0:a.VITE_WS_URL;if(e)return e;const t=((m=(n=import.meta)==null?void 0:n.env)==null?void 0:m.VITE_WS_PORT)||8080;return`${location.protocol==="https:"?"wss":"ws"}://${location.hostname}:${t}`}function W2({connectionId:e,openTab:t}){const[s,i]=M.useState([]),[a,n]=M.useState(""),[m,l]=M.useState("disconnected"),[h,p]=M.useState(null),[b,f]=M.useState([]),[v,y]=M.useState({host:"localhost",port:22,username:"root",authType:"password",password:"",privateKey:"",passphrase:""}),[w,S]=M.useState({includeHostPort:!0,includeUser:!0,includeHeader:!0,includePassword:!1,includePrivateKey:!1}),[o,u]=M.useState(!1),[c,d]=M.useState(!1),g=M.useRef(null),_=M.useRef(null),C=M.useRef(null),j=M.useRef(null),x=M.useMemo(()=>(s||[]).filter(O=>O.type==="ssh"),[s]);M.useEffect(()=>{(async()=>{const O=await Nn();i(O.connections||[]);const H=(O.connections||[]).filter(me=>me.type==="ssh"),ue=H.find(me=>me.id===e)||H[0];ue&&n(ue.id)})()},[e]),M.useEffect(()=>{const O=new WebSocket(K2());return O.onopen=()=>{},O.onmessage=H=>{var Z,ue,me;try{const ye=JSON.parse(H.data);if((ye==null?void 0:ye.type)==="log"&&((Z=ye==null?void 0:ye.data)!=null&&Z.connectionId)){const{connectionId:P,message:B,type:K,code:te,hint:de}=ye.data||{};P===a&&f(le=>{const ae=le.slice(-99);return ae.push({ts:new Date().toISOString(),level:K==="error"?"error":K==="warn"?"warn":"info",message:B,code:te,hint:de}),ae})}else(ye==null?void 0:ye.type)==="ssh"&&((ue=ye==null?void 0:ye.data)==null?void 0:ue.event)==="shellData"&&ye.data.sessionId===h&&((me=_.current)==null||me.write(ye.data.data))}catch{}},O.onerror=()=>{},j.current=O,()=>{try{O.close()}catch{}}},[h,a]),M.useEffect(()=>{let O=!1;function H(){if(O)return;const ue=g.current;if(!ue||!ue.isConnected){requestAnimationFrame(H);return}try{const me=new s0.Terminal({rendererType:"canvas",fontFamily:"JetBrains Mono, Fira Code, Consolas, monospace",fontSize:13,convertEol:!0,cursorBlink:!0,theme:{background:"#ffffff",foreground:"#111827"}}),ye=new r0.FitAddon;me.loadAddon(ye),me.open(ue),requestAnimationFrame(()=>requestAnimationFrame(()=>{try{ye.fit()}catch{}})),_.current=me,C.current=ye;const P=()=>{requestAnimationFrame(()=>{try{ye.fit()}catch{}})};return window.addEventListener("resize",P),me.onData(async B=>{if(h)try{const K=j.current;K&&K.readyState===1?K.send(JSON.stringify({type:"sshInput",data:{connectionId:a,sessionId:h,data:B}})):await Ae(a,"shellInput",{sessionId:h,data:B})}catch{}}),()=>{window.removeEventListener("resize",P);try{me.dispose()}catch{}}}catch{setTimeout(H,16)}}const Z=H();return()=>{O=!0,typeof Z=="function"&&Z()}},[]);async function E(O){var Z,ue,me,ye,P;const H=O||a;if(H){d(!0);try{await hs(H),l("connected");const B=((Z=_.current)==null?void 0:Z.cols)||80,K=((ue=_.current)==null?void 0:ue.rows)||24,te=await Ae(H,"shellOpen",{cols:B,rows:K}),de=(me=te==null?void 0:te.data)==null?void 0:me.sessionId;p(de),(ye=_.current)==null||ye.write(`\r
`)}catch(B){(P=_.current)==null||P.writeln(`\r
Error: ${B.message}`),f(K=>[...K,{ts:new Date().toISOString(),level:"error",message:B.message}].slice(-100))}finally{d(!1)}}}async function D(){if(a){d(!0);try{h&&(await Ae(a,"shellClose",{sessionId:h}),p(null)),await Ni(a),f(O=>[...O,{ts:new Date().toISOString(),level:"info",message:"Disconnected"}].slice(-100)),l("disconnected")}finally{d(!1)}}}M.useEffect(()=>{const O=setInterval(()=>{var ue,me;if(!h)return;const H=(ue=_.current)==null?void 0:ue.cols,Z=(me=_.current)==null?void 0:me.rows;H&&Z&&Ae(a,"shellResize",{sessionId:h,cols:H,rows:Z}).catch(()=>{})},1500);return()=>clearInterval(O)},[h,a]);const[A,T]=M.useState("."),[R,q]=M.useState([]),[G,z]=M.useState("echo quick-test"),[W,N]=M.useState(""),[L,I]=M.useState(!1);async function U(){var O;if(!(!a||m!=="connected"))try{const H=await Ae(a,"sftpList",{path:A}),Z=((O=H==null?void 0:H.data)==null?void 0:O.entries)||(H==null?void 0:H.entries)||[];q(Z)}catch(H){console.error(H)}}async function se(O){var H;try{const Z=A.endsWith("/")?`${A}${O}`:`${A}/${O}`,ue=await Ae(a,"sftpGet",{path:Z}),me=((H=ue==null?void 0:ue.data)==null?void 0:H.base64)||(ue==null?void 0:ue.base64);if(!me)return;const ye=ce(me),P=URL.createObjectURL(ye),B=document.createElement("a");B.href=P,B.download=O,B.click(),URL.revokeObjectURL(P)}catch(Z){console.error(Z)}}function ce(O){const H=atob(O),Z=new Array(H.length);for(let me=0;me<H.length;me++)Z[me]=H.charCodeAt(me);const ue=new Uint8Array(Z);return new Blob([ue])}async function Q(O){const H=await O.arrayBuffer();let Z="";const ue=new Uint8Array(H);for(let P=0;P<ue.length;P++)Z+=String.fromCharCode(ue[P]);const me=btoa(Z),ye=A.endsWith("/")?`${A}${O.name}`:`${A}/${O.name}`;await Ae(a,"sftpPut",{path:ye,base64:me}),await U()}function re(O=!1){var me,ye,P,B,K,te,de;const H=(s||[]).find(le=>le.id===a);if(!H)return"";const Z="/unicon/proxy/webssh2/",ue=new URLSearchParams;if(w.includeHostPort){const le=((me=H.config)==null?void 0:me.host)||"",ae=((ye=H.config)==null?void 0:ye.port)||22;le&&ue.set("host",le),ue.set("port",String(ae))}if(w.includeUser){const le=((P=H.config)==null?void 0:P.username)||"";le&&ue.set("user",le)}if(w.includeHeader&&ue.set("header",`SSH  ${H.name||((B=H.config)==null?void 0:B.host)||""}`),O&&(w.includePassword&&((K=H.config)!=null&&K.password)&&ue.set("pw",H.config.password),w.includePrivateKey&&((te=H.config)!=null&&te.privateKey))){try{ue.set("pk",btoa(H.config.privateKey))}catch{ue.set("pk",H.config.privateKey)}(de=H.config)!=null&&de.passphrase&&ue.set("pp",H.config.passphrase)}return`${Z}?${ue.toString()}`}function pe(){var ue,me;const O=(s||[]).find(ye=>ye.id===a);if(!O)return;if(w.includePassword&&((ue=O.config)==null?void 0:ue.password)||w.includePrivateKey&&((me=O.config)==null?void 0:me.privateKey)){u(!0);return}const Z=re(!1);try{window.open(Z,"_blank","noopener")}catch{}}async function k(O){if(O&&O==="ssh_local"){const Z=(await Es({name:"SSH localhost",type:"ssh",config:{host:"localhost",port:22,username:"user"}})).connection;n(Z.id),typeof t=="function"&&t("ssh",{connectionId:Z.id,connection:Z,title:`SSH  ${Z.name}`})}}function F(){const O=new Blob([JSON.stringify(b,null,2)],{type:"application/json"}),H=URL.createObjectURL(O),Z=document.createElement("a");Z.href=H,Z.download="ssh-logs.json",Z.click(),URL.revokeObjectURL(H)}async function Y(){try{const O={name:`SSH quick: ${v.username||"user"}@${v.host}:${v.port||22}`,type:"ssh",config:{host:v.host,port:Number(v.port||22),username:v.username,...v.authType==="password"?{password:v.password}:{privateKey:v.privateKey,passphrase:v.passphrase}}},Z=(await Es(O)).connection.id;n(Z),f([]),await E(Z)}catch(O){alert(O.message||"Quick connect failed")}}async function V(){if(!a)return;I(!0);let O=!1;try{if(m!=="connected")try{await hs(a),O=!0}catch(ue){I(!1),f(me=>[...me,{ts:new Date().toISOString(),level:"error",message:`Connect failed: ${ue.message}`}].slice(-100));return}const H=await Ae(a,"exec",{command:G,cwd:W||void 0}),Z=(H==null?void 0:H.data)||{};if(_.current&&Z.stdout)try{_.current.write(`\r
${Z.stdout}\r
`)}catch{}if(_.current&&Z.stderr)try{_.current.write(`\r
[stderr]\r
${Z.stderr}\r
`)}catch{}f(ue=>[...ue,{ts:new Date().toISOString(),level:Z.code===0?"info":"warn",message:`exec '${G}'  code ${Z.code}`,hint:Z.stderr?"stderr present":""}].slice(-100))}catch(H){f(Z=>[...Z,{ts:new Date().toISOString(),level:"error",message:`exec error: ${H.message}`}].slice(-100))}finally{if(O)try{await Ni(a)}catch{}I(!1)}}return r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"border rounded p-3 bg-gray-50",children:[r.jsx("div",{className:"text-sm font-medium mb-2",children:"Quick Connect (SSH)"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[r.jsx(lt,{placeholder:"host",value:v.host,onChange:O=>y(H=>({...H,host:O.target.value}))}),r.jsx(lt,{placeholder:"port",type:"number",value:v.port,onChange:O=>y(H=>({...H,port:O.target.value}))}),r.jsx(lt,{placeholder:"username",value:v.username,onChange:O=>y(H=>({...H,username:O.target.value}))}),r.jsxs(Jv,{value:v.authType,onChange:O=>y(H=>({...H,authType:O.target.value})),children:[r.jsx("option",{value:"password",children:"Password"}),r.jsx("option",{value:"privateKey",children:"Private Key"})]}),v.authType==="password"?r.jsx(lt,{placeholder:"password",type:"password",value:v.password,onChange:O=>y(H=>({...H,password:O.target.value}))}):r.jsxs(r.Fragment,{children:[r.jsx("textarea",{className:"col-span-2 h-28 border rounded px-2 py-1 font-mono text-xs",placeholder:"-----BEGIN PRIVATE KEY-----\\n...\\n-----END PRIVATE KEY-----",value:v.privateKey,onChange:O=>y(H=>({...H,privateKey:O.target.value}))}),r.jsx(lt,{placeholder:"passphrase (optional)",type:"password",value:v.passphrase,onChange:O=>y(H=>({...H,passphrase:O.target.value}))})]})]}),r.jsx("div",{className:"mt-2",children:r.jsx(xe,{onClick:Y,children:"Quick Connect"})})]}),r.jsxs("div",{className:"border rounded p-3",children:[r.jsx("div",{className:"text-sm font-medium mb-2",children:"Quick Exec (one-shot)"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-2 items-center",children:[r.jsx(lt,{className:"md:col-span-4 font-mono text-sm",placeholder:"command (e.g., whoami)",value:G,onChange:O=>z(O.target.value)}),r.jsx(lt,{className:"md:col-span-1 font-mono text-sm",placeholder:"cwd (optional)",value:W,onChange:O=>N(O.target.value)}),r.jsx(xe,{className:"md:col-span-1",onClick:V,disabled:L||!a,children:L?"Running":"Run"})]})]}),r.jsxs("div",{className:"flex items-end gap-3",children:[r.jsxs("div",{className:"text-sm text-gray-700",children:["Quick pick:",r.jsxs("select",{className:"ml-2 border rounded px-2 py-1",onChange:O=>{const H=O.target.value;O.target.value="",k(H)},children:[r.jsx("option",{children:"Pick"}),r.jsx("option",{value:"ssh_local",children:"SSH localhost (22)"})]})]}),r.jsx(Y2,{connections:s,selectedId:a,status:m}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-600",children:"SSH Connection"}),r.jsx("select",{className:"border rounded px-3 py-2 min-w-[16rem]",value:a,onChange:O=>n(O.target.value),children:x.map(O=>{var H;return r.jsxs("option",{value:O.id,children:[O.name," (",(H=O.config)==null?void 0:H.host,")"]},O.id)})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(xe,{variant:"secondary",onClick:E,disabled:!a||c||m==="connected",leftEl:c?r.jsx(js,{size:14,className:"animate-spin"}):r.jsx(Gl,{size:14}),children:"Connect"}),r.jsx(xe,{variant:"secondary",onClick:D,disabled:!a||c||m!=="connected",leftEl:r.jsx(Kl,{size:14}),children:"Disconnect"}),r.jsx(xe,{variant:"secondary",onClick:()=>pe(),disabled:!a,leftEl:r.jsx($a,{size:14}),children:"Advanced Terminal"})]})]}),r.jsx(nr,{connectionId:a,className:"-mt-1"}),r.jsx("div",{className:"border rounded h-[360px] overflow-hidden",children:r.jsx("div",{ref:g,className:"h-full","aria-label":"SSH Terminal"})}),r.jsxs("div",{className:"border rounded p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-sm font-medium",children:"Log"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"px-2 py-1 border rounded text-sm",onClick:()=>f([]),children:"Clear"}),r.jsx("button",{className:"px-2 py-1 border rounded text-sm",onClick:F,children:"Export"})]})]}),r.jsx("div",{className:"max-h-48 overflow-auto text-xs font-mono leading-5",children:b.length===0?r.jsx("div",{className:"text-gray-500",children:"No log entries yet."}):b.slice().reverse().map((O,H)=>r.jsxs("div",{className:O.level==="error"?"text-red-700":O.level==="warn"?"text-amber-700":"text-gray-800",children:[r.jsx("span",{className:"opacity-60 mr-2",children:new Date(O.ts).toLocaleTimeString()}),O.message,O.code||O.hint?r.jsxs("span",{className:"opacity-80",children:[" ",O.code?`[${O.code}]`:"",O.hint?`  ${O.hint}`:""]}):null]},H))})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"border rounded p-3",children:[r.jsxs("div",{className:"flex items-end gap-2 mb-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm text-gray-600",children:"SFTP Path"}),r.jsx(lt,{value:A,onChange:O=>T(O.target.value)})]}),r.jsx(xe,{variant:"secondary",disabled:m!=="connected",onClick:U,children:"List"}),r.jsxs("label",{className:"px-3 py-1.5 border rounded cursor-pointer",children:["Upload",r.jsx("input",{type:"file",className:"hidden",onChange:O=>O.target.files&&O.target.files[0]&&Q(O.target.files[0])})]})]}),r.jsxs("div",{className:"max-h-48 overflow-auto text-sm",children:[R.map((O,H)=>r.jsxs("div",{className:"flex items-center justify-between border-b py-1",children:[r.jsx("span",{className:"font-mono",children:O.filename}),r.jsx("button",{className:"px-2 py-0.5 text-xs border rounded",onClick:()=>se(O.filename),children:"Download"})]},H)),R.length===0&&r.jsx("div",{className:"text-gray-500",children:"No entries"})]})]}),r.jsxs("div",{className:"text-xs text-gray-500 flex items-center",children:["Status: ",m,h?`  session ${h.slice(0,8)}`:""]})]}),r.jsxs("div",{className:"border rounded p-3",children:[r.jsx("div",{className:"text-sm font-medium mb-2",children:"Advanced Terminal (WebSSH2) Handover"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[r.jsx(_r,{id:"ho-host",label:"Include Host/Port",checked:w.includeHostPort,onChange:O=>S(H=>({...H,includeHostPort:O.target.checked}))}),r.jsx(_r,{id:"ho-user",label:"Include Username",checked:w.includeUser,onChange:O=>S(H=>({...H,includeUser:O.target.checked}))}),r.jsx(_r,{id:"ho-head",label:"Include Header Title",checked:w.includeHeader,onChange:O=>S(H=>({...H,includeHeader:O.target.checked}))}),r.jsx(_r,{id:"ho-pw",label:"Include Password (unsafe)",checked:w.includePassword,onChange:O=>S(H=>({...H,includePassword:O.target.checked}))}),r.jsx(_r,{id:"ho-key",label:"Include Private Key (unsafe)",checked:w.includePrivateKey,onChange:O=>S(H=>({...H,includePrivateKey:O.target.checked}))})]}),r.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Secrets are sent via query params only if toggled; this may be insecure depending on your setup."}),r.jsxs("div",{className:"mt-2",children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Preview URL (secrets omitted):"}),r.jsx("pre",{className:"text-[11px] leading-4 bg-gray-50 border rounded p-2 overflow-x-auto",children:re(!1)})]}),r.jsx("div",{className:"mt-2",children:r.jsx(xe,{variant:"secondary",onClick:()=>pe(),disabled:!a,leftEl:r.jsx($a,{size:14}),children:"Open Advanced Terminal"})})]}),r.jsx(kn,{open:!!o,onClose:()=>u(!1),title:"Send credentials to Advanced Terminal?",footer:r.jsxs(r.Fragment,{children:[r.jsx(xe,{variant:"secondary",onClick:()=>u(!1),children:"Cancel"}),r.jsx(xe,{onClick:async()=>{try{const O=(s||[]).find(ue=>ue.id===a);if(!O)return;const H={connectionId:O.id,includeHostPort:!!w.includeHostPort,includeUser:!!w.includeUser,includeHeader:!!w.includeHeader,includePassword:!!w.includePassword,includePrivateKey:!!w.includePrivateKey},Z=await fetch("/unicon/api/ssh/handover-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(H)}).then(ue=>ue.json());u(!1),Z!=null&&Z.success&&Z.launchUrl?window.open(Z.launchUrl,"_blank","noopener"):alert((Z==null?void 0:Z.error)||"Token creation failed")}catch(O){u(!1),alert(O.message||"Token handover failed")}},children:"Proceed"})]}),children:r.jsx("div",{className:"text-sm text-gray-700",children:"You enabled password/private key handover. The app will request a shortlived token from the server and redirect to the Advanced Terminal. Although safer than embedding secrets directly, the final URL may still include them depending on WebSSH2."})})]})}function Y2({connections:e,selectedId:t,status:s}){const i=(e||[]).find(a=>a.id===t)||null;return r.jsx("div",{className:"ml-auto",children:r.jsx(ar,{connection:i||void 0,status:s})})}const zf={pods:[{key:"name",label:"NAME",width:"25%"},{key:"namespace",label:"NAMESPACE",width:"12%"},{key:"ready",label:"READY",width:"8%"},{key:"status",label:"STATUS",width:"10%"},{key:"restarts",label:"RESTARTS",width:"8%"},{key:"age",label:"AGE",width:"8%"},{key:"ip",label:"IP",width:"12%"},{key:"node",label:"NODE",width:"17%"}],deployments:[{key:"name",label:"NAME",width:"30%"},{key:"namespace",label:"NAMESPACE",width:"15%"},{key:"ready",label:"READY",width:"10%"},{key:"upToDate",label:"UP-TO-DATE",width:"10%"},{key:"available",label:"AVAILABLE",width:"10%"},{key:"age",label:"AGE",width:"10%"},{key:"images",label:"IMAGES",width:"15%"}],services:[{key:"name",label:"NAME",width:"20%"},{key:"namespace",label:"NAMESPACE",width:"12%"},{key:"type",label:"TYPE",width:"12%"},{key:"clusterIP",label:"CLUSTER-IP",width:"15%"},{key:"externalIP",label:"EXTERNAL-IP",width:"15%"},{key:"ports",label:"PORTS",width:"18%"},{key:"age",label:"AGE",width:"8%"}],configmaps:[{key:"name",label:"NAME",width:"40%"},{key:"namespace",label:"NAMESPACE",width:"25%"},{key:"data",label:"DATA",width:"15%"},{key:"age",label:"AGE",width:"20%"}],secrets:[{key:"name",label:"NAME",width:"35%"},{key:"namespace",label:"NAMESPACE",width:"20%"},{key:"type",label:"TYPE",width:"25%"},{key:"data",label:"DATA",width:"10%"},{key:"age",label:"AGE",width:"10%"}],nodes:[{key:"name",label:"NAME",width:"20%"},{key:"status",label:"STATUS",width:"10%"},{key:"roles",label:"ROLES",width:"15%"},{key:"age",label:"AGE",width:"8%"},{key:"version",label:"VERSION",width:"12%"},{key:"internalIP",label:"INTERNAL-IP",width:"15%"},{key:"os",label:"OS-IMAGE",width:"20%"}],events:[{key:"namespace",label:"NAMESPACE",width:"12%"},{key:"lastSeen",label:"LAST SEEN",width:"10%"},{key:"type",label:"TYPE",width:"8%"},{key:"reason",label:"REASON",width:"12%"},{key:"object",label:"OBJECT",width:"18%"},{key:"message",label:"MESSAGE",width:"40%"}],namespaces:[{key:"name",label:"NAME",width:"50%"},{key:"status",label:"STATUS",width:"25%"},{key:"age",label:"AGE",width:"25%"}],statefulsets:[{key:"name",label:"NAME",width:"35%"},{key:"namespace",label:"NAMESPACE",width:"25%"},{key:"ready",label:"READY",width:"20%"},{key:"age",label:"AGE",width:"20%"}],daemonsets:[{key:"name",label:"NAME",width:"25%"},{key:"namespace",label:"NAMESPACE",width:"15%"},{key:"desired",label:"DESIRED",width:"10%"},{key:"current",label:"CURRENT",width:"10%"},{key:"ready",label:"READY",width:"10%"},{key:"upToDate",label:"UP-TO-DATE",width:"10%"},{key:"available",label:"AVAILABLE",width:"10%"},{key:"age",label:"AGE",width:"10%"}],jobs:[{key:"name",label:"NAME",width:"35%"},{key:"namespace",label:"NAMESPACE",width:"20%"},{key:"completions",label:"COMPLETIONS",width:"15%"},{key:"duration",label:"DURATION",width:"15%"},{key:"age",label:"AGE",width:"15%"}],cronjobs:[{key:"name",label:"NAME",width:"25%"},{key:"namespace",label:"NAMESPACE",width:"15%"},{key:"schedule",label:"SCHEDULE",width:"15%"},{key:"suspend",label:"SUSPEND",width:"10%"},{key:"active",label:"ACTIVE",width:"10%"},{key:"lastSchedule",label:"LAST SCHEDULE",width:"15%"},{key:"age",label:"AGE",width:"10%"}],ingresses:[{key:"name",label:"NAME",width:"20%"},{key:"namespace",label:"NAMESPACE",width:"15%"},{key:"class",label:"CLASS",width:"15%"},{key:"hosts",label:"HOSTS",width:"20%"},{key:"address",label:"ADDRESS",width:"15%"},{key:"ports",label:"PORTS",width:"8%"},{key:"age",label:"AGE",width:"7%"}],persistentvolumeclaims:[{key:"name",label:"NAME",width:"20%"},{key:"namespace",label:"NAMESPACE",width:"15%"},{key:"status",label:"STATUS",width:"10%"},{key:"volume",label:"VOLUME",width:"20%"},{key:"capacity",label:"CAPACITY",width:"10%"},{key:"accessModes",label:"ACCESS MODES",width:"15%"},{key:"age",label:"AGE",width:"10%"}],persistentvolumes:[{key:"name",label:"NAME",width:"20%"},{key:"capacity",label:"CAPACITY",width:"10%"},{key:"accessModes",label:"ACCESS MODES",width:"15%"},{key:"reclaimPolicy",label:"RECLAIM POLICY",width:"12%"},{key:"status",label:"STATUS",width:"10%"},{key:"claim",label:"CLAIM",width:"18%"},{key:"age",label:"AGE",width:"10%"}],replicasets:[{key:"name",label:"NAME",width:"35%"},{key:"namespace",label:"NAMESPACE",width:"20%"},{key:"desired",label:"DESIRED",width:"12%"},{key:"current",label:"CURRENT",width:"12%"},{key:"ready",label:"READY",width:"11%"},{key:"age",label:"AGE",width:"10%"}],endpoints:[{key:"name",label:"NAME",width:"30%"},{key:"namespace",label:"NAMESPACE",width:"20%"},{key:"endpoints",label:"ENDPOINTS",width:"40%"},{key:"age",label:"AGE",width:"10%"}],serviceaccounts:[{key:"name",label:"NAME",width:"40%"},{key:"namespace",label:"NAMESPACE",width:"30%"},{key:"secrets",label:"SECRETS",width:"15%"},{key:"age",label:"AGE",width:"15%"}]},V2=e=>{const t=(e||"").toLowerCase();return t==="running"||t==="ready"||t==="active"||t==="bound"?"text-green-400":t==="pending"||t==="waiting"?"text-yellow-400":t==="failed"||t==="error"||t==="crashloopbackoff"?"text-red-400":t==="terminating"||t==="deleting"?"text-orange-400":t==="succeeded"||t==="completed"?"text-blue-400":"text-gray-400"};function X2({resourceType:e,items:t=[],loading:s=!1,selectedIndex:i=-1,onSelect:a,onAction:n,onRefresh:m,theme:l={},className:h=""}){var D;const[p,b]=M.useState(""),[f,v]=M.useState("name"),[y,w]=M.useState("asc"),[S,o]=M.useState(!1),u=M.useRef(null),c=M.useRef({}),d=((D=l.bg)==null?void 0:D.includes("gray-900"))||!l.bg,g={headerBg:d?"bg-gray-800":"bg-gray-100",toolbarBg:d?"bg-gray-800":"bg-gray-50",border:d?"border-gray-700":"border-gray-200",text:d?"text-gray-200":"text-gray-900",textMuted:d?"text-gray-400":"text-gray-600",textFaint:"text-gray-500",hover:d?"hover:bg-gray-700":"hover:bg-gray-100",selected:d?"bg-blue-900/50":"bg-blue-100",input:d?"bg-gray-900 border-gray-700 text-gray-200":"bg-white border-gray-300 text-gray-900",button:d?"bg-gray-700 hover:bg-gray-600 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-800",buttonPrimary:"bg-blue-600 hover:bg-blue-700 text-white",buttonDanger:d?"bg-red-600/20 hover:bg-red-600/40 text-red-400":"bg-red-100 hover:bg-red-200 text-red-600"},_=zf[e]||zf.pods,C=M.useMemo(()=>{let A=t;if(p){const T=p.toLowerCase();A=A.filter(R=>Object.values(R).some(q=>String(q).toLowerCase().includes(T)))}return A=[...A].sort((T,R)=>{const q=T[f]??"",G=R[f]??"",z=String(q).localeCompare(String(G),void 0,{numeric:!0});return y==="asc"?z:-z}),A},[t,p,f,y]),j=A=>{f===A?w(T=>T==="asc"?"desc":"asc"):(v(A),w("asc"))};M.useEffect(()=>{i>=0&&c.current[i]&&c.current[i].scrollIntoView({behavior:"smooth",block:"nearest"})},[i]),M.useEffect(()=>{const A=T=>{var q,G,z,W;if(!((q=u.current)!=null&&q.contains(document.activeElement))&&((G=document.activeElement)==null?void 0:G.tagName)!=="INPUT")return;const R=C.length-1;switch(T.key){case"ArrowUp":case"k":T.preventDefault(),a==null||a(Math.max(0,i-1));break;case"ArrowDown":case"j":T.preventDefault(),a==null||a(Math.min(R,i+1));break;case"Home":case"g":if(T.key==="g"&&!T.ctrlKey)break;T.preventDefault(),a==null||a(0);break;case"End":case"G":T.preventDefault(),a==null||a(R);break;case"Enter":T.preventDefault(),i>=0&&C[i]&&(n==null||n("describe",C[i]));break;case"l":T.preventDefault(),i>=0&&C[i]&&e==="pods"&&(n==null||n("logs",C[i]));break;case"s":T.preventDefault(),i>=0&&C[i]&&e==="pods"&&(n==null||n("shell",C[i]));break;case"d":T.ctrlKey&&(T.preventDefault(),i>=0&&C[i]&&(n==null||n("delete",C[i])));break;case"/":T.preventDefault(),(z=document.getElementById("k8s-filter-input"))==null||z.focus();break;case"Escape":b(""),(W=u.current)==null||W.focus();break}};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[i,C,a,n,e]);const x=i>=0?C[i]:null,E=A=>{navigator.clipboard.writeText(A).catch(()=>{})};return r.jsxs("div",{className:`flex flex-col h-full ${h}`,ref:u,tabIndex:0,children:[r.jsxs("div",{className:`flex items-center gap-3 px-3 py-2 ${g.toolbarBg} border-b ${g.border}`,children:[r.jsxs("div",{className:"relative flex-1 max-w-sm",children:[r.jsx(wa,{size:14,className:`absolute left-2.5 top-1/2 -translate-y-1/2 ${g.textFaint}`}),r.jsx("input",{id:"k8s-filter-input",type:"text",placeholder:"Filter resources... ( / )",value:p,onChange:A=>b(A.target.value),className:`w-full pl-8 pr-3 py-1.5 text-sm ${g.input} border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent`})]}),r.jsxs("div",{className:`px-2.5 py-1 ${d?"bg-gray-700":"bg-gray-200"} rounded-md text-xs font-medium ${g.text}`,children:[C.length," ",r.jsxs("span",{className:g.textMuted,children:["/ ",t.length]})]}),r.jsx("div",{className:"flex items-center gap-1",children:r.jsx("button",{onClick:m,disabled:s,className:`p-2 rounded-md ${g.button} disabled:opacity-50 transition-colors`,title:"Refresh (Ctrl+R)",children:r.jsx(js,{size:16,className:s?"animate-spin":""})})})]}),x&&r.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 ${d?"bg-gray-800/80":"bg-blue-50"} border-b ${g.border}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mr-2",children:[r.jsx("span",{className:`text-xs font-medium ${g.textMuted}`,children:"Selected:"}),r.jsx("span",{className:`text-sm font-mono ${g.text}`,children:x.name}),r.jsx("button",{onClick:()=>E(x.name),className:`p-1 rounded ${g.hover}`,title:"Copy name",children:r.jsx(zi,{size:12,className:g.textMuted})})]}),r.jsx("div",{className:`w-px h-5 ${g.border}`}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsxs("button",{onClick:()=>n==null?void 0:n("describe",x),className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md ${g.buttonPrimary} transition-colors`,title:"Describe (Enter)",children:[r.jsx(nc,{size:14})," View YAML"]}),e==="pods"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>n==null?void 0:n("logs",x),className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md ${g.button} transition-colors`,title:"Logs (l)",children:[r.jsx(Od,{size:14})," Logs"]}),r.jsxs("button",{onClick:()=>n==null?void 0:n("shell",x),className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md ${g.button} transition-colors`,title:"Shell (s)",children:[r.jsx($a,{size:14})," Shell"]}),r.jsxs("button",{onClick:()=>n==null?void 0:n("portForward",x),className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md ${g.button} transition-colors`,title:"Port Forward",children:[r.jsx(qf,{size:14})," Port Forward"]})]}),["deployments","statefulsets","replicasets"].includes(e)&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>n==null?void 0:n("scale",x),className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md ${g.button} transition-colors`,title:"Scale replicas",children:[r.jsx(f0,{size:14})," Scale"]}),e==="deployments"&&r.jsxs("button",{onClick:()=>n==null?void 0:n("restart",x),className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md ${g.button} transition-colors`,title:"Rolling restart",children:[r.jsx(m0,{size:14})," Restart"]})]}),e==="nodes"&&r.jsxs("button",{onClick:()=>n==null?void 0:n("nodeAction",x),className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md ${d?"bg-yellow-600/20 hover:bg-yellow-600/40 text-yellow-400":"bg-yellow-100 hover:bg-yellow-200 text-yellow-700"} transition-colors`,title:"Node management actions",children:[r.jsx(p0,{size:14})," Manage Node"]})]}),r.jsx("div",{className:"flex-1"}),r.jsxs("button",{onClick:()=>n==null?void 0:n("delete",x),className:`flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-md ${g.buttonDanger} transition-colors`,title:"Delete (Ctrl+D)",children:[r.jsx(Yi,{size:14})," Delete"]})]}),r.jsx("div",{className:"flex-1 overflow-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:`sticky top-0 ${g.headerBg} z-10`,children:r.jsx("tr",{children:_.map(A=>r.jsx("th",{style:{width:A.width},className:`px-3 py-2 text-left ${g.textMuted} font-semibold text-xs uppercase tracking-wide cursor-pointer ${g.hover} select-none transition-colors`,onClick:()=>j(A.key),children:r.jsxs("div",{className:"flex items-center gap-1",children:[A.label,f===A.key&&r.jsx("span",{className:"text-blue-500",children:y==="asc"?r.jsx(g0,{size:14}):r.jsx(Su,{size:14})})]})},A.key))})}),r.jsx("tbody",{className:g.text,children:s&&t.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:_.length,className:`px-3 py-12 text-center ${g.textMuted}`,children:[r.jsx(js,{size:20,className:"inline animate-spin mr-2"}),"Loading resources..."]})}):C.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:_.length,className:`px-3 py-12 text-center ${g.textMuted}`,children:p?"No matching resources found":"No resources in this namespace"})}):C.map((A,T)=>r.jsx("tr",{ref:R=>c.current[T]=R,onClick:()=>a==null?void 0:a(T),onDoubleClick:()=>n==null?void 0:n("describe",A),className:`
                    cursor-pointer border-b ${g.border} transition-colors
                    ${T===i?`${g.selected} font-medium`:g.hover}
                  `,children:_.map(R=>r.jsx("td",{className:`px-3 py-2 truncate ${R.key==="status"||R.key==="phase"?V2(A[R.key]):""} ${R.key==="name"?"font-mono":""}`,title:String(A[R.key]??""),children:A[R.key]??"-"},R.key))},A.name+"-"+(A.namespace||"")))})]})}),r.jsxs("div",{className:`flex items-center justify-between px-3 py-2 ${g.headerBg} border-t ${g.border}`,children:[r.jsx("div",{className:`flex items-center gap-2 text-sm ${g.textMuted}`,children:r.jsx("span",{className:`px-2 py-0.5 rounded ${d?"bg-gray-700":"bg-gray-200"} font-mono text-xs`,children:i>=0?`${i+1}/${C.length}`:""})}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>i>0&&(a==null?void 0:a(i-1)),className:`px-2 py-1 text-xs rounded ${g.button} flex items-center gap-1`,title:"Previous ( or k)",children:r.jsx("span",{className:"font-mono",children:""})}),r.jsx("button",{onClick:()=>i<C.length-1&&(a==null?void 0:a(i+1)),className:`px-2 py-1 text-xs rounded ${g.button} flex items-center gap-1`,title:"Next ( or j)",children:r.jsx("span",{className:"font-mono",children:""})}),r.jsx("div",{className:`w-px h-4 mx-1 ${g.border}`}),r.jsxs("button",{onClick:()=>x&&(n==null?void 0:n("describe",x)),disabled:!x,className:`px-2 py-1 text-xs rounded ${g.button} disabled:opacity-40 flex items-center gap-1`,title:"Describe (Enter)",children:[r.jsx(nc,{size:12})," ",r.jsx("span",{className:"hidden sm:inline",children:"View"}),r.jsx("kbd",{className:`ml-1 px-1 py-0.5 text-[10px] rounded ${d?"bg-gray-600":"bg-gray-300"}`,children:""})]}),e==="pods"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>x&&(n==null?void 0:n("logs",x)),disabled:!x,className:`px-2 py-1 text-xs rounded ${g.button} disabled:opacity-40 flex items-center gap-1`,title:"Logs (l)",children:[r.jsx(Od,{size:12})," ",r.jsx("span",{className:"hidden sm:inline",children:"Logs"}),r.jsx("kbd",{className:`ml-1 px-1 py-0.5 text-[10px] rounded ${d?"bg-gray-600":"bg-gray-300"}`,children:"l"})]}),r.jsxs("button",{onClick:()=>x&&(n==null?void 0:n("shell",x)),disabled:!x,className:`px-2 py-1 text-xs rounded ${g.button} disabled:opacity-40 flex items-center gap-1`,title:"Shell (s)",children:[r.jsx($a,{size:12})," ",r.jsx("span",{className:"hidden sm:inline",children:"Shell"}),r.jsx("kbd",{className:`ml-1 px-1 py-0.5 text-[10px] rounded ${d?"bg-gray-600":"bg-gray-300"}`,children:"s"})]})]}),r.jsx("div",{className:`w-px h-4 mx-1 ${g.border}`}),r.jsxs("button",{onClick:()=>{var A;return(A=document.getElementById("k8s-filter-input"))==null?void 0:A.focus()},className:`px-2 py-1 text-xs rounded ${g.button} flex items-center gap-1`,title:"Filter (/)",children:[r.jsx(wa,{size:12}),r.jsx("kbd",{className:`ml-1 px-1 py-0.5 text-[10px] rounded ${d?"bg-gray-600":"bg-gray-300"}`,children:"/"})]})]})]})]})}function J2({yaml:e="",resourceName:t="",resourceType:s="",namespace:i="",onApply:a,onClose:n,readOnly:m=!0,className:l=""}){const[h,p]=M.useState(e),[b,f]=M.useState(!1),[v,y]=M.useState(!1),[w,S]=M.useState(!1),o=M.useRef(null);M.useEffect(()=>{p(e)},[e]);const u=async()=>{try{await navigator.clipboard.writeText(h),y(!0),setTimeout(()=>y(!1),2e3)}catch(C){console.error("Failed to copy:",C)}},c=()=>{const C=new Blob([h],{type:"text/yaml"}),j=URL.createObjectURL(C),x=document.createElement("a");x.href=j,x.download=`${s}-${t}.yaml`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(j)},d=()=>{a&&h!==e&&a(h),f(!1)},g=C=>C.split(`
`).map((j,x)=>{let E=j.replace(/(#.*)$/,'<span class="text-gray-500">$1</span>').replace(/^(\s*)([a-zA-Z0-9_-]+)(:)/gm,'$1<span class="text-cyan-400">$2</span><span class="text-gray-400">$3</span>').replace(/"([^"]*)"/g,'<span class="text-green-400">"$1"</span>').replace(/'([^']*)'/g,`<span class="text-green-400">'$1'</span>`).replace(/\b(true|false)\b/gi,'<span class="text-yellow-400">$1</span>').replace(/\b(\d+)\b/g,'<span class="text-purple-400">$1</span>').replace(/\b(null|~)\b/gi,'<span class="text-red-400">$1</span>');return r.jsxs("div",{className:"flex",children:[r.jsx("span",{className:"text-gray-600 select-none w-10 text-right pr-3 flex-shrink-0",children:x+1}),r.jsx("span",{className:"flex-1",dangerouslySetInnerHTML:{__html:E}})]},x)}),_=w?"fixed inset-0 z-50 bg-gray-900":`${l}`;return r.jsxs("div",{className:`flex flex-col ${_}`,children:[r.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gray-800 border-b border-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-sm font-medium text-gray-200",children:[s,"/",t]}),i&&r.jsxs("span",{className:"text-xs text-gray-500",children:["namespace: ",i]}),b&&r.jsx("span",{className:"text-xs text-yellow-400 ml-2",children:" Editing"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[!m&&!b&&r.jsx("button",{onClick:()=>f(!0),className:"p-1.5 text-gray-400 hover:text-white hover:bg-gray-700 rounded",title:"Edit",children:r.jsx(v0,{size:14})}),b&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:d,className:"px-2 py-1 text-xs text-green-400 hover:bg-gray-700 rounded flex items-center gap-1",title:"Apply changes",children:[r.jsx(_0,{size:12})," Apply"]}),r.jsx("button",{onClick:()=>{p(e),f(!1)},className:"px-2 py-1 text-xs text-gray-400 hover:bg-gray-700 rounded",title:"Cancel",children:"Cancel"})]}),r.jsx("button",{onClick:u,className:"p-1.5 text-gray-400 hover:text-white hover:bg-gray-700 rounded",title:"Copy to clipboard",children:v?r.jsx(y0,{size:14,className:"text-green-400"}):r.jsx(zi,{size:14})}),r.jsx("button",{onClick:c,className:"p-1.5 text-gray-400 hover:text-white hover:bg-gray-700 rounded",title:"Download YAML",children:r.jsx(ac,{size:14})}),r.jsx("button",{onClick:()=>S(C=>!C),className:"p-1.5 text-gray-400 hover:text-white hover:bg-gray-700 rounded",title:w?"Exit fullscreen":"Fullscreen",children:w?r.jsx(b0,{size:14}):r.jsx(x0,{size:14})}),n&&r.jsx("button",{onClick:n,className:"p-1.5 text-gray-400 hover:text-red-400 hover:bg-gray-700 rounded ml-1",title:"Close",children:r.jsx(Ur,{size:14})})]})]}),r.jsx("div",{className:"flex-1 overflow-auto bg-gray-900",children:b?r.jsx("textarea",{ref:o,value:h,onChange:C=>p(C.target.value),className:"w-full h-full p-3 bg-gray-900 text-gray-200 font-mono text-xs resize-none focus:outline-none",spellCheck:!1,style:{tabSize:2}}):r.jsx("pre",{className:"p-3 font-mono text-xs leading-5 text-gray-200",children:g(h)})}),r.jsxs("div",{className:"flex items-center justify-between px-3 py-1 bg-gray-800 border-t border-gray-700 text-xs text-gray-500",children:[r.jsxs("span",{children:[h.split(`
`).length," lines"]}),r.jsx("span",{children:"YAML"})]})]})}function Q2({connectionId:e,sessionId:t,logId:s,mode:i="exec",onInput:a,onClose:n,title:m="Terminal",className:l=""}){const h=M.useRef(null),p=M.useRef(null),b=M.useRef(null),f=M.useRef(null);M.useEffect(()=>{if(!h.current)return;const o=new s0.Terminal({cursorBlink:!0,cursorStyle:"block",fontSize:13,fontFamily:'Consolas, "Courier New", monospace',theme:{background:"#1e1e1e",foreground:"#d4d4d4",cursor:"#d4d4d4",cursorAccent:"#1e1e1e",selection:"rgba(255, 255, 255, 0.3)",black:"#1e1e1e",red:"#f44747",green:"#6a9955",yellow:"#dcdcaa",blue:"#569cd6",magenta:"#c586c0",cyan:"#4ec9b0",white:"#d4d4d4",brightBlack:"#808080",brightRed:"#f44747",brightGreen:"#6a9955",brightYellow:"#dcdcaa",brightBlue:"#569cd6",brightMagenta:"#c586c0",brightCyan:"#4ec9b0",brightWhite:"#ffffff"},scrollback:1e4,convertEol:!0}),u=new r0.FitAddon;o.loadAddon(u),o.open(h.current),setTimeout(()=>{try{u.fit()}catch{}},100),p.current=o,b.current=u,i==="exec"&&a&&o.onData(d=>{a(d)});const c=()=>{try{u.fit()}catch{}};return window.addEventListener("resize",c),i==="logs"?o.writeln(`\x1B[36m--- Log stream started ---\x1B[0m\r
`):o.writeln(`\x1B[36m--- Terminal session started ---\x1B[0m\r
`),()=>{window.removeEventListener("resize",c),o.dispose()}},[i,a]),M.useEffect(()=>{if(!e)return;const o=window.location.protocol==="https:"?"wss:":"ws:",u=new WebSocket(`${o}//${window.location.host}`);return f.current=u,u.onmessage=c=>{var d,g,_,C;try{const j=JSON.parse(c.data);i==="exec"&&j.type==="k8s"&&((d=j.data)==null?void 0:d.event)==="execOut"&&j.data.connectionId===e&&j.data.id===t&&((g=p.current)==null||g.write(j.data.data)),i==="logs"&&j.type==="k8s"&&((_=j.data)==null?void 0:_.event)==="logLine"&&j.data.connectionId===e&&j.data.id===s&&((C=p.current)==null||C.write(j.data.line))}catch{}},u.onerror=()=>{var c;(c=p.current)==null||c.writeln("\x1B[31m--- WebSocket error ---\x1B[0m")},u.onclose=()=>{var c;(c=p.current)==null||c.writeln("\x1B[33m--- Connection closed ---\x1B[0m")},()=>{try{u.close()}catch{}}},[e,t,s,i]);const v=M.useCallback(o=>{var u;(u=p.current)==null||u.write(o)},[]),y=M.useCallback(o=>{var u;(u=p.current)==null||u.writeln(o)},[]),w=M.useCallback(()=>{var o;(o=p.current)==null||o.clear()},[]),S=M.useCallback(()=>{var o;try{(o=b.current)==null||o.fit()}catch{}},[]);return ge.useImperativeHandle(ge.useRef({write:v,writeln:y,clear:w,fit:S}),()=>({write:v,writeln:y,clear:w,fit:S}),[v,y,w,S]),r.jsxs("div",{className:`flex flex-col bg-[#1e1e1e] rounded overflow-hidden ${l}`,children:[r.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-[#2d2d2d] border-b border-[#3d3d3d]",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-gray-400",children:m}),i==="exec"&&t&&r.jsx("span",{className:"text-xs text-green-400",children:" Connected"}),i==="logs"&&s&&r.jsx("span",{className:"text-xs text-blue-400",children:" Streaming"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:w,className:"text-xs px-2 py-0.5 text-gray-400 hover:text-white hover:bg-[#3d3d3d] rounded",children:"Clear"}),n&&r.jsx("button",{onClick:n,className:"text-xs px-2 py-0.5 text-gray-400 hover:text-red-400 hover:bg-[#3d3d3d] rounded",children:"Close"})]})]}),r.jsx("div",{ref:h,className:"flex-1 p-1",style:{minHeight:"200px"}})]})}function Z2({pulse:e,loading:t=!1,onRefresh:s,onClose:i,theme:a,className:n=""}){if(!e)return r.jsx("div",{className:`flex items-center justify-center p-8 ${n}`,children:r.jsxs("div",{className:"text-center",children:[r.jsx(ii,{size:48,className:"mx-auto mb-4 opacity-50"}),r.jsx("p",{className:"text-sm",children:"Loading cluster pulse..."})]})});const{cluster:m,nodes:l,namespaces:h,pods:p,deployments:b,metrics:f,warnings:v}=e,y=({icon:S,label:o,value:u,subValue:c,color:d="blue"})=>r.jsx("div",{className:`p-4 rounded-lg ${(a==null?void 0:a.panel)||"bg-white"} border ${(a==null?void 0:a.border)||"border-gray-200"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg bg-${d}-100`,children:r.jsx(S,{size:20,className:`text-${d}-600`})}),r.jsxs("div",{children:[r.jsx("div",{className:`text-2xl font-bold ${(a==null?void 0:a.text)||"text-gray-900"}`,children:u}),r.jsx("div",{className:`text-xs ${(a==null?void 0:a.textMuted)||"text-gray-500"}`,children:o}),c&&r.jsx("div",{className:`text-xs ${(a==null?void 0:a.textFaint)||"text-gray-400"}`,children:c})]})]})}),w=({value:S,max:o,color:u="green"})=>{const c=o>0?Math.round(S/o*100):0;return r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full bg-${u}-500`,style:{width:`${c}%`}})})};return r.jsxs("div",{className:`p-4 overflow-auto ${n}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ii,{size:20,className:"text-blue-500"}),r.jsxs("div",{children:[r.jsx("h2",{className:`text-lg font-semibold ${(a==null?void 0:a.text)||"text-gray-900"}`,children:"Cluster Pulse"}),r.jsxs("div",{className:`text-xs ${(a==null?void 0:a.textMuted)||"text-gray-500"}`,children:["Context: ",m==null?void 0:m.context," | K8s ",m==null?void 0:m.version]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:s,disabled:t,className:`p-2 rounded ${(a==null?void 0:a.button)||"text-gray-600 hover:bg-gray-100"}`,title:"Refresh",children:r.jsx(js,{size:16,className:t?"animate-spin":""})}),i&&r.jsx("button",{onClick:i,className:`px-3 py-1 text-sm rounded ${(a==null?void 0:a.button)||"text-gray-600 hover:bg-gray-100"}`,children:"Close"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[r.jsx(y,{icon:hi,label:"Nodes",value:`${l==null?void 0:l.ready}/${l==null?void 0:l.total}`,subValue:(l==null?void 0:l.notReady)>0?`${l.notReady} not ready`:"All healthy",color:(l==null?void 0:l.notReady)>0?"yellow":"green"}),r.jsx(y,{icon:Wl,label:"Pods",value:(p==null?void 0:p.running)||0,subValue:`${p==null?void 0:p.total} total`,color:"blue"}),r.jsx(y,{icon:os,label:"Deployments",value:`${b==null?void 0:b.ready}/${b==null?void 0:b.total}`,color:(b==null?void 0:b.ready)===(b==null?void 0:b.total)?"green":"yellow"}),r.jsx(y,{icon:os,label:"Namespaces",value:h||0,color:"purple"})]}),r.jsxs("div",{className:`p-4 rounded-lg ${(a==null?void 0:a.panel)||"bg-white"} border ${(a==null?void 0:a.border)||"border-gray-200"} mb-6`,children:[r.jsx("h3",{className:`text-sm font-medium mb-3 ${(a==null?void 0:a.text)||"text-gray-900"}`,children:"Pod Status"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Md,{size:14,className:"text-green-500"}),r.jsx("span",{className:`text-sm ${(a==null?void 0:a.text)||"text-gray-700"}`,children:"Running"})]}),r.jsx("span",{className:`text-sm font-medium ${(a==null?void 0:a.text)||"text-gray-900"}`,children:(p==null?void 0:p.running)||0})]}),r.jsx(w,{value:(p==null?void 0:p.running)||0,max:(p==null?void 0:p.total)||1,color:"green"}),r.jsxs("div",{className:"flex items-center justify-between mt-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ua,{size:14,className:"text-yellow-500"}),r.jsx("span",{className:`text-sm ${(a==null?void 0:a.text)||"text-gray-700"}`,children:"Pending"})]}),r.jsx("span",{className:`text-sm font-medium ${(a==null?void 0:a.text)||"text-gray-900"}`,children:(p==null?void 0:p.pending)||0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(S0,{size:14,className:"text-red-500"}),r.jsx("span",{className:`text-sm ${(a==null?void 0:a.text)||"text-gray-700"}`,children:"Failed"})]}),r.jsx("span",{className:`text-sm font-medium ${(a==null?void 0:a.text)||"text-gray-900"}`,children:(p==null?void 0:p.failed)||0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Md,{size:14,className:"text-blue-500"}),r.jsx("span",{className:`text-sm ${(a==null?void 0:a.text)||"text-gray-700"}`,children:"Succeeded"})]}),r.jsx("span",{className:`text-sm font-medium ${(a==null?void 0:a.text)||"text-gray-900"}`,children:(p==null?void 0:p.succeeded)||0})]})]})]}),f&&r.jsxs("div",{className:`p-4 rounded-lg ${(a==null?void 0:a.panel)||"bg-white"} border ${(a==null?void 0:a.border)||"border-gray-200"} mb-6`,children:[r.jsx("h3",{className:`text-sm font-medium mb-3 ${(a==null?void 0:a.text)||"text-gray-900"}`,children:"Cluster Resources"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Gf,{size:20,className:"text-purple-500"}),r.jsxs("div",{children:[r.jsx("div",{className:`text-lg font-bold ${(a==null?void 0:a.text)||"text-gray-900"}`,children:f.cpu}),r.jsx("div",{className:`text-xs ${(a==null?void 0:a.textMuted)||"text-gray-500"}`,children:"CPU Usage"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(w0,{size:20,className:"text-blue-500"}),r.jsxs("div",{children:[r.jsx("div",{className:`text-lg font-bold ${(a==null?void 0:a.text)||"text-gray-900"}`,children:f.memory}),r.jsx("div",{className:`text-xs ${(a==null?void 0:a.textMuted)||"text-gray-500"}`,children:"Memory Usage"})]})]})]})]}),v&&v.length>0&&r.jsxs("div",{className:`p-4 rounded-lg ${(a==null?void 0:a.panel)||"bg-white"} border ${(a==null?void 0:a.border)||"border-gray-200"}`,children:[r.jsxs("h3",{className:`text-sm font-medium mb-3 flex items-center gap-2 ${(a==null?void 0:a.text)||"text-gray-900"}`,children:[r.jsx(C0,{size:16,className:"text-yellow-500"}),"Recent Warnings (",v.length,")"]}),r.jsx("div",{className:"space-y-2 max-h-48 overflow-auto",children:v.map((S,o)=>r.jsxs("div",{className:`text-xs p-2 rounded ${(a==null?void 0:a.inputDark)||"bg-gray-50"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"font-medium text-yellow-600",children:S.reason}),r.jsx("span",{className:(a==null?void 0:a.textFaint)||"text-gray-400",children:S.age})]}),r.jsx("div",{className:(a==null?void 0:a.textMuted)||"text-gray-600",children:S.object}),r.jsx("div",{className:`mt-1 ${(a==null?void 0:a.text)||"text-gray-700"}`,children:S.message})]},o))})]})]})}const Hf={dark:{bg:"bg-gray-900",sidebar:"bg-gray-850",header:"bg-gray-800",panel:"bg-gray-800",border:"border-gray-700",text:"text-gray-200",textMuted:"text-gray-400",textFaint:"text-gray-500",input:"bg-gray-800 border-gray-700 text-gray-200",inputDark:"bg-gray-900 border-gray-700 text-white",hover:"hover:bg-gray-800",active:"bg-blue-600 text-white",button:"text-gray-400 hover:text-white hover:bg-gray-700"},light:{bg:"bg-white",sidebar:"bg-gray-50",header:"bg-gray-100",panel:"bg-white",border:"border-gray-200",text:"text-gray-900",textMuted:"text-gray-600",textFaint:"text-gray-500",input:"bg-white border-gray-300 text-gray-900",inputDark:"bg-gray-50 border-gray-300 text-gray-900",hover:"hover:bg-gray-100",active:"bg-blue-600 text-white",button:"text-gray-600 hover:text-gray-900 hover:bg-gray-200"}},ew={workloads:{label:"Workloads",icon:Wl,resources:["pods","deployments","statefulsets","daemonsets","replicasets","jobs","cronjobs"]},network:{label:"Network",icon:Wn,resources:["services","ingresses","endpoints"]},config:{label:"Config",icon:xu,resources:["configmaps","secrets","serviceaccounts"]},storage:{label:"Storage",icon:cc,resources:["persistentvolumeclaims","persistentvolumes"]},cluster:{label:"Cluster",icon:hi,resources:["nodes","namespaces","events"]}},tw={pods:Wl,deployments:os,services:Wn,configmaps:xu,secrets:N0,statefulsets:Hi,daemonsets:hi,jobs:E0,cronjobs:Ua,ingresses:Wn,persistentvolumeclaims:cc,persistentvolumes:cc,nodes:hi,namespaces:os,events:ii,replicasets:os,endpoints:Wn,serviceaccounts:j0};function sw({connectionId:e}){const[t,s]=M.useState([]),[i,a]=M.useState(""),[n,m]=M.useState("disconnected"),[l,h]=M.useState(!1),[p,b]=M.useState([]),[f,v]=M.useState(""),[y,w]=M.useState([]),[S,o]=M.useState("default"),[u,c]=M.useState(!1),[d,g]=M.useState("pods"),[_,C]=M.useState([]),[j,x]=M.useState(!1),[E,D]=M.useState(-1),[A,T]=M.useState({workloads:!0}),[R,q]=M.useState(null),[G,z]=M.useState(null),[W,N]=M.useState(!1),[L,I]=M.useState(""),[U,se]=M.useState(null),[ce,Q]=M.useState(!1),[re,pe]=M.useState(5e3),[k,F]=M.useState([]),[Y,V]=M.useState(null),[O,H]=M.useState(!1),[Z,ue]=M.useState([]),[me,ye]=M.useState([]),[P,B]=M.useState(null),[K,te]=M.useState(!1),[de,le]=M.useState(null),[ae,_e]=M.useState(!1),[be,Le]=M.useState(!1),[Te,Xe]=M.useState(null),[as,Ke]=M.useState(!1),[He,Ce]=M.useState([]),[xt,lr]=M.useState(()=>{try{return localStorage.getItem("unicon_k8s_theme")||"light"}catch{return"light"}}),he=Hf[xt]||Hf.dark,or=()=>{const X=xt==="dark"?"light":"dark";lr(X);try{localStorage.setItem("unicon_k8s_theme",X)}catch{}},Xs=M.useMemo(()=>(t||[]).filter(X=>X.type==="k8s"),[t]),Js=M.useMemo(()=>Xs.find(X=>X.id===i),[Xs,i]);M.useEffect(()=>{(async()=>{const X=await Nn();s(X.connections||[]);const ne=(X.connections||[]).filter(Mt=>Mt.type==="k8s"),Me=ne.find(Mt=>Mt.id===e)||ne[0];Me&&a(Me.id)})()},[e]);const cr=M.useCallback(async()=>{if(i){h(!0);try{await hs(i),m("connected"),await ur(),await Oe(),await Ne("pods")}catch(X){console.error("Connect failed:",X)}finally{h(!1)}}},[i]),Ti=M.useCallback(async X=>{var ne;if(a(X),n==="disconnected"){h(!0);try{await hs(X),m("connected");const je=await Ae(X,"contexts",{}),Me=(je==null?void 0:je.data)||je;b((Me.contexts||[]).map(oa=>oa.name||oa)),v(Me.current||"");const Mt=await Ae(X,"namespaces",{}),Ri=(Mt==null?void 0:Mt.data)||Mt;w(Ri.namespaces||[]),(ne=Ri.namespaces)!=null&&ne.length&&o(Ri.namespaces.includes("default")?"default":Ri.namespaces[0]),await Kt(X,"pods","default")}catch(je){console.error("Quick connect failed:",je)}finally{h(!1)}}},[n]),ns=M.useCallback(async()=>{if(i){h(!0);try{await Ni(i),m("disconnected"),b([]),w([]),C([]),q(null),z(null)}finally{h(!1)}}},[i]),ur=M.useCallback(async()=>{if(!i||n!=="connected")return;const X=await Ae(i,"contexts",{}),ne=(X==null?void 0:X.data)||X;b((ne.contexts||[]).map(je=>je.name||je)),v(ne.current||"")},[i,n]),J=M.useCallback(async X=>{!i||n!=="connected"||(await Ae(i,"useContext",{name:X}),v(X),await Oe(),await Ne(d))},[i,n,d]),Oe=M.useCallback(async()=>{var je;if(!i||n!=="connected")return;const X=await Ae(i,"namespaces",{}),ne=(X==null?void 0:X.data)||X;w(ne.namespaces||[]),(je=ne.namespaces)!=null&&je.length&&!ne.namespaces.includes(S)&&o(ne.namespaces[0])},[i,n,S]),Ne=M.useCallback(async(X,ne=S)=>{if(!(!i||n!=="connected")){x(!0),D(-1);try{const je=await Ae(i,"listResources",{resourceType:X,namespace:u?void 0:ne}),Me=(je==null?void 0:je.data)||je;C(Me.items||[])}catch(je){console.error("Load resources failed:",je),C([])}finally{x(!1)}}},[i,n,S,u]),Kt=async(X,ne,je)=>{x(!0);try{const Me=await Ae(X,"listResources",{resourceType:ne,namespace:je}),Mt=(Me==null?void 0:Me.data)||Me;C(Mt.items||[])}catch{C([])}finally{x(!1)}},Pe=M.useCallback(X=>{g(X),Ne(X)},[Ne]),ps=M.useCallback(X=>{o(X),Ne(d,X)},[d,Ne]),$=M.useCallback(()=>{c(X=>{const ne=!X;return Ne(d,ne?void 0:S),ne})},[d,S,Ne]),ee=M.useCallback(async(X,ne)=>{var je,Me,Mt,Ri,oa;if(!(!i||!ne))switch(X){case"describe":{try{const st=await Ae(i,"describe",{resourceType:d,name:ne.name,namespace:ne.namespace||S}),ca=(st==null?void 0:st.data)||st;q({yaml:ca.yaml,name:ne.name,type:d,namespace:ne.namespace||S})}catch(st){console.error("Describe failed:",st)}break}case"logs":{try{const st=await Ae(i,"logsStart",{namespace:ne.namespace||S,pod:ne.name,container:(je=ne.containers)==null?void 0:je[0],tailLines:500}),ca=(st==null?void 0:st.data)||st;z({mode:"logs",logId:ca.id,pod:ne.name,container:(Me=ne.containers)==null?void 0:Me[0]})}catch(st){console.error("Logs failed:",st)}break}case"shell":{try{const st=await Ae(i,"execOpen",{namespace:ne.namespace||S,pod:ne.name,container:(Mt=ne.containers)==null?void 0:Mt[0],command:["/bin/sh"],tty:!0}),ca=(st==null?void 0:st.data)||st;z({mode:"exec",sessionId:ca.id,pod:ne.name,container:(Ri=ne.containers)==null?void 0:Ri[0]})}catch(st){console.error("Exec failed:",st)}break}case"scale":{se({name:ne.name,namespace:ne.namespace||S,currentReplicas:parseInt(((oa=ne.ready)==null?void 0:oa.split("/")[1])||"0",10)});break}case"restart":{if(confirm(`Restart deployment ${ne.name}?`))try{await Ae(i,"restart",{name:ne.name,namespace:ne.namespace||S}),setTimeout(()=>Ne(d),1e3)}catch(st){console.error("Restart failed:",st)}break}case"delete":{if(confirm(`Delete ${d.slice(0,-1)} ${ne.name}?`))try{await Ae(i,"delete",{resourceType:d,name:ne.name,namespace:ne.namespace||S}),setTimeout(()=>Ne(d),500)}catch(st){console.error("Delete failed:",st)}break}case"portForward":{V({pod:ne.name,mode:"create"});break}case"nodeAction":{Xe({name:ne.name});break}}},[i,d,S,Ne]),ie=M.useCallback(async X=>{if(!(!U||!i))try{await Ae(i,"scale",{resourceType:d,name:U.name,namespace:U.namespace,replicas:X}),se(null),setTimeout(()=>Ne(d),1e3)}catch(ne){console.error("Scale failed:",ne)}},[i,d,U,Ne]),we=M.useCallback(async()=>{if(!(!G||!i)){try{G.mode==="logs"&&G.logId?await Ae(i,"logsStop",{id:G.logId}):G.mode==="exec"&&G.sessionId&&await Ae(i,"execClose",{id:G.sessionId})}catch{}z(null)}},[i,G]),ve=M.useCallback(async X=>{if(!(!(G!=null&&G.sessionId)||!i))try{await Ae(i,"execInput",{id:G.sessionId,data:X})}catch{}},[i,G]);M.useEffect(()=>{if(!ce||n!=="connected")return;const X=setInterval(()=>{Ne(d),O&&gt()},re);return()=>clearInterval(X)},[ce,n,d,re,O]);const Ee=M.useCallback(async()=>{var X;if(!(!i||n!=="connected"))try{const ne=await Ae(i,"portForwards",{});F(((X=ne==null?void 0:ne.data)==null?void 0:X.forwards)||[])}catch{}},[i,n]),We=M.useCallback(async(X,ne,je)=>{if(i)try{await Ae(i,"portForwardStart",{namespace:S,pod:X,podPort:parseInt(ne,10),localPort:parseInt(je,10)||void 0}),V(null),setTimeout(Ee,500)}catch(Me){console.error("Port forward failed:",Me)}},[i,S,Ee]),Fe=M.useCallback(async X=>{if(i)try{await Ae(i,"portForwardStop",{id:X}),setTimeout(Ee,300)}catch{}},[i,Ee]),gt=M.useCallback(async()=>{var X,ne;if(!(!i||n!=="connected"))try{if(d==="pods"||d==="nodes"){const je=d==="nodes"?await Ae(i,"nodeMetrics",{}):await Ae(i,"podMetrics",{namespace:u?void 0:S});d==="nodes"?ye(((X=je==null?void 0:je.data)==null?void 0:X.metrics)||[]):ue(((ne=je==null?void 0:je.data)==null?void 0:ne.metrics)||[])}}catch{}},[i,n,d,S,u]);M.useEffect(()=>{O&&n==="connected"&&gt()},[O,d,S,n]),M.useCallback(async(X,ne)=>{if(!ne.containers||ne.containers.length<=1){ee(X,ne);return}B({action:X,item:ne})},[ee]);const Wt=M.useCallback(async X=>{if(!P)return;const{action:ne,item:je}=P,Me={...je,containers:[X]};B(null),ee(ne,Me)},[P,ee]);M.useEffect(()=>{n==="connected"&&Ee()},[n,Ee]);const Ot=M.useCallback(async()=>{if(!(!i||n!=="connected")){_e(!0);try{const X=await Ae(i,"pulse",{});le((X==null?void 0:X.data)||null)}catch(X){console.error("Pulse load failed:",X)}finally{_e(!1)}}},[i,n]);M.useEffect(()=>{K&&n==="connected"&&Ot()},[K,n]);const gs=M.useCallback(async(X,ne,je={})=>{if(i)try{let Me;switch(X){case"cordon":Me=await Ae(i,"cordonNode",{name:ne});break;case"uncordon":Me=await Ae(i,"uncordonNode",{name:ne});break;case"drain":Me=await Ae(i,"drainNode",{name:ne,...je});break}return Xe(null),setTimeout(()=>Ne("nodes"),500),Me}catch(Me){console.error(`Node ${X} failed:`,Me),alert(`Node ${X} failed: ${Me.message}`)}},[i,Ne]);M.useCallback(async X=>{if(i)try{const ne=await Ae(i,"applyYaml",{yaml:X});return q(null),Le(!1),setTimeout(()=>Ne(d),500),ne}catch(ne){console.error("Apply YAML failed:",ne),alert(`Apply failed: ${ne.message}`)}},[i,d,Ne]);const tt=M.useCallback(async()=>{var X;if(!(!i||n!=="connected"))try{const ne=await Ae(i,"allResourceTypes",{});Ce(((X=ne==null?void 0:ne.data)==null?void 0:X.resourceTypes)||[])}catch{}},[i,n]);M.useEffect(()=>{const X=ne=>{if(ne.key===":"&&!ne.target.matches("input, textarea")){ne.preventDefault(),N(!0);return}if(ne.key==="r"&&ne.ctrlKey){ne.preventDefault(),Ne(d);return}if(ne.key==="a"&&ne.ctrlKey&&n==="connected"){ne.preventDefault(),tt(),Ke(!0);return}ne.target.matches("input, textarea")||(ne.key==="1"&&Pe("pods"),ne.key==="2"&&Pe("deployments"),ne.key==="3"&&Pe("services"),ne.key==="4"&&Pe("configmaps"),ne.key==="5"&&Pe("secrets"),ne.key==="6"&&Pe("nodes"),ne.key==="p"&&ne.shiftKey&&te(je=>!je))};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)},[d,Ne,Pe]);const Qs=M.useCallback(X=>{const ne=X.trim().toLowerCase().split(/\s+/),[je,...Me]=ne;switch(je){case"pods":case"po":Pe("pods");break;case"deployments":case"deploy":Pe("deployments");break;case"services":case"svc":Pe("services");break;case"configmaps":case"cm":Pe("configmaps");break;case"secrets":case"sec":Pe("secrets");break;case"nodes":case"no":Pe("nodes");break;case"events":case"ev":Pe("events");break;case"jobs":Pe("jobs");break;case"cronjobs":case"cj":Pe("cronjobs");break;case"ingresses":case"ing":Pe("ingresses");break;case"statefulsets":case"sts":Pe("statefulsets");break;case"daemonsets":case"ds":Pe("daemonsets");break;case"pvc":Pe("persistentvolumeclaims");break;case"pv":Pe("persistentvolumes");break;case"sa":Pe("serviceaccounts");break;case"ep":Pe("endpoints");break;case"rs":Pe("replicasets");break;case"ns":Me[0]&&y.includes(Me[0])&&ps(Me[0]);break;case"ctx":Me[0]&&p.includes(Me[0])&&J(Me[0]);break;case"q":case"quit":ns();break;case"pulse":te(!0);break;case"pf":V({mode:"list"});break;case"all":tt(),Ke(!0);break}N(!1),I("")},[Pe,ps,J,ns,y,p,tt]),Di=X=>{T(ne=>({...ne,[X]:!ne[X]}))};return r.jsxs("div",{className:`flex h-full ${he.bg} ${he.text} -m-4 rounded-lg overflow-hidden`,children:[r.jsxs("div",{className:`w-56 flex-shrink-0 ${he.sidebar} border-r ${he.border} flex flex-col`,children:[r.jsxs("div",{className:`p-3 border-b ${he.border}`,children:[r.jsxs("select",{value:i,onChange:X=>Ti(X.target.value),className:`w-full px-2 py-1.5 text-sm ${he.input} border rounded focus:outline-none focus:border-blue-500`,children:[r.jsx("option",{value:"",children:"Select cluster..."}),Xs.map(X=>r.jsx("option",{value:X.id,children:X.name},X.id))]}),i&&r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[n==="disconnected"?r.jsxs("button",{onClick:cr,disabled:l,className:"flex-1 px-2 py-1 text-xs bg-green-600 hover:bg-green-700 text-white rounded flex items-center justify-center gap-1",children:[l?r.jsx(js,{size:12,className:"animate-spin"}):r.jsx(Gl,{size:12}),"Connect"]}):r.jsxs("button",{onClick:ns,disabled:l,className:"flex-1 px-2 py-1 text-xs bg-red-600 hover:bg-red-700 text-white rounded flex items-center justify-center gap-1",children:[r.jsx(Kl,{size:12})," Disconnect"]}),r.jsx("span",{className:`w-2 h-2 rounded-full ${n==="connected"?"bg-green-500":"bg-gray-500"}`})]})]}),n==="connected"&&r.jsxs("div",{className:`p-3 border-b ${he.border} space-y-2`,children:[r.jsxs("div",{children:[r.jsx("label",{className:`block text-xs ${he.textFaint} mb-1`,children:"Context"}),r.jsx("select",{value:f,onChange:X=>J(X.target.value),className:`w-full px-2 py-1 text-xs ${he.input} border rounded`,children:p.map(X=>r.jsx("option",{value:X,children:X},X))})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("label",{className:`text-xs ${he.textFaint}`,children:"Namespace"}),r.jsx("button",{onClick:$,className:`text-xs px-1.5 rounded ${u?"bg-blue-600 text-white":`${he.textMuted} hover:${he.text}`}`,children:"All"})]}),r.jsx("select",{value:S,onChange:X=>ps(X.target.value),disabled:u,className:`w-full px-2 py-1 text-xs ${he.input} border rounded disabled:opacity-50`,children:y.map(X=>r.jsx("option",{value:X,children:X},X))})]})]}),n==="connected"&&r.jsx("div",{className:"flex-1 overflow-auto py-2",children:Object.entries(ew).map(([X,ne])=>r.jsxs("div",{className:"mb-1",children:[r.jsxs("button",{onClick:()=>Di(X),className:`w-full px-3 py-1 flex items-center gap-2 text-xs ${he.textMuted} ${he.hover}`,children:[A[X]?r.jsx(Su,{size:12}):r.jsx(Kf,{size:12}),r.jsx(ne.icon,{size:12}),ne.label]}),A[X]&&r.jsx("div",{className:"ml-4",children:ne.resources.map(je=>{const Me=tw[je]||Wl;return r.jsxs("button",{onClick:()=>Pe(je),className:`w-full px-3 py-1 flex items-center gap-2 text-xs rounded-l ${d===je?he.active:`${he.text} ${he.hover}`}`,children:[r.jsx(Me,{size:12}),je]},je)})})]},X))}),n==="connected"&&r.jsxs("button",{onClick:()=>te(X=>!X),className:`mx-2 mb-2 flex items-center justify-center gap-1 px-2 py-1.5 text-xs rounded ${K?"bg-red-500 text-white":he.button}`,title:"Cluster Pulse (Shift+P)",children:[r.jsx(k0,{size:14}),"Pulse"]}),r.jsxs("div",{className:`p-2 border-t ${he.border} space-y-1`,children:[r.jsx("div",{className:`text-xs font-medium ${he.textMuted} mb-2`,children:"Quick Actions"}),r.jsxs("button",{onClick:()=>N(!0),className:`w-full flex items-center justify-between px-2 py-1.5 text-xs rounded ${he.button}`,title:"Open command palette",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx($a,{size:12})," Command"]}),r.jsx("kbd",{className:`px-1.5 py-0.5 text-[10px] rounded ${xt==="dark"?"bg-gray-700":"bg-gray-200"}`,children:":"})]}),r.jsxs("button",{onClick:()=>Ne(d),className:`w-full flex items-center justify-between px-2 py-1.5 text-xs rounded ${he.button}`,title:"Refresh resources",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(js,{size:12})," Refresh"]}),r.jsx("kbd",{className:`px-1.5 py-0.5 text-[10px] rounded ${xt==="dark"?"bg-gray-700":"bg-gray-200"}`,children:"Ctrl+R"})]}),r.jsxs("button",{onClick:()=>{tt(),Ke(!0)},className:`w-full flex items-center justify-between px-2 py-1.5 text-xs rounded ${he.button}`,title:"Browse all resource types",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(os,{size:12})," All Resources"]}),r.jsx("kbd",{className:`px-1.5 py-0.5 text-[10px] rounded ${xt==="dark"?"bg-gray-700":"bg-gray-200"}`,children:"Ctrl+A"})]}),r.jsx("div",{className:`my-2 border-t ${he.border}`}),r.jsxs("button",{onClick:or,className:`w-full flex items-center justify-center gap-2 px-2 py-2 text-sm rounded-md ${xt==="dark"?"bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-400":"bg-gray-700/10 hover:bg-gray-700/20 text-gray-700"} transition-colors`,title:"Toggle theme",children:[xt==="dark"?r.jsx(A0,{size:14}):r.jsx(T0,{size:14}),xt==="dark"?"Light Mode":"Dark Mode"]})]})]}),r.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[r.jsxs("div",{className:`flex items-center justify-between px-4 py-2 ${he.header} border-b ${he.border}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("h2",{className:"text-sm font-medium",children:d.charAt(0).toUpperCase()+d.slice(1)}),!u&&S&&r.jsxs("span",{className:`text-xs ${he.textFaint}`,children:["in ",S]}),u&&r.jsx("span",{className:"text-xs text-blue-400",children:"all namespaces"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>Q(X=>!X),className:`flex items-center gap-1 px-2 py-1 text-xs rounded ${ce?"bg-green-600 text-white":he.button}`,title:ce?`Auto-refresh ON (${re/1e3}s)`:"Auto-refresh OFF",children:[ce?r.jsx(D0,{size:14}):r.jsx(R0,{size:14}),"Auto"]}),(d==="pods"||d==="nodes")&&r.jsxs("button",{onClick:()=>H(X=>!X),className:`flex items-center gap-1 px-2 py-1 text-xs rounded ${O?"bg-purple-600 text-white":he.button}`,title:"Toggle metrics",children:[r.jsx(Gf,{size:14}),"Metrics"]}),k.length>0&&r.jsxs("button",{onClick:()=>V({mode:"list"}),className:"flex items-center gap-1 px-2 py-1 text-xs bg-blue-600 text-white rounded",title:"Active port forwards",children:[r.jsx(qf,{size:14}),k.length," PF"]}),Js&&r.jsx(ar,{connection:Js,status:n})]})]}),r.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:n!=="connected"?r.jsx("div",{className:`flex-1 flex items-center justify-center ${he.textFaint}`,children:r.jsxs("div",{className:"text-center",children:[r.jsx(hi,{size:48,className:"mx-auto mb-4 opacity-50"}),r.jsx("p",{className:"text-lg mb-2",children:"No cluster connected"}),r.jsx("p",{className:"text-sm",children:"Select a Kubernetes connection and click Connect"}),r.jsxs("div",{className:`mt-4 p-4 rounded ${he.panel} border ${he.border} text-left text-xs max-w-md`,children:[r.jsx("p",{className:"font-medium mb-2",children:"Configuration:"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[r.jsx("li",{children:"Go to Connections  New Connection"}),r.jsxs("li",{children:["Select type: ",r.jsx("strong",{children:"Kubernetes"})]}),r.jsx("li",{children:"Choose kubeconfig source:"}),r.jsxs("ul",{className:"ml-6 list-disc",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Default"})," - uses ~/.kube/config"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Path"})," - specify custom path"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Inline"})," - paste kubeconfig YAML"]})]}),r.jsx("li",{children:"Optionally set context and default namespace"}),r.jsx("li",{children:"Save and connect"})]})]})]})}):K?r.jsx(Z2,{pulse:de,loading:ae,onRefresh:Ot,onClose:()=>te(!1),theme:he,className:"flex-1"}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`flex-1 min-h-0 ${R||G?"h-1/2":""}`,children:r.jsx(X2,{resourceType:d,items:_,loading:j,selectedIndex:E,onSelect:D,onAction:ee,onRefresh:()=>Ne(d),theme:he,className:"h-full"})}),R&&r.jsx("div",{className:`h-1/2 border-t ${he.border}`,children:r.jsx(J2,{yaml:R.yaml,resourceName:R.name,resourceType:R.type,namespace:R.namespace,onClose:()=>q(null),readOnly:!0,className:"h-full"})}),G&&r.jsx("div",{className:`h-1/2 border-t ${he.border}`,children:r.jsx(Q2,{connectionId:i,sessionId:G.sessionId,logId:G.logId,mode:G.mode,onInput:ve,onClose:we,title:`${G.mode==="logs"?"Logs":"Shell"}: ${G.pod}`,className:"h-full"})})]})})]}),W&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-start justify-center pt-32 z-50",children:r.jsxs("div",{className:`${he.panel} ${he.text} rounded-lg shadow-xl w-96 overflow-hidden border ${he.border}`,children:[r.jsxs("div",{className:`flex items-center px-3 py-2 border-b ${he.border}`,children:[r.jsx("span",{className:`${he.textMuted} mr-2`,children:":"}),r.jsx("input",{type:"text",value:L,onChange:X=>I(X.target.value),onKeyDown:X=>{X.key==="Enter"&&Qs(L),X.key==="Escape"&&(N(!1),I(""))},placeholder:"pods, deploy, svc, ns <name>, ctx <name>, q",className:`flex-1 bg-transparent ${he.text} focus:outline-none`,autoFocus:!0})]}),r.jsxs("div",{className:`p-2 text-xs ${he.textFaint}`,children:[r.jsx("div",{children:"pods/po, deploy, svc, cm, sec, no, events, jobs, cronjobs, ing"}),r.jsx("div",{children:"ns <name> | ctx <name> | pulse | pf | all | q"})]})]})}),U&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:`${he.panel} ${he.text} rounded-lg shadow-xl w-80 p-4 border ${he.border}`,children:[r.jsxs("h3",{className:"text-sm font-medium mb-4",children:["Scale ",U.name]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:`block text-xs ${he.textMuted} mb-1`,children:"Replicas"}),r.jsx("input",{type:"number",min:"0",defaultValue:U.currentReplicas,className:`w-full px-3 py-2 ${he.inputDark} border rounded`,id:"scale-input"})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>se(null),className:`px-3 py-1.5 text-sm ${he.textMuted}`,children:"Cancel"}),r.jsx("button",{onClick:()=>ie(parseInt(document.getElementById("scale-input").value,10)),className:"px-3 py-1.5 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded",children:"Scale"})]})]})}),Y&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:`${he.panel} ${he.text} rounded-lg shadow-xl w-96 p-4 border ${he.border}`,children:[Y.mode==="list"?r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"text-sm font-medium mb-4",children:"Active Port Forwards"}),r.jsxs("div",{className:"space-y-2 max-h-64 overflow-auto mb-4",children:[k.map(X=>r.jsxs("div",{className:`flex items-center justify-between p-2 ${he.inputDark} rounded`,children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm",children:X.pod}),r.jsxs("div",{className:`text-xs ${he.textMuted}`,children:["localhost:",X.localPort,"  ",X.podPort]})]}),r.jsx("button",{onClick:()=>Fe(X.id),className:`px-2 py-1 text-xs text-red-500 ${he.hover} rounded`,children:"Stop"})]},X.id)),k.length===0&&r.jsx("div",{className:`text-sm ${he.textFaint} text-center py-4`,children:"No active port forwards"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("h3",{className:"text-sm font-medium mb-4",children:["Port Forward to ",Y.pod]}),r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:`block text-xs ${he.textMuted} mb-1`,children:"Pod Port"}),r.jsx("input",{type:"number",id:"pf-pod-port",placeholder:"80",className:`w-full px-3 py-2 ${he.inputDark} border rounded`})]}),r.jsxs("div",{children:[r.jsx("label",{className:`block text-xs ${he.textMuted} mb-1`,children:"Local Port (optional)"}),r.jsx("input",{type:"number",id:"pf-local-port",placeholder:"Same as pod port",className:`w-full px-3 py-2 ${he.inputDark} border rounded`})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>V(null),className:`px-3 py-1.5 text-sm ${he.textMuted}`,children:"Close"}),Y.mode!=="list"&&r.jsx("button",{onClick:()=>We(Y.pod,document.getElementById("pf-pod-port").value,document.getElementById("pf-local-port").value),className:"px-3 py-1.5 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded",children:"Start"})]})]})}),P&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:`${he.panel} ${he.text} rounded-lg shadow-xl w-80 p-4 border ${he.border}`,children:[r.jsx("h3",{className:"text-sm font-medium mb-4",children:"Select Container"}),r.jsx("div",{className:"space-y-2 max-h-64 overflow-auto mb-4",children:P.item.containers.map(X=>r.jsx("button",{onClick:()=>Wt(X),className:`w-full text-left px-3 py-2 ${he.inputDark} ${he.hover} rounded text-sm`,children:X},X))}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:()=>B(null),className:`px-3 py-1.5 text-sm ${he.textMuted}`,children:"Cancel"})})]})}),as&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:`${he.panel} ${he.text} rounded-lg shadow-xl w-96 max-h-[80vh] flex flex-col border ${he.border}`,children:[r.jsxs("div",{className:`px-4 py-3 border-b ${he.border} flex items-center justify-between`,children:[r.jsx("h3",{className:"text-sm font-medium",children:"All Resource Types (Ctrl+A)"}),r.jsx("button",{onClick:()=>Ke(!1),className:he.textMuted,children:r.jsx(Ur,{size:16})})]}),r.jsx("div",{className:"flex-1 overflow-auto p-2",children:He.map(X=>r.jsxs("button",{onClick:()=>{Pe(X.name),Ke(!1)},className:`w-full text-left px-3 py-2 ${he.hover} rounded text-sm flex items-center justify-between`,children:[r.jsx("span",{children:X.name}),r.jsx("span",{className:`text-xs ${he.textFaint}`,children:X.namespaced?"namespaced":"cluster"})]},X.name))})]})}),Te&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:`${he.panel} ${he.text} rounded-lg shadow-xl w-96 p-4 border ${he.border}`,children:[r.jsxs("h3",{className:"text-sm font-medium mb-4",children:["Node: ",Te.name]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("button",{onClick:()=>gs("cordon",Te.name),className:`w-full text-left px-3 py-2 ${he.inputDark} ${he.hover} rounded text-sm flex items-center gap-2`,children:[r.jsx(L0,{size:16,className:"text-yellow-500"}),"Cordon (mark unschedulable)"]}),r.jsxs("button",{onClick:()=>gs("uncordon",Te.name),className:`w-full text-left px-3 py-2 ${he.inputDark} ${he.hover} rounded text-sm flex items-center gap-2`,children:[r.jsx(Ff,{size:16,className:"text-green-500"}),"Uncordon (mark schedulable)"]}),r.jsxs("button",{onClick:()=>{confirm(`Drain node ${Te.name}? This will evict all pods.`)&&gs("drain",Te.name,{ignoreDaemonSets:!0})},className:`w-full text-left px-3 py-2 ${he.inputDark} ${he.hover} rounded text-sm flex items-center gap-2`,children:[r.jsx(Yi,{size:16,className:"text-red-500"}),"Drain (evict pods & cordon)"]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:()=>Xe(null),className:`px-3 py-1.5 text-sm ${he.textMuted}`,children:"Cancel"})})]})})]})}async function mw(e,t){const s=await fetch(`/unicon/api/templates/${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})}),i=await s.json();if(!s.ok||(i==null?void 0:i.success)===!1)throw new Error((i==null?void 0:i.error)||"server error");return i.template}async function pw(e){const t=await fetch("/unicon/api/templates/bulk-delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:e})}),s=await t.json();if(!t.ok||(s==null?void 0:s.success)===!1)throw new Error((s==null?void 0:s.error)||"server error");return s.deleted||0}const vo="unicon_templates_v1";function ln(){try{const e=JSON.parse(localStorage.getItem(vo)||"[]");return Array.isArray(e)?e:[]}catch{return[]}}function iw(e){const t=Date.now(),s=ln(),i=e.id||`${t}-${Math.random().toString(36).slice(2)}`,a=s.concat([{...e,id:i,ts:t}]);return localStorage.setItem(vo,JSON.stringify(a)),i}function gw(e){const t=ln().filter(s=>s.id!==e);localStorage.setItem(vo,JSON.stringify(t))}function vw(){const e=JSON.stringify(ln(),null,2),t=new Blob([e],{type:"application/json"}),s=document.createElement("a");s.href=URL.createObjectURL(t),s.download="unicon-library.json",s.click(),URL.revokeObjectURL(s.href)}async function _w(e){const t=await e.text(),s=JSON.parse(t);if(!Array.isArray(s))throw new Error("Invalid library file");localStorage.setItem(vo,JSON.stringify(s))}async function Uf(){const e=await fetch("/unicon/api/templates"),t=await e.json();if(!e.ok||(t==null?void 0:t.success)===!1)throw new Error((t==null?void 0:t.error)||"server error");return t.templates||[]}async function rw(e){const t=await fetch("/unicon/api/templates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();if(!t.ok||(s==null?void 0:s.success)===!1)throw new Error((s==null?void 0:s.error)||"server error");return s.template}async function yw(e){const t=await fetch(`/unicon/api/templates/${encodeURIComponent(e)}`,{method:"DELETE"}),s=await t.json().catch(()=>({success:!0}));if(!t.ok||(s==null?void 0:s.success)===!1)throw new Error((s==null?void 0:s.error)||"server error")}async function bw(e){const t=await fetch("/unicon/api/templates/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templates:e})}),s=await t.json();if(!t.ok||(s==null?void 0:s.success)===!1)throw new Error((s==null?void 0:s.error)||"server error");return s.count||0}function aw({openTab:e}){const[t,s]=M.useState([]),[i,a]=M.useState(!1),[n,m]=M.useState(!1),[l,h]=M.useState(()=>{try{return localStorage.getItem("unicon_auto_open_last_ws_v1")==="1"}catch{return!1}}),[p,b]=M.useState(new Set),[f,v]=M.useState(()=>{try{return JSON.parse(localStorage.getItem("unicon_conn_expanded_v1")||"{}")}catch{return{}}}),[y,w]=M.useState({}),[S,o]=M.useState(null),[u,c]=M.useState(new Set),d=ge.useRef(new Map),g=ge.useRef(new Set),[_,C]=M.useState(null),[j,x]=M.useState(!1),[E,D]=M.useState(null),[A,T]=M.useState([]);M.useEffect(()=>{ea().then(P=>T(P.workspaces||[])).catch(()=>{})},[]);const R=async(P,B)=>{try{await bu(P,{workspaceId:B||null}),s(K=>K.map(te=>te.id===P?{...te,workspaceId:B||null}:te))}catch(K){alert("Move failed: "+(K.message||"error"))}},q={REST_DNS:{title:"Hostname not found",tips:["Check the Base URL host name (typos, missing domain).","Try pinging the host from your machine.","If using a container, ensure DNS is configured."]},REST_UNREACHABLE:{title:"API not reachable",tips:["Verify server is running and reachable from your network.","Check firewalls/VPN and the port number.","If HTTPS is required, ensure the URL starts with https://."]},REST_CONNECT_ERROR:{title:"REST connection failed",tips:["Confirm the Base URL and any proxy settings.","Inspect the browser Network tab for CORS errors."]},SSH_AUTH:{title:"SSH authentication failed",tips:["Verify username/password or private key and passphrase.","Ensure the user is allowed to log in on the host.","If using a key, check file format (PEM) and permissions."]},SSH_NETWORK:{title:"SSH network error",tips:["Check host/port and that the SSH service is listening.","Firewall rules may block port 22 (or your custom port)."]},SSH_CONNECT_ERROR:{title:"SSH connect error",tips:["Test with a local ssh client to validate credentials.","Review server-side sshd logs for details."]},WS_REFUSED:{title:"WebSocket connection refused",tips:["Ensure the WS server is running and the URL is correct.","Match ws:// vs wss:// with your server configuration."]},WS_CONNECT_ERROR:{title:"WebSocket connect error",tips:["Open the WS URL in your browser devtools to verify handshakes.","Check reverse proxies and upgrade headers."]},SQL_AUTH:{title:"Database authentication failed",tips:["Verify DB user and password, and that the user has rights.","For cloud DBs, ensure your IP is allowlisted."]},SQL_NETWORK:{title:"Database network error",tips:["Verify host/port and connectivity to the DB server.","Check SSL/TLS settings if the DB requires TLS."]},SQL_CONNECT_ERROR:{title:"Database connect error",tips:["Validate the DSN/connection string format for your driver."]},OPCUA_SECURITY:{title:"OPC UA certificate/security error",tips:["Trust the client certificate on the server and vice versa.","Align security policy and mode with the server settings."]},OPCUA_CONNECT_ERROR:{title:"OPC UA connect error",tips:["Confirm endpoint URL is reachable and the server is running.","Try security mode/policy None for initial testing."]},GRPC_UNAVAILABLE:{title:"gRPC UNAVAILABLE",tips:["Check server address and that the service is listening.","If behind a proxy, ensure HTTP/2 is supported."]},GRPC_CONNECT_ERROR:{title:"gRPC connect error",tips:["Verify proto/service definitions and server endpoint."]},DISCONNECT_ERROR:{title:"Disconnect error",tips:["Session may have already closed; refresh state and retry."]},CONNECT_ERROR:{title:"Connection error",tips:["Check address/credentials and try again.","Use the Retry button; see logs for more detail."]}},G=P=>q[P]||null,z=(P,B)=>w(K=>{const te=(K[P]||[]).slice(-49),de={ts:new Date().toISOString(),level:B.level||"info",message:B.message,code:B.code||null,hint:B.hint||null};te.push(de);try{localStorage.setItem(`unicon_conn_logs_v1_${P}`,JSON.stringify(te))}catch{}return{...K,[P]:te}});function W(P){const B=P==="connected"?"bg-green-500":P==="connecting"?"bg-amber-500":P==="error"?"bg-red-500":"bg-gray-300";return r.jsx("span",{className:`inline-block w-2.5 h-2.5 rounded-full mr-2 ${B}`})}async function N(){a(!0);try{const B=(await Nn()).connections||[];s(B),w(K=>{const te={...K};for(const de of B)if(!te[de.id])try{const le=localStorage.getItem(`unicon_conn_logs_v1_${de.id}`);le&&(te[de.id]=JSON.parse(le))}catch{}return te})}finally{a(!1)}}M.useEffect(()=>{N()},[]),M.useEffect(()=>{var P;if(l&&!(!t||t.length===0)){try{if(sessionStorage.getItem("unicon_auto_open_done_v1")==="1")return}catch{}if(typeof e=="function"){const B=t[0];if(B){try{const le=new Event("unicon-auto-open")}catch{}const K=(()=>{try{return localStorage.getItem(`unicon_last_ws_for_${B.id}`)}catch{return null}})(),te=O(B),de=K&&te.find(le=>le.kind===K)?K:(P=te[0])==null?void 0:P.kind;de&&ue(B,de);try{sessionStorage.setItem("unicon_auto_open_done_v1","1")}catch{}}}}},[l,t]),M.useEffect(()=>{const P=B=>{var te,de;const K=B.detail;if((K==null?void 0:K.type)==="connection_status"&&((te=K==null?void 0:K.data)!=null&&te.connectionId)){const{connectionId:le,status:ae}=K.data;s(_e=>_e.map(be=>be.id===le?{...be,status:ae}:be)),b(_e=>{const be=new Set([..._e]);return be.delete(le),be}),z(le,{level:"info",message:`Status changed to ${ae}`})}else if((K==null?void 0:K.type)==="log"&&((de=K==null?void 0:K.data)!=null&&de.message)){const{connectionId:le,message:ae,type:_e,code:be,hint:Le}=K.data||{};if(le){const Te=_e==="error"?"error":_e==="warn"?"warn":"info";z(le,{level:Te,message:ae,code:be,hint:Le}),Te==="error"&&(c(Xe=>new Set([...Xe,le])),v(Xe=>({...Xe,[le]:!0})))}}};return window.addEventListener("unicon-ws",P),()=>window.removeEventListener("unicon-ws",P)},[]);async function L(P){await Fv(P),await N()}async function I(P){if(P.status==="connected")try{await Ni(P.id),z(P.id,{level:"info",message:"Disconnect requested"})}catch(B){z(P.id,{level:"error",message:B.message||"Disconnect failed"}),c(K=>new Set([...K,P.id])),v(K=>({...K,[P.id]:!0}))}finally{await N()}else{g.current.delete(P.id),b(B=>new Set([...B,P.id])),z(P.id,{level:"info",message:"Connect requested"});try{await hs(P.id),c(B=>{const K=new Set([...B]);return K.delete(P.id),K})}catch(B){z(P.id,{level:"error",message:B.message||"Connect failed"}),s(K=>K.map(te=>te.id===P.id?{...te,status:"disconnected"}:te)),c(K=>new Set([...K,P.id])),v(K=>({...K,[P.id]:!0})),k(P.id)}finally{b(B=>{const K=new Set([...B]);return K.delete(P.id),K}),await N()}}}const U=P=>v(B=>{const K={...B,[P]:!B[P]};try{localStorage.setItem("unicon_conn_expanded_v1",JSON.stringify(K))}catch{}return K}),se=P=>{const B=(y[P]||[]).slice().reverse().find(K=>K.level==="error")||(y[P]||[]).slice(-1)[0]||null;C(B?{id:P,log:B}:{id:P,log:null})},ce=async()=>{if(_)try{await navigator.clipboard.writeText(JSON.stringify(_,null,2))}catch{}},Q=P=>{const B=y[P]||[],K=new Blob([JSON.stringify(B,null,2)],{type:"application/json"}),te=URL.createObjectURL(K),de=document.createElement("a");de.href=te,de.download=`connection-${P}-logs.json`,de.click(),URL.revokeObjectURL(te)},re=P=>t.find(B=>B.id===P),pe=async P=>{const B=re(P);if(!B)return;x(!0);const K=async()=>{if(B.status==="connected")return!1;z(P,{level:"info",message:"Quick test: connecting"});try{return await hs(P),!0}catch(le){return z(P,{level:"error",message:`Quick test connect failed: ${le.message}`}),!1}},te=async le=>{if(le)try{await Ni(P)}catch{}};let de=!1;try{let le=null,ae={};const _e=(B.type||"").toLowerCase();if(_e==="rest"?(le="request",ae={method:"GET",endpoint:"/"}):_e==="ws"||_e==="websocket"?(le="send",ae={message:"ping"}):_e==="ssh"?(le="exec",ae={command:"echo quick-test",cwd:void 0}):_e==="sql"?(le="query",ae={sql:"SELECT 1 AS ok",params:[]}):_e==="k8s"?(le="contexts",ae={}):_e==="opcua"||_e==="opc-ua"?(le="browse",ae={nodeId:"RootFolder"}):_e==="cpd"&&(le="ping",ae={message:"quick-test"}),!le){z(P,{level:"warn",message:"Quick test not available for this type."});return}de=await K();const be=await Ae(P,le,ae),Le=(be==null?void 0:be.success)!==!1;z(P,{level:Le?"info":"error",message:Le?`Quick test '${le}' OK`:`Quick test failed: ${(be==null?void 0:be.error)||"error"}`}),Le||v(Te=>({...Te,[P]:!0}))}catch(le){z(P,{level:"error",message:`Quick test error: ${le.message}`}),v(ae=>({...ae,[P]:!0}))}finally{try{await te(de)}catch{}x(!1)}};function k(P){if(g.current.has(P))return;const B=d.current.get(P)||{attempt:0},K=B.attempt+1;if(K>3)return;const te=Math.min(1e3*Math.pow(2,B.attempt),8e3);z(P,{level:"info",message:`Retrying in ${Math.round(te/1e3)}s (attempt ${K}/3)...`});const de=setTimeout(async()=>{d.current.delete(P);const le=t.find(ae=>ae.id===P)||{id:P,status:"disconnected"};await I(le)},te);d.current.set(P,{attempt:K,timerId:de})}const F=P=>{const B=d.current.get(P);if(B!=null&&B.timerId)try{clearTimeout(B.timerId)}catch{}d.current.delete(P),g.current.add(P),b(K=>{const te=new Set([...K]);return te.delete(P),te}),s(K=>K.map(te=>te.id===P?{...te,status:"disconnected"}:te)),z(P,{level:"info",message:"Auto-retry canceled by user"})};ge.useEffect(()=>()=>{for(const{timerId:P}of d.current.values())try{clearTimeout(P)}catch{}d.current.clear()},[]);const Y={rest:"rest",ws:"ws",grpc:"grpc",cpd:"cpd",sql:"sql","opc-ua":"opcua",opcua:"opcua",ssh:"ssh",k8s:"k8s",ftp:"ftp",sftp:"sftp"},V={rest:"REST",ws:"WebSocket",grpc:"gRPC",cpd:"CPD",sql:"SQL",opcua:"OPC UA","opc-ua":"OPC UA",ssh:"SSH",k8s:"Kubernetes",ftp:"FTP",sftp:"SFTP"},O=P=>{const B=Y[P.type]||"rest",K=(le,ae)=>{le.find(_e=>_e.kind===ae)||le.push({kind:ae,label:V[ae]||ae.toUpperCase()})},te=[];K(te,B);const de=(P==null?void 0:P.config)||{};return de.baseUrl&&K(te,"rest"),(de.wsUrl||/^wss?:/i.test(String(de.baseUrl||"")))&&K(te,"ws"),(de.proto||de.package||de.service)&&de.address&&K(te,"grpc"),de.driver&&K(te,"sql"),te},H=(P,B)=>{try{localStorage.setItem(`unicon_last_ws_for_${P}`,B)}catch{}},Z=P=>{try{return localStorage.getItem(`unicon_last_ws_for_${P}`)||null}catch{return null}},ue=(P,B)=>{H(P.id,B),Object.values(V).includes(B)?B.toUpperCase():V[B]||B.toUpperCase(),e&&e(B,{connectionId:P.id,connection:P,title:`${V[B]||B.toUpperCase()}  ${P.name}`})},me=P=>{const B=O(P),K=Z(P.id),te=K&&B.find(de=>de.kind===K)?{kind:K}:B[0];ue(P,te.kind)},ye=P=>{const B=O(P);return B.length?`Open in ${B[0].label}`:"Open"};return r.jsxs("div",{className:"bg-white",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Connections"}),r.jsxs("label",{className:"flex items-center gap-1 text-xs text-gray-600",children:[r.jsx("input",{type:"checkbox",checked:l,onChange:P=>{h(P.target.checked);try{localStorage.setItem("unicon_auto_open_last_ws_v1",P.target.checked?"1":"0")}catch{}}}),"Auto-open first in last workspace"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm border border-gray-300 rounded-md hover:bg-gray-50",onClick:()=>m(!0),children:[r.jsx($f,{size:16})," New"]}),r.jsx("button",{className:"inline-flex items-center gap-2 px-3 py-1.5 text-sm border border-gray-300 rounded-md hover:bg-gray-50",title:"Clear all logs",onClick:()=>{if(confirm("Clear all saved connection logs? This will remove local copies.")){w({});try{Object.keys(localStorage).filter(P=>P.startsWith("unicon_conn_logs_v1_")).forEach(P=>localStorage.removeItem(P))}catch{}c(new Set)}},children:"Clear all logs"})]})]}),r.jsx("div",{className:"border border-gray-200 rounded-md overflow-hidden",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left p-2",children:"Name"}),r.jsx("th",{className:"text-left p-2",children:"Type"}),r.jsx("th",{className:"text-left p-2",children:"Status"}),r.jsx("th",{className:"p-2 text-right",children:r.jsx("button",{className:"inline-flex items-center gap-1 text-gray-600 hover:text-gray-900",onClick:N,title:"Refresh",children:r.jsx(js,{size:14})})})]})}),r.jsxs("tbody",{children:[t.map(P=>{var de,le;const B=p.has(P.id),K=((le=(de=y[P.id])==null?void 0:de.slice(-1)[0])==null?void 0:le.level)==="error",te=B?"connecting":K?"error":P.status||"disconnected";return r.jsxs(ge.Fragment,{children:[r.jsxs("tr",{className:"border-t align-top",children:[r.jsxs("td",{className:"p-2",children:[r.jsx("button",{className:"inline-flex items-center gap-1 text-gray-600 hover:text-gray-900 mr-2",onClick:()=>U(P.id),title:f[P.id]?"Hide logs":"Show logs",children:f[P.id]?r.jsx(Su,{size:14}):r.jsx(Kf,{size:14})}),(B||d.current.has(P.id))&&r.jsxs("button",{className:"inline-flex items-center gap-1 px-2 py-1 border rounded mr-2 hover:bg-gray-50",title:"Stop auto-retry",onClick:()=>F(P.id),children:[r.jsx(Ur,{size:14})," Stop"]}),r.jsx("button",{className:"hover:underline",title:"Edit connection",onClick:()=>{D(P),m(!0)},children:P.name})]}),r.jsx("td",{className:"p-2 uppercase text-xs text-gray-600",children:P.type}),r.jsx("td",{className:"p-2",children:r.jsxs("div",{className:"inline-flex items-center",children:[W(te),r.jsx("span",{className:"capitalize mr-2",children:te}),B&&r.jsx(Qv,{size:14})]})}),r.jsxs("td",{className:"p-2 text-right whitespace-nowrap relative",children:[r.jsxs("span",{className:"inline-flex items-center mr-2",children:[r.jsx("button",{className:"inline-flex items-center gap-1 px-2 py-1 border rounded-l hover:bg-gray-50",onClick:()=>me(P),children:ye(P)}),r.jsx("button",{className:"px-2 py-1 border border-l-0 rounded-r hover:bg-gray-50","aria-haspopup":"menu","aria-expanded":S===P.id,onClick:()=>o(S===P.id?null:P.id),children:""})]}),S===P.id&&r.jsx("div",{className:"absolute right-2 mt-1 w-44 bg-white border rounded shadow z-10",children:O(P).map(ae=>r.jsxs("button",{className:"w-full text-left px-3 py-1.5 text-sm hover:bg-gray-50",onClick:()=>{ue(P,ae.kind),o(null)},children:["Open in ",ae.label]},ae.kind))}),r.jsx("button",{className:"inline-flex items-center gap-1 px-2 py-1 border rounded mr-2 hover:bg-gray-50",title:"Edit",onClick:()=>{D(P),m(!0)},children:r.jsx(O0,{size:14})}),r.jsxs("span",{className:"inline-flex items-center gap-1 mr-2",children:[r.jsx("label",{className:"text-xs text-gray-500",children:"Workspace:"}),r.jsxs("select",{className:"border rounded px-1 py-0.5 text-xs",value:P.workspaceId||"",onChange:ae=>R(P.id,ae.target.value),children:[r.jsx("option",{value:"",children:"(none)"}),A.map(ae=>r.jsx("option",{value:ae.id,children:ae.name},ae.id))]})]}),r.jsx("button",{className:"inline-flex items-center gap-1 px-2 py-1 border rounded mr-2 hover:bg-gray-50",onClick:()=>I(P),disabled:B,children:te==="connected"?r.jsxs(r.Fragment,{children:[r.jsx(M0,{size:14})," Disconnect"]}):r.jsxs(r.Fragment,{children:[r.jsx(B0,{size:14})," ",B?"Connecting":"Connect"]})}),te==="error"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"inline-flex items-center gap-1 px-2 py-1 border rounded mr-2 hover:bg-gray-50",onClick:()=>{g.current.delete(P.id),k(P.id)},children:"Retry"}),d.current.has(P.id)&&r.jsxs("button",{className:"inline-flex items-center gap-1 px-2 py-1 border rounded mr-2 hover:bg-gray-50",onClick:()=>F(P.id),children:[r.jsx(Ur,{size:14})," Stop"]}),r.jsx("button",{className:"inline-flex items-center gap-1 px-2 py-1 border rounded mr-2 hover:bg-gray-50",onClick:()=>se(P.id),children:"Details"})]}),r.jsxs("button",{className:"inline-flex items-center gap-1 px-2 py-1 border rounded text-red-600 hover:bg-red-50",onClick:()=>L(P.id),disabled:B,children:[r.jsx(Yi,{size:14})," Delete"]})]})]}),f[P.id]&&r.jsx("tr",{className:"bg-gray-50",children:r.jsxs("td",{colSpan:4,className:"p-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("div",{className:"text-xs text-gray-600",children:"Logs"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"px-2 py-0.5 border rounded text-xs",onClick:()=>Q(P.id),children:"Export"}),r.jsx("button",{className:"px-2 py-0.5 border rounded text-xs",onClick:()=>{w(ae=>{const _e={...ae,[P.id]:[]};try{localStorage.removeItem(`unicon_conn_logs_v1_${P.id}`)}catch{}return _e})},children:"Clear"})]})]}),r.jsxs("div",{className:"max-h-40 overflow-auto text-xs font-mono leading-5",children:[(y[P.id]||[]).slice().reverse().map((ae,_e)=>r.jsxs("div",{className:ae.level==="error"?"text-red-700":ae.level==="warn"?"text-amber-700":"text-gray-800",children:[r.jsx("span",{className:"opacity-60 mr-2",children:new Date(ae.ts).toLocaleTimeString()}),ae.message,ae.code||ae.hint?r.jsxs("span",{className:"opacity-80",children:[" ",ae.code?`[${ae.code}]`:"",ae.hint?`  ${ae.hint}`:""]}):null]},_e)),(!y[P.id]||y[P.id].length===0)&&r.jsx("div",{className:"text-gray-500",children:"No logs yet."})]})]})})]},P.id)}),t.length===0&&r.jsx("tr",{children:r.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:4,children:i?"Loading...":"No connections"})})]})]})}),n&&r.jsx(nw,{initial:E,onClose:()=>{m(!1),D(null)},onSave:async(P,B)=>{B?await bu(B,P):await Es(P),m(!1),D(null),await N()}}),r.jsx(kn,{open:!!_,title:"Connection details",onClose:()=>C(null),footer:r.jsxs(r.Fragment,{children:[_?r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"px-3 py-1.5 border rounded",onClick:()=>{const P=re(_.id);P&&(D(P),m(!0))},children:"Edit"}),r.jsx("button",{className:"px-3 py-1.5 border rounded",disabled:j,onClick:()=>pe(_.id),children:j?"Testing":"Quick test"}),r.jsx("button",{className:"px-3 py-1.5 border rounded",onClick:ce,children:"Copy"}),r.jsx("button",{className:"px-3 py-1.5 border rounded",onClick:()=>Q(_.id),children:"Export logs"})]}):null,r.jsx("button",{className:"px-3 py-1.5 border rounded bg-blue-600 text-white",onClick:()=>C(null),children:"Close"})]}),children:_!=null&&_.log?r.jsxs("div",{className:"text-sm",children:[r.jsxs("div",{className:"mb-2",children:[r.jsx("span",{className:"font-semibold",children:"Time:"})," ",new Date(_.log.ts).toLocaleString()]}),r.jsxs("div",{className:"mb-2",children:[r.jsx("span",{className:"font-semibold",children:"Level:"})," ",_.log.level]}),_.log.code?r.jsxs("div",{className:"mb-2",children:[r.jsx("span",{className:"font-semibold",children:"Code:"})," ",_.log.code]}):null,_.log.hint?r.jsxs("div",{className:"mb-2",children:[r.jsx("span",{className:"font-semibold",children:"Hint:"})," ",_.log.hint]}):null,r.jsxs("div",{className:"mb-4",children:[r.jsx("span",{className:"font-semibold",children:"Message:"})," ",_.log.message]}),_.log.code&&G(_.log.code)?r.jsxs("div",{className:"mt-4 border-t pt-3",children:[r.jsxs("div",{className:"font-semibold mb-1",children:["Troubleshooting: ",G(_.log.code).title]}),r.jsx("ul",{className:"list-disc ml-5 space-y-1",children:G(_.log.code).tips.map((P,B)=>r.jsx("li",{children:P},B))})]}):null]}):r.jsx("div",{className:"text-sm text-gray-600",children:"No error details available."})})]})}function nw({initial:e=null,onClose:t,onSave:s}){var lr,he,or,Xs,Js,cr,Ti,ns,ur;const[i,a]=M.useState((e==null?void 0:e.name)||"My REST"),[n,m]=M.useState((e==null?void 0:e.type)||"rest"),[l,h]=M.useState(((lr=e==null?void 0:e.config)==null?void 0:lr.baseUrl)||"https://jsonplaceholder.typicode.com"),[p,b]=M.useState([]),[f,v]=M.useState(()=>{try{return(e==null?void 0:e.workspaceId)||localStorage.getItem("unicon_current_workspace_v1")||""}catch{return(e==null?void 0:e.workspaceId)||""}});M.useEffect(()=>{ea().then(J=>b(J.workspaces||[])).catch(()=>{})},[]);const[y,w]=M.useState(""),[S,o]=M.useState(22),[u,c]=M.useState("root"),[d,g]=M.useState("password"),[_,C]=M.useState(""),[j,x]=M.useState(""),[E,D]=M.useState(""),[A,T]=M.useState(""),[R,q]=M.useState(21),[G,z]=M.useState(""),[W,N]=M.useState(""),[L,I]=M.useState(!1),[U,se]=M.useState(!0),[ce,Q]=M.useState(((he=e==null?void 0:e.config)==null?void 0:he.endpointUrl)||""),[re,pe]=M.useState(((or=e==null?void 0:e.config)==null?void 0:or.securityPolicy)||"None"),[k,F]=M.useState(((Xs=e==null?void 0:e.config)==null?void 0:Xs.securityMode)||"None"),[Y,V]=M.useState(((Js=e==null?void 0:e.config)==null?void 0:Js.username)||""),[O,H]=M.useState(""),[Z,ue]=M.useState(((cr=e==null?void 0:e.config)==null?void 0:cr.driver)||"sqlite"),[me,ye]=M.useState(((Ti=e==null?void 0:e.config)==null?void 0:Ti.filename)||":memory:"),[P,B]=M.useState(((ns=e==null?void 0:e.config)==null?void 0:ns.url)||((ur=e==null?void 0:e.config)==null?void 0:ur.connectionString)||""),[K,te]=M.useState("default"),[de,le]=M.useState(""),[ae,_e]=M.useState(""),[be,Le]=M.useState(""),[Te,Xe]=M.useState("default"),as=()=>{if(!i.trim())return;let J={};const Oe=Ne=>typeof Ne=="string"?Ne.trim():Ne;if(n==="rest")J={baseUrl:l};else if(n==="sql")Z==="sqlite"&&(J={driver:"sqlite",filename:me}),Z==="pg"&&(J={driver:"pg",url:P}),Z==="mysql"&&(J={driver:"mysql",url:P});else if(n==="opc-ua"||n==="opcua"){const Kt=Oe(ce||"").match(/^opc\.tcp:\/\/([^:\/]+):(\d{1,5})(\/.*)?$/i);if(!Kt){alert("Invalid OPC UA endpoint. Use opc.tcp://host:port (e.g., opc.tcp://localhost:4840)");return}const Pe=Kt[3]||"";if(re==="None"&&k!=="None"){alert("Security Mode must be None when Security Policy is None.");return}if((Y||O)&&(k==="None"||re==="None")&&!confirm("Warning: using username/password without a secure channel will send credentials unencrypted. Continue anyway?"))return;J={endpointUrl:`opc.tcp://${Kt[1]}:${Kt[2]}${Pe}`,securityPolicy:re,securityMode:k,...Y?{username:Y}:{},...O?{password:O}:{}}}else n==="ssh"?J={host:y,port:Number(S),username:u,...d==="password"?{password:_}:{privateKey:j,passphrase:E}}:n==="k8s"?J={kubeconfigSource:K,kubeconfig:K==="inline"?ae:void 0,kubeconfigPath:K==="path"?de:void 0,context:be,namespace:Te}:n==="ftp"?J={host:A,port:Number(R||21),user:G||void 0,password:W||void 0,secure:!!L,passive:!!U}:n==="sftp"&&(J={host:y,port:Number(S||22),username:u,...d==="password"?{password:_}:{privateKey:j,passphrase:E}});s({name:i.trim(),type:n,config:J,workspaceId:f||null},e==null?void 0:e.id)},[Ke,He]=M.useState(ln());ge.useEffect(()=>{(async()=>{try{const J=await Uf();He(J),localStorage.setItem("unicon_templates_v1",JSON.stringify(J))}catch{}})()},[]);const Ce=J=>{var Ne,Kt,Pe,ps,$,ee,ie,we,ve;if(!J)return;const Oe=(J.type||"").toLowerCase();if(Oe==="rest")m("rest"),h(((Ne=J.config)==null?void 0:Ne.baseUrl)||"");else if(Oe==="sql"){m("sql");const Ee=((Kt=J.config)==null?void 0:Kt.driver)||"sqlite";ue(Ee),ye(((Pe=J.config)==null?void 0:Pe.filename)||":memory:"),B(((ps=J.config)==null?void 0:ps.url)||(($=J.config)==null?void 0:$.connectionString)||"")}else Oe==="opc-ua"||Oe==="opcua"?(m("opc-ua"),Q(((ee=J.config)==null?void 0:ee.endpointUrl)||""),pe(((ie=J.config)==null?void 0:ie.securityPolicy)||"None"),F(((we=J.config)==null?void 0:we.securityMode)||"None"),V(((ve=J.config)==null?void 0:ve.username)||""),H("")):(Oe==="websocket"||Oe==="ws")&&m("ws")},xt=async()=>{let J=null;if(n==="rest"?J={name:i,type:"rest",config:{baseUrl:l}}:n==="sql"?J=Z==="sqlite"?{name:i,type:"sql",config:{driver:"sqlite",filename:me}}:{name:i,type:"sql",config:{driver:Z,url:P}}:n==="opc-ua"||n==="opcua"?J={name:i,type:"opc-ua",config:{endpointUrl:ce,securityPolicy:re,securityMode:k,...Y?{username:Y}:{}}}:(n==="ws"||n==="websocket")&&(J={name:i,type:"websocket",config:{}}),J)try{await rw(J);const Oe=await Uf();He(Oe),localStorage.setItem("unicon_templates_v1",JSON.stringify(Oe))}catch{iw(J),He(ln())}};return r.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-md shadow-lg w-full max-w-md",children:[r.jsx("div",{className:"p-4 border-b font-semibold",children:e?"Edit Connection":"New Connection"}),r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Name"}),r.jsx("input",{className:"w-full border rounded px-3 py-2",value:i,onChange:J=>a(J.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Type"}),r.jsxs("select",{className:"w-full border rounded px-3 py-2",value:n,onChange:J=>m(J.target.value),children:[r.jsx("option",{value:"rest",children:"REST"}),r.jsx("option",{value:"opc-ua",children:"OPC UA"}),r.jsx("option",{value:"ws",children:"WebSocket"}),r.jsx("option",{value:"grpc",children:"gRPC"}),r.jsx("option",{value:"cpd",children:"CPD"}),r.jsx("option",{value:"sql",children:"SQL"}),r.jsx("option",{value:"ssh",children:"SSH"}),r.jsx("option",{value:"ftp",children:"FTP"}),r.jsx("option",{value:"sftp",children:"SFTP"}),r.jsx("option",{value:"k8s",children:"Kubernetes"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Workspace"}),r.jsxs("select",{className:"w-full border rounded px-3 py-2",value:f,onChange:J=>v(J.target.value),children:[r.jsx("option",{value:"",children:" None "}),p.map(J=>r.jsx("option",{value:J.id,children:J.name},J.id))]})]}),n==="rest"&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"block text-sm mb-1",children:"Base URL"}),r.jsxs("div",{className:"text-xs text-gray-600",children:["Suggestion:",r.jsxs("select",{className:"ml-2 border rounded px-2 py-1",onChange:J=>{const Oe=Number(J.target.value);isNaN(Oe)||h(Qt.rest[Oe].baseUrl)},children:[r.jsx("option",{children:"Pick"}),Qt.rest.map((J,Oe)=>r.jsx("option",{value:Oe,children:J.name},J.name))]})]})]}),r.jsx("input",{className:"w-full border rounded px-3 py-2",value:l,onChange:J=>h(J.target.value),placeholder:"https://api.example.com"}),r.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["From My Library:",r.jsxs("select",{className:"ml-2 border rounded px-2 py-1",onChange:J=>{const Oe=Ke.find(Ne=>Ne.id===J.target.value);Ce(Oe)},children:[r.jsx("option",{value:"",children:"Pick"}),Ke.filter(J=>(J.type||"").toLowerCase()==="rest").map(J=>r.jsx("option",{value:J.id,children:J.name},J.id))]}),r.jsx("button",{className:"ml-2 px-2 py-1 border rounded",onClick:xt,children:"Save as template"})]})]}),n==="sql"&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"block text-sm mb-1",children:"Driver"}),r.jsxs("div",{className:"text-xs text-gray-600",children:["Suggestion:",r.jsxs("select",{className:"ml-2 border rounded px-2 py-1",onChange:J=>{const Oe=Number(J.target.value);if(isNaN(Oe))return;const Ne=Qt.sql[Oe];ue(Ne.config.driver||"sqlite"),ye(Ne.config.filename||":memory:"),B(Ne.config.url||"")},children:[r.jsx("option",{children:"Pick"}),Qt.sql.map((J,Oe)=>r.jsx("option",{value:Oe,children:J.name},J.name))]})]})]}),r.jsx("div",{children:r.jsxs("select",{className:"w-full border rounded px-3 py-2",value:Z,onChange:J=>ue(J.target.value),children:[r.jsx("option",{value:"sqlite",children:"SQLite"}),r.jsx("option",{value:"pg",children:"PostgreSQL / TimescaleDB"}),r.jsx("option",{value:"mysql",children:"MySQL / MariaDB"})]})}),Z==="sqlite"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"SQLite filename"}),r.jsx("input",{className:"w-full border rounded px-3 py-2",value:me,onChange:J=>ye(J.target.value),placeholder:":memory:"})]}),Z!=="sqlite"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Connection string (URL)"}),r.jsx("input",{className:"w-full border rounded px-3 py-2",value:P,onChange:J=>B(J.target.value),placeholder:Z==="pg"?"postgres://user:pass@host:5432/db":"mysql://user:pass@host:3306/db"}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"TimescaleDB uses the PostgreSQL URL format."})]}),r.jsxs("div",{className:"text-xs text-gray-600",children:["From My Library:",r.jsxs("select",{className:"ml-2 border rounded px-2 py-1",onChange:J=>{const Oe=Ke.find(Ne=>Ne.id===J.target.value);Ce(Oe)},children:[r.jsx("option",{value:"",children:"Pick"}),Ke.filter(J=>(J.type||"").toLowerCase()==="sql").map(J=>r.jsx("option",{value:J.id,children:J.name},J.id))]}),r.jsx("button",{className:"ml-2 px-2 py-1 border rounded",onClick:xt,children:"Save as template"})]})]}),(n==="opc-ua"||n==="opcua")&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"block text-sm mb-1",children:"Endpoint URL"}),r.jsxs("div",{className:"text-xs text-gray-600",children:["Suggestion:",r.jsxs("select",{className:"ml-2 border rounded px-2 py-1",onChange:J=>{const Oe=Number(J.target.value);if(isNaN(Oe))return;const Ne=Qt.opcua[Oe];Q(Ne.endpointUrl),pe(Ne.securityPolicy||"None"),F(Ne.securityMode||"None")},children:[r.jsx("option",{children:"Pick"}),Qt.opcua.map((J,Oe)=>r.jsx("option",{value:Oe,children:J.name},J.name))]})]})]}),r.jsx("input",{className:"w-full border rounded px-3 py-2",value:ce,onChange:J=>Q(J.target.value),placeholder:"opc.tcp://host:4840 or opc.tcp://host:4840/Path"}),r.jsxs("div",{className:"text-xs text-gray-600",children:["From My Library:",r.jsxs("select",{className:"ml-2 border rounded px-2 py-1",onChange:J=>{const Oe=Ke.find(Ne=>Ne.id===J.target.value);Ce(Oe)},children:[r.jsx("option",{value:"",children:"Pick"}),Ke.filter(J=>["opc-ua","opcua"].includes((J.type||"").toLowerCase())).map(J=>r.jsx("option",{value:J.id,children:J.name},J.id))]}),r.jsx("button",{className:"ml-2 px-2 py-1 border rounded",onClick:xt,children:"Save as template"})]}),r.jsx("div",{className:"text-xs text-amber-600",children:"Public OPC UA demo endpoints can be unstable. If connection fails, try again or use a local server."}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Endpoint URL"}),r.jsx("input",{className:"w-full border rounded px-3 py-2",value:ce,onChange:J=>Q(J.target.value),placeholder:"opc.tcp://host:4840 or opc.tcp://host:4840/Path"}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Format: opc.tcp://host:port[/path], e.g., opc.tcp://localhost:4840 or opc.tcp://server:4840/OPCUA/Sim"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Security Policy"}),r.jsxs("select",{className:"w-full border rounded px-3 py-2",value:re,onChange:J=>pe(J.target.value),children:[r.jsx("option",{children:"None"}),r.jsx("option",{children:"Basic128Rsa15"}),r.jsx("option",{children:"Basic256"}),r.jsx("option",{children:"Basic256Sha256"}),r.jsx("option",{children:"Aes128_Sha256_RsaOaep"}),r.jsx("option",{children:"Aes256_Sha256_RsaPss"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Security Mode"}),r.jsxs("select",{className:"w-full border rounded px-3 py-2",value:k,onChange:J=>F(J.target.value),children:[r.jsx("option",{children:"None"}),r.jsx("option",{children:"Sign"}),r.jsx("option",{children:"SignAndEncrypt"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Username (optional)"}),r.jsx("input",{className:"w-full border rounded px-3 py-2",value:Y,onChange:J=>V(J.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Password (optional)"}),r.jsx("input",{type:"password",className:"w-full border rounded px-3 py-2",value:O,onChange:J=>H(J.target.value)})]})]})]}),(n==="ssh"||n==="sftp")&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Host"}),r.jsx("input",{className:"w-full border rounded px-3 py-2",value:y,onChange:J=>w(J.target.value),placeholder:"server.example.com"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Port"}),r.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2",value:S,onChange:J=>o(J.target.value)})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Username"}),r.jsx("input",{className:"w-full border rounded px-3 py-2",value:u,onChange:J=>c(J.target.value),placeholder:"root"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Auth Type"}),r.jsxs("select",{className:"w-full border rounded px-3 py-2",value:d,onChange:J=>g(J.target.value),children:[r.jsx("option",{value:"password",children:"Password"}),r.jsx("option",{value:"privateKey",children:"Private Key"})]})]})]}),d==="password"?r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Password"}),r.jsx("input",{type:"password",className:"w-full border rounded px-3 py-2",value:_,onChange:J=>C(J.target.value)})]}):r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Private Key (PEM)"}),r.jsx("textarea",{className:"w-full border rounded px-3 py-2 font-mono text-xs",rows:5,value:j,onChange:J=>x(J.target.value),placeholder:"-----BEGIN PRIVATE KEY-----\\n...\\n-----END PRIVATE KEY-----"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Passphrase (optional)"}),r.jsx("input",{type:"password",className:"w-full border rounded px-3 py-2",value:E,onChange:J=>D(J.target.value)})]})]})]}),n==="k8s"&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Kubeconfig Source"}),r.jsxs("select",{className:"w-full border rounded px-3 py-2",value:K,onChange:J=>te(J.target.value),children:[r.jsx("option",{value:"default",children:"Default"}),r.jsx("option",{value:"path",children:"Path"}),r.jsx("option",{value:"inline",children:"Inline"})]})]}),K==="path"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Kubeconfig Path"}),r.jsx("input",{className:"w-full border rounded px-3 py-2",value:de,onChange:J=>le(J.target.value),placeholder:"C:/Users/me/.kube/config"})]}),K==="inline"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Kubeconfig (YAML)"}),r.jsx("textarea",{className:"w-full border rounded px-3 py-2 font-mono text-xs",rows:6,value:ae,onChange:J=>_e(J.target.value)})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Context (optional)"}),r.jsx("input",{className:"w-full border rounded px-3 py-2",value:be,onChange:J=>Le(J.target.value),placeholder:"my-context"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Default Namespace"}),r.jsx("input",{className:"w-full border rounded px-3 py-2",value:Te,onChange:J=>Xe(J.target.value),placeholder:"default"})]})]})]}),n==="ftp"&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Host"}),r.jsx("input",{className:"w-full border rounded px-3 py-2",value:A,onChange:J=>T(J.target.value),placeholder:"ftp.example.com"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Port"}),r.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2",value:R,onChange:J=>q(J.target.value)})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Username"}),r.jsx("input",{className:"w-full border rounded px-3 py-2",value:G,onChange:J=>z(J.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm mb-1",children:"Password"}),r.jsx("input",{type:"password",className:"w-full border rounded px-3 py-2",value:W,onChange:J=>N(J.target.value)})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[r.jsx("input",{type:"checkbox",checked:L,onChange:J=>I(J.target.checked)})," FTPS (secure)"]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[r.jsx("input",{type:"checkbox",checked:U,onChange:J=>se(J.target.checked)})," Passive mode"]})]})]})]}),r.jsxs("div",{className:"mt-4 border-t pt-4 flex justify-between gap-2",children:[r.jsx("div",{children:r.jsx("button",{className:"px-3 py-1.5 border rounded",onClick:xt,title:"Save current form as reusable template",children:"Save as template"})}),r.jsx("button",{className:"px-3 py-1.5 border rounded",onClick:t,children:"Cancel"}),r.jsx("button",{className:"px-3 py-1.5 border rounded bg-blue-600 text-white",onClick:as,children:e?"Save":"Create"})]})]})]})})}function lw({onLoggedIn:e}){const[t,s]=M.useState({open:!1,provider:null,loading:!1,error:""}),[i,a]=M.useState({open:!1,kind:null,data:null,loading:!1,error:""});async function n(o){s({open:!0,provider:o,loading:!1,error:""})}async function m(){s(o=>({...o,loading:!0,error:""}));try{const o=await fetch(`/unicon/api/oauth/${t.provider}/init`),u=await o.json();if(!o.ok||!(u!=null&&u.continue_url))throw new Error((u==null?void 0:u.error)||"Init failed");location.href=u.continue_url}catch(o){s(u=>({...u,loading:!1,error:o.message||"Init failed"}))}}const[l,h]=M.useState(""),[p,b]=M.useState(""),[f,v]=M.useState(!1),[y,w]=M.useState("");M.useEffect(()=>{i.open&&i.kind==="server"&&!i.loading&&!i.data&&!i.error&&(a(o=>({...o,loading:!0})),fetch("/unicon/api/health").then(o=>o.json().catch(()=>({})).then(u=>({ok:o.ok,d:u}))).then(({ok:o,d:u})=>{if(!o)throw new Error((u==null?void 0:u.error)||"Failed to load server details");a(c=>({...c,data:u,loading:!1}))}).catch(o=>a(u=>({...u,error:o.message||"Failed to load server details",loading:!1}))))},[i.open,i.kind]);async function S(o){o.preventDefault(),v(!0),w("");try{const u=await Cs("/auth/login",{email:l,password:p});Uv(u.token,u.roles||[]),e==null||e()}catch(u){w(u.message||"Login failed")}finally{v(!1)}}return r.jsxs("div",{className:"min-h-screen flex",children:[r.jsxs("div",{className:"w-full md:w-1/2 flex flex-col",children:[r.jsx("div",{className:"px-16 pt-12",children:r.jsx("img",{src:"/unicon/brand/swarco.svg",alt:"SWARCO",className:"h-12"})}),r.jsx("div",{className:"flex-1 flex items-center",children:r.jsx("div",{className:"w-full px-16",children:r.jsxs("div",{className:"max-w-md",children:[r.jsx("h1",{className:"text-[32px] leading-[40px] font-bold mb-6",children:"Welcome"}),r.jsxs("form",{onSubmit:S,className:"space-y-4",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 text-blue-800 text-sm rounded p-3",children:["Demo credentials: ",r.jsx("span",{className:"font-semibold",children:"demo@unicon.local"})," / ",r.jsx("span",{className:"font-semibold",children:"demo123"}),r.jsx("button",{type:"button",className:"ml-2 underline",onClick:()=>{h("demo@unicon.local"),b("demo123")},children:"Use"})]}),y&&r.jsx("div",{className:"text-red-600 text-sm",children:y}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-[16px] leading-6 font-semibold text-gray-700",children:"Email"}),r.jsx("span",{className:"text-[12px] text-gray-400",children:"*"})]}),r.jsx("input",{type:"email",className:"w-full border rounded px-3 py-2 h-10",value:l,onChange:o=>h(o.target.value),required:!0})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-[16px] leading-6 font-semibold text-gray-700",children:"Password"}),r.jsx("button",{type:"button",className:"text-sm text-blue-700 hover:underline",onClick:async()=>{try{const o=await Cs("/auth/forgot",{email:l||"demo@unicon.local"});o!=null&&o.reset_url?alert(`Reset link (demo): ${o.reset_url}`):alert("If the account exists, a reset link was sent.")}catch(o){alert(o.message||"Request failed")}},children:"Forgot password"})]}),r.jsx("input",{type:"password",className:"w-full border rounded px-3 py-2 h-10",value:p,onChange:o=>b(o.target.value),required:!0})]}),r.jsxs("div",{className:"flex items-center gap-4 pt-2",children:[r.jsx("button",{type:"button","aria-label":"Continue with Demo OAuth",title:"Continue with Demo OAuth",className:"h-10 w-10 border rounded flex items-center justify-center",onClick:()=>{const o=`${location.origin}/unicon/auth/callback`,u=Math.random().toString(36).slice(2),c=`/unicon/api/oauth/authorize?client_id=demo&redirect_uri=${encodeURIComponent(o)}&state=${encodeURIComponent(u)}`;location.href=c},children:r.jsx(I0,{size:18,"aria-hidden":"true"})}),r.jsx("button",{type:"button","aria-label":"Sign in with Google",title:"Sign in with Google",className:"h-10 w-10 border rounded flex items-center justify-center",onClick:()=>n("google"),children:r.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{fill:"#EA4335",d:"M12 11.9999v3.8h5.3c-.2 1.2-1.4 3.5-5.3 3.5-3.2 0-5.9-2.6-5.9-5.9s2.7-5.9 5.9-5.9c1.8 0 3 .7 3.7 1.3l2.5-2.4C16.7 4.2 14.6 3.3 12 3.3 6.9 3.3 2.8 7.4 2.8 12.5S6.9 21.7 12 21.7c6.9 0 9.5-4.8 9.5-7.2 0-.5-.1-.8-.1-1.1H12z"})})}),r.jsx("button",{type:"button","aria-label":"Sign in with GitHub",title:"Sign in with GitHub",className:"h-10 w-10 border rounded flex items-center justify-center",onClick:()=>n("github"),children:r.jsx(P0,{size:18,"aria-hidden":"true"})}),r.jsx("button",{type:"submit",disabled:f,className:"w-48 h-10 bg-[#004b8d] text-white rounded hover:bg-[#003a6c] disabled:opacity-50",children:f?"Signing in":"Login"}),r.jsx("button",{type:"button",className:"text-sm text-blue-700 hover:underline",onClick:async()=>{try{await Cs("/auth/register",{email:l||"demo@unicon.local",password:p||"demo123"}),alert("Account created. Now you can sign in.")}catch(o){alert(o.message||"Sign up failed")}},children:"Sign up"}),!1]}),r.jsxs("div",{className:"pt-2",children:[r.jsx("label",{className:"text-[16px] leading-6 font-semibold text-gray-700",children:"Language"}),r.jsxs("select",{className:"w-full border rounded px-3 py-2 h-10",defaultValue:"en",onChange:async o=>{const u=o.target.value;try{await Ii(()=>Promise.resolve().then(()=>S2),void 0).then(c=>c.apiPost("/settings/language",{lang:u})).catch(()=>{})}catch{}try{localStorage.setItem("lang",u)}catch{}},children:[r.jsx("option",{value:"en",children:"English"}),r.jsx("option",{value:"de",children:"Deutsch"})]})]}),r.jsxs("div",{className:"text-xs text-gray-500 pt-6 flex items-center gap-2",children:[r.jsx("a",{className:"hover:underline",href:"#",onClick:o=>{o.preventDefault(),a({open:!0,kind:"imprint",data:null,loading:!1,error:""})},children:"Imprint"}),r.jsx("span",{children:""}),r.jsx("a",{className:"hover:underline",href:"#",onClick:o=>{o.preventDefault(),a({open:!0,kind:"privacy",data:null,loading:!1,error:""})},children:"Privacy Policy"}),r.jsx("span",{children:""}),r.jsx("a",{className:"hover:underline",href:"#",onClick:o=>{o.preventDefault(),a({open:!0,kind:"server",data:null,loading:!1,error:""})},children:"Server Details"}),r.jsxs("span",{className:"ml-auto opacity-80",children:[" ",new Date().getFullYear()," SWARCO"]})]})]})]})})})]}),r.jsx("div",{className:"hidden md:block md:w-1/2 relative",children:r.jsx("img",{src:"/unicon/brand/background-image.png",alt:"Background",className:"absolute inset-0 w-full h-full object-cover"})}),t.open&&r.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",role:"dialog","aria-modal":"true",children:r.jsxs("div",{className:"w-full max-w-md rounded-lg border bg-white p-6 shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"font-semibold text-gray-900",children:["Continue with ",t.provider]}),r.jsx("button",{className:"p-1","aria-label":"Close",onClick:()=>s({open:!1,provider:null,loading:!1,error:""}),children:r.jsx(Ur,{size:18})})]}),r.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["You will be redirected to ",t.provider," to continue."]}),t.error&&r.jsx("div",{className:"text-sm text-red-600 mb-2",children:t.error}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{className:"px-4 h-10 rounded bg-[#004b8d] text-white disabled:opacity-50",disabled:t.loading,onClick:m,children:t.loading?"Continuing":"Continue"}),r.jsx("button",{className:"px-4 h-10 rounded bg-gray-100",onClick:()=>s({open:!1,provider:null,loading:!1,error:""}),children:"Cancel"})]})]})}),r.jsxs(kn,{open:i.open,title:i.kind==="imprint"?"Imprint":i.kind==="privacy"?"Privacy Policy":i.kind==="server"?"Server Details":"",onClose:()=>a({open:!1,kind:null,data:null,loading:!1,error:""}),footer:r.jsx("button",{className:"px-4 h-10 rounded bg-gray-100",onClick:()=>a({open:!1,kind:null,data:null,loading:!1,error:""}),children:"Close"}),children:[i.kind==="imprint"&&r.jsxs("div",{className:"text-sm text-gray-700 space-y-2",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Company:"})," SWARCO"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Address:"})," [Add address]"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Contact:"})," [Add contact email/phone]"]}),r.jsx("p",{className:"text-gray-500",children:"This is placeholder text. Replace with your legal imprint details."})]}),i.kind==="privacy"&&r.jsxs("div",{className:"text-sm text-gray-700 space-y-2",children:[r.jsx("p",{children:r.jsx("strong",{children:"Privacy Policy"})}),r.jsx("p",{children:"We process personal data for authentication and service provision. Replace this text with your actual policy or link to your public policy page."})]}),i.kind==="server"&&r.jsxs("div",{className:"text-sm text-gray-700 space-y-2",children:[i.loading&&r.jsx("div",{children:"Loading"}),i.error&&r.jsx("div",{className:"text-red-600",children:i.error}),i.data&&r.jsxs("div",{className:"space-y-1",children:["version"in i.data&&r.jsxs("div",{children:[r.jsx("strong",{children:"Version:"})," ",String(i.data.version)]}),"status"in i.data&&r.jsxs("div",{children:[r.jsx("strong",{children:"Status:"})," ",String(i.data.status)]}),"timestamp"in i.data&&r.jsxs("div",{children:[r.jsx("strong",{children:"Timestamp:"})," ",String(i.data.timestamp)]}),"uptime"in i.data&&r.jsxs("div",{children:[r.jsx("strong",{children:"Uptime:"})," ",String(i.data.uptime)]}),"connectedClients"in i.data&&r.jsxs("div",{children:[r.jsx("strong",{children:"Connected Clients:"})," ",String(i.data.connectedClients)]}),"activeConnections"in i.data&&r.jsxs("div",{children:[r.jsx("strong",{children:"Active Connections:"})," ",String(i.data.activeConnections)]}),i.data&&typeof i.data=="object"&&r.jsxs("details",{className:"mt-2",children:[r.jsx("summary",{className:"cursor-pointer",children:"Raw"}),r.jsx("pre",{className:"bg-gray-50 p-2 rounded overflow-auto text-xs",children:JSON.stringify(i.data,null,2)})]})]})]})]})]})}function ow(){return M.useEffect(()=>{(async()=>{const e=new URLSearchParams(location.search),t=e.get("code");e.get("state");try{const s=await Cs("/oauth/token",{code:t,client_id:"demo"});s!=null&&s.access_token&&(Uv(s.access_token,["developer"]),location.replace("/unicon/"))}catch(s){alert(s.message||"OAuth failed")}})()},[]),r.jsx("div",{className:"p-6 text-sm text-gray-600",children:"Completing sign-in"})}function cw(){const t=new URLSearchParams(typeof window<"u"?window.location.search:"").get("token");return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white text-gray-900",children:r.jsxs("div",{className:"w-full max-w-md border rounded-lg p-6 shadow-sm",children:[r.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Reset password"}),t?r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"A reset token was provided, but password reset is not implemented in this demo build."}):r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Password reset is not implemented in this demo build."}),r.jsx("button",{className:"h-10 px-4 bg-[#004b8d] text-white rounded hover:bg-[#003a6c]",onClick:()=>{window.location.href="/unicon/"},children:"Back to login"})]})})}function uw(){var w,S;const e=M.useMemo(()=>({dashboard:{title:"Dashboard",icon:os,component:ge.lazy(()=>Ii(()=>import("./Dashboard-xILZGz6R.js"),__vite__mapDeps([0,1,2])))},connections:{title:"Connections",icon:Bd,component:aw},examples:{title:"Examples",icon:lc,component:ge.lazy(()=>Ii(()=>import("./ConnectionsExamples-DCHT8LYl.js"),__vite__mapDeps([3,1,2])))},rest:{title:"REST Client",icon:lc,component:k2},opcua:{title:"OPC UA",icon:hi,component:T2},ws:{title:"WebSocket",icon:Kn,component:D2},ssh:{title:"SSH",icon:os,component:W2},k8s:{title:"Kubernetes",icon:hi,component:sw},grpc:{title:"gRPC",icon:oc,component:R2},cpd:{title:"CPD",icon:os,component:L2},sql:{title:"SQL",icon:Hi,component:O2},ftp:{title:"FTP",icon:Hi,component:Zv},sftp:{title:"SFTP",icon:Hi,component:G2},commander:{title:"File Commander",icon:os,component:ge.lazy(()=>Ii(()=>import("./Commander-DVDzaJ4d.js"),__vite__mapDeps([4,1,2])))},"helpers-network":{title:"Network Tools",icon:hi,component:ge.lazy(()=>Ii(()=>import("./NetworkTools-DDd-rVm4.js"),__vite__mapDeps([5,1,2])))},"helpers-format":{title:"JSON/YAML Tools",icon:os,component:ge.lazy(()=>Ii(()=>import("./FormatTools-Bdf_IWpG.js"),__vite__mapDeps([6,1,2])))},templates:{title:"Templates",icon:Bd,component:ge.lazy(()=>Ii(()=>import("./TemplatesAdmin-C5x3FNN5.js"),__vite__mapDeps([7,1,2])))}}),[]),[t,s]=M.useState(()=>{try{const d=JSON.parse(localStorage.getItem("tabs_v1")||"null");if(d&&Array.isArray(d)&&d.length)return d}catch{}const o=(()=>{try{return localStorage.getItem("last_workspace_kind_v1")||"rest"}catch{return"rest"}})(),u=`${o}-1`,c=e[o]||e.rest;return[{id:u,kind:o,title:c.title,params:{}}]}),[i,a]=M.useState(()=>localStorage.getItem("active_tab_v1")||"rest-1"),n=M.useCallback((o,u={})=>{const c=e[o];if(!c)return;const d=`${o}-${Date.now()}`;s(g=>[...g,{id:d,kind:o,title:c.title,params:u}]),a(d);try{localStorage.setItem("last_workspace_kind_v1",o)}catch{}},[e]),[m,l]=M.useState(()=>{try{return JSON.parse(localStorage.getItem("unicon_tab_error_counts")||"{}")}catch{return{}}});ge.useEffect(()=>{const o=u=>{const c=u.detail||{};c.kind==="error"&&l(d=>{const g={...d};return t.forEach(_=>{var j;const C=(j=_.params)==null?void 0:j.connectionId;C&&C===c.connectionId&&(g[_.id]=(g[_.id]||0)+1)}),g})};return window.addEventListener("unicon-log",o),()=>window.removeEventListener("unicon-log",o)},[t]),ge.useEffect(()=>{try{localStorage.setItem("unicon_tab_error_counts",JSON.stringify(m))}catch{}},[m]);const h=M.useCallback(o=>{s(u=>u.filter(c=>c.id!==o)),l(u=>{const c={...u};return delete c[o],c}),a(u=>{if(u===o){const c=t.filter(d=>d.id!==o);return c.length?c[c.length-1].id:null}return u})},[t]),p=M.useCallback(()=>{s([]),a(null)},[]),b=M.useCallback(o=>{a(o),l(u=>({...u,[o]:0}))},[]);if(ge.useEffect(()=>{try{localStorage.setItem("tabs_v1",JSON.stringify(t))}catch{}},[t]),ge.useEffect(()=>{try{i&&localStorage.setItem("active_tab_v1",i)}catch{}},[i]),ge.useEffect(()=>{const o=u=>{(u.ctrlKey||u.metaKey)&&u.key.toLowerCase()==="w"&&(u.preventDefault(),i&&h(i))};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[i,h]),typeof window<"u"&&window.location.pathname.endsWith("/auth/reset"))return r.jsx(cw,{});if(typeof window<"u"&&window.location.pathname.endsWith("/auth/callback"))return r.jsx(ow,{});if(!(((S=(w=import.meta)==null?void 0:w.env)==null?void 0:S.VITE_AUTH_BYPASS)==="1"||!!rs()))return r.jsx(lw,{onLoggedIn:()=>window.location.reload()});const y=t.find(o=>o.id===i)||null;return r.jsx("div",{className:"min-h-screen bg-white text-gray-900",children:r.jsxs("div",{className:"flex h-screen",children:[r.jsx(g2,{onOpenWorkspace:n,activeTabKind:y==null?void 0:y.kind}),r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsx(j2,{onNewConnection:()=>n("connections"),activeTab:y}),r.jsx(A2,{}),r.jsx(E2,{tabs:t,activeTabId:i,onClose:h,onCloseAll:p,onActivate:b,errorCounts:m}),r.jsx(N2,{tabs:t,activeTabId:i,registry:e,openTab:n})]})]})})}function dw(){return r.jsx(vb,{children:r.jsx(uw,{})})}gb.createRoot(document.getElementById("root")).render(r.jsx(ge.StrictMode,{children:r.jsx(dw,{})}));export{xe as B,Qt as E,lt as I,Qv as S,nn as a,Cs as b,bw as c,yw as d,vw as e,gw as f,ln as g,Es as h,_w as i,r as j,hs as k,Nn as l,rw as m,iw as n,Ae as o,Jv as p,Ni as q,pw as r,Uf as s,mw as t};
//# sourceMappingURL=index-DYksaNJ-.js.map
