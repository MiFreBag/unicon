import{g as d,s as p,j as t,E as y,a as S,e as w,i as P,b as k,d as C,S as E,c as l,f as U,h as L,k as A}from"./index-BQRLusCx.js";import{r as h,R as I}from"./vendor-CnGqnXYo.js";import"./icons-oCSk50xQ.js";const R=y.rest||[{name:"JSONPlaceholder",baseUrl:"https://jsonplaceholder.typicode.com",tryPath:"/posts/1",description:"Fake online REST API for testing and prototyping."},{name:"HTTPBin",baseUrl:"https://httpbin.org",tryPath:"/get",description:"HTTP request & response service with many endpoints."},{name:"Cat Facts",baseUrl:"https://catfact.ninja",tryPath:"/fact",description:"Random cat facts."},{name:"Dog CEO",baseUrl:"https://dog.ceo",tryPath:"/api/breeds/image/random",description:"Random dog images."},{name:"Bored API",baseUrl:"https://www.boredapi.com",tryPath:"/api/activity",description:"Random activities to beat boredom."},{name:"Advice Slip",baseUrl:"https://api.adviceslip.com",tryPath:"/advice",description:"Random life advice."},{name:"IPify",baseUrl:"https://api.ipify.org",tryPath:"/?format=json",description:"Returns your public IP in JSON."},{name:"Agify",baseUrl:"https://api.agify.io",tryPath:"/?name=michael",description:"Predict age by name."}],M=y.ws||[{name:"Public Echo",url:"wss://echo.websocket.events",description:"Simple echo server for quick WebSocket tests."}],_=y.sql||[{name:"SQLite (in-memory)",config:{driver:"sqlite",filename:":memory:"},description:"Temporary DB; perfect for a quick SELECT 1 test."}],$=y.opcua||[];function W({openTab:n}){const[o,r]=h.useState(!1),b=async e=>{r(!0);try{const s=(await l({name:`${e.name} (REST)`,type:"rest",config:{baseUrl:e.baseUrl}})).connection;try{await U(s.id);const c={...s,status:"connected"};n&&n("rest",{connectionId:s.id,connection:c,title:`REST • ${e.name}`,autoRequest:{method:"GET",endpoint:e.tryPath||"/"}})}catch{n&&n("rest",{connectionId:s.id,connection:s,title:`REST • ${e.name}`})}}finally{r(!1)}},u=async e=>{r(!0);try{const s=(await l({name:`${e.name} (WS)`,type:"websocket",config:{url:e.url}})).connection;n&&n("ws",{connectionId:s.id,connection:s,title:`WebSocket • ${e.name}`})}finally{r(!1)}},f=async e=>{r(!0);try{const s=(await l({name:`${e.name}`,type:"sql",config:e.config})).connection;n&&n("sql",{connectionId:s.id,connection:s,title:`SQL • ${e.name}`})}finally{r(!1)}},[x,i]=h.useState(d());I.useEffect(()=>{(async()=>{try{const e=await p();i(e),localStorage.setItem("unicon_templates_v1",JSON.stringify(e))}catch{}})()},[]);const g=h.useRef(null),m=async e=>{try{await L(e);const a=await p();i(a),localStorage.setItem("unicon_templates_v1",JSON.stringify(a))}catch{A(e),i(d())}},N=async e=>{const a={name:e.name,type:e.type,config:e.config},c=(await l(a)).connection,v={rest:"rest",websocket:"ws",sql:"sql","opc-ua":"opcua",opcua:"opcua"}[e.type]||"rest";n&&n(v,{connectionId:c.id,connection:c,title:`${e.type.toUpperCase()} • ${e.name}`})},j=async e=>{r(!0);try{const s=(await l({name:`${e.name} (OPC UA)`,type:"opc-ua",config:{endpointUrl:e.endpointUrl,securityPolicy:e.securityPolicy||"None",securityMode:e.securityMode||"None"}})).connection;n&&n("opcua",{connectionId:s.id,connection:s,title:`OPC UA • ${e.name}`})}finally{r(!1)}};return t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[t.jsx("h2",{className:"text-xl font-semibold",children:"Quick-start examples"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Curated, no-auth endpoints inspired by the community-maintained Public APIs list. Create a connection with one click and start testing."}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Note: Third-party endpoints can go offline; if one fails, try another."})]}),t.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"REST APIs"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:R.map(e=>t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsx("div",{className:"font-medium",children:e.name}),t.jsxs("div",{className:"text-xs text-gray-500 mt-1 break-all",children:[e.baseUrl,e.tryPath]}),t.jsx("p",{className:"text-sm text-gray-600 mt-2",children:e.description}),t.jsxs("div",{className:"mt-3 flex gap-2",children:[t.jsx("button",{className:"px-3 py-1.5 text-sm rounded border",onClick:()=>m({name:e.name,type:"rest",config:{baseUrl:e.baseUrl}}),children:"Save to My Library"}),t.jsx("button",{disabled:o,onClick:()=>b(e),className:"px-3 py-1.5 text-sm rounded bg-blue-600 text-white",children:"Add & open"}),t.jsx("a",{className:"px-3 py-1.5 text-sm rounded border text-blue-700",href:`${e.baseUrl}${e.tryPath}`,target:"_blank",rel:"noreferrer",children:"Try GET"})]})]},e.name))})]}),t.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"WebSocket"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:M.map(e=>t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsx("div",{className:"font-medium",children:e.name}),t.jsx("div",{className:"text-xs text-gray-500 mt-1 break-all",children:e.url}),t.jsx("p",{className:"text-sm text-gray-600 mt-2",children:e.description}),t.jsxs("div",{className:"mt-3 flex gap-2",children:[t.jsx("button",{disabled:o,onClick:()=>u(e),className:"px-3 py-1.5 text-sm rounded bg-blue-600 text-white",children:"Add & open"}),t.jsx("button",{className:"px-3 py-1.5 text-sm rounded border",onClick:()=>m({name:e.name,type:"websocket",config:{url:e.url}}),children:"Save to My Library"})]})]},e.name))})]}),t.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"OPC UA"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:$.map(e=>t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsx("div",{className:"font-medium",children:e.name}),t.jsx("div",{className:"text-xs text-gray-500 mt-1 break-all",children:e.endpointUrl}),t.jsx("p",{className:"text-sm text-gray-600 mt-2",children:e.description}),t.jsxs("div",{className:"mt-3 flex gap-2",children:[t.jsx("button",{disabled:o,onClick:()=>j(e),className:"px-3 py-1.5 text-sm rounded bg-blue-600 text-white",children:"Add & open"}),t.jsx("button",{className:"px-3 py-1.5 text-sm rounded border",onClick:()=>m({name:e.name,type:"opc-ua",config:{endpointUrl:e.endpointUrl,securityPolicy:e.securityPolicy||"None",securityMode:e.securityMode||"None"}}),children:"Save to My Library"})]}),t.jsx("div",{className:"text-xs text-amber-600 mt-2",children:"Public demo endpoints can be unstable."})]},e.name))})]}),t.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"SQL"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(e=>t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsx("div",{className:"font-medium",children:e.name}),t.jsx("p",{className:"text-sm text-gray-600 mt-2",children:e.description}),t.jsxs("div",{className:"mt-3 flex gap-2",children:[t.jsx("button",{disabled:o,onClick:()=>f(e),className:"px-3 py-1.5 text-sm rounded bg-blue-600 text-white",children:"Add & open"}),t.jsx("button",{className:"px-3 py-1.5 text-sm rounded border",onClick:()=>m({name:e.name,type:"sql",config:e.config}),children:"Save to My Library"})]})]},e.name))})]}),t.jsxs("section",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"My Library"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{className:"px-3 py-1.5 text-sm rounded border",onClick:async()=>{try{const e=await p();i(e),localStorage.setItem("unicon_templates_v1",JSON.stringify(e))}catch(e){alert(e.message)}},children:"Sync from Server"}),t.jsx("button",{className:"px-3 py-1.5 text-sm rounded border",onClick:async()=>{try{const e=d();await S(e),alert("Uploaded to server")}catch(e){alert(e.message)}},children:"Save all to Server"}),t.jsx("button",{className:"px-3 py-1.5 text-sm rounded border",onClick:w,children:"Export"}),t.jsx("button",{className:"px-3 py-1.5 text-sm rounded border",onClick:()=>{var e;return(e=g.current)==null?void 0:e.click()},children:"Import"}),t.jsx("input",{ref:g,type:"file",accept:"application/json",className:"hidden",onChange:async e=>{var s;const a=(s=e.target.files)==null?void 0:s[0];if(a)try{await P(a),i(d())}catch(c){alert(c.message||"Import failed")}finally{e.target.value=""}}})]})]}),x.length===0?t.jsx("p",{className:"text-sm text-gray-600",children:"No templates saved yet. Use “Save to My Library” on any example or “Save as template” from a connection."}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(e=>t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsx("div",{className:"font-medium",children:e.name}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:e.type.toUpperCase()}),t.jsxs("div",{className:"mt-3 flex gap-2",children:[t.jsx("button",{className:"px-3 py-1.5 text-sm rounded bg-blue-600 text-white",onClick:()=>N(e),children:"Create & open"}),t.jsx("button",{className:"px-3 py-1.5 text-sm rounded border",onClick:async()=>{try{await k(e.id);const a=await p();i(a),localStorage.setItem("unicon_templates_v1",JSON.stringify(a))}catch{C(e.id),i(d())}},children:"Delete"})]})]},e.id))})]}),o&&t.jsxs("div",{className:"fixed bottom-4 right-4 bg-white border rounded shadow px-3 py-2 flex items-center gap-2 text-sm",children:[t.jsx(E,{size:16}),t.jsx("span",{children:"Creating connection…"})]})]})}export{W as default};
//# sourceMappingURL=ConnectionsExamples-BVxMUx2l.js.map
