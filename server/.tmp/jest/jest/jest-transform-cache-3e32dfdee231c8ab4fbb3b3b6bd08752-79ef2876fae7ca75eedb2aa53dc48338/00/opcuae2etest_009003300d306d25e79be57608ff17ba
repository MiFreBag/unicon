e105881ffb11043b2e8bf5f1b899e3bf
const {
  OPCUAServer,
  Variant,
  DataType,
  StatusCodes
} = require('node-opcua');
const net = require('net');
const path = require('path');
const fs = require('fs');
const os = require('os');
const request = require('supertest');
jest.setTimeout(60000);
function getFreePort() {
  return new Promise((resolve, reject) => {
    const srv = net.createServer();
    srv.listen(0, '127.0.0.1', () => {
      const {
        port
      } = srv.address();
      srv.close(() => resolve(port));
    });
    srv.on('error', reject);
  });
}

// Use isolated data dir and dedicated ports for this suite
const tmpDir = fs.mkdtempSync(path.join(os.tmpdir(), 'unicon-opcua-'));
process.env.CONNECTION_DATA_DIR = tmpDir;
process.env.PERSISTENCE = 'file';
process.env.PORT = '3104';
process.env.WS_PORT = '8184';
const {
  startServers
} = require('../universal-server');
let uaServer;
let uaEndpoint;
let started;
let api;
beforeAll(async () => {
  const port = await getFreePort();
  uaServer = new OPCUAServer({
    port,
    hostname: '127.0.0.1',
    alternateHostname: ['127.0.0.1', 'localhost'],
    buildInfo: {
      productName: 'UniconTestOPCUA',
      buildNumber: '1',
      buildDate: new Date()
    }
  });
  await uaServer.initialize();
  // Optional: create a custom variable
  const addressSpace = uaServer.engine.addressSpace;
  const namespace = addressSpace.getOwnNamespace();
  const device = namespace.addObject({
    organizedBy: addressSpace.rootFolder.objects,
    browseName: 'TestDevice'
  });
  let counter = 42;
  namespace.addVariable({
    componentOf: device,
    browseName: 'Counter',
    nodeId: 'ns=1;s=Counter',
    dataType: 'Int32',
    accessLevel: 'CurrentRead | CurrentWrite',
    userAccessLevel: 'CurrentRead | CurrentWrite',
    minimumSamplingInterval: 100,
    value: {
      get: () => new Variant({
        dataType: DataType.Int32,
        value: counter
      }),
      set: variant => {
        counter = variant.value;
        return StatusCodes.Good;
      }
    },
    minimumSamplingInterval: 100
  });
  await uaServer.start();
  uaEndpoint = `opc.tcp://127.0.0.1:${port}`;
  started = await startServers();
  api = request(`http://localhost:${process.env.PORT}`);
});
afterAll(async () => {
  if (started?.server) started.server.close();
  if (started?.wsServer) started.wsServer.close();
  if (uaServer) await uaServer.shutdown(1000);
});
test('OPC UA: connect and browse RootFolder', async () => {
  // Create connection
  const create = await api.post('/unicon/api/connections').send({
    name: 'opcua-local',
    type: 'opcua',
    config: {
      endpointUrl: uaEndpoint
    }
  });
  expect(create.body.success).toBe(true);
  const id = create.body.connection.id;

  // Connect
  const con = await api.post('/unicon/api/connect').send({
    connectionId: id
  });
  expect(con.body.success).toBe(true);

  // Browse
  const browse = await api.post('/unicon/api/operation').send({
    connectionId: id,
    operation: 'browse',
    params: {
      nodeId: 'RootFolder'
    }
  });
  expect(browse.body.success).toBe(true);
  expect(Array.isArray(browse.body.data)).toBe(true);
  expect(browse.body.data.length).toBeGreaterThan(0);
});
test('OPC UA: write/read custom variable', async () => {
  const list = await api.get('/unicon/api/connections');
  const conn = list.body.connections.find(c => c.type === 'opcua');
  expect(conn).toBeTruthy();

  // Write a new value
  const write = await api.post('/unicon/api/operation').send({
    connectionId: conn.id,
    operation: 'write',
    params: {
      nodeId: 'ns=1;s=Counter',
      value: 99,
      dataType: 'Int32'
    }
  });
  expect(write.body.success).toBe(true);

  // Read it back
  const readBack = await api.post('/unicon/api/operation').send({
    connectionId: conn.id,
    operation: 'read',
    params: {
      nodes: ['ns=1;s=Counter']
    }
  });
  expect(readBack.body.success).toBe(true);
  expect(Array.isArray(readBack.body.data)).toBe(true);
  const dv = readBack.body.data[0];
  expect(typeof dv.value?.value === 'number').toBe(true);
});
test('OPC UA: read standard node ServerStatus.CurrentTime', async () => {
  const list = await api.get('/unicon/api/connections');
  const conn = list.body.connections.find(c => c.type === 'opcua');
  expect(conn).toBeTruthy();
  const read = await api.post('/unicon/api/operation').send({
    connectionId: conn.id,
    operation: 'read',
    params: {
      nodes: ['ns=0;i=2258']
    }
  });
  expect(read.body.success).toBe(true);
  expect(Array.isArray(read.body.data)).toBe(true);
  expect(read.body.data.length).toBe(1);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPUENVQVNlcnZlciIsIlZhcmlhbnQiLCJEYXRhVHlwZSIsIlN0YXR1c0NvZGVzIiwicmVxdWlyZSIsIm5ldCIsInBhdGgiLCJmcyIsIm9zIiwicmVxdWVzdCIsImplc3QiLCJzZXRUaW1lb3V0IiwiZ2V0RnJlZVBvcnQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInNydiIsImNyZWF0ZVNlcnZlciIsImxpc3RlbiIsInBvcnQiLCJhZGRyZXNzIiwiY2xvc2UiLCJvbiIsInRtcERpciIsIm1rZHRlbXBTeW5jIiwiam9pbiIsInRtcGRpciIsInByb2Nlc3MiLCJlbnYiLCJDT05ORUNUSU9OX0RBVEFfRElSIiwiUEVSU0lTVEVOQ0UiLCJQT1JUIiwiV1NfUE9SVCIsInN0YXJ0U2VydmVycyIsInVhU2VydmVyIiwidWFFbmRwb2ludCIsInN0YXJ0ZWQiLCJhcGkiLCJiZWZvcmVBbGwiLCJob3N0bmFtZSIsImFsdGVybmF0ZUhvc3RuYW1lIiwiYnVpbGRJbmZvIiwicHJvZHVjdE5hbWUiLCJidWlsZE51bWJlciIsImJ1aWxkRGF0ZSIsIkRhdGUiLCJpbml0aWFsaXplIiwiYWRkcmVzc1NwYWNlIiwiZW5naW5lIiwibmFtZXNwYWNlIiwiZ2V0T3duTmFtZXNwYWNlIiwiZGV2aWNlIiwiYWRkT2JqZWN0Iiwib3JnYW5pemVkQnkiLCJyb290Rm9sZGVyIiwib2JqZWN0cyIsImJyb3dzZU5hbWUiLCJjb3VudGVyIiwiYWRkVmFyaWFibGUiLCJjb21wb25lbnRPZiIsIm5vZGVJZCIsImRhdGFUeXBlIiwiYWNjZXNzTGV2ZWwiLCJ1c2VyQWNjZXNzTGV2ZWwiLCJtaW5pbXVtU2FtcGxpbmdJbnRlcnZhbCIsInZhbHVlIiwiZ2V0IiwiSW50MzIiLCJzZXQiLCJ2YXJpYW50IiwiR29vZCIsInN0YXJ0IiwiYWZ0ZXJBbGwiLCJzZXJ2ZXIiLCJ3c1NlcnZlciIsInNodXRkb3duIiwidGVzdCIsImNyZWF0ZSIsInBvc3QiLCJzZW5kIiwibmFtZSIsInR5cGUiLCJjb25maWciLCJlbmRwb2ludFVybCIsImV4cGVjdCIsImJvZHkiLCJzdWNjZXNzIiwidG9CZSIsImlkIiwiY29ubmVjdGlvbiIsImNvbiIsImNvbm5lY3Rpb25JZCIsImJyb3dzZSIsIm9wZXJhdGlvbiIsInBhcmFtcyIsIkFycmF5IiwiaXNBcnJheSIsImRhdGEiLCJsZW5ndGgiLCJ0b0JlR3JlYXRlclRoYW4iLCJsaXN0IiwiY29ubiIsImNvbm5lY3Rpb25zIiwiZmluZCIsImMiLCJ0b0JlVHJ1dGh5Iiwid3JpdGUiLCJyZWFkQmFjayIsIm5vZGVzIiwiZHYiLCJyZWFkIl0sInNvdXJjZXMiOlsib3BjdWEuZTJlLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBPUENVQVNlcnZlciwgVmFyaWFudCwgRGF0YVR5cGUsIFN0YXR1c0NvZGVzIH0gPSByZXF1aXJlKCdub2RlLW9wY3VhJyk7XHJcbmNvbnN0IG5ldCA9IHJlcXVpcmUoJ25ldCcpO1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xyXG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XHJcbmNvbnN0IG9zID0gcmVxdWlyZSgnb3MnKTtcclxuY29uc3QgcmVxdWVzdCA9IHJlcXVpcmUoJ3N1cGVydGVzdCcpO1xyXG5cclxuamVzdC5zZXRUaW1lb3V0KDYwMDAwKTtcclxuXHJcbmZ1bmN0aW9uIGdldEZyZWVQb3J0KCkge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBjb25zdCBzcnYgPSBuZXQuY3JlYXRlU2VydmVyKCk7XHJcbiAgICBzcnYubGlzdGVuKDAsICcxMjcuMC4wLjEnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHsgcG9ydCB9ID0gc3J2LmFkZHJlc3MoKTtcclxuICAgICAgc3J2LmNsb3NlKCgpID0+IHJlc29sdmUocG9ydCkpO1xyXG4gICAgfSk7XHJcbiAgICBzcnYub24oJ2Vycm9yJywgcmVqZWN0KTtcclxuICB9KTtcclxufVxyXG5cclxuLy8gVXNlIGlzb2xhdGVkIGRhdGEgZGlyIGFuZCBkZWRpY2F0ZWQgcG9ydHMgZm9yIHRoaXMgc3VpdGVcclxuY29uc3QgdG1wRGlyID0gZnMubWtkdGVtcFN5bmMocGF0aC5qb2luKG9zLnRtcGRpcigpLCAndW5pY29uLW9wY3VhLScpKTtcclxucHJvY2Vzcy5lbnYuQ09OTkVDVElPTl9EQVRBX0RJUiA9IHRtcERpcjtcclxucHJvY2Vzcy5lbnYuUEVSU0lTVEVOQ0UgPSAnZmlsZSc7XHJcbnByb2Nlc3MuZW52LlBPUlQgPSAnMzEwNCc7XHJcbnByb2Nlc3MuZW52LldTX1BPUlQgPSAnODE4NCc7XHJcblxyXG5jb25zdCB7IHN0YXJ0U2VydmVycyB9ID0gcmVxdWlyZSgnLi4vdW5pdmVyc2FsLXNlcnZlcicpO1xyXG5cclxubGV0IHVhU2VydmVyOyBsZXQgdWFFbmRwb2ludDsgbGV0IHN0YXJ0ZWQ7IGxldCBhcGk7XHJcblxyXG5iZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xyXG4gIGNvbnN0IHBvcnQgPSBhd2FpdCBnZXRGcmVlUG9ydCgpO1xyXG4gIHVhU2VydmVyID0gbmV3IE9QQ1VBU2VydmVyKHtcclxuICAgIHBvcnQsXHJcbiAgICBob3N0bmFtZTogJzEyNy4wLjAuMScsXHJcbiAgICBhbHRlcm5hdGVIb3N0bmFtZTogWycxMjcuMC4wLjEnLCdsb2NhbGhvc3QnXSxcclxuICAgIGJ1aWxkSW5mbzogeyBwcm9kdWN0TmFtZTogJ1VuaWNvblRlc3RPUENVQScsIGJ1aWxkTnVtYmVyOiAnMScsIGJ1aWxkRGF0ZTogbmV3IERhdGUoKSB9LFxyXG4gIH0pO1xyXG4gIGF3YWl0IHVhU2VydmVyLmluaXRpYWxpemUoKTtcclxuICAvLyBPcHRpb25hbDogY3JlYXRlIGEgY3VzdG9tIHZhcmlhYmxlXHJcbiAgY29uc3QgYWRkcmVzc1NwYWNlID0gdWFTZXJ2ZXIuZW5naW5lLmFkZHJlc3NTcGFjZTtcclxuICBjb25zdCBuYW1lc3BhY2UgPSBhZGRyZXNzU3BhY2UuZ2V0T3duTmFtZXNwYWNlKCk7XHJcbiAgY29uc3QgZGV2aWNlID0gbmFtZXNwYWNlLmFkZE9iamVjdCh7XHJcbiAgICBvcmdhbml6ZWRCeTogYWRkcmVzc1NwYWNlLnJvb3RGb2xkZXIub2JqZWN0cyxcclxuICAgIGJyb3dzZU5hbWU6ICdUZXN0RGV2aWNlJyxcclxuICB9KTtcclxuICBsZXQgY291bnRlciA9IDQyO1xyXG4gIG5hbWVzcGFjZS5hZGRWYXJpYWJsZSh7XHJcbiAgICBjb21wb25lbnRPZjogZGV2aWNlLFxyXG4gICAgYnJvd3NlTmFtZTogJ0NvdW50ZXInLFxyXG4gICAgbm9kZUlkOiAnbnM9MTtzPUNvdW50ZXInLFxyXG4gICAgZGF0YVR5cGU6ICdJbnQzMicsXHJcbiAgICBhY2Nlc3NMZXZlbDogJ0N1cnJlbnRSZWFkIHwgQ3VycmVudFdyaXRlJyxcclxuICAgIHVzZXJBY2Nlc3NMZXZlbDogJ0N1cnJlbnRSZWFkIHwgQ3VycmVudFdyaXRlJyxcclxuICAgIG1pbmltdW1TYW1wbGluZ0ludGVydmFsOiAxMDAsXHJcbiAgICB2YWx1ZToge1xyXG4gICAgICBnZXQ6ICgpID0+IG5ldyBWYXJpYW50KHsgZGF0YVR5cGU6IERhdGFUeXBlLkludDMyLCB2YWx1ZTogY291bnRlciB9KSxcclxuICAgICAgc2V0OiAodmFyaWFudCkgPT4ge1xyXG4gICAgICAgIGNvdW50ZXIgPSB2YXJpYW50LnZhbHVlO1xyXG4gICAgICAgIHJldHVybiBTdGF0dXNDb2Rlcy5Hb29kO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgbWluaW11bVNhbXBsaW5nSW50ZXJ2YWw6IDEwMFxyXG4gIH0pO1xyXG5cclxuICBhd2FpdCB1YVNlcnZlci5zdGFydCgpO1xyXG4gIHVhRW5kcG9pbnQgPSBgb3BjLnRjcDovLzEyNy4wLjAuMToke3BvcnR9YDtcclxuXHJcbiAgc3RhcnRlZCA9IGF3YWl0IHN0YXJ0U2VydmVycygpO1xyXG4gIGFwaSA9IHJlcXVlc3QoYGh0dHA6Ly9sb2NhbGhvc3Q6JHtwcm9jZXNzLmVudi5QT1JUfWApO1xyXG59KTtcclxuXHJcbmFmdGVyQWxsKGFzeW5jICgpID0+IHtcclxuICBpZiAoc3RhcnRlZD8uc2VydmVyKSBzdGFydGVkLnNlcnZlci5jbG9zZSgpO1xyXG4gIGlmIChzdGFydGVkPy53c1NlcnZlcikgc3RhcnRlZC53c1NlcnZlci5jbG9zZSgpO1xyXG4gIGlmICh1YVNlcnZlcikgYXdhaXQgdWFTZXJ2ZXIuc2h1dGRvd24oMTAwMCk7XHJcbn0pO1xyXG5cclxudGVzdCgnT1BDIFVBOiBjb25uZWN0IGFuZCBicm93c2UgUm9vdEZvbGRlcicsIGFzeW5jICgpID0+IHtcclxuICAvLyBDcmVhdGUgY29ubmVjdGlvblxyXG4gIGNvbnN0IGNyZWF0ZSA9IGF3YWl0IGFwaS5wb3N0KCcvdW5pY29uL2FwaS9jb25uZWN0aW9ucycpLnNlbmQoe1xyXG4gICAgbmFtZTogJ29wY3VhLWxvY2FsJyxcclxuICAgIHR5cGU6ICdvcGN1YScsXHJcbiAgICBjb25maWc6IHsgZW5kcG9pbnRVcmw6IHVhRW5kcG9pbnQgfVxyXG4gIH0pO1xyXG4gIGV4cGVjdChjcmVhdGUuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gIGNvbnN0IGlkID0gY3JlYXRlLmJvZHkuY29ubmVjdGlvbi5pZDtcclxuXHJcbiAgLy8gQ29ubmVjdFxyXG4gIGNvbnN0IGNvbiA9IGF3YWl0IGFwaS5wb3N0KCcvdW5pY29uL2FwaS9jb25uZWN0Jykuc2VuZCh7IGNvbm5lY3Rpb25JZDogaWQgfSk7XHJcbiAgZXhwZWN0KGNvbi5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcblxyXG4gIC8vIEJyb3dzZVxyXG4gIGNvbnN0IGJyb3dzZSA9IGF3YWl0IGFwaS5wb3N0KCcvdW5pY29uL2FwaS9vcGVyYXRpb24nKS5zZW5kKHtcclxuICAgIGNvbm5lY3Rpb25JZDogaWQsXHJcbiAgICBvcGVyYXRpb246ICdicm93c2UnLFxyXG4gICAgcGFyYW1zOiB7IG5vZGVJZDogJ1Jvb3RGb2xkZXInIH1cclxuICB9KTtcclxuICBleHBlY3QoYnJvd3NlLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICBleHBlY3QoQXJyYXkuaXNBcnJheShicm93c2UuYm9keS5kYXRhKSkudG9CZSh0cnVlKTtcclxuICBleHBlY3QoYnJvd3NlLmJvZHkuZGF0YS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxufSk7XHJcblxyXG50ZXN0KCdPUEMgVUE6IHdyaXRlL3JlYWQgY3VzdG9tIHZhcmlhYmxlJywgYXN5bmMgKCkgPT4ge1xyXG4gIGNvbnN0IGxpc3QgPSBhd2FpdCBhcGkuZ2V0KCcvdW5pY29uL2FwaS9jb25uZWN0aW9ucycpO1xyXG4gIGNvbnN0IGNvbm4gPSBsaXN0LmJvZHkuY29ubmVjdGlvbnMuZmluZChjID0+IGMudHlwZSA9PT0gJ29wY3VhJyk7XHJcbiAgZXhwZWN0KGNvbm4pLnRvQmVUcnV0aHkoKTtcclxuXHJcbiAgLy8gV3JpdGUgYSBuZXcgdmFsdWVcclxuICBjb25zdCB3cml0ZSA9IGF3YWl0IGFwaS5wb3N0KCcvdW5pY29uL2FwaS9vcGVyYXRpb24nKS5zZW5kKHtcclxuICAgIGNvbm5lY3Rpb25JZDogY29ubi5pZCxcclxuICAgIG9wZXJhdGlvbjogJ3dyaXRlJyxcclxuICAgIHBhcmFtczogeyBub2RlSWQ6ICducz0xO3M9Q291bnRlcicsIHZhbHVlOiA5OSwgZGF0YVR5cGU6ICdJbnQzMicgfVxyXG4gIH0pO1xyXG4gIGV4cGVjdCh3cml0ZS5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcblxyXG4gIC8vIFJlYWQgaXQgYmFja1xyXG4gIGNvbnN0IHJlYWRCYWNrID0gYXdhaXQgYXBpLnBvc3QoJy91bmljb24vYXBpL29wZXJhdGlvbicpLnNlbmQoe1xyXG4gICAgY29ubmVjdGlvbklkOiBjb25uLmlkLFxyXG4gICAgb3BlcmF0aW9uOiAncmVhZCcsXHJcbiAgICBwYXJhbXM6IHsgbm9kZXM6IFsnbnM9MTtzPUNvdW50ZXInXSB9XHJcbiAgfSk7XHJcbiAgZXhwZWN0KHJlYWRCYWNrLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICBleHBlY3QoQXJyYXkuaXNBcnJheShyZWFkQmFjay5ib2R5LmRhdGEpKS50b0JlKHRydWUpO1xyXG4gIGNvbnN0IGR2ID0gcmVhZEJhY2suYm9keS5kYXRhWzBdO1xyXG4gIGV4cGVjdCh0eXBlb2YgZHYudmFsdWU/LnZhbHVlID09PSAnbnVtYmVyJykudG9CZSh0cnVlKTtcclxufSk7XHJcblxyXG50ZXN0KCdPUEMgVUE6IHJlYWQgc3RhbmRhcmQgbm9kZSBTZXJ2ZXJTdGF0dXMuQ3VycmVudFRpbWUnLCBhc3luYyAoKSA9PiB7XHJcbiAgY29uc3QgbGlzdCA9IGF3YWl0IGFwaS5nZXQoJy91bmljb24vYXBpL2Nvbm5lY3Rpb25zJyk7XHJcbiAgY29uc3QgY29ubiA9IGxpc3QuYm9keS5jb25uZWN0aW9ucy5maW5kKGMgPT4gYy50eXBlID09PSAnb3BjdWEnKTtcclxuICBleHBlY3QoY29ubikudG9CZVRydXRoeSgpO1xyXG5cclxuICBjb25zdCByZWFkID0gYXdhaXQgYXBpLnBvc3QoJy91bmljb24vYXBpL29wZXJhdGlvbicpLnNlbmQoe1xyXG4gICAgY29ubmVjdGlvbklkOiBjb25uLmlkLFxyXG4gICAgb3BlcmF0aW9uOiAncmVhZCcsXHJcbiAgICBwYXJhbXM6IHsgbm9kZXM6IFsnbnM9MDtpPTIyNTgnXSB9XHJcbiAgfSk7XHJcbiAgZXhwZWN0KHJlYWQuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gIGV4cGVjdChBcnJheS5pc0FycmF5KHJlYWQuYm9keS5kYXRhKSkudG9CZSh0cnVlKTtcclxuICBleHBlY3QocmVhZC5ib2R5LmRhdGEubGVuZ3RoKS50b0JlKDEpO1xyXG59KTsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUEsV0FBVztFQUFFQyxPQUFPO0VBQUVDLFFBQVE7RUFBRUM7QUFBWSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxZQUFZLENBQUM7QUFDN0UsTUFBTUMsR0FBRyxHQUFHRCxPQUFPLENBQUMsS0FBSyxDQUFDO0FBQzFCLE1BQU1FLElBQUksR0FBR0YsT0FBTyxDQUFDLE1B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