aeb66ec47122a71fd59c4f9ca80dfc1b
// server/handlers/sql_handler.js
// Minimal SQL handler: sqlite (default), with optional pg/mysql2 support

class SQLHandler {
  constructor(connectionId, config = {}) {
    this.connectionId = connectionId;
    this.config = config;
    this.driver = (config.driver || 'sqlite').toLowerCase();
    this.client = null; // sqlite Database or pg Pool or mysql2 Pool
  }
  async connect() {
    if (this.driver === 'sqlite') {
      const sqlite3 = require('sqlite3');
      const {
        Database
      } = sqlite3;
      const filename = this.config.filename || ':memory:';
      await new Promise((resolve, reject) => {
        this.client = new Database(filename, err => err ? reject(err) : resolve());
      });
      // Pragmas for reliability
      await this._run('PRAGMA journal_mode=WAL;');
      await this._run('PRAGMA foreign_keys=ON;');
      return {
        success: true,
        data: {
          driver: 'sqlite',
          filename
        }
      };
    }
    if (this.driver === 'pg') {
      const {
        Pool
      } = require('pg');
      this.client = new Pool({
        connectionString: this.config.url || this.config.connectionString
      });
      // simple test
      await this.client.query('SELECT 1');
      return {
        success: true,
        data: {
          driver: 'pg'
        }
      };
    }
    if (this.driver === 'mysql') {
      const mysql = require('mysql2/promise');
      this.client = await mysql.createPool({
        uri: this.config.url || this.config.connectionString
      });
      await this.client.query('SELECT 1');
      return {
        success: true,
        data: {
          driver: 'mysql'
        }
      };
    }
    throw new Error(`Unsupported SQL driver: ${this.driver}`);
  }
  async disconnect() {
    if (!this.client) return {
      success: true
    };
    try {
      if (this.driver === 'sqlite') {
        await new Promise(resolve => this.client.close(() => resolve()));
      } else if (this.driver === 'pg') {
        await this.client.end();
      } else if (this.driver === 'mysql') {
        await this.client.end();
      }
    } catch (_) {}
    this.client = null;
    return {
      success: true
    };
  }
  async query(sql, params = []) {
    if (!this.client) throw new Error('SQL not connected');
    if (typeof sql !== 'string' || !sql.trim()) throw new Error('SQL statement required');
    if (this.driver === 'sqlite') {
      const isSelect = /^\s*select\s/i.test(sql);
      if (isSelect) {
        const rows = await this._all(sql, params);
        return {
          success: true,
          data: {
            rows
          }
        };
      }
      const {
        changes,
        lastID
      } = await this._run(sql, params);
      return {
        success: true,
        data: {
          changes,
          lastID
        }
      };
    }
    if (this.driver === 'pg') {
      const res = await this.client.query(sql, params);
      return {
        success: true,
        data: {
          rows: res.rows,
          rowCount: res.rowCount
        }
      };
    }
    if (this.driver === 'mysql') {
      const [rows] = await this.client.query(sql, params);
      // rows is array for SELECT, OkPacket for DML
      if (Array.isArray(rows)) return {
        success: true,
        data: {
          rows
        }
      };
      return {
        success: true,
        data: rows
      };
    }
    throw new Error('Driver not initialized');
  }

  // sqlite helpers
  _all(sql, params = []) {
    return new Promise((resolve, reject) => {
      this.client.all(sql, params, (err, rows) => err ? reject(err) : resolve(rows));
    });
  }
  _run(sql, params = []) {
    return new Promise((resolve, reject) => {
      this.client.run(sql, params, function (err) {
        if (err) return reject(err);
        resolve({
          lastID: this.lastID,
          changes: this.changes
        });
      });
    });
  }
}
module.exports = SQLHandler;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTUUxIYW5kbGVyIiwiY29uc3RydWN0b3IiLCJjb25uZWN0aW9uSWQiLCJjb25maWciLCJkcml2ZXIiLCJ0b0xvd2VyQ2FzZSIsImNsaWVudCIsImNvbm5lY3QiLCJzcWxpdGUzIiwicmVxdWlyZSIsIkRhdGFiYXNlIiwiZmlsZW5hbWUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImVyciIsIl9ydW4iLCJzdWNjZXNzIiwiZGF0YSIsIlBvb2wiLCJjb25uZWN0aW9uU3RyaW5nIiwidXJsIiwicXVlcnkiLCJteXNxbCIsImNyZWF0ZVBvb2wiLCJ1cmkiLCJFcnJvciIsImRpc2Nvbm5lY3QiLCJjbG9zZSIsImVuZCIsIl8iLCJzcWwiLCJwYXJhbXMiLCJ0cmltIiwiaXNTZWxlY3QiLCJ0ZXN0Iiwicm93cyIsIl9hbGwiLCJjaGFuZ2VzIiwibGFzdElEIiwicmVzIiwicm93Q291bnQiLCJBcnJheSIsImlzQXJyYXkiLCJhbGwiLCJydW4iLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsic3FsX2hhbmRsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc2VydmVyL2hhbmRsZXJzL3NxbF9oYW5kbGVyLmpzXHJcbi8vIE1pbmltYWwgU1FMIGhhbmRsZXI6IHNxbGl0ZSAoZGVmYXVsdCksIHdpdGggb3B0aW9uYWwgcGcvbXlzcWwyIHN1cHBvcnRcclxuXHJcbmNsYXNzIFNRTEhhbmRsZXIge1xyXG4gIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb25JZCwgY29uZmlnID0ge30pIHtcclxuICAgIHRoaXMuY29ubmVjdGlvbklkID0gY29ubmVjdGlvbklkO1xyXG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XHJcbiAgICB0aGlzLmRyaXZlciA9IChjb25maWcuZHJpdmVyIHx8ICdzcWxpdGUnKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgdGhpcy5jbGllbnQgPSBudWxsOyAvLyBzcWxpdGUgRGF0YWJhc2Ugb3IgcGcgUG9vbCBvciBteXNxbDIgUG9vbFxyXG4gIH1cclxuXHJcbiAgYXN5bmMgY29ubmVjdCgpIHtcclxuICAgIGlmICh0aGlzLmRyaXZlciA9PT0gJ3NxbGl0ZScpIHtcclxuICAgICAgY29uc3Qgc3FsaXRlMyA9IHJlcXVpcmUoJ3NxbGl0ZTMnKTtcclxuICAgICAgY29uc3QgeyBEYXRhYmFzZSB9ID0gc3FsaXRlMztcclxuICAgICAgY29uc3QgZmlsZW5hbWUgPSB0aGlzLmNvbmZpZy5maWxlbmFtZSB8fCAnOm1lbW9yeTonO1xyXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5jbGllbnQgPSBuZXcgRGF0YWJhc2UoZmlsZW5hbWUsIChlcnIpID0+IChlcnIgPyByZWplY3QoZXJyKSA6IHJlc29sdmUoKSkpO1xyXG4gICAgICB9KTtcclxuICAgICAgLy8gUHJhZ21hcyBmb3IgcmVsaWFiaWxpdHlcclxuICAgICAgYXdhaXQgdGhpcy5fcnVuKCdQUkFHTUEgam91cm5hbF9tb2RlPVdBTDsnKTtcclxuICAgICAgYXdhaXQgdGhpcy5fcnVuKCdQUkFHTUEgZm9yZWlnbl9rZXlzPU9OOycpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB7IGRyaXZlcjogJ3NxbGl0ZScsIGZpbGVuYW1lIH0gfTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5kcml2ZXIgPT09ICdwZycpIHtcclxuICAgICAgY29uc3QgeyBQb29sIH0gPSByZXF1aXJlKCdwZycpO1xyXG4gICAgICB0aGlzLmNsaWVudCA9IG5ldyBQb29sKHsgY29ubmVjdGlvblN0cmluZzogdGhpcy5jb25maWcudXJsIHx8IHRoaXMuY29uZmlnLmNvbm5lY3Rpb25TdHJpbmcgfSk7XHJcbiAgICAgIC8vIHNpbXBsZSB0ZXN0XHJcbiAgICAgIGF3YWl0IHRoaXMuY2xpZW50LnF1ZXJ5KCdTRUxFQ1QgMScpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB7IGRyaXZlcjogJ3BnJyB9IH07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuZHJpdmVyID09PSAnbXlzcWwnKSB7XHJcbiAgICAgIGNvbnN0IG15c3FsID0gcmVxdWlyZSgnbXlzcWwyL3Byb21pc2UnKTtcclxuICAgICAgdGhpcy5jbGllbnQgPSBhd2FpdCBteXNxbC5jcmVhdGVQb29sKHsgdXJpOiB0aGlzLmNvbmZpZy51cmwgfHwgdGhpcy5jb25maWcuY29ubmVjdGlvblN0cmluZyB9KTtcclxuICAgICAgYXdhaXQgdGhpcy5jbGllbnQucXVlcnkoJ1NFTEVDVCAxJyk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHsgZHJpdmVyOiAnbXlzcWwnIH0gfTtcclxuICAgIH1cclxuXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIFNRTCBkcml2ZXI6ICR7dGhpcy5kcml2ZXJ9YCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBkaXNjb25uZWN0KCkge1xyXG4gICAgaWYgKCF0aGlzLmNsaWVudCkgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKHRoaXMuZHJpdmVyID09PSAnc3FsaXRlJykge1xyXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB0aGlzLmNsaWVudC5jbG9zZSgoKSA9PiByZXNvbHZlKCkpKTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLmRyaXZlciA9PT0gJ3BnJykge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuY2xpZW50LmVuZCgpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZHJpdmVyID09PSAnbXlzcWwnKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5jbGllbnQuZW5kKCk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKF8pIHt9XHJcbiAgICB0aGlzLmNsaWVudCA9IG51bGw7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgfVxyXG5cclxuICBhc3luYyBxdWVyeShzcWwsIHBhcmFtcyA9IFtdKSB7XHJcbiAgICBpZiAoIXRoaXMuY2xpZW50KSB0aHJvdyBuZXcgRXJyb3IoJ1NRTCBub3QgY29ubmVjdGVkJyk7XHJcbiAgICBpZiAodHlwZW9mIHNxbCAhPT0gJ3N0cmluZycgfHwgIXNxbC50cmltKCkpIHRocm93IG5ldyBFcnJvcignU1FMIHN0YXRlbWVudCByZXF1aXJlZCcpO1xyXG5cclxuICAgIGlmICh0aGlzLmRyaXZlciA9PT0gJ3NxbGl0ZScpIHtcclxuICAgICAgY29uc3QgaXNTZWxlY3QgPSAvXlxccypzZWxlY3RcXHMvaS50ZXN0KHNxbCk7XHJcbiAgICAgIGlmIChpc1NlbGVjdCkge1xyXG4gICAgICAgIGNvbnN0IHJvd3MgPSBhd2FpdCB0aGlzLl9hbGwoc3FsLCBwYXJhbXMpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHsgcm93cyB9IH07XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgeyBjaGFuZ2VzLCBsYXN0SUQgfSA9IGF3YWl0IHRoaXMuX3J1bihzcWwsIHBhcmFtcyk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHsgY2hhbmdlcywgbGFzdElEIH0gfTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5kcml2ZXIgPT09ICdwZycpIHtcclxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5jbGllbnQucXVlcnkoc3FsLCBwYXJhbXMpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB7IHJvd3M6IHJlcy5yb3dzLCByb3dDb3VudDogcmVzLnJvd0NvdW50IH0gfTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5kcml2ZXIgPT09ICdteXNxbCcpIHtcclxuICAgICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgdGhpcy5jbGllbnQucXVlcnkoc3FsLCBwYXJhbXMpO1xyXG4gICAgICAvLyByb3dzIGlzIGFycmF5IGZvciBTRUxFQ1QsIE9rUGFja2V0IGZvciBETUxcclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocm93cykpIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHsgcm93cyB9IH07XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJvd3MgfTtcclxuICAgIH1cclxuXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0RyaXZlciBub3QgaW5pdGlhbGl6ZWQnKTtcclxuICB9XHJcblxyXG4gIC8vIHNxbGl0ZSBoZWxwZXJzXHJcbiAgX2FsbChzcWwsIHBhcmFtcyA9IFtdKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICB0aGlzLmNsaWVudC5hbGwoc3FsLCBwYXJhbXMsIChlcnIsIHJvd3MpID0+IChlcnIgPyByZWplY3QoZXJyKSA6IHJlc29sdmUocm93cykpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3J1bihzcWwsIHBhcmFtcyA9IFtdKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICB0aGlzLmNsaWVudC5ydW4oc3FsLCBwYXJhbXMsIGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICBpZiAoZXJyKSByZXR1cm4gcmVqZWN0KGVycik7XHJcbiAgICAgICAgcmVzb2x2ZSh7IGxhc3RJRDogdGhpcy5sYXN0SUQsIGNoYW5nZXM6IHRoaXMuY2hhbmdlcyB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gU1FMSGFuZGxlcjtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBOztBQUVBLE1BQU1BLFVBQVUsQ0FBQztFQUNmQyxXQUFXQSxDQUFDQyxZQUFZLEVBQUVDLE1BQU0sR0FBRyxDQUFDLENBQUMsRUFBRTtJQUNyQyxJQUFJLENBQUNELFlBQVksR0FBR0EsWUFBWTtJQUNoQyxJQUFJLENBQUNDLE1BQU0s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