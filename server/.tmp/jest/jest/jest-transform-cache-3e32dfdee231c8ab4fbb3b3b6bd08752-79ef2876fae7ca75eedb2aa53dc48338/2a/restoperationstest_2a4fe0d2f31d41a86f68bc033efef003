123aa584dd248bc8b316b6be4f785776
const express = require('express');
const http = require('http');
const request = require('supertest');
const path = require('path');
const os = require('os');
const fs = require('fs');

// Increase timeout for server spin-up
jest.setTimeout(20000);

// Use a temp data dir per run
const tmpDir = fs.mkdtempSync(path.join(os.tmpdir(), 'unicon-rest-'));
process.env.CONNECTION_DATA_DIR = tmpDir;
process.env.PERSISTENCE = 'file';
process.env.PORT = '3102';
process.env.WS_PORT = '8182';
const {
  startServers
} = require('../universal-server');
let started;
let api;
let demoServer;
let demoPort;
beforeAll(async () => {
  // Start demo REST backend
  const app = express();
  app.get('/test', (req, res) => res.json({
    ok: true
  }));
  app.get('/hello/:name', (req, res) => res.json({
    message: `Hello ${req.params.name}`
  }));
  demoServer = http.createServer(app);
  await new Promise(resolve => demoServer.listen(0, '127.0.0.1', resolve));
  demoPort = demoServer.address().port;

  // Start Unicon server
  started = await startServers();
  api = request(`http://localhost:${process.env.PORT}`);
});
afterAll(async () => {
  if (started?.server) started.server.close();
  if (started?.wsServer) started.wsServer.close();
  if (demoServer) demoServer.close();
});
test('REST: connect and perform GET /test via /operation', async () => {
  // Create connection
  const create = await api.post('/unicon/api/connections').send({
    name: 'rest-local',
    type: 'rest',
    config: {
      baseUrl: `http://127.0.0.1:${demoPort}`
    }
  });
  expect(create.body.success).toBe(true);
  const id = create.body.connection.id;

  // Connect
  const con = await api.post('/unicon/api/connect').send({
    connectionId: id
  });
  expect(con.body.success).toBe(true);

  // Request operation
  const op = await api.post('/unicon/api/operation').send({
    connectionId: id,
    operation: 'request',
    params: {
      method: 'GET',
      endpoint: '/test'
    }
  });
  expect(op.body.success).toBe(true);
  expect(op.body.data.status).toBe(200);
  expect(op.body.data.data).toEqual({
    ok: true
  });
});
test('REST: upload OpenAPI, load, and generate example/validate', async () => {
  const openapi = {
    openapi: '3.0.0',
    info: {
      title: 'Demo',
      version: '1.0.0'
    },
    paths: {
      '/hello/{name}': {
        get: {
          summary: 'Say hello',
          parameters: [{
            name: 'name',
            in: 'path',
            required: true,
            schema: {
              type: 'string'
            }
          }, {
            name: 'x-req-id',
            in: 'header',
            required: false,
            schema: {
              type: 'string'
            }
          }],
          responses: {
            '200': {
              description: 'ok'
            }
          }
        }
      }
    }
  };

  // Get a REST connection
  const list = await api.get('/unicon/api/connections');
  const rest = list.body.connections.find(c => c.type === 'rest');
  expect(rest).toBeTruthy();

  // Upload spec
  const upload = await api.post('/unicon/api/upload-openapi').attach('openApiFile', Buffer.from(JSON.stringify(openapi)), 'demo.json');
  expect(upload.body.success).toBe(true);

  // Load spec into handler
  const load = await api.post('/unicon/api/operation').send({
    connectionId: rest.id,
    operation: 'loadOpenApi',
    params: {
      openApiFile: 'demo.json'
    }
  });
  expect(load.body.success).toBe(true);

  // Get endpoints
  const eps = await api.post('/unicon/api/operation').send({
    connectionId: rest.id,
    operation: 'getEndpoints',
    params: {}
  });
  expect(eps.body.success).toBe(true);
  expect(Array.isArray(eps.body.data.endpoints)).toBe(true);

  // Generate example
  const ex = await api.post('/unicon/api/operation').send({
    connectionId: rest.id,
    operation: 'generateExample',
    params: {
      path: '/hello/{name}',
      method: 'GET'
    }
  });
  expect(ex.body.success).toBe(true);
  expect(ex.body.data.path).toContain('/hello/');

  // Validate missing param -> error
  const val = await api.post('/unicon/api/operation').send({
    connectionId: rest.id,
    operation: 'validateRequest',
    params: {
      path: '/hello/{name}',
      method: 'GET',
      headers: {},
      params: {}
    }
  });
  expect(val.body.success).toBe(true);
  expect(val.body.data.valid).toBe(false);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImh0dHAiLCJyZXF1ZXN0IiwicGF0aCIsIm9zIiwiZnMiLCJqZXN0Iiwic2V0VGltZW91dCIsInRtcERpciIsIm1rZHRlbXBTeW5jIiwiam9pbiIsInRtcGRpciIsInByb2Nlc3MiLCJlbnYiLCJDT05ORUNUSU9OX0RBVEFfRElSIiwiUEVSU0lTVEVOQ0UiLCJQT1JUIiwiV1NfUE9SVCIsInN0YXJ0U2VydmVycyIsInN0YXJ0ZWQiLCJhcGkiLCJkZW1vU2VydmVyIiwiZGVtb1BvcnQiLCJiZWZvcmVBbGwiLCJhcHAiLCJnZXQiLCJyZXEiLCJyZXMiLCJqc29uIiwib2siLCJtZXNzYWdlIiwicGFyYW1zIiwibmFtZSIsImNyZWF0ZVNlcnZlciIsIlByb21pc2UiLCJyZXNvbHZlIiwibGlzdGVuIiwiYWRkcmVzcyIsInBvcnQiLCJhZnRlckFsbCIsInNlcnZlciIsImNsb3NlIiwid3NTZXJ2ZXIiLCJ0ZXN0IiwiY3JlYXRlIiwicG9zdCIsInNlbmQiLCJ0eXBlIiwiY29uZmlnIiwiYmFzZVVybCIsImV4cGVjdCIsImJvZHkiLCJzdWNjZXNzIiwidG9CZSIsImlkIiwiY29ubmVjdGlvbiIsImNvbiIsImNvbm5lY3Rpb25JZCIsIm9wIiwib3BlcmF0aW9uIiwibWV0aG9kIiwiZW5kcG9pbnQiLCJkYXRhIiwic3RhdHVzIiwidG9FcXVhbCIsIm9wZW5hcGkiLCJpbmZvIiwidGl0bGUiLCJ2ZXJzaW9uIiwicGF0aHMiLCJzdW1tYXJ5IiwicGFyYW1ldGVycyIsImluIiwicmVxdWlyZWQiLCJzY2hlbWEiLCJyZXNwb25zZXMiLCJkZXNjcmlwdGlvbiIsImxpc3QiLCJyZXN0IiwiY29ubmVjdGlvbnMiLCJmaW5kIiwiYyIsInRvQmVUcnV0aHkiLCJ1cGxvYWQiLCJhdHRhY2giLCJCdWZmZXIiLCJmcm9tIiwiSlNPTiIsInN0cmluZ2lmeSIsImxvYWQiLCJvcGVuQXBpRmlsZSIsImVwcyIsIkFycmF5IiwiaXNBcnJheSIsImVuZHBvaW50cyIsImV4IiwidG9Db250YWluIiwidmFsIiwiaGVhZGVycyIsInZhbGlkIl0sInNvdXJjZXMiOlsicmVzdC5vcGVyYXRpb25zLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3QgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTtcclxuY29uc3QgcmVxdWVzdCA9IHJlcXVpcmUoJ3N1cGVydGVzdCcpO1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xyXG5jb25zdCBvcyA9IHJlcXVpcmUoJ29zJyk7XHJcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcclxuXHJcbi8vIEluY3JlYXNlIHRpbWVvdXQgZm9yIHNlcnZlciBzcGluLXVwXHJcbmplc3Quc2V0VGltZW91dCgyMDAwMCk7XHJcblxyXG4vLyBVc2UgYSB0ZW1wIGRhdGEgZGlyIHBlciBydW5cclxuY29uc3QgdG1wRGlyID0gZnMubWtkdGVtcFN5bmMocGF0aC5qb2luKG9zLnRtcGRpcigpLCAndW5pY29uLXJlc3QtJykpO1xyXG5wcm9jZXNzLmVudi5DT05ORUNUSU9OX0RBVEFfRElSID0gdG1wRGlyO1xyXG5wcm9jZXNzLmVudi5QRVJTSVNURU5DRSA9ICdmaWxlJztcclxucHJvY2Vzcy5lbnYuUE9SVCA9ICczMTAyJztcclxucHJvY2Vzcy5lbnYuV1NfUE9SVCA9ICc4MTgyJztcclxuXHJcbmNvbnN0IHsgc3RhcnRTZXJ2ZXJzIH0gPSByZXF1aXJlKCcuLi91bml2ZXJzYWwtc2VydmVyJyk7XHJcblxyXG5sZXQgc3RhcnRlZDsgbGV0IGFwaTsgbGV0IGRlbW9TZXJ2ZXI7IGxldCBkZW1vUG9ydDtcclxuXHJcbmJlZm9yZUFsbChhc3luYyAoKSA9PiB7XHJcbiAgLy8gU3RhcnQgZGVtbyBSRVNUIGJhY2tlbmRcclxuICBjb25zdCBhcHAgPSBleHByZXNzKCk7XHJcbiAgYXBwLmdldCgnL3Rlc3QnLCAocmVxLCByZXMpID0+IHJlcy5qc29uKHsgb2s6IHRydWUgfSkpO1xyXG4gIGFwcC5nZXQoJy9oZWxsby86bmFtZScsIChyZXEsIHJlcykgPT4gcmVzLmpzb24oeyBtZXNzYWdlOiBgSGVsbG8gJHtyZXEucGFyYW1zLm5hbWV9YCB9KSk7XHJcbiAgZGVtb1NlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKGFwcCk7XHJcbiAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBkZW1vU2VydmVyLmxpc3RlbigwLCAnMTI3LjAuMC4xJywgcmVzb2x2ZSkpO1xyXG4gIGRlbW9Qb3J0ID0gZGVtb1NlcnZlci5hZGRyZXNzKCkucG9ydDtcclxuXHJcbiAgLy8gU3RhcnQgVW5pY29uIHNlcnZlclxyXG4gIHN0YXJ0ZWQgPSBhd2FpdCBzdGFydFNlcnZlcnMoKTtcclxuICBhcGkgPSByZXF1ZXN0KGBodHRwOi8vbG9jYWxob3N0OiR7cHJvY2Vzcy5lbnYuUE9SVH1gKTtcclxufSk7XHJcblxyXG5hZnRlckFsbChhc3luYyAoKSA9PiB7XHJcbiAgaWYgKHN0YXJ0ZWQ/LnNlcnZlcikgc3RhcnRlZC5zZXJ2ZXIuY2xvc2UoKTtcclxuICBpZiAoc3RhcnRlZD8ud3NTZXJ2ZXIpIHN0YXJ0ZWQud3NTZXJ2ZXIuY2xvc2UoKTtcclxuICBpZiAoZGVtb1NlcnZlcikgZGVtb1NlcnZlci5jbG9zZSgpO1xyXG59KTtcclxuXHJcbnRlc3QoJ1JFU1Q6IGNvbm5lY3QgYW5kIHBlcmZvcm0gR0VUIC90ZXN0IHZpYSAvb3BlcmF0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gIC8vIENyZWF0ZSBjb25uZWN0aW9uXHJcbiAgY29uc3QgY3JlYXRlID0gYXdhaXQgYXBpLnBvc3QoJy91bmljb24vYXBpL2Nvbm5lY3Rpb25zJykuc2VuZCh7XHJcbiAgICBuYW1lOiAncmVzdC1sb2NhbCcsXHJcbiAgICB0eXBlOiAncmVzdCcsXHJcbiAgICBjb25maWc6IHsgYmFzZVVybDogYGh0dHA6Ly8xMjcuMC4wLjE6JHtkZW1vUG9ydH1gIH1cclxuICB9KTtcclxuICBleHBlY3QoY3JlYXRlLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICBjb25zdCBpZCA9IGNyZWF0ZS5ib2R5LmNvbm5lY3Rpb24uaWQ7XHJcblxyXG4gIC8vIENvbm5lY3RcclxuICBjb25zdCBjb24gPSBhd2FpdCBhcGkucG9zdCgnL3VuaWNvbi9hcGkvY29ubmVjdCcpLnNlbmQoeyBjb25uZWN0aW9uSWQ6IGlkIH0pO1xyXG4gIGV4cGVjdChjb24uYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG5cclxuICAvLyBSZXF1ZXN0IG9wZXJhdGlvblxyXG4gIGNvbnN0IG9wID0gYXdhaXQgYXBpLnBvc3QoJy91bmljb24vYXBpL29wZXJhdGlvbicpLnNlbmQoe1xyXG4gICAgY29ubmVjdGlvbklkOiBpZCxcclxuICAgIG9wZXJhdGlvbjogJ3JlcXVlc3QnLFxyXG4gICAgcGFyYW1zOiB7IG1ldGhvZDogJ0dFVCcsIGVuZHBvaW50OiAnL3Rlc3QnIH1cclxuICB9KTtcclxuICBleHBlY3Qob3AuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gIGV4cGVjdChvcC5ib2R5LmRhdGEuc3RhdHVzKS50b0JlKDIwMCk7XHJcbiAgZXhwZWN0KG9wLmJvZHkuZGF0YS5kYXRhKS50b0VxdWFsKHsgb2s6IHRydWUgfSk7XHJcbn0pO1xyXG5cclxudGVzdCgnUkVTVDogdXBsb2FkIE9wZW5BUEksIGxvYWQsIGFuZCBnZW5lcmF0ZSBleGFtcGxlL3ZhbGlkYXRlJywgYXN5bmMgKCkgPT4ge1xyXG4gIGNvbnN0IG9wZW5hcGkgPSB7XHJcbiAgICBvcGVuYXBpOiAnMy4wLjAnLFxyXG4gICAgaW5mbzogeyB0aXRsZTogJ0RlbW8nLCB2ZXJzaW9uOiAnMS4wLjAnIH0sXHJcbiAgICBwYXRoczoge1xyXG4gICAgICAnL2hlbGxvL3tuYW1lfSc6IHtcclxuICAgICAgICBnZXQ6IHtcclxuICAgICAgICAgIHN1bW1hcnk6ICdTYXkgaGVsbG8nLFxyXG4gICAgICAgICAgcGFyYW1ldGVyczogW1xyXG4gICAgICAgICAgICB7IG5hbWU6ICduYW1lJywgaW46ICdwYXRoJywgcmVxdWlyZWQ6IHRydWUsIHNjaGVtYTogeyB0eXBlOiAnc3RyaW5nJyB9IH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ3gtcmVxLWlkJywgaW46ICdoZWFkZXInLCByZXF1aXJlZDogZmFsc2UsIHNjaGVtYTogeyB0eXBlOiAnc3RyaW5nJyB9IH1cclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgICByZXNwb25zZXM6IHsgJzIwMCc6IHsgZGVzY3JpcHRpb246ICdvaycgfSB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gR2V0IGEgUkVTVCBjb25uZWN0aW9uXHJcbiAgY29uc3QgbGlzdCA9IGF3YWl0IGFwaS5nZXQoJy91bmljb24vYXBpL2Nvbm5lY3Rpb25zJyk7XHJcbiAgY29uc3QgcmVzdCA9IGxpc3QuYm9keS5jb25uZWN0aW9ucy5maW5kKGMgPT4gYy50eXBlID09PSAncmVzdCcpO1xyXG4gIGV4cGVjdChyZXN0KS50b0JlVHJ1dGh5KCk7XHJcblxyXG4gIC8vIFVwbG9hZCBzcGVjXHJcbiAgY29uc3QgdXBsb2FkID0gYXdhaXQgYXBpXHJcbiAgICAucG9zdCgnL3VuaWNvbi9hcGkvdXBsb2FkLW9wZW5hcGknKVxyXG4gICAgLmF0dGFjaCgnb3BlbkFwaUZpbGUnLCBCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShvcGVuYXBpKSksICdkZW1vLmpzb24nKTtcclxuICBleHBlY3QodXBsb2FkLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuXHJcbiAgLy8gTG9hZCBzcGVjIGludG8gaGFuZGxlclxyXG4gIGNvbnN0IGxvYWQgPSBhd2FpdCBhcGkucG9zdCgnL3VuaWNvbi9hcGkvb3BlcmF0aW9uJykuc2VuZCh7XHJcbiAgICBjb25uZWN0aW9uSWQ6IHJlc3QuaWQsXHJcbiAgICBvcGVyYXRpb246ICdsb2FkT3BlbkFwaScsXHJcbiAgICBwYXJhbXM6IHsgb3BlbkFwaUZpbGU6ICdkZW1vLmpzb24nIH1cclxuICB9KTtcclxuICBleHBlY3QobG9hZC5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcblxyXG4gIC8vIEdldCBlbmRwb2ludHNcclxuICBjb25zdCBlcHMgPSBhd2FpdCBhcGkucG9zdCgnL3VuaWNvbi9hcGkvb3BlcmF0aW9uJykuc2VuZCh7XHJcbiAgICBjb25uZWN0aW9uSWQ6IHJlc3QuaWQsXHJcbiAgICBvcGVyYXRpb246ICdnZXRFbmRwb2ludHMnLFxyXG4gICAgcGFyYW1zOiB7fVxyXG4gIH0pO1xyXG4gIGV4cGVjdChlcHMuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gIGV4cGVjdChBcnJheS5pc0FycmF5KGVwcy5ib2R5LmRhdGEuZW5kcG9pbnRzKSkudG9CZSh0cnVlKTtcclxuXHJcbiAgLy8gR2VuZXJhdGUgZXhhbXBsZVxyXG4gIGNvbnN0IGV4ID0gYXdhaXQgYXBpLnBvc3QoJy91bmljb24vYXBpL29wZXJhdGlvbicpLnNlbmQoe1xyXG4gICAgY29ubmVjdGlvbklkOiByZXN0LmlkLFxyXG4gICAgb3BlcmF0aW9uOiAnZ2VuZXJhdGVFeGFtcGxlJyxcclxuICAgIHBhcmFtczogeyBwYXRoOiAnL2hlbGxvL3tuYW1lfScsIG1ldGhvZDogJ0dFVCcgfVxyXG4gIH0pO1xyXG4gIGV4cGVjdChleC5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgZXhwZWN0KGV4LmJvZHkuZGF0YS5wYXRoKS50b0NvbnRhaW4oJy9oZWxsby8nKTtcclxuXHJcbiAgLy8gVmFsaWRhdGUgbWlzc2luZyBwYXJhbSAtPiBlcnJvclxyXG4gIGNvbnN0IHZhbCA9IGF3YWl0IGFwaS5wb3N0KCcvdW5pY29uL2FwaS9vcGVyYXRpb24nKS5zZW5kKHtcclxuICAgIGNvbm5lY3Rpb25JZDogcmVzdC5pZCxcclxuICAgIG9wZXJhdGlvbjogJ3ZhbGlkYXRlUmVxdWVzdCcsXHJcbiAgICBwYXJhbXM6IHsgcGF0aDogJy9oZWxsby97bmFtZX0nLCBtZXRob2Q6ICdHRVQnLCBoZWFkZXJzOiB7fSwgcGFyYW1zOiB7fSB9XHJcbiAgfSk7XHJcbiAgZXhwZWN0KHZhbC5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgZXhwZWN0KHZhbC5ib2R5LmRhdGEudmFsaWQpLnRvQmUoZmFsc2UpO1xyXG59KTsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNQyxJQUFJLEdBQUdELE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDNUIsTUFBTUUsT0FBTyxHQUFHRixPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ3BDLE1BQU1HLElBQUksR0FBR0gsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUM1QixNQUFNSSxFQUFFLEdBQUdKLE9BQU8sQ0FBQyxJQUFJLENBQUM7QUFDeEIsTUFBTUssRUFBRSxHQUFHTCxPQUFPLENBQUMsSUFBSSxDQUFDOztBQUV4QjtBQUNBTSxJQUFJLENBQUNDLFVBQVUsQ0FBQyxLQUFLLENBQUM7O0FBRXRCO0FBQ0EsTUFBTUMsTUFBTSxHQUFHSCxFQUFFLENBQUNJLFdBQVcsQ0FBQ04sSUFBSSxDQUFDTyxJQUFJLENBQUNOLEVBQUUsQ0FBQ08sTUFBTSxDQUFDLENBQUMsRUFBRSxjQUFjLENBQUMsQ0FBQztBQUNyRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLG1CQUFtQixHQUFHTixNQUFNO0FBQ3hDSSxPQUFPLENBQUNDLEdBQUcsQ0FBQ0UsV0FBVyxHQUFHLE1BQU07QUFDaENILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRyxJQUFJLEdBQUcsTUFBTTtBQUN6QkosT0FBTyxDQUFDQyxHQUFHLENBQUNJLE9BQU8sR0FBRyxNQUFNO0FBRTVCLE1BQU07RUFBRUM7QUFBYSxDQUFDLEdBQUdsQixPQUFPLENBQUMscUJBQXFCLENBQUM7QUFFdkQsSUFBSW1CLE9BQU87QUFBRSxJQUFJQyxHQUFHO0FBQUUsSUFBSUMsVUFBVTtBQUFFLElBQUlDLFFBQVE7QUFFbERDLFNBQVMsQ0FBQyxZQUFZO0VBQ3BCO0VBQ0EsTUFBTUMsR0FBRyxHQUFHekIs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