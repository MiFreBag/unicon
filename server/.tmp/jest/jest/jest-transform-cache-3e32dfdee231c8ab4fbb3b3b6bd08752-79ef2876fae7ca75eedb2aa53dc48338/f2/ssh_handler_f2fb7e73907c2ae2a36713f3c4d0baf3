fee9027f2896f2dccd01a1a8bde618d8
// server/handlers/ssh_handler.js
const {
  Client
} = require('ssh2');
const {
  v4: uuidv4
} = require('uuid');
class SSHHandler {
  constructor(connectionId, config) {
    this.connectionId = connectionId;
    this.config = config || {};
    this.client = null;
    this.isConnected = false;
    this.shells = new Map(); // sessionId -> {stream}
  }
  async connect() {
    return new Promise((resolve, reject) => {
      const conn = new Client();
      this.client = conn;
      conn.on('ready', () => {
        this.isConnected = true;
        this._broadcast({
          type: 'ssh',
          data: {
            event: 'connected',
            connectionId: this.connectionId
          }
        });
        resolve({
          success: true
        });
      }).on('error', err => {
        reject(new Error(`SSH error: ${err.message}`));
      }).on('end', () => {
        this.isConnected = false;
        this._broadcast({
          type: 'ssh',
          data: {
            event: 'ended',
            connectionId: this.connectionId
          }
        });
      }).on('close', () => {
        this.isConnected = false;
        this._broadcast({
          type: 'ssh',
          data: {
            event: 'closed',
            connectionId: this.connectionId
          }
        });
      });
      const {
        host,
        port = 22,
        username,
        password,
        privateKey,
        passphrase
      } = this.config;
      const opts = {
        host,
        port,
        username
      };
      if (password) opts.password = password;
      if (privateKey) opts.privateKey = privateKey;
      if (passphrase) opts.passphrase = passphrase;
      conn.connect(opts);
    });
  }
  async disconnect() {
    try {
      for (const {
        stream
      } of this.shells.values()) {
        try {
          stream.end();
        } catch (_) {}
      }
      this.shells.clear();
      if (this.client) this.client.end();
      this.isConnected = false;
      return {
        success: true
      };
    } catch (e) {
      return {
        success: false,
        error: e.message
      };
    }
  }
  async exec(command, cwd) {
    if (!this.isConnected || !this.client) throw new Error('SSH not connected');
    return new Promise((resolve, reject) => {
      this.client.exec(command, {
        cwd
      }, (err, stream) => {
        if (err) return reject(err);
        let stdout = '',
          stderr = '';
        stream.on('close', (code, signal) => {
          resolve({
            success: true,
            data: {
              stdout,
              stderr,
              code,
              signal
            }
          });
        }).on('data', data => {
          stdout += data.toString('utf8');
        });
        if (stream && stream.stderr && typeof stream.stderr.on === 'function') {
          stream.stderr.on('data', data => {
            stderr += data.toString('utf8');
          });
        }
      });
    });
  }
  async shellOpen({
    cols = 80,
    rows = 24
  } = {}) {
    if (!this.isConnected || !this.client) throw new Error('SSH not connected');
    const sessionId = uuidv4();
    return new Promise((resolve, reject) => {
      this.client.shell({
        cols,
        rows,
        term: 'xterm-color'
      }, (err, stream) => {
        if (err) return reject(err);
        this.shells.set(sessionId, {
          stream
        });
        stream.on('data', data => {
          this._broadcast({
            type: 'ssh',
            data: {
              event: 'shellData',
              sessionId,
              connectionId: this.connectionId,
              data: data.toString('utf8')
            }
          });
        });
        stream.on('close', () => {
          this._broadcast({
            type: 'ssh',
            data: {
              event: 'shellClosed',
              sessionId,
              connectionId: this.connectionId
            }
          });
          this.shells.delete(sessionId);
        });
        resolve({
          success: true,
          data: {
            sessionId
          }
        });
      });
    });
  }
  async shellInput({
    sessionId,
    data
  }) {
    const entry = this.shells.get(sessionId);
    if (!entry) throw new Error('Unknown shell session');
    entry.stream.write(data);
    return {
      success: true
    };
  }
  async shellResize({
    sessionId,
    cols,
    rows
  }) {
    const entry = this.shells.get(sessionId);
    if (!entry) throw new Error('Unknown shell session');
    try {
      entry.stream.setWindow(rows, cols);
    } catch (_) {}
    return {
      success: true
    };
  }
  async shellClose({
    sessionId
  }) {
    const entry = this.shells.get(sessionId);
    if (!entry) return {
      success: true
    };
    try {
      entry.stream.end();
    } catch (_) {}
    this.shells.delete(sessionId);
    return {
      success: true
    };
  }

  // ----- SFTP helpers -----
  _getSftp() {
    if (!this.client || !this.isConnected) throw new Error('SSH not connected');
    return new Promise((resolve, reject) => {
      this.client.sftp((err, sftp) => err ? reject(err) : resolve(sftp));
    });
  }
  async sftpList({
    path = '.'
  } = {}) {
    const sftp = await this._getSftp();
    return new Promise((resolve, reject) => {
      sftp.readdir(path, (err, list) => {
        if (err) return reject(err);
        const entries = (list || []).map(e => ({
          filename: e.filename,
          longname: e.longname || '',
          attrs: e.attrs
        }));
        resolve({
          success: true,
          data: {
            entries
          }
        });
      });
    });
  }
  async sftpGet({
    path
  }) {
    if (!path) throw new Error('path required');
    const sftp = await this._getSftp();
    return new Promise((resolve, reject) => {
      const chunks = [];
      const rs = sftp.createReadStream(path);
      rs.on('data', c => chunks.push(Buffer.from(c)));
      rs.on('error', e => reject(e));
      rs.on('end', () => {
        const buf = Buffer.concat(chunks);
        resolve({
          success: true,
          data: {
            base64: buf.toString('base64'),
            size: buf.length
          }
        });
      });
    });
  }
  async sftpPut({
    path,
    base64
  }) {
    if (!path) throw new Error('path required');
    if (!base64) throw new Error('base64 required');
    const sftp = await this._getSftp();
    const buf = Buffer.from(base64, 'base64');
    return new Promise((resolve, reject) => {
      const ws = sftp.createWriteStream(path);
      let settled = false;
      const done = () => {
        if (!settled) {
          settled = true;
          resolve({
            success: true,
            data: {
              size: buf.length
            }
          });
        }
      };
      ws.on('error', e => {
        settled = true;
        reject(e);
      });
      ws.on('finish', done);
      if (typeof ws.end === 'function') {
        ws.end(buf);
      } else if (typeof ws.write === 'function') {
        try {
          ws.write(buf);
        } catch (_) {}
        setImmediate(done);
      } else {
        setImmediate(done);
      }
    });
  }
  _broadcast(message) {
    if (global.broadcast) global.broadcast(message);
  }
}
module.exports = SSHHandler;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDbGllbnQiLCJyZXF1aXJlIiwidjQiLCJ1dWlkdjQiLCJTU0hIYW5kbGVyIiwiY29uc3RydWN0b3IiLCJjb25uZWN0aW9uSWQiLCJjb25maWciLCJjbGllbnQiLCJpc0Nvbm5lY3RlZCIsInNoZWxscyIsIk1hcCIsImNvbm5lY3QiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImNvbm4iLCJvbiIsIl9icm9hZGNhc3QiLCJ0eXBlIiwiZGF0YSIsImV2ZW50Iiwic3VjY2VzcyIsImVyciIsIkVycm9yIiwibWVzc2FnZSIsImhvc3QiLCJwb3J0IiwidXNlcm5hbWUiLCJwYXNzd29yZCIsInByaXZhdGVLZXkiLCJwYXNzcGhyYXNlIiwib3B0cyIsImRpc2Nvbm5lY3QiLCJzdHJlYW0iLCJ2YWx1ZXMiLCJlbmQiLCJfIiwiY2xlYXIiLCJlIiwiZXJyb3IiLCJleGVjIiwiY29tbWFuZCIsImN3ZCIsInN0ZG91dCIsInN0ZGVyciIsImNvZGUiLCJzaWduYWwiLCJ0b1N0cmluZyIsInNoZWxsT3BlbiIsImNvbHMiLCJyb3dzIiwic2Vzc2lvbklkIiwic2hlbGwiLCJ0ZXJtIiwic2V0IiwiZGVsZXRlIiwic2hlbGxJbnB1dCIsImVudHJ5IiwiZ2V0Iiwid3JpdGUiLCJzaGVsbFJlc2l6ZSIsInNldFdpbmRvdyIsInNoZWxsQ2xvc2UiLCJfZ2V0U2Z0cCIsInNmdHAiLCJzZnRwTGlzdCIsInBhdGgiLCJyZWFkZGlyIiwibGlzdCIsImVudHJpZXMiLCJtYXAiLCJmaWxlbmFtZSIsImxvbmduYW1lIiwiYXR0cnMiLCJzZnRwR2V0IiwiY2h1bmtzIiwicnMiLCJjcmVhdGVSZWFkU3RyZWFtIiwiYyIsInB1c2giLCJCdWZmZXIiLCJmcm9tIiwiYnVmIiwiY29uY2F0IiwiYmFzZTY0Iiwic2l6ZSIsImxlbmd0aCIsInNmdHBQdXQiLCJ3cyIsImNyZWF0ZVdyaXRlU3RyZWFtIiwic2V0dGxlZCIsImRvbmUiLCJzZXRJbW1lZGlhdGUiLCJnbG9iYWwiLCJicm9hZGNhc3QiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsic3NoX2hhbmRsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc2VydmVyL2hhbmRsZXJzL3NzaF9oYW5kbGVyLmpzXHJcbmNvbnN0IHsgQ2xpZW50IH0gPSByZXF1aXJlKCdzc2gyJyk7XHJcbmNvbnN0IHsgdjQ6IHV1aWR2NCB9ID0gcmVxdWlyZSgndXVpZCcpO1xyXG5cclxuY2xhc3MgU1NISGFuZGxlciB7XHJcbiAgY29uc3RydWN0b3IoY29ubmVjdGlvbklkLCBjb25maWcpIHtcclxuICAgIHRoaXMuY29ubmVjdGlvbklkID0gY29ubmVjdGlvbklkO1xyXG4gICAgdGhpcy5jb25maWcgPSBjb25maWcgfHwge307XHJcbiAgICB0aGlzLmNsaWVudCA9IG51bGw7XHJcbiAgICB0aGlzLmlzQ29ubmVjdGVkID0gZmFsc2U7XHJcbiAgICB0aGlzLnNoZWxscyA9IG5ldyBNYXAoKTsgLy8gc2Vzc2lvbklkIC0+IHtzdHJlYW19XHJcbiAgfVxyXG5cclxuICBhc3luYyBjb25uZWN0KCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgY29uc3QgY29ubiA9IG5ldyBDbGllbnQoKTtcclxuICAgICAgdGhpcy5jbGllbnQgPSBjb25uO1xyXG5cclxuICAgICAgY29ubi5vbigncmVhZHknLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pc0Nvbm5lY3RlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fYnJvYWRjYXN0KHsgdHlwZTogJ3NzaCcsIGRhdGE6IHsgZXZlbnQ6ICdjb25uZWN0ZWQnLCBjb25uZWN0aW9uSWQ6IHRoaXMuY29ubmVjdGlvbklkIH0gfSk7XHJcbiAgICAgICAgcmVzb2x2ZSh7IHN1Y2Nlc3M6IHRydWUgfSk7XHJcbiAgICAgIH0pLm9uKCdlcnJvcicsIChlcnIpID0+IHtcclxuICAgICAgICByZWplY3QobmV3IEVycm9yKGBTU0ggZXJyb3I6ICR7ZXJyLm1lc3NhZ2V9YCkpO1xyXG4gICAgICB9KS5vbignZW5kJywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaXNDb25uZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9icm9hZGNhc3QoeyB0eXBlOiAnc3NoJywgZGF0YTogeyBldmVudDogJ2VuZGVkJywgY29ubmVjdGlvbklkOiB0aGlzLmNvbm5lY3Rpb25JZCB9IH0pO1xyXG4gICAgICB9KS5vbignY2xvc2UnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pc0Nvbm5lY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2Jyb2FkY2FzdCh7IHR5cGU6ICdzc2gnLCBkYXRhOiB7IGV2ZW50OiAnY2xvc2VkJywgY29ubmVjdGlvbklkOiB0aGlzLmNvbm5lY3Rpb25JZCB9IH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHsgaG9zdCwgcG9ydCA9IDIyLCB1c2VybmFtZSwgcGFzc3dvcmQsIHByaXZhdGVLZXksIHBhc3NwaHJhc2UgfSA9IHRoaXMuY29uZmlnO1xyXG4gICAgICBjb25zdCBvcHRzID0geyBob3N0LCBwb3J0LCB1c2VybmFtZSB9O1xyXG4gICAgICBpZiAocGFzc3dvcmQpIG9wdHMucGFzc3dvcmQgPSBwYXNzd29yZDtcclxuICAgICAgaWYgKHByaXZhdGVLZXkpIG9wdHMucHJpdmF0ZUtleSA9IHByaXZhdGVLZXk7XHJcbiAgICAgIGlmIChwYXNzcGhyYXNlKSBvcHRzLnBhc3NwaHJhc2UgPSBwYXNzcGhyYXNlO1xyXG5cclxuICAgICAgY29ubi5jb25uZWN0KG9wdHMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBkaXNjb25uZWN0KCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgZm9yIChjb25zdCB7IHN0cmVhbSB9IG9mIHRoaXMuc2hlbGxzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgdHJ5IHsgc3RyZWFtLmVuZCgpOyB9IGNhdGNoIChfKSB7fVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2hlbGxzLmNsZWFyKCk7XHJcbiAgICAgIGlmICh0aGlzLmNsaWVudCkgdGhpcy5jbGllbnQuZW5kKCk7XHJcbiAgICAgIHRoaXMuaXNDb25uZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZXhlYyhjb21tYW5kLCBjd2QpIHtcclxuICAgIGlmICghdGhpcy5pc0Nvbm5lY3RlZCB8fCAhdGhpcy5jbGllbnQpIHRocm93IG5ldyBFcnJvcignU1NIIG5vdCBjb25uZWN0ZWQnKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIHRoaXMuY2xpZW50LmV4ZWMoY29tbWFuZCwgeyBjd2QgfSwgKGVyciwgc3RyZWFtKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikgcmV0dXJuIHJlamVjdChlcnIpO1xyXG4gICAgICAgIGxldCBzdGRvdXQgPSAnJywgc3RkZXJyID0gJyc7XHJcbiAgICAgICAgc3RyZWFtLm9uKCdjbG9zZScsIChjb2RlLCBzaWduYWwpID0+IHtcclxuICAgICAgICAgIHJlc29sdmUoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB7IHN0ZG91dCwgc3RkZXJyLCBjb2RlLCBzaWduYWwgfSB9KTtcclxuICAgICAgICB9KS5vbignZGF0YScsIChkYXRhKSA9PiB7IHN0ZG91dCArPSBkYXRhLnRvU3RyaW5nKCd1dGY4Jyk7IH0pO1xyXG4gICAgICAgIGlmIChzdHJlYW0gJiYgc3RyZWFtLnN0ZGVyciAmJiB0eXBlb2Ygc3RyZWFtLnN0ZGVyci5vbiA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgc3RyZWFtLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7IHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCd1dGY4Jyk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNoZWxsT3Blbih7IGNvbHMgPSA4MCwgcm93cyA9IDI0IH0gPSB7fSkge1xyXG4gICAgaWYgKCF0aGlzLmlzQ29ubmVjdGVkIHx8ICF0aGlzLmNsaWVudCkgdGhyb3cgbmV3IEVycm9yKCdTU0ggbm90IGNvbm5lY3RlZCcpO1xyXG4gICAgY29uc3Qgc2Vzc2lvbklkID0gdXVpZHY0KCk7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICB0aGlzLmNsaWVudC5zaGVsbCh7IGNvbHMsIHJvd3MsIHRlcm06ICd4dGVybS1jb2xvcicgfSwgKGVyciwgc3RyZWFtKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikgcmV0dXJuIHJlamVjdChlcnIpO1xyXG4gICAgICAgIHRoaXMuc2hlbGxzLnNldChzZXNzaW9uSWQsIHsgc3RyZWFtIH0pO1xyXG4gICAgICAgIHN0cmVhbS5vbignZGF0YScsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9icm9hZGNhc3Qoe1xyXG4gICAgICAgICAgICB0eXBlOiAnc3NoJyxcclxuICAgICAgICAgICAgZGF0YTogeyBldmVudDogJ3NoZWxsRGF0YScsIHNlc3Npb25JZCwgY29ubmVjdGlvbklkOiB0aGlzLmNvbm5lY3Rpb25JZCwgZGF0YTogZGF0YS50b1N0cmluZygndXRmOCcpIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHN0cmVhbS5vbignY2xvc2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9icm9hZGNhc3QoeyB0eXBlOiAnc3NoJywgZGF0YTogeyBldmVudDogJ3NoZWxsQ2xvc2VkJywgc2Vzc2lvbklkLCBjb25uZWN0aW9uSWQ6IHRoaXMuY29ubmVjdGlvbklkIH0gfSk7XHJcbiAgICAgICAgICB0aGlzLnNoZWxscy5kZWxldGUoc2Vzc2lvbklkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogeyBzZXNzaW9uSWQgfSB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNoZWxsSW5wdXQoeyBzZXNzaW9uSWQsIGRhdGEgfSkge1xyXG4gICAgY29uc3QgZW50cnkgPSB0aGlzLnNoZWxscy5nZXQoc2Vzc2lvbklkKTtcclxuICAgIGlmICghZW50cnkpIHRocm93IG5ldyBFcnJvcignVW5rbm93biBzaGVsbCBzZXNzaW9uJyk7XHJcbiAgICBlbnRyeS5zdHJlYW0ud3JpdGUoZGF0YSk7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgfVxyXG5cclxuICBhc3luYyBzaGVsbFJlc2l6ZSh7IHNlc3Npb25JZCwgY29scywgcm93cyB9KSB7XHJcbiAgICBjb25zdCBlbnRyeSA9IHRoaXMuc2hlbGxzLmdldChzZXNzaW9uSWQpO1xyXG4gICAgaWYgKCFlbnRyeSkgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIHNoZWxsIHNlc3Npb24nKTtcclxuICAgIHRyeSB7IGVudHJ5LnN0cmVhbS5zZXRXaW5kb3cocm93cywgY29scyk7IH0gY2F0Y2ggKF8pIHt9XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgfVxyXG5cclxuICBhc3luYyBzaGVsbENsb3NlKHsgc2Vzc2lvbklkIH0pIHtcclxuICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5zaGVsbHMuZ2V0KHNlc3Npb25JZCk7XHJcbiAgICBpZiAoIWVudHJ5KSByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICB0cnkgeyBlbnRyeS5zdHJlYW0uZW5kKCk7IH0gY2F0Y2ggKF8pIHt9XHJcbiAgICB0aGlzLnNoZWxscy5kZWxldGUoc2Vzc2lvbklkKTtcclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICB9XHJcblxyXG4gIC8vIC0tLS0tIFNGVFAgaGVscGVycyAtLS0tLVxyXG4gIF9nZXRTZnRwKCkge1xyXG4gICAgaWYgKCF0aGlzLmNsaWVudCB8fCAhdGhpcy5pc0Nvbm5lY3RlZCkgdGhyb3cgbmV3IEVycm9yKCdTU0ggbm90IGNvbm5lY3RlZCcpO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgdGhpcy5jbGllbnQuc2Z0cCgoZXJyLCBzZnRwKSA9PiAoZXJyID8gcmVqZWN0KGVycikgOiByZXNvbHZlKHNmdHApKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNmdHBMaXN0KHsgcGF0aCA9ICcuJyB9ID0ge30pIHtcclxuICAgIGNvbnN0IHNmdHAgPSBhd2FpdCB0aGlzLl9nZXRTZnRwKCk7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBzZnRwLnJlYWRkaXIocGF0aCwgKGVyciwgbGlzdCkgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHJldHVybiByZWplY3QoZXJyKTtcclxuICAgICAgICBjb25zdCBlbnRyaWVzID0gKGxpc3QgfHwgW10pLm1hcCgoZSkgPT4gKHsgZmlsZW5hbWU6IGUuZmlsZW5hbWUsIGxvbmduYW1lOiBlLmxvbmduYW1lIHx8ICcnLCBhdHRyczogZS5hdHRycyB9KSk7XHJcbiAgICAgICAgcmVzb2x2ZSh7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHsgZW50cmllcyB9IH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2Z0cEdldCh7IHBhdGggfSkge1xyXG4gICAgaWYgKCFwYXRoKSB0aHJvdyBuZXcgRXJyb3IoJ3BhdGggcmVxdWlyZWQnKTtcclxuICAgIGNvbnN0IHNmdHAgPSBhd2FpdCB0aGlzLl9nZXRTZnRwKCk7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCBjaHVua3MgPSBbXTtcclxuICAgICAgY29uc3QgcnMgPSBzZnRwLmNyZWF0ZVJlYWRTdHJlYW0ocGF0aCk7XHJcbiAgICAgIHJzLm9uKCdkYXRhJywgKGMpID0+IGNodW5rcy5wdXNoKEJ1ZmZlci5mcm9tKGMpKSk7XHJcbiAgICAgIHJzLm9uKCdlcnJvcicsIChlKSA9PiByZWplY3QoZSkpO1xyXG4gICAgICBycy5vbignZW5kJywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGJ1ZiA9IEJ1ZmZlci5jb25jYXQoY2h1bmtzKTtcclxuICAgICAgICByZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogeyBiYXNlNjQ6IGJ1Zi50b1N0cmluZygnYmFzZTY0JyksIHNpemU6IGJ1Zi5sZW5ndGggfSB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNmdHBQdXQoeyBwYXRoLCBiYXNlNjQgfSkge1xyXG4gICAgaWYgKCFwYXRoKSB0aHJvdyBuZXcgRXJyb3IoJ3BhdGggcmVxdWlyZWQnKTtcclxuICAgIGlmICghYmFzZTY0KSB0aHJvdyBuZXcgRXJyb3IoJ2Jhc2U2NCByZXF1aXJlZCcpO1xyXG4gICAgY29uc3Qgc2Z0cCA9IGF3YWl0IHRoaXMuX2dldFNmdHAoKTtcclxuICAgIGNvbnN0IGJ1ZiA9IEJ1ZmZlci5mcm9tKGJhc2U2NCwgJ2Jhc2U2NCcpO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgY29uc3Qgd3MgPSBzZnRwLmNyZWF0ZVdyaXRlU3RyZWFtKHBhdGgpO1xyXG4gICAgICBsZXQgc2V0dGxlZCA9IGZhbHNlO1xyXG4gICAgICBjb25zdCBkb25lID0gKCkgPT4geyBpZiAoIXNldHRsZWQpIHsgc2V0dGxlZCA9IHRydWU7IHJlc29sdmUoeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB7IHNpemU6IGJ1Zi5sZW5ndGggfSB9KTsgfSB9O1xyXG4gICAgICB3cy5vbignZXJyb3InLCAoZSkgPT4geyBzZXR0bGVkID0gdHJ1ZTsgcmVqZWN0KGUpOyB9KTtcclxuICAgICAgd3Mub24oJ2ZpbmlzaCcsIGRvbmUpO1xyXG4gICAgICBpZiAodHlwZW9mIHdzLmVuZCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHdzLmVuZChidWYpO1xyXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB3cy53cml0ZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRyeSB7IHdzLndyaXRlKGJ1Zik7IH0gY2F0Y2ggKF8pIHt9XHJcbiAgICAgICAgc2V0SW1tZWRpYXRlKGRvbmUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNldEltbWVkaWF0ZShkb25lKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfYnJvYWRjYXN0KG1lc3NhZ2UpIHtcclxuICAgIGlmIChnbG9iYWwuYnJvYWRjYXN0KSBnbG9iYWwuYnJvYWRjYXN0KG1lc3NhZ2UpO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBTU0hIYW5kbGVyO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0EsTUFBTTtFQUFFQTtBQUFPLENBQUMsR0FBR0MsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUNsQyxNQUFNO0VBQUVDLEVBQUUsRUFBRUM7QUFBTyxDQUFDLEdBQUdGLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFFdEMsTUFBTUcsVUFBVSxDQUFDO0VBQ2ZDLFdBQVdBLENBQUNDLFlBQVksRUFBRUMsTUFBTSxFQUFFO0lBQ2hDLElBQUksQ0FBQ0QsWUFBWSxHQUFHQSxZQUFZO0lBQ2hDLElBQUksQ0FBQ0MsTUFBTSxHQUFHQSxNQUFNLElBQUksQ0FBQyxDQUFDO0lBQzFCLElBQUksQ0FBQ0MsTUFBTSxHQUFHLElBQUk7SUFDbEIsSUFBSSxDQUFDQyxXQUFXLEdBQUcsS0FBSztJQUN4QixJQUFJLENBQUNDLE1BQU0sR0FBRyxJQUFJQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDM0I7RUFFQSxNQUFNQyxPQUFPQSxDQUFBLEVB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