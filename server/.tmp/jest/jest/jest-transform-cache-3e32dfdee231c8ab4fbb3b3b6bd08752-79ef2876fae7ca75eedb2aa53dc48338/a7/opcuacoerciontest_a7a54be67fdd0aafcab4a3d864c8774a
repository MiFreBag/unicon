1d5d3284f1caf2058ee1b431c43b9920
const {
  OPCUAServer,
  Variant,
  DataType,
  StatusCodes
} = require('node-opcua');
const net = require('net');
const request = require('supertest');
const fs = require('fs');
const os = require('os');
const path = require('path');
jest.setTimeout(45000);
function getFreePort() {
  return new Promise((resolve, reject) => {
    const srv = net.createServer();
    srv.listen(0, '127.0.0.1', () => {
      const {
        port
      } = srv.address();
      srv.close(() => resolve(port));
    });
    srv.on('error', reject);
  });
}
const tmpDir = fs.mkdtempSync(path.join(os.tmpdir(), 'unicon-opcua-coerce-'));
process.env.CONNECTION_DATA_DIR = tmpDir;
process.env.PERSISTENCE = 'file';
process.env.PORT = '3105';
process.env.WS_PORT = '8185';
const {
  startServers
} = require('../universal-server');
let uaServer;
let started;
let api;
let endpoint;
beforeAll(async () => {
  const port = await getFreePort();
  uaServer = new OPCUAServer({
    port,
    hostname: '127.0.0.1',
    alternateHostname: ['127.0.0.1', 'localhost']
  });
  await uaServer.initialize();
  const addressSpace = uaServer.engine.addressSpace;
  const namespace = addressSpace.getOwnNamespace();
  let counter = 0;
  let arr = [1, 2, 3];
  const obj = namespace.addObject({
    organizedBy: addressSpace.rootFolder.objects,
    browseName: 'Dev'
  });
  namespace.addVariable({
    componentOf: obj,
    browseName: 'Counter',
    nodeId: 'ns=1;s=Counter',
    dataType: 'Int32',
    accessLevel: 'CurrentRead | CurrentWrite',
    userAccessLevel: 'CurrentRead | CurrentWrite',
    minimumSamplingInterval: 100,
    value: {
      get: () => new Variant({
        dataType: DataType.Int32,
        value: counter
      }),
      set: v => {
        counter = v.value;
        return StatusCodes.Good;
      }
    }
  });
  namespace.addVariable({
    componentOf: obj,
    browseName: 'Array3',
    nodeId: 'ns=1;s=Array3',
    dataType: 'Int32',
    valueRank: 1,
    arrayDimensions: [3],
    accessLevel: 'CurrentRead | CurrentWrite',
    userAccessLevel: 'CurrentRead | CurrentWrite',
    minimumSamplingInterval: 100,
    value: {
      get: () => new Variant({
        dataType: DataType.Int32,
        value: arr
      }),
      set: v => {
        if (!Array.isArray(v.value)) return StatusCodes.BadTypeMismatch;
        if (v.value.length !== 3) return StatusCodes.BadTypeMismatch;
        arr = v.value;
        return StatusCodes.Good;
      }
    }
  });
  await uaServer.start();
  endpoint = `opc.tcp://127.0.0.1:${port}`;
  started = await startServers();
  api = request(`http://localhost:${process.env.PORT}`);
});
afterAll(async () => {
  if (started?.server) started.server.close();
  if (started?.wsServer) started.wsServer.close();
  if (uaServer) await uaServer.shutdown(500);
});
test('String numeric writes to Int32 get coerced', async () => {
  const create = await api.post('/unicon/api/connections').send({
    name: 'opcua',
    type: 'opcua',
    config: {
      endpointUrl: endpoint
    }
  });
  expect(create.body.success).toBe(true);
  const id = create.body.connection.id;
  const con = await api.post('/unicon/api/connect').send({
    connectionId: id
  });
  expect(con.body && con.body.success).toBe(true);
  const w = await api.post('/unicon/api/operation').send({
    connectionId: id,
    operation: 'write',
    params: {
      nodeId: 'ns=1;s=Counter',
      value: '123'
    }
  });
  expect(w.body.success).toBe(true);
  const r = await api.post('/unicon/api/operation').send({
    connectionId: id,
    operation: 'read',
    params: {
      nodes: ['ns=1;s=Counter']
    }
  });
  expect(r.body.success).toBe(true);
  const dv = r.body.data[0];
  expect(dv.value.value).toBe(123);
});
test('Non-numeric string to Int32 fails', async () => {
  const list = await api.get('/unicon/api/connections');
  const conn = list.body.connections.find(c => c.type === 'opcua');
  const w = await api.post('/unicon/api/operation').send({
    connectionId: conn.id,
    operation: 'write',
    params: {
      nodeId: 'ns=1;s=Counter',
      value: 'abc'
    }
  });
  expect(w.body.success).toBe(false);
});
test('Array rank/shape: accept [1,2,3], reject scalar and wrong length', async () => {
  const list = await api.get('/unicon/api/connections');
  const conn = list.body.connections.find(c => c.type === 'opcua');

  // Good write
  const w1 = await api.post('/unicon/api/operation').send({
    connectionId: conn.id,
    operation: 'write',
    params: {
      nodeId: 'ns=1;s=Array3',
      value: [4, 5, 6]
    }
  });
  expect(w1.body.success).toBe(true);

  // Reject scalar
  const w2 = await api.post('/unicon/api/operation').send({
    connectionId: conn.id,
    operation: 'write',
    params: {
      nodeId: 'ns=1;s=Array3',
      value: 7
    }
  });
  expect(w2.body.success).toBe(false);

  // Reject wrong length
  const w3 = await api.post('/unicon/api/operation').send({
    connectionId: conn.id,
    operation: 'write',
    params: {
      nodeId: 'ns=1;s=Array3',
      value: [1, 2]
    }
  });
  expect(w3.body.success).toBe(false);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPUENVQVNlcnZlciIsIlZhcmlhbnQiLCJEYXRhVHlwZSIsIlN0YXR1c0NvZGVzIiwicmVxdWlyZSIsIm5ldCIsInJlcXVlc3QiLCJmcyIsIm9zIiwicGF0aCIsImplc3QiLCJzZXRUaW1lb3V0IiwiZ2V0RnJlZVBvcnQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInNydiIsImNyZWF0ZVNlcnZlciIsImxpc3RlbiIsInBvcnQiLCJhZGRyZXNzIiwiY2xvc2UiLCJvbiIsInRtcERpciIsIm1rZHRlbXBTeW5jIiwiam9pbiIsInRtcGRpciIsInByb2Nlc3MiLCJlbnYiLCJDT05ORUNUSU9OX0RBVEFfRElSIiwiUEVSU0lTVEVOQ0UiLCJQT1JUIiwiV1NfUE9SVCIsInN0YXJ0U2VydmVycyIsInVhU2VydmVyIiwic3RhcnRlZCIsImFwaSIsImVuZHBvaW50IiwiYmVmb3JlQWxsIiwiaG9zdG5hbWUiLCJhbHRlcm5hdGVIb3N0bmFtZSIsImluaXRpYWxpemUiLCJhZGRyZXNzU3BhY2UiLCJlbmdpbmUiLCJuYW1lc3BhY2UiLCJnZXRPd25OYW1lc3BhY2UiLCJjb3VudGVyIiwiYXJyIiwib2JqIiwiYWRkT2JqZWN0Iiwib3JnYW5pemVkQnkiLCJyb290Rm9sZGVyIiwib2JqZWN0cyIsImJyb3dzZU5hbWUiLCJhZGRWYXJpYWJsZSIsImNvbXBvbmVudE9mIiwibm9kZUlkIiwiZGF0YVR5cGUiLCJhY2Nlc3NMZXZlbCIsInVzZXJBY2Nlc3NMZXZlbCIsIm1pbmltdW1TYW1wbGluZ0ludGVydmFsIiwidmFsdWUiLCJnZXQiLCJJbnQzMiIsInNldCIsInYiLCJHb29kIiwidmFsdWVSYW5rIiwiYXJyYXlEaW1lbnNpb25zIiwiQXJyYXkiLCJpc0FycmF5IiwiQmFkVHlwZU1pc21hdGNoIiwibGVuZ3RoIiwic3RhcnQiLCJhZnRlckFsbCIsInNlcnZlciIsIndzU2VydmVyIiwic2h1dGRvd24iLCJ0ZXN0IiwiY3JlYXRlIiwicG9zdCIsInNlbmQiLCJuYW1lIiwidHlwZSIsImNvbmZpZyIsImVuZHBvaW50VXJsIiwiZXhwZWN0IiwiYm9keSIsInN1Y2Nlc3MiLCJ0b0JlIiwiaWQiLCJjb25uZWN0aW9uIiwiY29uIiwiY29ubmVjdGlvbklkIiwidyIsIm9wZXJhdGlvbiIsInBhcmFtcyIsInIiLCJub2RlcyIsImR2IiwiZGF0YSIsImxpc3QiLCJjb25uIiwiY29ubmVjdGlvbnMiLCJmaW5kIiwiYyIsIncxIiwidzIiLCJ3MyJdLCJzb3VyY2VzIjpbIm9wY3VhLmNvZXJjaW9uLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBPUENVQVNlcnZlciwgVmFyaWFudCwgRGF0YVR5cGUsIFN0YXR1c0NvZGVzIH0gPSByZXF1aXJlKCdub2RlLW9wY3VhJyk7XHJcbmNvbnN0IG5ldCA9IHJlcXVpcmUoJ25ldCcpO1xyXG5jb25zdCByZXF1ZXN0ID0gcmVxdWlyZSgnc3VwZXJ0ZXN0Jyk7XHJcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcclxuY29uc3Qgb3MgPSByZXF1aXJlKCdvcycpO1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xyXG5cclxuamVzdC5zZXRUaW1lb3V0KDQ1MDAwKTtcclxuXHJcbmZ1bmN0aW9uIGdldEZyZWVQb3J0KCkge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBjb25zdCBzcnYgPSBuZXQuY3JlYXRlU2VydmVyKCk7XHJcbiAgICBzcnYubGlzdGVuKDAsICcxMjcuMC4wLjEnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHsgcG9ydCB9ID0gc3J2LmFkZHJlc3MoKTtcclxuICAgICAgc3J2LmNsb3NlKCgpID0+IHJlc29sdmUocG9ydCkpO1xyXG4gICAgfSk7XHJcbiAgICBzcnYub24oJ2Vycm9yJywgcmVqZWN0KTtcclxuICB9KTtcclxufVxyXG5cclxuY29uc3QgdG1wRGlyID0gZnMubWtkdGVtcFN5bmMocGF0aC5qb2luKG9zLnRtcGRpcigpLCAndW5pY29uLW9wY3VhLWNvZXJjZS0nKSk7XHJcbnByb2Nlc3MuZW52LkNPTk5FQ1RJT05fREFUQV9ESVIgPSB0bXBEaXI7XHJcbnByb2Nlc3MuZW52LlBFUlNJU1RFTkNFID0gJ2ZpbGUnO1xyXG5wcm9jZXNzLmVudi5QT1JUID0gJzMxMDUnO1xyXG5wcm9jZXNzLmVudi5XU19QT1JUID0gJzgxODUnO1xyXG5cclxuY29uc3QgeyBzdGFydFNlcnZlcnMgfSA9IHJlcXVpcmUoJy4uL3VuaXZlcnNhbC1zZXJ2ZXInKTtcclxuXHJcbmxldCB1YVNlcnZlcjsgbGV0IHN0YXJ0ZWQ7IGxldCBhcGk7IGxldCBlbmRwb2ludDtcclxuXHJcbmJlZm9yZUFsbChhc3luYyAoKSA9PiB7XHJcbiAgY29uc3QgcG9ydCA9IGF3YWl0IGdldEZyZWVQb3J0KCk7XHJcbiAgdWFTZXJ2ZXIgPSBuZXcgT1BDVUFTZXJ2ZXIoeyBwb3J0LCBob3N0bmFtZTogJzEyNy4wLjAuMScsIGFsdGVybmF0ZUhvc3RuYW1lOiBbJzEyNy4wLjAuMScsJ2xvY2FsaG9zdCddIH0pO1xyXG4gIGF3YWl0IHVhU2VydmVyLmluaXRpYWxpemUoKTtcclxuICBjb25zdCBhZGRyZXNzU3BhY2UgPSB1YVNlcnZlci5lbmdpbmUuYWRkcmVzc1NwYWNlO1xyXG4gIGNvbnN0IG5hbWVzcGFjZSA9IGFkZHJlc3NTcGFjZS5nZXRPd25OYW1lc3BhY2UoKTtcclxuICBsZXQgY291bnRlciA9IDA7XHJcbiAgbGV0IGFyciA9IFsxLDIsM107XHJcbiAgY29uc3Qgb2JqID0gbmFtZXNwYWNlLmFkZE9iamVjdCh7IG9yZ2FuaXplZEJ5OiBhZGRyZXNzU3BhY2Uucm9vdEZvbGRlci5vYmplY3RzLCBicm93c2VOYW1lOiAnRGV2JyB9KTtcclxuICBuYW1lc3BhY2UuYWRkVmFyaWFibGUoe1xyXG4gICAgY29tcG9uZW50T2Y6IG9iaixcclxuICAgIGJyb3dzZU5hbWU6ICdDb3VudGVyJyxcclxuICAgIG5vZGVJZDogJ25zPTE7cz1Db3VudGVyJyxcclxuICAgIGRhdGFUeXBlOiAnSW50MzInLFxyXG4gICAgYWNjZXNzTGV2ZWw6ICdDdXJyZW50UmVhZCB8IEN1cnJlbnRXcml0ZScsXHJcbiAgICB1c2VyQWNjZXNzTGV2ZWw6ICdDdXJyZW50UmVhZCB8IEN1cnJlbnRXcml0ZScsXHJcbiAgICBtaW5pbXVtU2FtcGxpbmdJbnRlcnZhbDogMTAwLFxyXG4gICAgdmFsdWU6IHtcclxuICAgICAgZ2V0OiAoKSA9PiBuZXcgVmFyaWFudCh7IGRhdGFUeXBlOiBEYXRhVHlwZS5JbnQzMiwgdmFsdWU6IGNvdW50ZXIgfSksXHJcbiAgICAgIHNldDogKHYpID0+IHsgY291bnRlciA9IHYudmFsdWU7IHJldHVybiBTdGF0dXNDb2Rlcy5Hb29kOyB9XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIG5hbWVzcGFjZS5hZGRWYXJpYWJsZSh7XHJcbiAgICBjb21wb25lbnRPZjogb2JqLFxyXG4gICAgYnJvd3NlTmFtZTogJ0FycmF5MycsXHJcbiAgICBub2RlSWQ6ICducz0xO3M9QXJyYXkzJyxcclxuICAgIGRhdGFUeXBlOiAnSW50MzInLFxyXG4gICAgdmFsdWVSYW5rOiAxLFxyXG4gICAgYXJyYXlEaW1lbnNpb25zOiBbM10sXHJcbiAgICBhY2Nlc3NMZXZlbDogJ0N1cnJlbnRSZWFkIHwgQ3VycmVudFdyaXRlJyxcclxuICAgIHVzZXJBY2Nlc3NMZXZlbDogJ0N1cnJlbnRSZWFkIHwgQ3VycmVudFdyaXRlJyxcclxuICAgIG1pbmltdW1TYW1wbGluZ0ludGVydmFsOiAxMDAsXHJcbiAgICB2YWx1ZToge1xyXG4gICAgICBnZXQ6ICgpID0+IG5ldyBWYXJpYW50KHsgZGF0YVR5cGU6IERhdGFUeXBlLkludDMyLCB2YWx1ZTogYXJyIH0pLFxyXG4gICAgICBzZXQ6ICh2KSA9PiB7IGlmICghQXJyYXkuaXNBcnJheSh2LnZhbHVlKSkgcmV0dXJuIFN0YXR1c0NvZGVzLkJhZFR5cGVNaXNtYXRjaDsgaWYgKHYudmFsdWUubGVuZ3RoIT09MykgcmV0dXJuIFN0YXR1c0NvZGVzLkJhZFR5cGVNaXNtYXRjaDsgYXJyID0gdi52YWx1ZTsgcmV0dXJuIFN0YXR1c0NvZGVzLkdvb2Q7IH1cclxuICAgIH1cclxuICB9KTtcclxuICBhd2FpdCB1YVNlcnZlci5zdGFydCgpO1xyXG4gIGVuZHBvaW50ID0gYG9wYy50Y3A6Ly8xMjcuMC4wLjE6JHtwb3J0fWA7XHJcblxyXG4gIHN0YXJ0ZWQgPSBhd2FpdCBzdGFydFNlcnZlcnMoKTtcclxuICBhcGkgPSByZXF1ZXN0KGBodHRwOi8vbG9jYWxob3N0OiR7cHJvY2Vzcy5lbnYuUE9SVH1gKTtcclxufSk7XHJcblxyXG5hZnRlckFsbChhc3luYyAoKSA9PiB7XHJcbiAgaWYgKHN0YXJ0ZWQ/LnNlcnZlcikgc3RhcnRlZC5zZXJ2ZXIuY2xvc2UoKTtcclxuICBpZiAoc3RhcnRlZD8ud3NTZXJ2ZXIpIHN0YXJ0ZWQud3NTZXJ2ZXIuY2xvc2UoKTtcclxuICBpZiAodWFTZXJ2ZXIpIGF3YWl0IHVhU2VydmVyLnNodXRkb3duKDUwMCk7XHJcbn0pO1xyXG5cclxudGVzdCgnU3RyaW5nIG51bWVyaWMgd3JpdGVzIHRvIEludDMyIGdldCBjb2VyY2VkJywgYXN5bmMgKCkgPT4ge1xyXG4gIGNvbnN0IGNyZWF0ZSA9IGF3YWl0IGFwaS5wb3N0KCcvdW5pY29uL2FwaS9jb25uZWN0aW9ucycpLnNlbmQoeyBuYW1lOiAnb3BjdWEnLCB0eXBlOiAnb3BjdWEnLCBjb25maWc6IHsgZW5kcG9pbnRVcmw6IGVuZHBvaW50IH0gfSk7XHJcbiAgZXhwZWN0KGNyZWF0ZS5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgY29uc3QgaWQgPSBjcmVhdGUuYm9keS5jb25uZWN0aW9uLmlkO1xyXG4gIGNvbnN0IGNvbiA9IGF3YWl0IGFwaS5wb3N0KCcvdW5pY29uL2FwaS9jb25uZWN0Jykuc2VuZCh7IGNvbm5lY3Rpb25JZDogaWQgfSk7XHJcbiAgZXhwZWN0KGNvbi5ib2R5ICYmIGNvbi5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcblxyXG4gIGNvbnN0IHcgPSBhd2FpdCBhcGkucG9zdCgnL3VuaWNvbi9hcGkvb3BlcmF0aW9uJykuc2VuZCh7IGNvbm5lY3Rpb25JZDogaWQsIG9wZXJhdGlvbjogJ3dyaXRlJywgcGFyYW1zOiB7IG5vZGVJZDogJ25zPTE7cz1Db3VudGVyJywgdmFsdWU6ICcxMjMnIH0gfSk7XHJcbiAgZXhwZWN0KHcuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG5cclxuICBjb25zdCByID0gYXdhaXQgYXBpLnBvc3QoJy91bmljb24vYXBpL29wZXJhdGlvbicpLnNlbmQoeyBjb25uZWN0aW9uSWQ6IGlkLCBvcGVyYXRpb246ICdyZWFkJywgcGFyYW1zOiB7IG5vZGVzOiBbJ25zPTE7cz1Db3VudGVyJ10gfSB9KTtcclxuICBleHBlY3Qoci5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgY29uc3QgZHYgPSByLmJvZHkuZGF0YVswXTtcclxuICBleHBlY3QoZHYudmFsdWUudmFsdWUpLnRvQmUoMTIzKTtcclxufSk7XHJcblxyXG50ZXN0KCdOb24tbnVtZXJpYyBzdHJpbmcgdG8gSW50MzIgZmFpbHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgY29uc3QgbGlzdCA9IGF3YWl0IGFwaS5nZXQoJy91bmljb24vYXBpL2Nvbm5lY3Rpb25zJyk7XHJcbiAgY29uc3QgY29ubiA9IGxpc3QuYm9keS5jb25uZWN0aW9ucy5maW5kKGMgPT4gYy50eXBlID09PSAnb3BjdWEnKTtcclxuICBjb25zdCB3ID0gYXdhaXQgYXBpLnBvc3QoJy91bmljb24vYXBpL29wZXJhdGlvbicpLnNlbmQoeyBjb25uZWN0aW9uSWQ6IGNvbm4uaWQsIG9wZXJhdGlvbjogJ3dyaXRlJywgcGFyYW1zOiB7IG5vZGVJZDogJ25zPTE7cz1Db3VudGVyJywgdmFsdWU6ICdhYmMnIH0gfSk7XHJcbiAgZXhwZWN0KHcuYm9keS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcclxufSk7XHJcblxyXG50ZXN0KCdBcnJheSByYW5rL3NoYXBlOiBhY2NlcHQgWzEsMiwzXSwgcmVqZWN0IHNjYWxhciBhbmQgd3JvbmcgbGVuZ3RoJywgYXN5bmMgKCkgPT4ge1xyXG4gIGNvbnN0IGxpc3QgPSBhd2FpdCBhcGkuZ2V0KCcvdW5pY29uL2FwaS9jb25uZWN0aW9ucycpO1xyXG4gIGNvbnN0IGNvbm4gPSBsaXN0LmJvZHkuY29ubmVjdGlvbnMuZmluZChjID0+IGMudHlwZSA9PT0gJ29wY3VhJyk7XHJcblxyXG4gIC8vIEdvb2Qgd3JpdGVcclxuICBjb25zdCB3MSA9IGF3YWl0IGFwaS5wb3N0KCcvdW5pY29uL2FwaS9vcGVyYXRpb24nKS5zZW5kKHsgY29ubmVjdGlvbklkOiBjb25uLmlkLCBvcGVyYXRpb246ICd3cml0ZScsIHBhcmFtczogeyBub2RlSWQ6ICducz0xO3M9QXJyYXkzJywgdmFsdWU6IFs0LDUsNl0gfSB9KTtcclxuICBleHBlY3QodzEuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG5cclxuICAvLyBSZWplY3Qgc2NhbGFyXHJcbiAgY29uc3QgdzIgPSBhd2FpdCBhcGkucG9zdCgnL3VuaWNvbi9hcGkvb3BlcmF0aW9uJykuc2VuZCh7IGNvbm5lY3Rpb25JZDogY29ubi5pZCwgb3BlcmF0aW9uOiAnd3JpdGUnLCBwYXJhbXM6IHsgbm9kZUlkOiAnbnM9MTtzPUFycmF5MycsIHZhbHVlOiA3IH0gfSk7XHJcbiAgZXhwZWN0KHcyLmJvZHkuc3VjY2VzcykudG9CZShmYWxzZSk7XHJcblxyXG4gIC8vIFJlamVjdCB3cm9uZyBsZW5ndGhcclxuICBjb25zdCB3MyA9IGF3YWl0IGFwaS5wb3N0KCcvdW5pY29uL2FwaS9vcGVyYXRpb24nKS5zZW5kKHsgY29ubmVjdGlvbklkOiBjb25uLmlkLCBvcGVyYXRpb246ICd3cml0ZScsIHBhcmFtczogeyBub2RlSWQ6ICducz0xO3M9QXJyYXkzJywgdmFsdWU6IFsxLDJdIH0gfSk7XHJcbiAgZXhwZWN0KHczLmJvZHkuc3VjY2VzcykudG9CZShmYWxzZSk7XHJcbn0pO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUEsV0FBVztFQUFFQyxP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