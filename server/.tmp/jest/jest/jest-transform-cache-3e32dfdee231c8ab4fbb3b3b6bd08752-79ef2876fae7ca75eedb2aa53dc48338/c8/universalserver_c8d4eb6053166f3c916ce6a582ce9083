64a6ce20cd582c5bf9b8bd71ca62e3bf
const express = require('express');
const cors = require('cors');
const WebSocket = require('ws');
const {
  v4: uuidv4
} = require('uuid');
const path = require('path');
const fs = require('fs');
const crypto = require('crypto');
const multer = require('multer');
const EnhancedRestHandler = require('./handlers/enhanced_rest_handler');
let verifyJWTMiddleware = null;
try {
  verifyJWTMiddleware = require('./auth/middleware').verifyJWT;
} catch (_) {/* auth not enabled */}
const K8sHandler = require('./handlers/k8s_handler');
const WSHandler = require('./handlers/ws_handler');
const SQLHandler = require('./handlers/sql_handler');
const SSHHandler = require('./handlers/ssh_handler');
const OPCUAHandler = require('./handlers/opcua_handler');
const GrpcHandler = require('./handlers/grpc_handler');
const DEFAULT_ALLOWED_ORIGINS = [
// HTTP dev
'http://localhost', 'http://localhost:80', 'http://localhost:4173', 'http://localhost:5174', 'http://127.0.0.1', 'http://127.0.0.1:80', 'http://127.0.0.1:5174',
// HTTPS dev (Vite with basic-ssl)
'https://localhost', 'https://localhost:443', 'https://localhost:4173', 'https://localhost:5174', 'https://127.0.0.1', 'https://127.0.0.1:443', 'https://127.0.0.1:5174'];
const PORT = process.env.PORT || 3001;
const WS_PORT = process.env.WS_PORT || 8080;
const DATA_DIR = process.env.CONNECTION_DATA_DIR || path.join(__dirname, 'data');
const CONNECTIONS_FILE = path.join(DATA_DIR, 'connections.json');
const PERSISTENCE = process.env.PERSISTENCE || 'file';
const SQLITE_DB_PATH = path.join(DATA_DIR, 'unicon.db');
const parseAllowedOrigins = () => {
  const envOrigins = process.env.ALLOWED_ORIGINS ? process.env.ALLOWED_ORIGINS.split(',').map(origin => origin.trim()).filter(Boolean) : [];
  return envOrigins.length > 0 ? envOrigins : DEFAULT_ALLOWED_ORIGINS;
};
const ensureDataStore = () => {
  if (!fs.existsSync(DATA_DIR)) {
    fs.mkdirSync(DATA_DIR, {
      recursive: true
    });
  }
};
const normalizeConnection = connection => ({
  id: connection.id || uuidv4(),
  name: connection.name || 'Unbenannte Verbindung',
  type: connection.type || 'unknown',
  config: connection.config || {},
  createdAt: connection.createdAt || new Date().toISOString(),
  status: connection.status || 'disconnected'
});
const loadConnections = async db => {
  try {
    ensureDataStore();
    if (PERSISTENCE === 'sqlite' && db) {
      return await db.getConnections();
    }
    if (!fs.existsSync(CONNECTIONS_FILE)) {
      return [];
    }
    const raw = fs.readFileSync(CONNECTIONS_FILE, 'utf8');
    if (!raw) return [];
    const parsed = JSON.parse(raw);
    const list = Array.isArray(parsed) ? parsed : parsed.connections;
    if (!Array.isArray(list)) return [];
    return list.map(normalizeConnection).map(connection => ({
      ...connection,
      status: 'disconnected'
    }));
  } catch (error) {
    console.error('Failed to load connections store:', error);
    return [];
  }
};
const persistConnections = async (connections, db) => {
  ensureDataStore();
  if (PERSISTENCE === 'sqlite' && db) {
    await db.replaceConnections(connections.map(normalizeConnection));
    return;
  }
  const payload = {
    connections: connections.map(normalizeConnection)
  };
  await fs.promises.writeFile(CONNECTIONS_FILE, JSON.stringify(payload, null, 2), 'utf8');
};
const {
  DB
} = (() => {
  try {
    return require('./persistence/db');
  } catch {
    return {
      DB: null
    };
  }
})();
const buildState = async () => {
  let db = null;
  if (PERSISTENCE === 'sqlite' && DB) {
    db = await new DB(SQLITE_DB_PATH).init();
  }
  const connections = await loadConnections(db);
  return {
    connections,
    activeConnections: new Map(),
    connectedClients: new Set(),
    db
  };
};
const createBroadcast = connectedClients => message => {
  connectedClients.forEach(client => {
    if (client.readyState === WebSocket.OPEN) {
      client.send(JSON.stringify(message));
    }
  });
};
const createCorsMiddleware = allowedOrigins => cors({
  origin: (origin, callback) => {
    if (!origin || allowedOrigins.includes(origin)) {
      callback(null, true);
    } else {
      callback(new Error(`Origin ${origin} not allowed by CORS`));
    }
  },
  credentials: true
});
const createApp = state => {
  const {
    connections,
    activeConnections,
    connectedClients,
    db
  } = state;
  const allowedOrigins = parseAllowedOrigins();
  const broadcast = createBroadcast(connectedClients);
  // make broadcast visible to handlers
  global.broadcast = broadcast;
  const app = express();
  app.use(createCorsMiddleware(allowedOrigins));
  app.use(express.json({
    limit: '10mb'
  }));

  // in-memory upload storage for OpenAPI files
  const upload = multer({
    storage: multer.memoryStorage(),
    limits: {
      fileSize: 15 * 1024 * 1024
    }
  });
  const apiRouter = express.Router();

  // Add CSP for production/Electron when serving static /unicon content
  const enableCsp = process.env.ENABLE_CSP === '1' || process.env.ELECTRON === '1' || process.env.NODE_ENV === 'production';
  if (enableCsp) {
    const frameAncestors = process.env.CSP_FRAME_ANCESTORS || "'self'"; // e.g., 'self' or 'none'
    const wsConnect = `ws://localhost:${WS_PORT}`;
    const connectSrc = ["'self'", `http://localhost:${PORT}`, wsConnect, 'http://localhost:5174', 'ws://localhost:5174'].join(' ');
    const inProd = process.env.NODE_ENV === 'production' || process.env.ELECTRON === '1';
    const scriptSrc = inProd ? "script-src 'self'" : "script-src 'self' 'unsafe-eval'"; // keep eval only in dev
    const csp = ["default-src 'self'", "base-uri 'self'", "form-action 'self'", "object-src 'none'", `frame-ancestors ${frameAncestors}`, "img-src 'self' data: blob:", "font-src 'self' data:", "style-src 'self' 'unsafe-inline'", scriptSrc, `connect-src ${connectSrc}`].join('; ');
    app.use('/unicon', (req, res, next) => {
      res.setHeader('Content-Security-Policy', csp);
      res.setHeader('X-Content-Type-Options', 'nosniff');
      res.setHeader('Referrer-Policy', 'no-referrer');
      res.setHeader('Permissions-Policy', 'camera=(), microphone=(), geolocation=()');
      next();
    });
  }

  // Optional Phase 1 auth scaffolding (disabled by default)
  if (process.env.FEATURE_AUTH === '1') {
    try {
      const createAuthRouter = require('./auth/router');
      const {
        verifyJWT,
        requireRoles
      } = require('./auth/middleware');
      app.use('/unicon/api/auth', createAuthRouter(db));
      // Example protected route
      app.get('/unicon/api/me', verifyJWT, async (req, res) => {
        try {
          let profile = {
            email: req.user.email,
            roles: req.user.roles
          };
          if (db) {
            profile.provider = await db.getUserPref(req.user.sub, 'provider');
            profile.avatar = await db.getUserPref(req.user.sub, 'avatar');
          }
          res.json({
            success: true,
            user: profile
          });
        } catch (e) {
          res.status(500).json({
            success: false,
            error: e.message
          });
        }
      });
      // User preferences: language
      app.post('/unicon/api/settings/language', verifyJWT, async (req, res) => {
        try {
          await db.setUserPref(req.user.sub, 'lang', req.body?.lang || 'en');
          res.json({
            success: true
          });
        } catch (e) {
          res.status(500).json({
            success: false,
            error: e.message
          });
        }
      });
      app.get('/unicon/api/settings/language', verifyJWT, async (req, res) => {
        try {
          const lang = await db.getUserPref(req.user.sub, 'lang');
          res.json({
            success: true,
            lang
          });
        } catch (e) {
          res.status(500).json({
            success: false,
            error: e.message
          });
        }
      });
      // Example admin-only route
      app.get('/unicon/api/admin/ping', verifyJWT, requireRoles('admin'), (req, res) => res.json({
        success: true,
        pong: true
      }));
    } catch (e) {
      console.warn('Auth router not available:', e.message);
    }
  }

  // In tests, never enforce auth; otherwise only when AUTH_ENFORCE=1 is set
  const IN_TEST = process.env.NODE_ENV === 'test' || !!process.env.JEST_WORKER_ID;
  const ENFORCE = !IN_TEST && process.env.AUTH_ENFORCE === '1' && typeof verifyJWTMiddleware === 'function';
  apiRouter.get('/connections', ENFORCE ? verifyJWTMiddleware : (req, res, next) => next(), async (req, res) => {
    try {
      if (db) {
        const fresh = await db.getConnections();
        connections.splice(0, connections.length, ...fresh);
      }
      res.json({
        success: true,
        connections
      });
    } catch (error) {
      res.status(500).json({
        success: false,
        error: error.message
      });
    }
  });
  apiRouter.post('/connections', ENFORCE ? verifyJWTMiddleware : (req, res, next) => next(), async (req, res) => {
    try {
      const connection = {
        id: uuidv4(),
        ...req.body,
        createdAt: new Date().toISOString(),
        status: 'disconnected'
      };
      connections.push(connection);
      await persistConnections(connections, db);
      broadcast({
        type: 'log',
        data: {
          message: `Connection "${connection.name}" erstellt`,
          type: 'success'
        }
      });
      res.json({
        success: true,
        connection
      });
    } catch (error) {
      res.status(500).json({
        success: false,
        error: error.message
      });
    }
  });
  apiRouter.delete('/connections/:id', ENFORCE ? verifyJWTMiddleware : (req, res, next) => next(), async (req, res) => {
    try {
      const connectionId = req.params.id;
      if (activeConnections.has(connectionId)) {
        activeConnections.delete(connectionId);
      }
      const index = connections.findIndex(conn => conn.id === connectionId);
      if (index === -1) {
        return res.status(404).json({
          success: false,
          error: 'Connection not found'
        });
      }
      connections.splice(index, 1);
      await persistConnections(connections, db);
      broadcast({
        type: 'log',
        data: {
          message: 'Connection gelÃ¶scht',
          type: 'info'
        }
      });
      res.json({
        success: true
      });
    } catch (error) {
      res.status(500).json({
        success: false,
        error: error.message
      });
    }
  });
  apiRouter.post('/connect', ENFORCE ? verifyJWTMiddleware : (req, res, next) => next(), async (req, res) => {
    try {
      const {
        connectionId
      } = req.body;
      const connection = connections.find(c => c.id === connectionId);
      if (!connection) {
        return res.status(404).json({
          success: false,
          error: 'Connection not found'
        });
      }

      // Create protocol handler when applicable
      let handler = null;
      if (connection.type === 'rest') {
        handler = new EnhancedRestHandler(connection.id, connection.config || {});
        await handler.connect();
      } else if (connection.type === 'ssh') {
        handler = new SSHHandler(connection.id, connection.config || {});
        await handler.connect();
      } else if (connection.type === 'k8s') {
        handler = new K8sHandler(connection.id, connection.config || {});
        await handler.connect();
      } else if (connection.type === 'websocket') {
        handler = new WSHandler(connection.id, connection.config || {});
        await handler.connect();
      } else if (connection.type === 'sql') {
        handler = new SQLHandler(connection.id, connection.config || {});
        await handler.connect();
      } else if (connection.type === 'opcua' || connection.type === 'opc-ua') {
        handler = new OPCUAHandler(connection.id, connection.config || {});
        await handler.connect();
      } else if (connection.type === 'grpc') {
        handler = new GrpcHandler(connection.id, connection.config || {});
        await handler.connect();
      }
      connection.status = 'connected';
      activeConnections.set(connectionId, {
        status: 'connected',
        handler,
        type: connection.type
      });
      await persistConnections(connections, db);
      broadcast({
        type: 'connection_status',
        data: {
          connectionId,
          status: 'connected'
        }
      });
      broadcast({
        type: 'log',
        data: {
          message: `Verbunden mit ${connection.name}`,
          type: 'success'
        }
      });
      res.json({
        success: true
      });
    } catch (error) {
      res.status(500).json({
        success: false,
        error: error.message
      });
    }
  });
  apiRouter.post('/disconnect', ENFORCE ? verifyJWTMiddleware : (req, res, next) => next(), async (req, res) => {
    try {
      const {
        connectionId
      } = req.body;
      const connection = connections.find(c => c.id === connectionId);
      if (!connection) {
        return res.status(404).json({
          success: false,
          error: 'Connection not found'
        });
      }
      const active = activeConnections.get(connectionId);
      if (active?.handler?.disconnect) {
        try {
          await active.handler.disconnect();
        } catch (_) {}
      }
      connection.status = 'disconnected';
      activeConnections.delete(connectionId);
      await persistConnections(connections, db);
      broadcast({
        type: 'connection_status',
        data: {
          connectionId,
          status: 'disconnected'
        }
      });
      broadcast({
        type: 'log',
        data: {
          message: 'Verbindung getrennt',
          type: 'info'
        }
      });
      res.json({
        success: true
      });
    } catch (error) {
      res.status(500).json({
        success: false,
        error: error.message
      });
    }
  });
  apiRouter.get('/health', (req, res) => {
    res.json({
      success: true,
      status: 'healthy',
      timestamp: new Date().toISOString(),
      connections: connections.length,
      activeConnections: activeConnections.size,
      connectedClients: connectedClients.size
    });
  });
  apiRouter.get('/connections/export', ENFORCE ? verifyJWTMiddleware : (req, res, next) => next(), (req, res) => {
    try {
      res.setHeader('Content-Disposition', 'attachment; filename="connections-export.json"');
      res.json({
        success: true,
        connections: connections.map(normalizeConnection)
      });
    } catch (error) {
      res.status(500).json({
        success: false,
        error: error.message
      });
    }
  });

  // Unified operation endpoint used by the UI
  apiRouter.post('/operation', ENFORCE ? verifyJWTMiddleware : (req, res, next) => next(), async (req, res) => {
    try {
      const {
        connectionId,
        operation,
        params = {}
      } = req.body || {};
      if (!connectionId || !operation) {
        return res.status(400).json({
          success: false,
          error: 'connectionId and operation required'
        });
      }
      const connection = connections.find(c => c.id === connectionId);
      const active = activeConnections.get(connectionId);
      if (!connection || connection.status !== 'connected' || !active) {
        return res.status(400).json({
          success: false,
          error: 'Connection not active'
        });
      }
      if (connection.type === 'rest' && active.handler) {
        switch (operation) {
          case 'request':
            {
              const {
                method = 'GET',
                endpoint = '/',
                data = null,
                headers = {},
                params: q = {}
              } = params;
              const result = await active.handler.request(method, endpoint, data, headers, q);
              return res.json(result);
            }
          case 'getEndpoints':
            {
              const result = active.handler.getEndpoints(params.tag || null);
              return res.json(result);
            }
          case 'validateRequest':
            {
              const {
                path: p,
                method,
                headers = {},
                params: q = {},
                body = null
              } = params;
              const result = active.handler.validateRequest(p, method, headers, q, body);
              return res.json({
                success: true,
                data: result
              });
            }
          case 'generateExample':
            {
              const {
                path: p,
                method
              } = params;
              const result = active.handler.generateExampleRequest(p, method);
              return res.json(result);
            }
          case 'loadOpenApi':
            {
              if (params.openApiUrl) active.handler.config.openApiUrl = params.openApiUrl;
              if (params.openApiFile) active.handler.config.openApiFile = params.openApiFile;
              await active.handler.loadOpenApiSpec();
              return res.json({
                success: true
              });
            }
          default:
            return res.status(400).json({
              success: false,
              error: `Unknown operation: ${operation}`
            });
        }
      }

      // OPC UA operations
      if ((connection.type === 'opcua' || connection.type === 'opc-ua') && active.handler) {
        const h = active.handler;
        switch (operation) {
          case 'browse':
            return res.json(await h.browse(params.nodeId));
          case 'read':
            return res.json(await h.read(params.nodes));
          case 'write':
            return res.json(await h.write(params.nodeId, params.value, params.dataType));
          default:
            return res.status(400).json({
              success: false,
              error: `Unknown OPC UA operation: ${operation}`
            });
        }
      }

      // CPD operations
      if (connection.type === 'cpd' && active.handler) {
        const h = active.handler;
        switch (operation) {
          case 'ping':
            return res.json(await h.ping(params?.message || 'ping'));
          case 'browseTopics':
            return res.json(await h.browseTopics({
              topicPattern: params?.topicPattern,
              limit: params?.limit,
              beginTopicName: params?.beginTopicName,
              reverse: params?.reverse
            }));
          case 'getLatestData':
            return res.json(await h.getLatestData({
              topicPatterns: params?.topicPatterns,
              filterDef: params?.filterDef
            }));
          case 'simpleSubscribe':
            return res.json(await h.simpleSubscribe({
              id: params?.id,
              topicPatterns: params?.topicPatterns
            }));
          case 'subscribe':
            return res.json(await h.subscribe({
              id: params?.id,
              filterDef: params?.filterDef,
              subsConfig: params?.config || params?.subsConfig
            }));
          case 'unsubscribe':
            return res.json(await h.unsubscribe({
              id: params?.id
            }));
          case 'publish':
            return res.json(await h.publish({
              topic: params?.topic,
              data: params?.data
            }));
          case 'publishUpdate':
            return res.json(await h.publishUpdate({
              topic: params?.topic,
              data: params?.data
            }));
          case 'deltaPublish':
            return res.json(await h.deltaPublish({
              topic: params?.topic,
              data: params?.data
            }));
          case 'publishDeltaToDelta':
            return res.json(await h.publishDeltaToDelta({
              topic: params?.topic,
              data: params?.data
            }));
          case 'publishDeltaToFull':
            return res.json(await h.publishDeltaToFull({
              topic: params?.topic,
              data: params?.data
            }));
          case 'publishFullToDelta':
            return res.json(await h.publishFullToDelta({
              topic: params?.topic,
              data: params?.data
            }));
          case 'sendTopic':
            return res.json(await h.sendTopic({
              topic: params?.topic,
              data: params?.data
            }));
          default:
            return res.status(400).json({
              success: false,
              error: `Unknown CPD operation: ${operation}`
            });
        }
      }

      // gRPC operations
      if (connection.type === 'grpc' && active.handler) {
        const h = active.handler;
        switch (operation) {
          case 'unary':
            return res.json(await h.unary(params.method, params.request || {}));
          default:
            return res.status(400).json({
              success: false,
              error: `Unknown gRPC operation: ${operation}`
            });
        }
      }

      // SSH operations
      if (connection.type === 'ssh' && active.handler) {
        const h = active.handler;
        switch (operation) {
          case 'exec':
            {
              const {
                command,
                cwd
              } = params;
              const result = await h.exec(command, cwd);
              return res.json(result);
            }
          case 'shellOpen':
            {
              const result = await h.shellOpen({
                cols: params.cols,
                rows: params.rows
              });
              return res.json(result);
            }
          case 'shellInput':
            {
              const result = await h.shellInput({
                sessionId: params.sessionId,
                data: params.data
              });
              return res.json(result);
            }
          case 'shellResize':
            {
              const result = await h.shellResize({
                sessionId: params.sessionId,
                cols: params.cols,
                rows: params.rows
              });
              return res.json(result);
            }
          case 'shellClose':
            {
              const result = await h.shellClose({
                sessionId: params.sessionId
              });
              return res.json(result);
            }
          case 'sftpList':
            {
              const result = await h.sftpList({
                path: params.path
              });
              return res.json(result);
            }
          case 'sftpGet':
            {
              const result = await h.sftpGet({
                path: params.path
              });
              return res.json(result);
            }
          case 'sftpPut':
            {
              const result = await h.sftpPut({
                path: params.path,
                base64: params.base64
              });
              return res.json(result);
            }
          default:
            return res.status(400).json({
              success: false,
              error: `Unknown SSH operation: ${operation}`
            });
        }
      }

      // WebSocket operations
      if (connection.type === 'websocket' && active.handler) {
        const h = active.handler;
        switch (operation) {
          case 'send':
            {
              const {
                message
              } = params;
              const result = await h.send(message);
              // Ensure a broadcast is emitted even if handler-level broadcast was not yet attached
              global.broadcast && global.broadcast({
                type: 'ws',
                data: {
                  event: 'message',
                  connectionId,
                  data: typeof message === 'string' ? message : JSON.stringify(message),
                  source: 'router'
                }
              });
              return res.json(result);
            }
          default:
            return res.status(400).json({
              success: false,
              error: `Unknown WS operation: ${operation}`
            });
        }
      }

      // SQL operations
      if (connection.type === 'sql' && active.handler) {
        const h = active.handler;
        switch (operation) {
          case 'query':
            {
              const {
                sql,
                params = []
              } = params;
              const result = await h.query(sql, params);
              return res.json(result);
            }
          default:
            return res.status(400).json({
              success: false,
              error: `Unknown SQL operation: ${operation}`
            });
        }
      }

      // Kubernetes operations
      if (connection.type === 'k8s' && active.handler) {
        const h = active.handler;
        switch (operation) {
          case 'contexts':
            return res.json(h.listContexts());
          case 'useContext':
            return res.json(h.useContext(params.name));
          case 'namespaces':
            {
              const result = await h.listNamespaces();
              return res.json(result);
            }
          case 'pods':
            {
              const result = await h.listPods(params.namespace);
              return res.json(result);
            }
          case 'logsStart':
            {
              const result = await h.logsStart({
                namespace: params.namespace,
                pod: params.pod,
                container: params.container,
                tailLines: params.tailLines
              });
              return res.json(result);
            }
          case 'logsStop':
            {
              const result = await h.logsStop({
                id: params.id
              });
              return res.json(result);
            }
          case 'execOpen':
            {
              const result = await h.execOpen({
                namespace: params.namespace,
                pod: params.pod,
                container: params.container,
                command: params.command,
                tty: params.tty
              });
              return res.json(result);
            }
          case 'execInput':
            {
              const result = await h.execInput({
                id: params.id,
                data: params.data
              });
              return res.json(result);
            }
          case 'execClose':
            {
              const result = await h.execClose({
                id: params.id
              });
              return res.json(result);
            }
          default:
            return res.status(400).json({
              success: false,
              error: `Unknown K8s operation: ${operation}`
            });
        }
      }
      return res.status(400).json({
        success: false,
        error: `Operation not supported for type ${connection.type}`
      });
    } catch (error) {
      res.status(500).json({
        success: false,
        error: error.message
      });
    }
  });

  // OpenAPI file upload (multipart/form-data, field: openApiFile)
  apiRouter.post('/upload-openapi', upload.single('openApiFile'), async (req, res) => {
    try {
      if (!req.file) return res.status(400).json({
        success: false,
        error: 'No file uploaded'
      });
      const filename = req.file.originalname;
      await EnhancedRestHandler.handleFileUpload(req.file.buffer, filename);
      res.json({
        success: true,
        filename
      });
    } catch (error) {
      res.status(500).json({
        success: false,
        error: error.message
      });
    }
  });
  apiRouter.post('/connections/import', async (req, res) => {
    try {
      const payload = req.body;
      const incoming = Array.isArray(payload) ? payload : payload.connections;
      if (!Array.isArray(incoming)) {
        return res.status(400).json({
          success: false,
          error: 'UngÃ¼ltiges Verbindungs-Format'
        });
      }
      const importedConnections = incoming.map(item => ({
        ...normalizeConnection(item),
        status: 'disconnected'
      }));
      connections.splice(0, connections.length, ...importedConnections);
      activeConnections.clear();
      await persistConnections(connections, db);
      broadcast({
        type: 'log',
        data: {
          message: `Importierte ${importedConnections.length} Connections`,
          type: 'success'
        }
      });
      res.json({
        success: true,
        connections: importedConnections,
        count: importedConnections.length
      });
    } catch (error) {
      res.status(500).json({
        success: false,
        error: error.message
      });
    }
  });

  // PKCE helpers
  const pkceStore = new Map(); // state -> { verifier, provider, exp }
  const pkceExpireMs = 10 * 60 * 1000;
  function b64url(buf) {
    return buf.toString('base64').replace(/\+/g, '-').replace(/\//g, '_').replace(/=+$/, '');
  }
  function makeVerifier() {
    return b64url(crypto.randomBytes(32));
  }
  function makeChallenge(verifier) {
    return b64url(crypto.createHash('sha256').update(verifier).digest());
  }

  // Google/GitHub OAuth (external providers)
  const GOOGLE = {
    auth: 'https://accounts.google.com/o/oauth2/v2/auth',
    token: 'https://oauth2.googleapis.com/token',
    userinfo: 'https://www.googleapis.com/oauth2/v3/userinfo',
    client_id: process.env.GOOGLE_CLIENT_ID || '',
    client_secret: process.env.GOOGLE_CLIENT_SECRET || '',
    scope: 'openid email profile'
  };
  const GITHUB = {
    auth: 'https://github.com/login/oauth/authorize',
    token: 'https://github.com/login/oauth/access_token',
    userinfo: 'https://api.github.com/user',
    emails: 'https://api.github.com/user/emails',
    client_id: process.env.GITHUB_CLIENT_ID || '',
    client_secret: process.env.GITHUB_CLIENT_SECRET || '',
    scope: 'read:user user:email'
  };
  function providerByName(name) {
    return name === 'google' ? GOOGLE : name === 'github' ? GITHUB : null;
  }

  // Branded local consent before going out to Google/GitHub
  app.get('/unicon/api/oauth/:provider/start', async (req, res) => {
    const provider = providerByName(req.params.provider);
    if (!provider || !provider.client_id) return res.status(400).send('provider_not_configured');
    const state = b64url(crypto.randomBytes(16));
    const verifier = makeVerifier();
    const challenge = makeChallenge(verifier);
    const redirectUri = `${req.protocol}://${req.get('host')}/unicon/api/oauth/${req.params.provider}/callback`;
    pkceStore.set(state, {
      verifier,
      provider: req.params.provider,
      exp: Date.now() + pkceExpireMs,
      challenge,
      redirectUri
    });
    const html = `<!doctype html><html><head><meta charset='utf-8'><title>Continue with ${req.params.provider}</title>
      <style>body{font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#f8fafc;color:#0f172a;margin:0}
      .wrap{max-width:560px;margin:10vh auto;background:#fff;border:1px solid #e2e8f0;border-radius:8px;box-shadow:0 6px 20px rgba(0,0,0,.06)}
      .hd{padding:20px 24px;border-bottom:1px solid #e2e8f0;display:flex;gap:8px;align-items:center}
      .bd{padding:24px}
      .btn{display:inline-block;padding:10px 16px;border-radius:6px;text-decoration:none}
      .pri{background:#004b8d;color:#fff}
      .sec{background:#e2e8f0;color:#0f172a;margin-left:8px}
      .muted{color:#475569;font-size:14px}
      </style></head><body>
      <div class='wrap'>
        <div class='hd'><strong>Unicon</strong><span class='muted'>Sign in with ${req.params.provider}</span></div>
        <div class='bd'>
          <p class='muted'>You will be redirected to ${req.params.provider} to continue.</p>
          <div style='margin-top:16px'>
            <a class='btn pri' href='/unicon/api/oauth/${req.params.provider}/continue?state=${encodeURIComponent(state)}'>Continue</a>
            <a class='btn sec' href='/unicon/'>Cancel</a>
          </div>
        </div>
      </div>
      </body></html>`;
    res.setHeader('Content-Type', 'text/html');
    return res.send(html);
  });
  app.get('/unicon/api/oauth/:provider/continue', (req, res) => {
    const entry = pkceStore.get(req.query.state);
    const provider = providerByName(req.params.provider);
    if (!entry || !provider) return res.status(400).send('invalid_state');
    const params = new URLSearchParams({
      client_id: provider.client_id,
      response_type: 'code',
      redirect_uri: entry.redirectUri,
      scope: provider.scope,
      code_challenge: entry.challenge,
      code_challenge_method: 'S256',
      access_type: 'offline',
      state: req.query.state
    });
    return res.redirect(`${provider.auth}?${params.toString()}`);
  });
  app.get('/unicon/api/oauth/:provider/callback', async (req, res) => {
    try {
      const provider = providerByName(req.params.provider);
      if (!provider) return res.status(400).send('unknown_provider');
      const {
        code,
        state
      } = req.query || {};
      const entry = pkceStore.get(state);
      pkceStore.delete(state);
      if (!entry || entry.exp < Date.now()) return res.status(400).send('invalid_state');
      if (entry.provider !== req.params.provider) return res.status(400).send('state_provider_mismatch');
      const redirectUri = `${req.protocol}://${req.get('host')}/unicon/api/oauth/${req.params.provider}/callback`;
      // Exchange code
      const axios = require('axios');
      let tokenResp;
      if (provider === GITHUB) {
        tokenResp = await axios.post(provider.token, new URLSearchParams({
          client_id: provider.client_id,
          client_secret: provider.client_secret,
          code: code,
          redirect_uri: redirectUri,
          grant_type: 'authorization_code'
        }), {
          headers: {
            Accept: 'application/json'
          }
        });
      } else {
        tokenResp = await axios.post(provider.token, new URLSearchParams({
          client_id: provider.client_id,
          client_secret: provider.client_secret,
          code: code,
          redirect_uri: redirectUri,
          grant_type: 'authorization_code',
          code_verifier: entry.verifier
        }), {
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded'
          }
        });
      }
      const accessToken = tokenResp.data.access_token;
      if (!accessToken) return res.status(400).send('token_exchange_failed');
      // Fetch user info
      let email = null;
      let avatar = null;
      let providerName = provider === GOOGLE ? 'google' : 'github';
      if (provider === GOOGLE) {
        const u = await axios.get(provider.userinfo, {
          headers: {
            Authorization: `Bearer ${accessToken}`
          }
        });
        email = u.data?.email;
        avatar = u.data?.picture || null;
      } else if (provider === GITHUB) {
        const u = await axios.get(provider.userinfo, {
          headers: {
            Authorization: `Bearer ${accessToken}`,
            'User-Agent': 'unicon'
          }
        });
        email = u.data?.email;
        avatar = u.data?.avatar_url || null;
        if (!email) {
          const e = await axios.get(provider.emails, {
            headers: {
              Authorization: `Bearer ${accessToken}`,
              'User-Agent': 'unicon'
            }
          });
          email = (e.data || []).find(x => x.primary)?.email || e.data[0]?.email;
        }
      }
      if (!email) return res.status(400).send('email_not_found');
      // Provision user and emit local code for client
      if (DB) {
        const dbi = (await buildState()).db;
        let u = await dbi.getUserByEmail(email);
        if (!u) {
          const {
            v4: uuidv4
          } = require('uuid');
          await dbi.createUser({
            id: uuidv4(),
            email,
            password_hash: 'oauth',
            salt: 'oauth',
            createdAt: new Date().toISOString()
          });
          u = await dbi.getUserByEmail(email);
          await dbi.assignRoleToUser(u.id, 'developer');
        }
        if (avatar) await dbi.setUserPref(u.id || (await dbi.getUserByEmail(email)).id, 'avatar', avatar);
        await dbi.setUserPref(u.id || (await dbi.getUserByEmail(email)).id, 'provider', providerName);
      }
      const localCode = `${Date.now()}-${crypto.randomBytes(6).toString('hex')}`;
      oauthCodes.set(localCode, {
        userEmail: email,
        exp: Date.now() + 5 * 60 * 1000
      });
      const clientRedirect = `${req.protocol}://${req.get('host')}/unicon/auth/callback`;
      const sep = clientRedirect.includes('?') ? '&' : '?';
      return res.redirect(`${clientRedirect}${sep}code=${encodeURIComponent(localCode)}&provider=${req.params.provider}`);
    } catch (e) {
      return res.status(500).send('oauth_error');
    }
  });

  // OAuth2 demo endpoints (local only) with minimal consent + PKCE-like state
  const oauthCodes = new Map(); // code -> { userEmail, exp }
  app.get('/unicon/api/oauth/authorize', (req, res) => {
    const {
      client_id,
      redirect_uri,
      state
    } = req.query || {};
    const okClient = client_id === 'demo';
    const okRedirect = typeof redirect_uri === 'string' && /\/unicon\/auth\/callback$/.test(redirect_uri);
    if (!okClient || !okRedirect) return res.status(400).send('invalid_client or invalid_redirect');
    // Minimal consent HTML
    const html = `<!doctype html><html><head><meta charset="utf-8"><title>Authorize â€“ Demo</title>
      <style>body{font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;padding:0;background:#f8fafc;color:#0f172a}
      .wrap{max-width:540px;margin:10vh auto;background:#fff;border:1px solid #e2e8f0;border-radius:8px;box-shadow:0 6px 20px rgba(0,0,0,.06)}
      .hd{padding:20px 24px;border-bottom:1px solid #e2e8f0;display:flex;align-items:center;gap:8px}
      .bd{padding:24px}
      .btn{display:inline-block;padding:10px 16px;border-radius:6px;text-decoration:none}
      .pri{background:#004b8d;color:#fff}
      .sec{background:#e2e8f0;color:#0f172a;margin-left:8px}
      .muted{color:#475569;font-size:14px}
      </style></head><body>
      <div class="wrap">
        <div class="hd"><strong>Unicon Demo OAuth</strong></div>
        <div class="bd">
          <p class="muted">The application <strong>Unicon</strong> is requesting access to your demo account <strong>demo@unicon.local</strong>.</p>
          <ul class="muted"><li>Read profile (email)</li><li>Basic access</li></ul>
          <div style="margin-top:16px">
            <a class="btn pri" href="/unicon/api/oauth/authorize/decision?client_id=${encodeURIComponent(client_id)}&redirect_uri=${encodeURIComponent(redirect_uri)}&state=${encodeURIComponent(state || '')}&consent=allow">Allow</a>
            <a class="btn sec" href="/unicon/api/oauth/authorize/decision?client_id=${encodeURIComponent(client_id)}&redirect_uri=${encodeURIComponent(redirect_uri)}&state=${encodeURIComponent(state || '')}&consent=deny">Cancel</a>
          </div>
        </div>
      </div>
      </body></html>`;
    res.setHeader('Content-Type', 'text/html');
    return res.send(html);
  });
  app.get('/unicon/api/oauth/authorize/decision', (req, res) => {
    const {
      client_id,
      redirect_uri,
      state,
      consent
    } = req.query || {};
    const okClient = client_id === 'demo';
    const okRedirect = typeof redirect_uri === 'string' && /\/unicon\/auth\/callback$/.test(redirect_uri);
    if (!okClient || !okRedirect) return res.status(400).send('invalid_client or invalid_redirect');
    const sep = redirect_uri.includes('?') ? '&' : '?';
    if (consent !== 'allow') return res.redirect(`${redirect_uri}${sep}error=access_denied${state ? `&state=${encodeURIComponent(state)}` : ''}`);
    const code = `${Date.now()}-${Math.random().toString(36).slice(2)}`;
    oauthCodes.set(code, {
      userEmail: 'demo@unicon.local',
      exp: Date.now() + 5 * 60 * 1000
    });
    return res.redirect(`${redirect_uri}${sep}code=${encodeURIComponent(code)}${state ? `&state=${encodeURIComponent(state)}` : ''}`);
  });
  app.post('/unicon/api/oauth/token', express.json(), async (req, res) => {
    try {
      const {
        code,
        client_id
      } = req.body || {};
      if (client_id !== 'demo' || !oauthCodes.has(code)) return res.status(400).json({
        error: 'invalid_grant'
      });
      const entry = oauthCodes.get(code);
      oauthCodes.delete(code);
      if (!entry || entry.exp < Date.now()) return res.status(400).json({
        error: 'expired_code'
      });
      // ensure user exists
      if (DB) {
        const db = (await buildState()).db; // reuse init to have db
        let u = await db.getUserByEmail(entry.userEmail);
        if (!u) {
          const {
            v4: uuidv4
          } = require('uuid');
          await db.createUser({
            id: uuidv4(),
            email: entry.userEmail,
            password_hash: 'oauth',
            salt: 'oauth',
            createdAt: new Date().toISOString()
          });
          u = await db.getUserByEmail(entry.userEmail);
          await db.assignRoleToUser(u.id, 'developer');
        }
      }
      const {
        issueJWT
      } = require('./auth/middleware');
      const token = issueJWT({
        id: entry.userEmail,
        email: entry.userEmail,
        roles: ['developer']
      });
      return res.json({
        access_token: token,
        token_type: 'Bearer',
        expires_in: 8 * 60 * 60
      });
    } catch (e) {
      return res.status(500).json({
        error: 'server_error'
      });
    }
  });
  app.use('/unicon/api', apiRouter);
  app.use('/unicon', express.static(path.join(__dirname, 'public')));
  app.get('/unicon/*', (req, res) => {
    try {
      const file = path.join(__dirname, 'public', 'index.html');
      let html = fs.readFileSync(file, 'utf8');
      // inject a tiny inline script with a nonce (for CSP verification in prod)
      const nonce = crypto.randomBytes(16).toString('base64');
      const current = (res.getHeader('Content-Security-Policy') || '').toString();
      const updated = current.replace("script-src 'self'", `script-src 'self' 'nonce-${nonce}' 'strict-dynamic'`).replace("style-src 'self' 'unsafe-inline'", "style-src 'self'");
      res.setHeader('Content-Security-Policy', updated);
      html = html.replace('</head>', `<script nonce="${nonce}">window.__csp=1</script></head>`);
      res.setHeader('Content-Type', 'text/html');
      res.send(html);
    } catch (e) {
      res.sendFile(path.join(__dirname, 'public', 'index.html'));
    }
  });
  app.get('/', (req, res) => {
    res.json({
      message: 'Universal Protocol Test Client Backend',
      version: '1.0.0',
      timestamp: new Date().toISOString()
    });
  });
  return app;
};
const createWebSocketServer = (connectedClients, customPort = WS_PORT) => {
  const wsServer = new WebSocket.Server({
    port: customPort,
    host: '0.0.0.0'
  });
  wsServer.on('connection', ws => {
    connectedClients.add(ws);
    ws.on('close', () => {
      connectedClients.delete(ws);
    });
    ws.on('error', error => {
      console.error('WebSocket error:', error);
      connectedClients.delete(ws);
    });
    ws.send(JSON.stringify({
      type: 'connection_status',
      data: {
        status: 'connected',
        timestamp: new Date().toISOString()
      }
    }));
  });
  return wsServer;
};
let __RUNNING = {
  server: null,
  wsServer: null
};
const startServers = async state => {
  // Ensure only one instance is running (helps Jest suites reusing the same ports)
  if (__RUNNING.server) {
    try {
      __RUNNING.wsServer && __RUNNING.wsServer.close();
    } catch {}
    try {
      await new Promise(res => __RUNNING.server.close(() => res(null)));
    } catch {}
    __RUNNING = {
      server: null,
      wsServer: null
    };
  }
  let resolvedState = state;
  if (!resolvedState) {
    resolvedState = await buildState();
  } else if (typeof resolvedState.then === 'function') {
    resolvedState = await resolvedState;
  }
  const app = createApp(resolvedState);
  const httpPort = Number(process.env.PORT) || PORT;
  const wsPort = Number(process.env.WS_PORT) || WS_PORT;
  const wsServer = createWebSocketServer(resolvedState.connectedClients, wsPort);
  const server = app.listen(httpPort, '0.0.0.0', () => {
    console.log(`ðŸš€ HTTP Server running on port ${httpPort}`);
    console.log(`ðŸ“¡ WebSocket Server running on port ${wsPort}`);
    console.log(`ðŸŒ API available at http://localhost:${httpPort}/unicon/api`);
  });
  const shutdown = () => {
    wsServer.close();
    server.close(() => process.exit(0));
  };
  process.on('SIGTERM', shutdown);
  process.on('SIGINT', shutdown);
  __RUNNING = {
    server,
    wsServer
  };
  return {
    app,
    server,
    wsServer,
    state
  };
};
if (require.main === module) {
  startServers();
}
module.exports = {
  createApp,
  createWebSocketServer,
  startServers,
  buildState,
  parseAllowedOrigins
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNvcnMiLCJXZWJTb2NrZXQiLCJ2NCIsInV1aWR2NCIsInBhdGgiLCJmcyIsImNyeXB0byIsIm11bHRlciIsIkVuaGFuY2VkUmVzdEhhbmRsZXIiLCJ2ZXJpZnlKV1RNaWRkbGV3YXJlIiwidmVyaWZ5SldUIiwiXyIsIks4c0hhbmRsZXIiLCJXU0hhbmRsZXIiLCJTUUxIYW5kbGVyIiwiU1NISGFuZGxlciIsIk9QQ1VBSGFuZGxlciIsIkdycGNIYW5kbGVyIiwiREVGQVVMVF9BTExPV0VEX09SSUdJTlMiLCJQT1JUIiwicHJvY2VzcyIsImVudiIsIldTX1BPUlQiLCJEQVRBX0RJUiIsIkNPTk5FQ1RJT05fREFUQV9ESVIiLCJqb2luIiwiX19kaXJuYW1lIiwiQ09OTkVDVElPTlNfRklMRSIsIlBFUlNJU1RFTkNFIiwiU1FMSVRFX0RCX1BBVEgiLCJwYXJzZUFsbG93ZWRPcmlnaW5zIiwiZW52T3JpZ2lucyIsIkFMTE9XRURfT1JJR0lOUyIsInNwbGl0IiwibWFwIiwib3JpZ2luIiwidHJpbSIsImZpbHRlciIsIkJvb2xlYW4iLCJsZW5ndGgiLCJlbnN1cmVEYXRhU3RvcmUiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwibm9ybWFsaXplQ29ubmVjdGlvbiIsImNvbm5lY3Rpb24iLCJpZCIsIm5hbWUiLCJ0eXBlIiwiY29uZmlnIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic3RhdHVzIiwibG9hZENvbm5lY3Rpb25zIiwiZGIiLCJnZXRDb25uZWN0aW9ucyIsInJhdyIsInJlYWRGaWxlU3luYyIsInBhcnNlZCIsIkpTT04iLCJwYXJzZSIsImxpc3QiLCJBcnJheSIsImlzQXJyYXkiLCJjb25uZWN0aW9ucyIsImVycm9yIiwiY29uc29sZSIsInBlcnNpc3RDb25uZWN0aW9ucyIsInJlcGxhY2VDb25uZWN0aW9ucyIsInBheWxvYWQiLCJwcm9taXNlcyIsIndyaXRlRmlsZSIsInN0cmluZ2lmeSIsIkRCIiwiYnVpbGRTdGF0ZSIsImluaXQiLCJhY3RpdmVDb25uZWN0aW9ucyIsIk1hcCIsImNvbm5lY3RlZENsaWVudHMiLCJTZXQiLCJjcmVhdGVCcm9hZGNhc3QiLCJtZXNzYWdlIiwiZm9yRWFjaCIsImNsaWVudCIsInJlYWR5U3RhdGUiLCJPUEVOIiwic2VuZCIsImNyZWF0ZUNvcnNNaWRkbGV3YXJlIiwiYWxsb3dlZE9yaWdpbnMiLCJjYWxsYmFjayIsImluY2x1ZGVzIiwiRXJyb3IiLCJjcmVkZW50aWFscyIsImNyZWF0ZUFwcCIsInN0YXRlIiwiYnJvYWRjYXN0IiwiZ2xvYmFsIiwiYXBwIiwidXNlIiwianNvbiIsImxpbWl0IiwidXBsb2FkIiwic3RvcmFnZSIsIm1lbW9yeVN0b3JhZ2UiLCJsaW1pdHMiLCJmaWxlU2l6ZSIsImFwaVJvdXRlciIsIlJvdXRlciIsImVuYWJsZUNzcCIsIkVOQUJMRV9DU1AiLCJFTEVDVFJPTiIsIk5PREVfRU5WIiwiZnJhbWVBbmNlc3RvcnMiLCJDU1BfRlJBTUVfQU5DRVNUT1JTIiwid3NDb25uZWN0IiwiY29ubmVjdFNyYyIsImluUHJvZCIsInNjcmlwdFNyYyIsImNzcCIsInJlcSIsInJlcyIsIm5leHQiLCJzZXRIZWFkZXIiLCJGRUFUVVJFX0FVVEgiLCJjcmVhdGVBdXRoUm91dGVyIiwicmVxdWlyZVJvbGVzIiwiZ2V0IiwicHJvZmlsZSIsImVtYWlsIiwidXNlciIsInJvbGVzIiwicHJvdmlkZXIiLCJnZXRVc2VyUHJlZiIsInN1YiIsImF2YXRhciIsInN1Y2Nlc3MiLCJlIiwicG9zdCIsInNldFVzZXJQcmVmIiwiYm9keSIsImxhbmciLCJwb25nIiwid2FybiIsIklOX1RFU1QiLCJKRVNUX1dPUktFUl9JRCIsIkVORk9SQ0UiLCJBVVRIX0VORk9SQ0UiLCJmcmVzaCIsInNwbGljZSIsInB1c2giLCJkYXRhIiwiZGVsZXRlIiwiY29ubmVjdGlvbklkIiwicGFyYW1zIiwiaGFzIiwiaW5kZXgiLCJmaW5kSW5kZXgiLCJjb25uIiwiZmluZCIsImMiLCJoYW5kbGVyIiwiY29ubmVjdCIsInNldCIsImFjdGl2ZSIsImRpc2Nvbm5lY3QiLCJ0aW1lc3RhbXAiLCJzaXplIiwib3BlcmF0aW9uIiwibWV0aG9kIiwiZW5kcG9pbnQiLCJoZWFkZXJzIiwicSIsInJlc3VsdCIsInJlcXVlc3QiLCJnZXRFbmRwb2ludHMiLCJ0YWciLCJwIiwidmFsaWRhdGVSZXF1ZXN0IiwiZ2VuZXJhdGVFeGFtcGxlUmVxdWVzdCIsIm9wZW5BcGlVcmwiLCJvcGVuQXBpRmlsZSIsImxvYWRPcGVuQXBpU3BlYyIsImgiLCJicm93c2UiLCJub2RlSWQiLCJyZWFkIiwibm9kZXMiLCJ3cml0ZSIsInZhbHVlIiwiZGF0YVR5cGUiLCJwaW5nIiwiYnJvd3NlVG9waWNzIiwidG9waWNQYXR0ZXJuIiwiYmVnaW5Ub3BpY05hbWUiLCJyZXZlcnNlIiwiZ2V0TGF0ZXN0RGF0YSIsInRvcGljUGF0dGVybnMiLCJmaWx0ZXJEZWYiLCJzaW1wbGVTdWJzY3JpYmUiLCJzdWJzY3JpYmUiLCJzdWJzQ29uZmlnIiwidW5zdWJzY3JpYmUiLCJwdWJsaXNoIiwidG9waWMiLCJwdWJsaXNoVXBkYXRlIiwiZGVsdGFQdWJsaXNoIiwicHVibGlzaERlbHRhVG9EZWx0YSIsInB1Ymxpc2hEZWx0YVRvRnVsbCIsInB1Ymxpc2hGdWxsVG9EZWx0YSIsInNlbmRUb3BpYyIsInVuYXJ5IiwiY29tbWFuZCIsImN3ZCIsImV4ZWMiLCJzaGVsbE9wZW4iLCJjb2xzIiwicm93cyIsInNoZWxsSW5wdXQiLCJzZXNzaW9uSWQiLCJzaGVsbFJlc2l6ZSIsInNoZWxsQ2xvc2UiLCJzZnRwTGlzdCIsInNmdHBHZXQiLCJzZnRwUHV0IiwiYmFzZTY0IiwiZXZlbnQiLCJzb3VyY2UiLCJzcWwiLCJxdWVyeSIsImxpc3RDb250ZXh0cyIsInVzZUNvbnRleHQiLCJsaXN0TmFtZXNwYWNlcyIsImxpc3RQb2RzIiwibmFtZXNwYWNlIiwibG9nc1N0YXJ0IiwicG9kIiwiY29udGFpbmVyIiwidGFpbExpbmVzIiwibG9nc1N0b3AiLCJleGVjT3BlbiIsInR0eSIsImV4ZWNJbnB1dCIsImV4ZWNDbG9zZSIsInNpbmdsZSIsImZpbGUiLCJmaWxlbmFtZSIsIm9yaWdpbmFsbmFtZSIsImhhbmRsZUZpbGVVcGxvYWQiLCJidWZmZXIiLCJpbmNvbWluZyIsImltcG9ydGVkQ29ubmVjdGlvbnMiLCJpdGVtIiwiY2xlYXIiLCJjb3VudCIsInBrY2VTdG9yZSIsInBrY2VFeHBpcmVNcyIsImI2NHVybCIsImJ1ZiIsInRvU3RyaW5nIiwicmVwbGFjZSIsIm1ha2VWZXJpZmllciIsInJhbmRvbUJ5dGVzIiwibWFrZUNoYWxsZW5nZSIsInZlcmlmaWVyIiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCIsIkdPT0dMRSIsImF1dGgiLCJ0b2tlbiIsInVzZXJpbmZvIiwiY2xpZW50X2lkIiwiR09PR0xFX0NMSUVOVF9JRCIsImNsaWVudF9zZWNyZXQiLCJHT09HTEVfQ0xJRU5UX1NFQ1JFVCIsInNjb3BlIiwiR0lUSFVCIiwiZW1haWxzIiwiR0lUSFVCX0NMSUVOVF9JRCIsIkdJVEhVQl9DTElFTlRfU0VDUkVUIiwicHJvdmlkZXJCeU5hbWUiLCJjaGFsbGVuZ2UiLCJyZWRpcmVjdFVyaSIsInByb3RvY29sIiwiZXhwIiwibm93IiwiaHRtbCIsImVuY29kZVVSSUNvbXBvbmVudCIsImVudHJ5IiwiVVJMU2VhcmNoUGFyYW1zIiwicmVzcG9uc2VfdHlwZSIsInJlZGlyZWN0X3VyaSIsImNvZGVfY2hhbGxlbmdlIiwiY29kZV9jaGFsbGVuZ2VfbWV0aG9kIiwiYWNjZXNzX3R5cGUiLCJyZWRpcmVjdCIsImNvZGUiLCJheGlvcyIsInRva2VuUmVzcCIsImdyYW50X3R5cGUiLCJBY2NlcHQiLCJjb2RlX3ZlcmlmaWVyIiwiYWNjZXNzVG9rZW4iLCJhY2Nlc3NfdG9rZW4iLCJwcm92aWRlck5hbWUiLCJ1IiwiQXV0aG9yaXphdGlvbiIsInBpY3R1cmUiLCJhdmF0YXJfdXJsIiwieCIsInByaW1hcnkiLCJkYmkiLCJnZXRVc2VyQnlFbWFpbCIsImNyZWF0ZVVzZXIiLCJwYXNzd29yZF9oYXNoIiwic2FsdCIsImFzc2lnblJvbGVUb1VzZXIiLCJsb2NhbENvZGUiLCJvYXV0aENvZGVzIiwidXNlckVtYWlsIiwiY2xpZW50UmVkaXJlY3QiLCJzZXAiLCJva0NsaWVudCIsIm9rUmVkaXJlY3QiLCJ0ZXN0IiwiY29uc2VudCIsIk1hdGgiLCJyYW5kb20iLCJzbGljZSIsImlzc3VlSldUIiwidG9rZW5fdHlwZSIsImV4cGlyZXNfaW4iLCJzdGF0aWMiLCJub25jZSIsImN1cnJlbnQiLCJnZXRIZWFkZXIiLCJ1cGRhdGVkIiwic2VuZEZpbGUiLCJ2ZXJzaW9uIiwiY3JlYXRlV2ViU29ja2V0U2VydmVyIiwiY3VzdG9tUG9ydCIsIndzU2VydmVyIiwiU2VydmVyIiwicG9ydCIsImhvc3QiLCJvbiIsIndzIiwiYWRkIiwiX19SVU5OSU5HIiwic2VydmVyIiwic3RhcnRTZXJ2ZXJzIiwiY2xvc2UiLCJQcm9taXNlIiwicmVzb2x2ZWRTdGF0ZSIsInRoZW4iLCJodHRwUG9ydCIsIk51bWJlciIsIndzUG9ydCIsImxpc3RlbiIsImxvZyIsInNodXRkb3duIiwiZXhpdCIsIm1haW4iLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsidW5pdmVyc2FsLXNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xyXG5jb25zdCBjb3JzID0gcmVxdWlyZSgnY29ycycpO1xyXG5jb25zdCBXZWJTb2NrZXQgPSByZXF1aXJlKCd3cycpO1xyXG5jb25zdCB7IHY0OiB1dWlkdjQgfSA9IHJlcXVpcmUoJ3V1aWQnKTtcclxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcclxuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xyXG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcclxuY29uc3QgbXVsdGVyID0gcmVxdWlyZSgnbXVsdGVyJyk7XHJcbmNvbnN0IEVuaGFuY2VkUmVzdEhhbmRsZXIgPSByZXF1aXJlKCcuL2hhbmRsZXJzL2VuaGFuY2VkX3Jlc3RfaGFuZGxlcicpO1xyXG5sZXQgdmVyaWZ5SldUTWlkZGxld2FyZSA9IG51bGw7XHJcbnRyeSB7IHZlcmlmeUpXVE1pZGRsZXdhcmUgPSByZXF1aXJlKCcuL2F1dGgvbWlkZGxld2FyZScpLnZlcmlmeUpXVDsgfSBjYXRjaCAoXykgeyAvKiBhdXRoIG5vdCBlbmFibGVkICovIH1cclxuY29uc3QgSzhzSGFuZGxlciA9IHJlcXVpcmUoJy4vaGFuZGxlcnMvazhzX2hhbmRsZXInKTtcclxuY29uc3QgV1NIYW5kbGVyID0gcmVxdWlyZSgnLi9oYW5kbGVycy93c19oYW5kbGVyJyk7XHJcbmNvbnN0IFNRTEhhbmRsZXIgPSByZXF1aXJlKCcuL2hhbmRsZXJzL3NxbF9oYW5kbGVyJyk7XHJcbmNvbnN0IFNTSEhhbmRsZXIgPSByZXF1aXJlKCcuL2hhbmRsZXJzL3NzaF9oYW5kbGVyJyk7XHJcbmNvbnN0IE9QQ1VBSGFuZGxlciA9IHJlcXVpcmUoJy4vaGFuZGxlcnMvb3BjdWFfaGFuZGxlcicpO1xyXG5jb25zdCBHcnBjSGFuZGxlciA9IHJlcXVpcmUoJy4vaGFuZGxlcnMvZ3JwY19oYW5kbGVyJyk7XHJcblxyXG5jb25zdCBERUZBVUxUX0FMTE9XRURfT1JJR0lOUyA9IFtcclxuICAvLyBIVFRQIGRldlxyXG4gICdodHRwOi8vbG9jYWxob3N0JyxcclxuICAnaHR0cDovL2xvY2FsaG9zdDo4MCcsXHJcbiAgJ2h0dHA6Ly9sb2NhbGhvc3Q6NDE3MycsXHJcbiAgJ2h0dHA6Ly9sb2NhbGhvc3Q6NTE3NCcsXHJcbiAgJ2h0dHA6Ly8xMjcuMC4wLjEnLFxyXG4gICdodHRwOi8vMTI3LjAuMC4xOjgwJyxcclxuICAnaHR0cDovLzEyNy4wLjAuMTo1MTc0JyxcclxuICAvLyBIVFRQUyBkZXYgKFZpdGUgd2l0aCBiYXNpYy1zc2wpXHJcbiAgJ2h0dHBzOi8vbG9jYWxob3N0JyxcclxuICAnaHR0cHM6Ly9sb2NhbGhvc3Q6NDQzJyxcclxuICAnaHR0cHM6Ly9sb2NhbGhvc3Q6NDE3MycsXHJcbiAgJ2h0dHBzOi8vbG9jYWxob3N0OjUxNzQnLFxyXG4gICdodHRwczovLzEyNy4wLjAuMScsXHJcbiAgJ2h0dHBzOi8vMTI3LjAuMC4xOjQ0MycsXHJcbiAgJ2h0dHBzOi8vMTI3LjAuMC4xOjUxNzQnXHJcbl07XHJcblxyXG5jb25zdCBQT1JUID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAxO1xyXG5jb25zdCBXU19QT1JUID0gcHJvY2Vzcy5lbnYuV1NfUE9SVCB8fCA4MDgwO1xyXG5jb25zdCBEQVRBX0RJUiA9IHByb2Nlc3MuZW52LkNPTk5FQ1RJT05fREFUQV9ESVIgfHwgcGF0aC5qb2luKF9fZGlybmFtZSwgJ2RhdGEnKTtcclxuY29uc3QgQ09OTkVDVElPTlNfRklMRSA9IHBhdGguam9pbihEQVRBX0RJUiwgJ2Nvbm5lY3Rpb25zLmpzb24nKTtcclxuY29uc3QgUEVSU0lTVEVOQ0UgPSBwcm9jZXNzLmVudi5QRVJTSVNURU5DRSB8fCAnZmlsZSc7XHJcbmNvbnN0IFNRTElURV9EQl9QQVRIID0gcGF0aC5qb2luKERBVEFfRElSLCAndW5pY29uLmRiJyk7XHJcblxyXG5jb25zdCBwYXJzZUFsbG93ZWRPcmlnaW5zID0gKCkgPT4ge1xyXG4gIGNvbnN0IGVudk9yaWdpbnMgPSBwcm9jZXNzLmVudi5BTExPV0VEX09SSUdJTlNcclxuICAgID8gcHJvY2Vzcy5lbnYuQUxMT1dFRF9PUklHSU5TLnNwbGl0KCcsJykubWFwKG9yaWdpbiA9PiBvcmlnaW4udHJpbSgpKS5maWx0ZXIoQm9vbGVhbilcclxuICAgIDogW107XHJcblxyXG4gIHJldHVybiBlbnZPcmlnaW5zLmxlbmd0aCA+IDAgPyBlbnZPcmlnaW5zIDogREVGQVVMVF9BTExPV0VEX09SSUdJTlM7XHJcbn07XHJcblxyXG5jb25zdCBlbnN1cmVEYXRhU3RvcmUgPSAoKSA9PiB7XHJcbiAgaWYgKCFmcy5leGlzdHNTeW5jKERBVEFfRElSKSkge1xyXG4gICAgZnMubWtkaXJTeW5jKERBVEFfRElSLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBub3JtYWxpemVDb25uZWN0aW9uID0gKGNvbm5lY3Rpb24pID0+ICh7XHJcbiAgaWQ6IGNvbm5lY3Rpb24uaWQgfHwgdXVpZHY0KCksXHJcbiAgbmFtZTogY29ubmVjdGlvbi5uYW1lIHx8ICdVbmJlbmFubnRlIFZlcmJpbmR1bmcnLFxyXG4gIHR5cGU6IGNvbm5lY3Rpb24udHlwZSB8fCAndW5rbm93bicsXHJcbiAgY29uZmlnOiBjb25uZWN0aW9uLmNvbmZpZyB8fCB7fSxcclxuICBjcmVhdGVkQXQ6IGNvbm5lY3Rpb24uY3JlYXRlZEF0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICBzdGF0dXM6IGNvbm5lY3Rpb24uc3RhdHVzIHx8ICdkaXNjb25uZWN0ZWQnXHJcbn0pO1xyXG5cclxuY29uc3QgbG9hZENvbm5lY3Rpb25zID0gYXN5bmMgKGRiKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGVuc3VyZURhdGFTdG9yZSgpO1xyXG5cclxuICAgIGlmIChQRVJTSVNURU5DRSA9PT0gJ3NxbGl0ZScgJiYgZGIpIHtcclxuICAgICAgcmV0dXJuIGF3YWl0IGRiLmdldENvbm5lY3Rpb25zKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKENPTk5FQ1RJT05TX0ZJTEUpKSB7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByYXcgPSBmcy5yZWFkRmlsZVN5bmMoQ09OTkVDVElPTlNfRklMRSwgJ3V0ZjgnKTtcclxuICAgIGlmICghcmF3KSByZXR1cm4gW107XHJcblxyXG4gICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShyYXcpO1xyXG4gICAgY29uc3QgbGlzdCA9IEFycmF5LmlzQXJyYXkocGFyc2VkKSA/IHBhcnNlZCA6IHBhcnNlZC5jb25uZWN0aW9ucztcclxuXHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkobGlzdCkpIHJldHVybiBbXTtcclxuXHJcbiAgICByZXR1cm4gbGlzdC5tYXAobm9ybWFsaXplQ29ubmVjdGlvbikubWFwKGNvbm5lY3Rpb24gPT4gKHtcclxuICAgICAgLi4uY29ubmVjdGlvbixcclxuICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJ1xyXG4gICAgfSkpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBjb25uZWN0aW9ucyBzdG9yZTonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gW107XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgcGVyc2lzdENvbm5lY3Rpb25zID0gYXN5bmMgKGNvbm5lY3Rpb25zLCBkYikgPT4ge1xyXG4gIGVuc3VyZURhdGFTdG9yZSgpO1xyXG5cclxuICBpZiAoUEVSU0lTVEVOQ0UgPT09ICdzcWxpdGUnICYmIGRiKSB7XHJcbiAgICBhd2FpdCBkYi5yZXBsYWNlQ29ubmVjdGlvbnMoY29ubmVjdGlvbnMubWFwKG5vcm1hbGl6ZUNvbm5lY3Rpb24pKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGNvbnN0IHBheWxvYWQgPSB7XHJcbiAgICBjb25uZWN0aW9uczogY29ubmVjdGlvbnMubWFwKG5vcm1hbGl6ZUNvbm5lY3Rpb24pXHJcbiAgfTtcclxuXHJcbiAgYXdhaXQgZnMucHJvbWlzZXMud3JpdGVGaWxlKENPTk5FQ1RJT05TX0ZJTEUsIEpTT04uc3RyaW5naWZ5KHBheWxvYWQsIG51bGwsIDIpLCAndXRmOCcpO1xyXG59O1xyXG5cclxuY29uc3QgeyBEQiB9ID0gKCgpID0+IHtcclxuICB0cnkgeyByZXR1cm4gcmVxdWlyZSgnLi9wZXJzaXN0ZW5jZS9kYicpOyB9IGNhdGNoIHsgcmV0dXJuIHsgREI6IG51bGwgfTsgfVxyXG59KSgpO1xyXG5cclxuY29uc3QgYnVpbGRTdGF0ZSA9IGFzeW5jICgpID0+IHtcclxuICBsZXQgZGIgPSBudWxsO1xyXG4gIGlmIChQRVJTSVNURU5DRSA9PT0gJ3NxbGl0ZScgJiYgREIpIHtcclxuICAgIGRiID0gYXdhaXQgbmV3IERCKFNRTElURV9EQl9QQVRIKS5pbml0KCk7XHJcbiAgfVxyXG4gIGNvbnN0IGNvbm5lY3Rpb25zID0gYXdhaXQgbG9hZENvbm5lY3Rpb25zKGRiKTtcclxuICByZXR1cm4ge1xyXG4gICAgY29ubmVjdGlvbnMsXHJcbiAgICBhY3RpdmVDb25uZWN0aW9uczogbmV3IE1hcCgpLFxyXG4gICAgY29ubmVjdGVkQ2xpZW50czogbmV3IFNldCgpLFxyXG4gICAgZGIsXHJcbiAgfTtcclxufTtcclxuXHJcbmNvbnN0IGNyZWF0ZUJyb2FkY2FzdCA9IGNvbm5lY3RlZENsaWVudHMgPT4gbWVzc2FnZSA9PiB7XHJcbiAgY29ubmVjdGVkQ2xpZW50cy5mb3JFYWNoKGNsaWVudCA9PiB7XHJcbiAgICBpZiAoY2xpZW50LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XHJcbiAgICAgIGNsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpKTtcclxuICAgIH1cclxuICB9KTtcclxufTtcclxuXHJcbmNvbnN0IGNyZWF0ZUNvcnNNaWRkbGV3YXJlID0gYWxsb3dlZE9yaWdpbnMgPT4gY29ycyh7XHJcbiAgb3JpZ2luOiAob3JpZ2luLCBjYWxsYmFjaykgPT4ge1xyXG4gICAgaWYgKCFvcmlnaW4gfHwgYWxsb3dlZE9yaWdpbnMuaW5jbHVkZXMob3JpZ2luKSkge1xyXG4gICAgICBjYWxsYmFjayhudWxsLCB0cnVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcihgT3JpZ2luICR7b3JpZ2lufSBub3QgYWxsb3dlZCBieSBDT1JTYCkpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgY3JlZGVudGlhbHM6IHRydWVcclxufSk7XHJcblxyXG5jb25zdCBjcmVhdGVBcHAgPSAoc3RhdGUpID0+IHtcclxuICBjb25zdCB7IGNvbm5lY3Rpb25zLCBhY3RpdmVDb25uZWN0aW9ucywgY29ubmVjdGVkQ2xpZW50cywgZGIgfSA9IHN0YXRlO1xyXG4gIGNvbnN0IGFsbG93ZWRPcmlnaW5zID0gcGFyc2VBbGxvd2VkT3JpZ2lucygpO1xyXG4gIGNvbnN0IGJyb2FkY2FzdCA9IGNyZWF0ZUJyb2FkY2FzdChjb25uZWN0ZWRDbGllbnRzKTtcclxuICAvLyBtYWtlIGJyb2FkY2FzdCB2aXNpYmxlIHRvIGhhbmRsZXJzXHJcbiAgZ2xvYmFsLmJyb2FkY2FzdCA9IGJyb2FkY2FzdDtcclxuXHJcbiAgY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG4gIGFwcC51c2UoY3JlYXRlQ29yc01pZGRsZXdhcmUoYWxsb3dlZE9yaWdpbnMpKTtcclxuICBhcHAudXNlKGV4cHJlc3MuanNvbih7IGxpbWl0OiAnMTBtYicgfSkpO1xyXG5cclxuICAvLyBpbi1tZW1vcnkgdXBsb2FkIHN0b3JhZ2UgZm9yIE9wZW5BUEkgZmlsZXNcclxuICBjb25zdCB1cGxvYWQgPSBtdWx0ZXIoeyBzdG9yYWdlOiBtdWx0ZXIubWVtb3J5U3RvcmFnZSgpLCBsaW1pdHM6IHsgZmlsZVNpemU6IDE1ICogMTAyNCAqIDEwMjQgfSB9KTtcclxuXHJcbiAgY29uc3QgYXBpUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuXHJcbiAgLy8gQWRkIENTUCBmb3IgcHJvZHVjdGlvbi9FbGVjdHJvbiB3aGVuIHNlcnZpbmcgc3RhdGljIC91bmljb24gY29udGVudFxyXG4gIGNvbnN0IGVuYWJsZUNzcCA9IHByb2Nlc3MuZW52LkVOQUJMRV9DU1AgPT09ICcxJyB8fCBwcm9jZXNzLmVudi5FTEVDVFJPTiA9PT0gJzEnIHx8IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbic7XHJcbiAgaWYgKGVuYWJsZUNzcCkge1xyXG4gICAgY29uc3QgZnJhbWVBbmNlc3RvcnMgPSBwcm9jZXNzLmVudi5DU1BfRlJBTUVfQU5DRVNUT1JTIHx8IFwiJ3NlbGYnXCI7IC8vIGUuZy4sICdzZWxmJyBvciAnbm9uZSdcclxuICAgIGNvbnN0IHdzQ29ubmVjdCA9IGB3czovL2xvY2FsaG9zdDoke1dTX1BPUlR9YDtcclxuICAgIGNvbnN0IGNvbm5lY3RTcmMgPSBbXCInc2VsZidcIiwgYGh0dHA6Ly9sb2NhbGhvc3Q6JHtQT1JUfWAsIHdzQ29ubmVjdCwgJ2h0dHA6Ly9sb2NhbGhvc3Q6NTE3NCcsICd3czovL2xvY2FsaG9zdDo1MTc0J10uam9pbignICcpO1xyXG4gICAgY29uc3QgaW5Qcm9kID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyB8fCBwcm9jZXNzLmVudi5FTEVDVFJPTiA9PT0gJzEnO1xyXG4gICAgY29uc3Qgc2NyaXB0U3JjID0gaW5Qcm9kID8gXCJzY3JpcHQtc3JjICdzZWxmJ1wiIDogXCJzY3JpcHQtc3JjICdzZWxmJyAndW5zYWZlLWV2YWwnXCI7IC8vIGtlZXAgZXZhbCBvbmx5IGluIGRldlxyXG4gICAgY29uc3QgY3NwID0gW1xyXG4gICAgICBcImRlZmF1bHQtc3JjICdzZWxmJ1wiLFxyXG4gICAgICBcImJhc2UtdXJpICdzZWxmJ1wiLFxyXG4gICAgICBcImZvcm0tYWN0aW9uICdzZWxmJ1wiLFxyXG4gICAgICBcIm9iamVjdC1zcmMgJ25vbmUnXCIsXHJcbiAgICAgIGBmcmFtZS1hbmNlc3RvcnMgJHtmcmFtZUFuY2VzdG9yc31gLFxyXG4gICAgICBcImltZy1zcmMgJ3NlbGYnIGRhdGE6IGJsb2I6XCIsXHJcbiAgICAgIFwiZm9udC1zcmMgJ3NlbGYnIGRhdGE6XCIsXHJcbiAgICAgIFwic3R5bGUtc3JjICdzZWxmJyAndW5zYWZlLWlubGluZSdcIixcclxuICAgICAgc2NyaXB0U3JjLFxyXG4gICAgICBgY29ubmVjdC1zcmMgJHtjb25uZWN0U3JjfWBcclxuICAgIF0uam9pbignOyAnKTtcclxuICAgIGFwcC51c2UoJy91bmljb24nLCAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICAgICAgcmVzLnNldEhlYWRlcignQ29udGVudC1TZWN1cml0eS1Qb2xpY3knLCBjc3ApO1xyXG4gICAgICByZXMuc2V0SGVhZGVyKCdYLUNvbnRlbnQtVHlwZS1PcHRpb25zJywgJ25vc25pZmYnKTtcclxuICAgICAgcmVzLnNldEhlYWRlcignUmVmZXJyZXItUG9saWN5JywgJ25vLXJlZmVycmVyJyk7XHJcbiAgICAgIHJlcy5zZXRIZWFkZXIoJ1Blcm1pc3Npb25zLVBvbGljeScsICdjYW1lcmE9KCksIG1pY3JvcGhvbmU9KCksIGdlb2xvY2F0aW9uPSgpJyk7XHJcbiAgICAgIG5leHQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gT3B0aW9uYWwgUGhhc2UgMSBhdXRoIHNjYWZmb2xkaW5nIChkaXNhYmxlZCBieSBkZWZhdWx0KVxyXG4gIGlmIChwcm9jZXNzLmVudi5GRUFUVVJFX0FVVEggPT09ICcxJykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgY3JlYXRlQXV0aFJvdXRlciA9IHJlcXVpcmUoJy4vYXV0aC9yb3V0ZXInKTtcclxuICAgICAgY29uc3QgeyB2ZXJpZnlKV1QsIHJlcXVpcmVSb2xlcyB9ID0gcmVxdWlyZSgnLi9hdXRoL21pZGRsZXdhcmUnKTtcclxuICAgICAgYXBwLnVzZSgnL3VuaWNvbi9hcGkvYXV0aCcsIGNyZWF0ZUF1dGhSb3V0ZXIoZGIpKTtcclxuICAgICAgLy8gRXhhbXBsZSBwcm90ZWN0ZWQgcm91dGVcclxuICAgICAgYXBwLmdldCgnL3VuaWNvbi9hcGkvbWUnLCB2ZXJpZnlKV1QsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBsZXQgcHJvZmlsZSA9IHsgZW1haWw6IHJlcS51c2VyLmVtYWlsLCByb2xlczogcmVxLnVzZXIucm9sZXMgfTtcclxuICAgICAgICAgIGlmIChkYikge1xyXG4gICAgICAgICAgICBwcm9maWxlLnByb3ZpZGVyID0gYXdhaXQgZGIuZ2V0VXNlclByZWYocmVxLnVzZXIuc3ViLCAncHJvdmlkZXInKTtcclxuICAgICAgICAgICAgcHJvZmlsZS5hdmF0YXIgPSBhd2FpdCBkYi5nZXRVc2VyUHJlZihyZXEudXNlci5zdWIsICdhdmF0YXInKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJlcy5qc29uKHsgc3VjY2VzczogdHJ1ZSwgdXNlcjogcHJvZmlsZSB9KTtcclxuICAgICAgICB9IGNhdGNoKGUpIHsgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOmZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH0pOyB9XHJcbiAgICAgIH0pO1xyXG4gICAgICAvLyBVc2VyIHByZWZlcmVuY2VzOiBsYW5ndWFnZVxyXG4gICAgICBhcHAucG9zdCgnL3VuaWNvbi9hcGkvc2V0dGluZ3MvbGFuZ3VhZ2UnLCB2ZXJpZnlKV1QsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBhd2FpdCBkYi5zZXRVc2VyUHJlZihyZXEudXNlci5zdWIsICdsYW5nJywgcmVxLmJvZHk/LmxhbmcgfHwgJ2VuJyk7XHJcbiAgICAgICAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZS5tZXNzYWdlIH0pOyB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBhcHAuZ2V0KCcvdW5pY29uL2FwaS9zZXR0aW5ncy9sYW5ndWFnZScsIHZlcmlmeUpXVCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICAgICAgdHJ5IHsgY29uc3QgbGFuZyA9IGF3YWl0IGRiLmdldFVzZXJQcmVmKHJlcS51c2VyLnN1YiwgJ2xhbmcnKTsgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBsYW5nIH0pOyB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHsgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUubWVzc2FnZSB9KTsgfVxyXG4gICAgICB9KTtcclxuICAgICAgLy8gRXhhbXBsZSBhZG1pbi1vbmx5IHJvdXRlXHJcbiAgICAgIGFwcC5nZXQoJy91bmljb24vYXBpL2FkbWluL3BpbmcnLCB2ZXJpZnlKV1QsIHJlcXVpcmVSb2xlcygnYWRtaW4nKSwgKHJlcSwgcmVzKSA9PiByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIHBvbmc6IHRydWUgfSkpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ0F1dGggcm91dGVyIG5vdCBhdmFpbGFibGU6JywgZS5tZXNzYWdlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEluIHRlc3RzLCBuZXZlciBlbmZvcmNlIGF1dGg7IG90aGVyd2lzZSBvbmx5IHdoZW4gQVVUSF9FTkZPUkNFPTEgaXMgc2V0XHJcbiAgY29uc3QgSU5fVEVTVCA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcgfHwgISFwcm9jZXNzLmVudi5KRVNUX1dPUktFUl9JRDtcclxuICBjb25zdCBFTkZPUkNFID0gIUlOX1RFU1QgJiYgcHJvY2Vzcy5lbnYuQVVUSF9FTkZPUkNFID09PSAnMScgJiYgdHlwZW9mIHZlcmlmeUpXVE1pZGRsZXdhcmUgPT09ICdmdW5jdGlvbic7XHJcblxyXG4gIGFwaVJvdXRlci5nZXQoJy9jb25uZWN0aW9ucycsIEVORk9SQ0UgPyB2ZXJpZnlKV1RNaWRkbGV3YXJlIDogKHJlcSxyZXMsbmV4dCk9Pm5leHQoKSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoZGIpIHtcclxuICAgICAgICBjb25zdCBmcmVzaCA9IGF3YWl0IGRiLmdldENvbm5lY3Rpb25zKCk7XHJcbiAgICAgICAgY29ubmVjdGlvbnMuc3BsaWNlKDAsIGNvbm5lY3Rpb25zLmxlbmd0aCwgLi4uZnJlc2gpO1xyXG4gICAgICB9XHJcbiAgICAgIHJlcy5qc29uKHsgc3VjY2VzczogdHJ1ZSwgY29ubmVjdGlvbnMgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgYXBpUm91dGVyLnBvc3QoJy9jb25uZWN0aW9ucycsIEVORk9SQ0UgPyB2ZXJpZnlKV1RNaWRkbGV3YXJlIDogKHJlcSxyZXMsbmV4dCk9Pm5leHQoKSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBjb25uZWN0aW9uID0ge1xyXG4gICAgICAgIGlkOiB1dWlkdjQoKSxcclxuICAgICAgICAuLi5yZXEuYm9keSxcclxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25uZWN0aW9ucy5wdXNoKGNvbm5lY3Rpb24pO1xyXG5cclxuICAgICAgYXdhaXQgcGVyc2lzdENvbm5lY3Rpb25zKGNvbm5lY3Rpb25zLCBkYik7XHJcblxyXG4gICAgICBicm9hZGNhc3Qoe1xyXG4gICAgICAgIHR5cGU6ICdsb2cnLFxyXG4gICAgICAgIGRhdGE6IHsgbWVzc2FnZTogYENvbm5lY3Rpb24gXCIke2Nvbm5lY3Rpb24ubmFtZX1cIiBlcnN0ZWxsdGAsIHR5cGU6ICdzdWNjZXNzJyB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBjb25uZWN0aW9uIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGFwaVJvdXRlci5kZWxldGUoJy9jb25uZWN0aW9ucy86aWQnLCBFTkZPUkNFID8gdmVyaWZ5SldUTWlkZGxld2FyZSA6IChyZXEscmVzLG5leHQpPT5uZXh0KCksIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgY29ubmVjdGlvbklkID0gcmVxLnBhcmFtcy5pZDtcclxuICAgICAgaWYgKGFjdGl2ZUNvbm5lY3Rpb25zLmhhcyhjb25uZWN0aW9uSWQpKSB7XHJcbiAgICAgICAgYWN0aXZlQ29ubmVjdGlvbnMuZGVsZXRlKGNvbm5lY3Rpb25JZCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGluZGV4ID0gY29ubmVjdGlvbnMuZmluZEluZGV4KGNvbm4gPT4gY29ubi5pZCA9PT0gY29ubmVjdGlvbklkKTtcclxuICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0Nvbm5lY3Rpb24gbm90IGZvdW5kJyB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29ubmVjdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuXHJcbiAgICAgIGF3YWl0IHBlcnNpc3RDb25uZWN0aW9ucyhjb25uZWN0aW9ucywgZGIpO1xyXG5cclxuICAgICAgYnJvYWRjYXN0KHtcclxuICAgICAgICB0eXBlOiAnbG9nJyxcclxuICAgICAgICBkYXRhOiB7IG1lc3NhZ2U6ICdDb25uZWN0aW9uIGdlbMO2c2NodCcsIHR5cGU6ICdpbmZvJyB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGFwaVJvdXRlci5wb3N0KCcvY29ubmVjdCcsIEVORk9SQ0UgPyB2ZXJpZnlKV1RNaWRkbGV3YXJlIDogKHJlcSxyZXMsbmV4dCk9Pm5leHQoKSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IGNvbm5lY3Rpb25JZCB9ID0gcmVxLmJvZHk7XHJcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBjb25uZWN0aW9ucy5maW5kKGMgPT4gYy5pZCA9PT0gY29ubmVjdGlvbklkKTtcclxuXHJcbiAgICAgIGlmICghY29ubmVjdGlvbikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0Nvbm5lY3Rpb24gbm90IGZvdW5kJyB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ3JlYXRlIHByb3RvY29sIGhhbmRsZXIgd2hlbiBhcHBsaWNhYmxlXHJcbiAgICAgIGxldCBoYW5kbGVyID0gbnVsbDtcclxuICAgICAgaWYgKGNvbm5lY3Rpb24udHlwZSA9PT0gJ3Jlc3QnKSB7XHJcbiAgICAgICAgaGFuZGxlciA9IG5ldyBFbmhhbmNlZFJlc3RIYW5kbGVyKGNvbm5lY3Rpb24uaWQsIGNvbm5lY3Rpb24uY29uZmlnIHx8IHt9KTtcclxuICAgICAgICBhd2FpdCBoYW5kbGVyLmNvbm5lY3QoKTtcclxuICAgICAgfSBlbHNlIGlmIChjb25uZWN0aW9uLnR5cGUgPT09ICdzc2gnKSB7XHJcbiAgICAgICAgaGFuZGxlciA9IG5ldyBTU0hIYW5kbGVyKGNvbm5lY3Rpb24uaWQsIGNvbm5lY3Rpb24uY29uZmlnIHx8IHt9KTtcclxuICAgICAgICBhd2FpdCBoYW5kbGVyLmNvbm5lY3QoKTtcclxuICAgICAgfSBlbHNlIGlmIChjb25uZWN0aW9uLnR5cGUgPT09ICdrOHMnKSB7XHJcbiAgICAgICAgaGFuZGxlciA9IG5ldyBLOHNIYW5kbGVyKGNvbm5lY3Rpb24uaWQsIGNvbm5lY3Rpb24uY29uZmlnIHx8IHt9KTtcclxuICAgICAgICBhd2FpdCBoYW5kbGVyLmNvbm5lY3QoKTtcclxuICAgICAgfSBlbHNlIGlmIChjb25uZWN0aW9uLnR5cGUgPT09ICd3ZWJzb2NrZXQnKSB7XHJcbiAgICAgICAgaGFuZGxlciA9IG5ldyBXU0hhbmRsZXIoY29ubmVjdGlvbi5pZCwgY29ubmVjdGlvbi5jb25maWcgfHwge30pO1xyXG4gICAgICAgIGF3YWl0IGhhbmRsZXIuY29ubmVjdCgpO1xyXG4gICAgICB9IGVsc2UgaWYgKGNvbm5lY3Rpb24udHlwZSA9PT0gJ3NxbCcpIHtcclxuICAgICAgICBoYW5kbGVyID0gbmV3IFNRTEhhbmRsZXIoY29ubmVjdGlvbi5pZCwgY29ubmVjdGlvbi5jb25maWcgfHwge30pO1xyXG4gICAgICAgIGF3YWl0IGhhbmRsZXIuY29ubmVjdCgpO1xyXG4gICAgICB9IGVsc2UgaWYgKGNvbm5lY3Rpb24udHlwZSA9PT0gJ29wY3VhJyB8fCBjb25uZWN0aW9uLnR5cGUgPT09ICdvcGMtdWEnKSB7XHJcbiAgICAgICAgaGFuZGxlciA9IG5ldyBPUENVQUhhbmRsZXIoY29ubmVjdGlvbi5pZCwgY29ubmVjdGlvbi5jb25maWcgfHwge30pO1xyXG4gICAgICAgIGF3YWl0IGhhbmRsZXIuY29ubmVjdCgpO1xyXG4gICAgICB9IGVsc2UgaWYgKGNvbm5lY3Rpb24udHlwZSA9PT0gJ2dycGMnKSB7XHJcbiAgICAgICAgaGFuZGxlciA9IG5ldyBHcnBjSGFuZGxlcihjb25uZWN0aW9uLmlkLCBjb25uZWN0aW9uLmNvbmZpZyB8fCB7fSk7XHJcbiAgICAgICAgYXdhaXQgaGFuZGxlci5jb25uZWN0KCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbm5lY3Rpb24uc3RhdHVzID0gJ2Nvbm5lY3RlZCc7XHJcbiAgICAgIGFjdGl2ZUNvbm5lY3Rpb25zLnNldChjb25uZWN0aW9uSWQsIHsgc3RhdHVzOiAnY29ubmVjdGVkJywgaGFuZGxlciwgdHlwZTogY29ubmVjdGlvbi50eXBlIH0pO1xyXG5cclxuICAgICAgYXdhaXQgcGVyc2lzdENvbm5lY3Rpb25zKGNvbm5lY3Rpb25zLCBkYik7XHJcblxyXG4gICAgICBicm9hZGNhc3QoeyB0eXBlOiAnY29ubmVjdGlvbl9zdGF0dXMnLCBkYXRhOiB7IGNvbm5lY3Rpb25JZCwgc3RhdHVzOiAnY29ubmVjdGVkJyB9IH0pO1xyXG4gICAgICBicm9hZGNhc3QoeyB0eXBlOiAnbG9nJywgZGF0YTogeyBtZXNzYWdlOiBgVmVyYnVuZGVuIG1pdCAke2Nvbm5lY3Rpb24ubmFtZX1gLCB0eXBlOiAnc3VjY2VzcycgfSB9KTtcclxuXHJcbiAgICAgIHJlcy5qc29uKHsgc3VjY2VzczogdHJ1ZSB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBhcGlSb3V0ZXIucG9zdCgnL2Rpc2Nvbm5lY3QnLCBFTkZPUkNFID8gdmVyaWZ5SldUTWlkZGxld2FyZSA6IChyZXEscmVzLG5leHQpPT5uZXh0KCksIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBjb25uZWN0aW9uSWQgfSA9IHJlcS5ib2R5O1xyXG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gY29ubmVjdGlvbnMuZmluZChjID0+IGMuaWQgPT09IGNvbm5lY3Rpb25JZCk7XHJcblxyXG4gICAgICBpZiAoIWNvbm5lY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdDb25uZWN0aW9uIG5vdCBmb3VuZCcgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGFjdGl2ZSA9IGFjdGl2ZUNvbm5lY3Rpb25zLmdldChjb25uZWN0aW9uSWQpO1xyXG4gICAgICBpZiAoYWN0aXZlPy5oYW5kbGVyPy5kaXNjb25uZWN0KSB7XHJcbiAgICAgICAgdHJ5IHsgYXdhaXQgYWN0aXZlLmhhbmRsZXIuZGlzY29ubmVjdCgpOyB9IGNhdGNoIChfKSB7fVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25uZWN0aW9uLnN0YXR1cyA9ICdkaXNjb25uZWN0ZWQnO1xyXG4gICAgICBhY3RpdmVDb25uZWN0aW9ucy5kZWxldGUoY29ubmVjdGlvbklkKTtcclxuXHJcbiAgICAgIGF3YWl0IHBlcnNpc3RDb25uZWN0aW9ucyhjb25uZWN0aW9ucywgZGIpO1xyXG5cclxuICAgICAgYnJvYWRjYXN0KHsgdHlwZTogJ2Nvbm5lY3Rpb25fc3RhdHVzJywgZGF0YTogeyBjb25uZWN0aW9uSWQsIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcgfSB9KTtcclxuICAgICAgYnJvYWRjYXN0KHsgdHlwZTogJ2xvZycsIGRhdGE6IHsgbWVzc2FnZTogJ1ZlcmJpbmR1bmcgZ2V0cmVubnQnLCB0eXBlOiAnaW5mbycgfSB9KTtcclxuXHJcbiAgICAgIHJlcy5qc29uKHsgc3VjY2VzczogdHJ1ZSB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBhcGlSb3V0ZXIuZ2V0KCcvaGVhbHRoJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICByZXMuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIHN0YXR1czogJ2hlYWx0aHknLFxyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgY29ubmVjdGlvbnM6IGNvbm5lY3Rpb25zLmxlbmd0aCxcclxuICAgICAgYWN0aXZlQ29ubmVjdGlvbnM6IGFjdGl2ZUNvbm5lY3Rpb25zLnNpemUsXHJcbiAgICAgIGNvbm5lY3RlZENsaWVudHM6IGNvbm5lY3RlZENsaWVudHMuc2l6ZVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGFwaVJvdXRlci5nZXQoJy9jb25uZWN0aW9ucy9leHBvcnQnLCBFTkZPUkNFID8gdmVyaWZ5SldUTWlkZGxld2FyZSA6IChyZXEscmVzLG5leHQpPT5uZXh0KCksIChyZXEsIHJlcykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgcmVzLnNldEhlYWRlcignQ29udGVudC1EaXNwb3NpdGlvbicsICdhdHRhY2htZW50OyBmaWxlbmFtZT1cImNvbm5lY3Rpb25zLWV4cG9ydC5qc29uXCInKTtcclxuICAgICAgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBjb25uZWN0aW9uczogY29ubmVjdGlvbnMubWFwKG5vcm1hbGl6ZUNvbm5lY3Rpb24pIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vIFVuaWZpZWQgb3BlcmF0aW9uIGVuZHBvaW50IHVzZWQgYnkgdGhlIFVJXHJcbiAgYXBpUm91dGVyLnBvc3QoJy9vcGVyYXRpb24nLCBFTkZPUkNFID8gdmVyaWZ5SldUTWlkZGxld2FyZSA6IChyZXEscmVzLG5leHQpPT5uZXh0KCksIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBjb25uZWN0aW9uSWQsIG9wZXJhdGlvbiwgcGFyYW1zID0ge30gfSA9IHJlcS5ib2R5IHx8IHt9O1xyXG4gICAgICBpZiAoIWNvbm5lY3Rpb25JZCB8fCAhb3BlcmF0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnY29ubmVjdGlvbklkIGFuZCBvcGVyYXRpb24gcmVxdWlyZWQnIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBjb25uZWN0aW9ucy5maW5kKGMgPT4gYy5pZCA9PT0gY29ubmVjdGlvbklkKTtcclxuICAgICAgY29uc3QgYWN0aXZlID0gYWN0aXZlQ29ubmVjdGlvbnMuZ2V0KGNvbm5lY3Rpb25JZCk7XHJcbiAgICAgIGlmICghY29ubmVjdGlvbiB8fCBjb25uZWN0aW9uLnN0YXR1cyAhPT0gJ2Nvbm5lY3RlZCcgfHwgIWFjdGl2ZSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0Nvbm5lY3Rpb24gbm90IGFjdGl2ZScgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChjb25uZWN0aW9uLnR5cGUgPT09ICdyZXN0JyAmJiBhY3RpdmUuaGFuZGxlcikge1xyXG4gICAgICAgIHN3aXRjaCAob3BlcmF0aW9uKSB7XHJcbiAgICAgICAgICBjYXNlICdyZXF1ZXN0Jzoge1xyXG4gICAgICAgICAgICBjb25zdCB7IG1ldGhvZCA9ICdHRVQnLCBlbmRwb2ludCA9ICcvJywgZGF0YSA9IG51bGwsIGhlYWRlcnMgPSB7fSwgcGFyYW1zOiBxID0ge30gfSA9IHBhcmFtcztcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWN0aXZlLmhhbmRsZXIucmVxdWVzdChtZXRob2QsIGVuZHBvaW50LCBkYXRhLCBoZWFkZXJzLCBxKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKHJlc3VsdCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjYXNlICdnZXRFbmRwb2ludHMnOiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGFjdGl2ZS5oYW5kbGVyLmdldEVuZHBvaW50cyhwYXJhbXMudGFnIHx8IG51bGwpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24ocmVzdWx0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNhc2UgJ3ZhbGlkYXRlUmVxdWVzdCc6IHtcclxuICAgICAgICAgICAgY29uc3QgeyBwYXRoOiBwLCBtZXRob2QsIGhlYWRlcnMgPSB7fSwgcGFyYW1zOiBxID0ge30sIGJvZHkgPSBudWxsIH0gPSBwYXJhbXM7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGFjdGl2ZS5oYW5kbGVyLnZhbGlkYXRlUmVxdWVzdChwLCBtZXRob2QsIGhlYWRlcnMsIHEsIGJvZHkpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjYXNlICdnZW5lcmF0ZUV4YW1wbGUnOiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgcGF0aDogcCwgbWV0aG9kIH0gPSBwYXJhbXM7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGFjdGl2ZS5oYW5kbGVyLmdlbmVyYXRlRXhhbXBsZVJlcXVlc3QocCwgbWV0aG9kKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKHJlc3VsdCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjYXNlICdsb2FkT3BlbkFwaSc6IHtcclxuICAgICAgICAgICAgaWYgKHBhcmFtcy5vcGVuQXBpVXJsKSBhY3RpdmUuaGFuZGxlci5jb25maWcub3BlbkFwaVVybCA9IHBhcmFtcy5vcGVuQXBpVXJsO1xyXG4gICAgICAgICAgICBpZiAocGFyYW1zLm9wZW5BcGlGaWxlKSBhY3RpdmUuaGFuZGxlci5jb25maWcub3BlbkFwaUZpbGUgPSBwYXJhbXMub3BlbkFwaUZpbGU7XHJcbiAgICAgICAgICAgIGF3YWl0IGFjdGl2ZS5oYW5kbGVyLmxvYWRPcGVuQXBpU3BlYygpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBgVW5rbm93biBvcGVyYXRpb246ICR7b3BlcmF0aW9ufWAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG5cclxuICAgICAgLy8gT1BDIFVBIG9wZXJhdGlvbnNcclxuICAgICAgaWYgKChjb25uZWN0aW9uLnR5cGUgPT09ICdvcGN1YScgfHwgY29ubmVjdGlvbi50eXBlID09PSAnb3BjLXVhJykgJiYgYWN0aXZlLmhhbmRsZXIpIHtcclxuICAgICAgICBjb25zdCBoID0gYWN0aXZlLmhhbmRsZXI7XHJcbiAgICAgICAgc3dpdGNoIChvcGVyYXRpb24pIHtcclxuICAgICAgICAgIGNhc2UgJ2Jyb3dzZSc6XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbihhd2FpdCBoLmJyb3dzZShwYXJhbXMubm9kZUlkKSk7XHJcbiAgICAgICAgICBjYXNlICdyZWFkJzpcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKGF3YWl0IGgucmVhZChwYXJhbXMubm9kZXMpKTtcclxuICAgICAgICAgIGNhc2UgJ3dyaXRlJzpcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKGF3YWl0IGgud3JpdGUocGFyYW1zLm5vZGVJZCwgcGFyYW1zLnZhbHVlLCBwYXJhbXMuZGF0YVR5cGUpKTtcclxuICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYFVua25vd24gT1BDIFVBIG9wZXJhdGlvbjogJHtvcGVyYXRpb259YCB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENQRCBvcGVyYXRpb25zXHJcbiAgICAgIGlmIChjb25uZWN0aW9uLnR5cGUgPT09ICdjcGQnICYmIGFjdGl2ZS5oYW5kbGVyKSB7XHJcbiAgICAgICAgY29uc3QgaCA9IGFjdGl2ZS5oYW5kbGVyO1xyXG4gICAgICAgIHN3aXRjaCAob3BlcmF0aW9uKSB7XHJcbiAgICAgICAgICBjYXNlICdwaW5nJzpcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKGF3YWl0IGgucGluZyhwYXJhbXM/Lm1lc3NhZ2UgfHwgJ3BpbmcnKSk7XHJcbiAgICAgICAgICBjYXNlICdicm93c2VUb3BpY3MnOlxyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oYXdhaXQgaC5icm93c2VUb3BpY3Moe1xyXG4gICAgICAgICAgICAgIHRvcGljUGF0dGVybjogcGFyYW1zPy50b3BpY1BhdHRlcm4sXHJcbiAgICAgICAgICAgICAgbGltaXQ6IHBhcmFtcz8ubGltaXQsXHJcbiAgICAgICAgICAgICAgYmVnaW5Ub3BpY05hbWU6IHBhcmFtcz8uYmVnaW5Ub3BpY05hbWUsXHJcbiAgICAgICAgICAgICAgcmV2ZXJzZTogcGFyYW1zPy5yZXZlcnNlXHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgIGNhc2UgJ2dldExhdGVzdERhdGEnOlxyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oYXdhaXQgaC5nZXRMYXRlc3REYXRhKHsgdG9waWNQYXR0ZXJuczogcGFyYW1zPy50b3BpY1BhdHRlcm5zLCBmaWx0ZXJEZWY6IHBhcmFtcz8uZmlsdGVyRGVmIH0pKTtcclxuICAgICAgICAgIGNhc2UgJ3NpbXBsZVN1YnNjcmliZSc6XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbihhd2FpdCBoLnNpbXBsZVN1YnNjcmliZSh7IGlkOiBwYXJhbXM/LmlkLCB0b3BpY1BhdHRlcm5zOiBwYXJhbXM/LnRvcGljUGF0dGVybnMgfSkpO1xyXG4gICAgICAgICAgY2FzZSAnc3Vic2NyaWJlJzpcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKGF3YWl0IGguc3Vic2NyaWJlKHsgaWQ6IHBhcmFtcz8uaWQsIGZpbHRlckRlZjogcGFyYW1zPy5maWx0ZXJEZWYsIHN1YnNDb25maWc6IHBhcmFtcz8uY29uZmlnIHx8IHBhcmFtcz8uc3Vic0NvbmZpZyB9KSk7XHJcbiAgICAgICAgICBjYXNlICd1bnN1YnNjcmliZSc6XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbihhd2FpdCBoLnVuc3Vic2NyaWJlKHsgaWQ6IHBhcmFtcz8uaWQgfSkpO1xyXG4gICAgICAgICAgY2FzZSAncHVibGlzaCc6XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbihhd2FpdCBoLnB1Ymxpc2goeyB0b3BpYzogcGFyYW1zPy50b3BpYywgZGF0YTogcGFyYW1zPy5kYXRhIH0pKTtcclxuICAgICAgICAgIGNhc2UgJ3B1Ymxpc2hVcGRhdGUnOlxyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oYXdhaXQgaC5wdWJsaXNoVXBkYXRlKHsgdG9waWM6IHBhcmFtcz8udG9waWMsIGRhdGE6IHBhcmFtcz8uZGF0YSB9KSk7XHJcbiAgICAgICAgICBjYXNlICdkZWx0YVB1Ymxpc2gnOlxyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oYXdhaXQgaC5kZWx0YVB1Ymxpc2goeyB0b3BpYzogcGFyYW1zPy50b3BpYywgZGF0YTogcGFyYW1zPy5kYXRhIH0pKTtcclxuICAgICAgICAgIGNhc2UgJ3B1Ymxpc2hEZWx0YVRvRGVsdGEnOlxyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oYXdhaXQgaC5wdWJsaXNoRGVsdGFUb0RlbHRhKHsgdG9waWM6IHBhcmFtcz8udG9waWMsIGRhdGE6IHBhcmFtcz8uZGF0YSB9KSk7XHJcbiAgICAgICAgICBjYXNlICdwdWJsaXNoRGVsdGFUb0Z1bGwnOlxyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oYXdhaXQgaC5wdWJsaXNoRGVsdGFUb0Z1bGwoeyB0b3BpYzogcGFyYW1zPy50b3BpYywgZGF0YTogcGFyYW1zPy5kYXRhIH0pKTtcclxuICAgICAgICAgIGNhc2UgJ3B1Ymxpc2hGdWxsVG9EZWx0YSc6XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbihhd2FpdCBoLnB1Ymxpc2hGdWxsVG9EZWx0YSh7IHRvcGljOiBwYXJhbXM/LnRvcGljLCBkYXRhOiBwYXJhbXM/LmRhdGEgfSkpO1xyXG4gICAgICAgICAgY2FzZSAnc2VuZFRvcGljJzpcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKGF3YWl0IGguc2VuZFRvcGljKHsgdG9waWM6IHBhcmFtcz8udG9waWMsIGRhdGE6IHBhcmFtcz8uZGF0YSB9KSk7XHJcbiAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGBVbmtub3duIENQRCBvcGVyYXRpb246ICR7b3BlcmF0aW9ufWAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBnUlBDIG9wZXJhdGlvbnNcclxuICAgICAgaWYgKGNvbm5lY3Rpb24udHlwZSA9PT0gJ2dycGMnICYmIGFjdGl2ZS5oYW5kbGVyKSB7XHJcbiAgICAgICAgY29uc3QgaCA9IGFjdGl2ZS5oYW5kbGVyO1xyXG4gICAgICAgIHN3aXRjaCAob3BlcmF0aW9uKSB7XHJcbiAgICAgICAgICBjYXNlICd1bmFyeSc6XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbihhd2FpdCBoLnVuYXJ5KHBhcmFtcy5tZXRob2QsIHBhcmFtcy5yZXF1ZXN0IHx8IHt9KSk7XHJcbiAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGBVbmtub3duIGdSUEMgb3BlcmF0aW9uOiAke29wZXJhdGlvbn1gIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gU1NIIG9wZXJhdGlvbnNcclxuICAgICAgaWYgKGNvbm5lY3Rpb24udHlwZSA9PT0gJ3NzaCcgJiYgYWN0aXZlLmhhbmRsZXIpIHtcclxuICAgICAgICBjb25zdCBoID0gYWN0aXZlLmhhbmRsZXI7XHJcbiAgICAgICAgc3dpdGNoIChvcGVyYXRpb24pIHtcclxuICAgICAgICAgIGNhc2UgJ2V4ZWMnOiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgY29tbWFuZCwgY3dkIH0gPSBwYXJhbXM7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGguZXhlYyhjb21tYW5kLCBjd2QpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24ocmVzdWx0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNhc2UgJ3NoZWxsT3Blbic6IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaC5zaGVsbE9wZW4oeyBjb2xzOiBwYXJhbXMuY29scywgcm93czogcGFyYW1zLnJvd3MgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbihyZXN1bHQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY2FzZSAnc2hlbGxJbnB1dCc6IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaC5zaGVsbElucHV0KHsgc2Vzc2lvbklkOiBwYXJhbXMuc2Vzc2lvbklkLCBkYXRhOiBwYXJhbXMuZGF0YSB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKHJlc3VsdCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjYXNlICdzaGVsbFJlc2l6ZSc6IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaC5zaGVsbFJlc2l6ZSh7IHNlc3Npb25JZDogcGFyYW1zLnNlc3Npb25JZCwgY29sczogcGFyYW1zLmNvbHMsIHJvd3M6IHBhcmFtcy5yb3dzIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24ocmVzdWx0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNhc2UgJ3NoZWxsQ2xvc2UnOiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGguc2hlbGxDbG9zZSh7IHNlc3Npb25JZDogcGFyYW1zLnNlc3Npb25JZCB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKHJlc3VsdCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjYXNlICdzZnRwTGlzdCc6IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaC5zZnRwTGlzdCh7IHBhdGg6IHBhcmFtcy5wYXRoIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24ocmVzdWx0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNhc2UgJ3NmdHBHZXQnOiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGguc2Z0cEdldCh7IHBhdGg6IHBhcmFtcy5wYXRoIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24ocmVzdWx0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNhc2UgJ3NmdHBQdXQnOiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGguc2Z0cFB1dCh7IHBhdGg6IHBhcmFtcy5wYXRoLCBiYXNlNjQ6IHBhcmFtcy5iYXNlNjQgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbihyZXN1bHQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBgVW5rbm93biBTU0ggb3BlcmF0aW9uOiAke29wZXJhdGlvbn1gIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gV2ViU29ja2V0IG9wZXJhdGlvbnNcclxuICAgICAgaWYgKGNvbm5lY3Rpb24udHlwZSA9PT0gJ3dlYnNvY2tldCcgJiYgYWN0aXZlLmhhbmRsZXIpIHtcclxuICAgICAgICBjb25zdCBoID0gYWN0aXZlLmhhbmRsZXI7XHJcbiAgICAgICAgc3dpdGNoIChvcGVyYXRpb24pIHtcclxuICAgICAgICAgIGNhc2UgJ3NlbmQnOiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgbWVzc2FnZSB9ID0gcGFyYW1zO1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoLnNlbmQobWVzc2FnZSk7XHJcbiAgICAgICAgICAgIC8vIEVuc3VyZSBhIGJyb2FkY2FzdCBpcyBlbWl0dGVkIGV2ZW4gaWYgaGFuZGxlci1sZXZlbCBicm9hZGNhc3Qgd2FzIG5vdCB5ZXQgYXR0YWNoZWRcclxuICAgICAgICAgICAgZ2xvYmFsLmJyb2FkY2FzdCAmJiBnbG9iYWwuYnJvYWRjYXN0KHsgdHlwZTogJ3dzJywgZGF0YTogeyBldmVudDogJ21lc3NhZ2UnLCBjb25uZWN0aW9uSWQsIGRhdGE6IHR5cGVvZiBtZXNzYWdlPT09J3N0cmluZyc/bWVzc2FnZTpKU09OLnN0cmluZ2lmeShtZXNzYWdlKSwgc291cmNlOiAncm91dGVyJyB9IH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24ocmVzdWx0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYFVua25vd24gV1Mgb3BlcmF0aW9uOiAke29wZXJhdGlvbn1gIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gU1FMIG9wZXJhdGlvbnNcclxuICAgICAgaWYgKGNvbm5lY3Rpb24udHlwZSA9PT0gJ3NxbCcgJiYgYWN0aXZlLmhhbmRsZXIpIHtcclxuICAgICAgICBjb25zdCBoID0gYWN0aXZlLmhhbmRsZXI7XHJcbiAgICAgICAgc3dpdGNoIChvcGVyYXRpb24pIHtcclxuICAgICAgICAgIGNhc2UgJ3F1ZXJ5Jzoge1xyXG4gICAgICAgICAgICBjb25zdCB7IHNxbCwgcGFyYW1zID0gW10gfSA9IHBhcmFtcztcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaC5xdWVyeShzcWwsIHBhcmFtcyk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbihyZXN1bHQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBgVW5rbm93biBTUUwgb3BlcmF0aW9uOiAke29wZXJhdGlvbn1gIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuXHJcbiAgICAgIC8vIEt1YmVybmV0ZXMgb3BlcmF0aW9uc1xyXG4gICAgICBpZiAoY29ubmVjdGlvbi50eXBlID09PSAnazhzJyAmJiBhY3RpdmUuaGFuZGxlcikge1xyXG4gICAgICAgIGNvbnN0IGggPSBhY3RpdmUuaGFuZGxlcjtcclxuICAgICAgICBzd2l0Y2ggKG9wZXJhdGlvbikge1xyXG4gICAgICAgICAgY2FzZSAnY29udGV4dHMnOlxyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oaC5saXN0Q29udGV4dHMoKSk7XHJcbiAgICAgICAgICBjYXNlICd1c2VDb250ZXh0JzpcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKGgudXNlQ29udGV4dChwYXJhbXMubmFtZSkpO1xyXG4gICAgICAgICAgY2FzZSAnbmFtZXNwYWNlcyc6IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaC5saXN0TmFtZXNwYWNlcygpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24ocmVzdWx0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNhc2UgJ3BvZHMnOiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGgubGlzdFBvZHMocGFyYW1zLm5hbWVzcGFjZSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbihyZXN1bHQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY2FzZSAnbG9nc1N0YXJ0Jzoge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoLmxvZ3NTdGFydCh7IG5hbWVzcGFjZTogcGFyYW1zLm5hbWVzcGFjZSwgcG9kOiBwYXJhbXMucG9kLCBjb250YWluZXI6IHBhcmFtcy5jb250YWluZXIsIHRhaWxMaW5lczogcGFyYW1zLnRhaWxMaW5lcyB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKHJlc3VsdCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjYXNlICdsb2dzU3RvcCc6IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaC5sb2dzU3RvcCh7IGlkOiBwYXJhbXMuaWQgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbihyZXN1bHQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY2FzZSAnZXhlY09wZW4nOiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGguZXhlY09wZW4oeyBuYW1lc3BhY2U6IHBhcmFtcy5uYW1lc3BhY2UsIHBvZDogcGFyYW1zLnBvZCwgY29udGFpbmVyOiBwYXJhbXMuY29udGFpbmVyLCBjb21tYW5kOiBwYXJhbXMuY29tbWFuZCwgdHR5OiBwYXJhbXMudHR5IH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24ocmVzdWx0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNhc2UgJ2V4ZWNJbnB1dCc6IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaC5leGVjSW5wdXQoeyBpZDogcGFyYW1zLmlkLCBkYXRhOiBwYXJhbXMuZGF0YSB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKHJlc3VsdCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjYXNlICdleGVjQ2xvc2UnOiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGguZXhlY0Nsb3NlKHsgaWQ6IHBhcmFtcy5pZCB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKHJlc3VsdCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGBVbmtub3duIEs4cyBvcGVyYXRpb246ICR7b3BlcmF0aW9ufWAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGBPcGVyYXRpb24gbm90IHN1cHBvcnRlZCBmb3IgdHlwZSAke2Nvbm5lY3Rpb24udHlwZX1gIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vIE9wZW5BUEkgZmlsZSB1cGxvYWQgKG11bHRpcGFydC9mb3JtLWRhdGEsIGZpZWxkOiBvcGVuQXBpRmlsZSlcclxuICBhcGlSb3V0ZXIucG9zdCgnL3VwbG9hZC1vcGVuYXBpJywgdXBsb2FkLnNpbmdsZSgnb3BlbkFwaUZpbGUnKSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoIXJlcS5maWxlKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdObyBmaWxlIHVwbG9hZGVkJyB9KTtcclxuICAgICAgY29uc3QgZmlsZW5hbWUgPSByZXEuZmlsZS5vcmlnaW5hbG5hbWU7XHJcbiAgICAgIGF3YWl0IEVuaGFuY2VkUmVzdEhhbmRsZXIuaGFuZGxlRmlsZVVwbG9hZChyZXEuZmlsZS5idWZmZXIsIGZpbGVuYW1lKTtcclxuICAgICAgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBmaWxlbmFtZSB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBhcGlSb3V0ZXIucG9zdCgnL2Nvbm5lY3Rpb25zL2ltcG9ydCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcGF5bG9hZCA9IHJlcS5ib2R5O1xyXG4gICAgICBjb25zdCBpbmNvbWluZyA9IEFycmF5LmlzQXJyYXkocGF5bG9hZCkgPyBwYXlsb2FkIDogcGF5bG9hZC5jb25uZWN0aW9ucztcclxuXHJcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbmNvbWluZykpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVbmfDvGx0aWdlcyBWZXJiaW5kdW5ncy1Gb3JtYXQnIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBpbXBvcnRlZENvbm5lY3Rpb25zID0gaW5jb21pbmcubWFwKGl0ZW0gPT4gKHsgLi4ubm9ybWFsaXplQ29ubmVjdGlvbihpdGVtKSwgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyB9KSk7XHJcblxyXG4gICAgICBjb25uZWN0aW9ucy5zcGxpY2UoMCwgY29ubmVjdGlvbnMubGVuZ3RoLCAuLi5pbXBvcnRlZENvbm5lY3Rpb25zKTtcclxuICAgICAgYWN0aXZlQ29ubmVjdGlvbnMuY2xlYXIoKTtcclxuXHJcbiAgICAgIGF3YWl0IHBlcnNpc3RDb25uZWN0aW9ucyhjb25uZWN0aW9ucywgZGIpO1xyXG5cclxuICAgICAgYnJvYWRjYXN0KHtcclxuICAgICAgICB0eXBlOiAnbG9nJyxcclxuICAgICAgICBkYXRhOiB7IG1lc3NhZ2U6IGBJbXBvcnRpZXJ0ZSAke2ltcG9ydGVkQ29ubmVjdGlvbnMubGVuZ3RofSBDb25uZWN0aW9uc2AsIHR5cGU6ICdzdWNjZXNzJyB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBjb25uZWN0aW9uczogaW1wb3J0ZWRDb25uZWN0aW9ucywgY291bnQ6IGltcG9ydGVkQ29ubmVjdGlvbnMubGVuZ3RoIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vIFBLQ0UgaGVscGVyc1xyXG4gIGNvbnN0IHBrY2VTdG9yZSA9IG5ldyBNYXAoKTsgLy8gc3RhdGUgLT4geyB2ZXJpZmllciwgcHJvdmlkZXIsIGV4cCB9XHJcbiAgY29uc3QgcGtjZUV4cGlyZU1zID0gMTAgKiA2MCAqIDEwMDA7XHJcbiAgZnVuY3Rpb24gYjY0dXJsKGJ1ZikgeyByZXR1cm4gYnVmLnRvU3RyaW5nKCdiYXNlNjQnKS5yZXBsYWNlKC9cXCsvZywnLScpLnJlcGxhY2UoL1xcLy9nLCdfJykucmVwbGFjZSgvPSskLywnJyk7IH1cclxuICBmdW5jdGlvbiBtYWtlVmVyaWZpZXIoKSB7IHJldHVybiBiNjR1cmwoY3J5cHRvLnJhbmRvbUJ5dGVzKDMyKSk7IH1cclxuICBmdW5jdGlvbiBtYWtlQ2hhbGxlbmdlKHZlcmlmaWVyKSB7IHJldHVybiBiNjR1cmwoY3J5cHRvLmNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZSh2ZXJpZmllcikuZGlnZXN0KCkpOyB9XHJcblxyXG4gIC8vIEdvb2dsZS9HaXRIdWIgT0F1dGggKGV4dGVybmFsIHByb3ZpZGVycylcclxuICBjb25zdCBHT09HTEUgPSB7XHJcbiAgICBhdXRoOiAnaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL3YyL2F1dGgnLFxyXG4gICAgdG9rZW46ICdodHRwczovL29hdXRoMi5nb29nbGVhcGlzLmNvbS90b2tlbicsXHJcbiAgICB1c2VyaW5mbzogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92My91c2VyaW5mbycsXHJcbiAgICBjbGllbnRfaWQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQgfHwgJycsXHJcbiAgICBjbGllbnRfc2VjcmV0OiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCB8fCAnJyxcclxuICAgIHNjb3BlOiAnb3BlbmlkIGVtYWlsIHByb2ZpbGUnXHJcbiAgfTtcclxuICBjb25zdCBHSVRIVUIgPSB7XHJcbiAgICBhdXRoOiAnaHR0cHM6Ly9naXRodWIuY29tL2xvZ2luL29hdXRoL2F1dGhvcml6ZScsXHJcbiAgICB0b2tlbjogJ2h0dHBzOi8vZ2l0aHViLmNvbS9sb2dpbi9vYXV0aC9hY2Nlc3NfdG9rZW4nLFxyXG4gICAgdXNlcmluZm86ICdodHRwczovL2FwaS5naXRodWIuY29tL3VzZXInLFxyXG4gICAgZW1haWxzOiAnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS91c2VyL2VtYWlscycsXHJcbiAgICBjbGllbnRfaWQ6IHByb2Nlc3MuZW52LkdJVEhVQl9DTElFTlRfSUQgfHwgJycsXHJcbiAgICBjbGllbnRfc2VjcmV0OiBwcm9jZXNzLmVudi5HSVRIVUJfQ0xJRU5UX1NFQ1JFVCB8fCAnJyxcclxuICAgIHNjb3BlOiAncmVhZDp1c2VyIHVzZXI6ZW1haWwnXHJcbiAgfTtcclxuICBmdW5jdGlvbiBwcm92aWRlckJ5TmFtZShuYW1lKXsgcmV0dXJuIG5hbWU9PT0nZ29vZ2xlJz9HT09HTEU6IG5hbWU9PT0nZ2l0aHViJz9HSVRIVUI6IG51bGw7IH1cclxuXHJcbiAgLy8gQnJhbmRlZCBsb2NhbCBjb25zZW50IGJlZm9yZSBnb2luZyBvdXQgdG8gR29vZ2xlL0dpdEh1YlxyXG4gIGFwcC5nZXQoJy91bmljb24vYXBpL29hdXRoLzpwcm92aWRlci9zdGFydCcsIGFzeW5jIChyZXEscmVzKSA9PiB7XHJcbiAgICBjb25zdCBwcm92aWRlciA9IHByb3ZpZGVyQnlOYW1lKHJlcS5wYXJhbXMucHJvdmlkZXIpO1xyXG4gICAgaWYgKCFwcm92aWRlciB8fCAhcHJvdmlkZXIuY2xpZW50X2lkKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoJ3Byb3ZpZGVyX25vdF9jb25maWd1cmVkJyk7XHJcbiAgICBjb25zdCBzdGF0ZSA9IGI2NHVybChjcnlwdG8ucmFuZG9tQnl0ZXMoMTYpKTtcclxuICAgIGNvbnN0IHZlcmlmaWVyID0gbWFrZVZlcmlmaWVyKCk7XHJcbiAgICBjb25zdCBjaGFsbGVuZ2UgPSBtYWtlQ2hhbGxlbmdlKHZlcmlmaWVyKTtcclxuICAgIGNvbnN0IHJlZGlyZWN0VXJpID0gYCR7cmVxLnByb3RvY29sfTovLyR7cmVxLmdldCgnaG9zdCcpfS91bmljb24vYXBpL29hdXRoLyR7cmVxLnBhcmFtcy5wcm92aWRlcn0vY2FsbGJhY2tgO1xyXG4gICAgcGtjZVN0b3JlLnNldChzdGF0ZSwgeyB2ZXJpZmllciwgcHJvdmlkZXI6IHJlcS5wYXJhbXMucHJvdmlkZXIsIGV4cDogRGF0ZS5ub3coKStwa2NlRXhwaXJlTXMsIGNoYWxsZW5nZSwgcmVkaXJlY3RVcmkgfSk7XHJcbiAgICBjb25zdCBodG1sID0gYDwhZG9jdHlwZSBodG1sPjxodG1sPjxoZWFkPjxtZXRhIGNoYXJzZXQ9J3V0Zi04Jz48dGl0bGU+Q29udGludWUgd2l0aCAke3JlcS5wYXJhbXMucHJvdmlkZXJ9PC90aXRsZT5cclxuICAgICAgPHN0eWxlPmJvZHl7Zm9udC1mYW1pbHk6c3lzdGVtLXVpLFNlZ29lIFVJLFJvYm90byxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtiYWNrZ3JvdW5kOiNmOGZhZmM7Y29sb3I6IzBmMTcyYTttYXJnaW46MH1cclxuICAgICAgLndyYXB7bWF4LXdpZHRoOjU2MHB4O21hcmdpbjoxMHZoIGF1dG87YmFja2dyb3VuZDojZmZmO2JvcmRlcjoxcHggc29saWQgI2UyZThmMDtib3JkZXItcmFkaXVzOjhweDtib3gtc2hhZG93OjAgNnB4IDIwcHggcmdiYSgwLDAsMCwuMDYpfVxyXG4gICAgICAuaGR7cGFkZGluZzoyMHB4IDI0cHg7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2UyZThmMDtkaXNwbGF5OmZsZXg7Z2FwOjhweDthbGlnbi1pdGVtczpjZW50ZXJ9XHJcbiAgICAgIC5iZHtwYWRkaW5nOjI0cHh9XHJcbiAgICAgIC5idG57ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzoxMHB4IDE2cHg7Ym9yZGVyLXJhZGl1czo2cHg7dGV4dC1kZWNvcmF0aW9uOm5vbmV9XHJcbiAgICAgIC5wcml7YmFja2dyb3VuZDojMDA0YjhkO2NvbG9yOiNmZmZ9XHJcbiAgICAgIC5zZWN7YmFja2dyb3VuZDojZTJlOGYwO2NvbG9yOiMwZjE3MmE7bWFyZ2luLWxlZnQ6OHB4fVxyXG4gICAgICAubXV0ZWR7Y29sb3I6IzQ3NTU2OTtmb250LXNpemU6MTRweH1cclxuICAgICAgPC9zdHlsZT48L2hlYWQ+PGJvZHk+XHJcbiAgICAgIDxkaXYgY2xhc3M9J3dyYXAnPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9J2hkJz48c3Ryb25nPlVuaWNvbjwvc3Ryb25nPjxzcGFuIGNsYXNzPSdtdXRlZCc+U2lnbiBpbiB3aXRoICR7cmVxLnBhcmFtcy5wcm92aWRlcn08L3NwYW4+PC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz0nYmQnPlxyXG4gICAgICAgICAgPHAgY2xhc3M9J211dGVkJz5Zb3Ugd2lsbCBiZSByZWRpcmVjdGVkIHRvICR7cmVxLnBhcmFtcy5wcm92aWRlcn0gdG8gY29udGludWUuPC9wPlxyXG4gICAgICAgICAgPGRpdiBzdHlsZT0nbWFyZ2luLXRvcDoxNnB4Jz5cclxuICAgICAgICAgICAgPGEgY2xhc3M9J2J0biBwcmknIGhyZWY9Jy91bmljb24vYXBpL29hdXRoLyR7cmVxLnBhcmFtcy5wcm92aWRlcn0vY29udGludWU/c3RhdGU9JHtlbmNvZGVVUklDb21wb25lbnQoc3RhdGUpfSc+Q29udGludWU8L2E+XHJcbiAgICAgICAgICAgIDxhIGNsYXNzPSdidG4gc2VjJyBocmVmPScvdW5pY29uLyc+Q2FuY2VsPC9hPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8L2JvZHk+PC9odG1sPmA7XHJcbiAgICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCd0ZXh0L2h0bWwnKTtcclxuICAgIHJldHVybiByZXMuc2VuZChodG1sKTtcclxuICB9KTtcclxuXHJcbiAgYXBwLmdldCgnL3VuaWNvbi9hcGkvb2F1dGgvOnByb3ZpZGVyL2NvbnRpbnVlJywgKHJlcSxyZXMpID0+IHtcclxuICAgIGNvbnN0IGVudHJ5ID0gcGtjZVN0b3JlLmdldChyZXEucXVlcnkuc3RhdGUpO1xyXG4gICAgY29uc3QgcHJvdmlkZXIgPSBwcm92aWRlckJ5TmFtZShyZXEucGFyYW1zLnByb3ZpZGVyKTtcclxuICAgIGlmICghZW50cnkgfHwgIXByb3ZpZGVyKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoJ2ludmFsaWRfc3RhdGUnKTtcclxuICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xyXG4gICAgICBjbGllbnRfaWQ6IHByb3ZpZGVyLmNsaWVudF9pZCxcclxuICAgICAgcmVzcG9uc2VfdHlwZTogJ2NvZGUnLFxyXG4gICAgICByZWRpcmVjdF91cmk6IGVudHJ5LnJlZGlyZWN0VXJpLFxyXG4gICAgICBzY29wZTogcHJvdmlkZXIuc2NvcGUsXHJcbiAgICAgIGNvZGVfY2hhbGxlbmdlOiBlbnRyeS5jaGFsbGVuZ2UsXHJcbiAgICAgIGNvZGVfY2hhbGxlbmdlX21ldGhvZDogJ1MyNTYnLFxyXG4gICAgICBhY2Nlc3NfdHlwZTogJ29mZmxpbmUnLFxyXG4gICAgICBzdGF0ZTogcmVxLnF1ZXJ5LnN0YXRlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXMucmVkaXJlY3QoYCR7cHJvdmlkZXIuYXV0aH0/JHtwYXJhbXMudG9TdHJpbmcoKX1gKTtcclxuICB9KTtcclxuXHJcbiAgYXBwLmdldCgnL3VuaWNvbi9hcGkvb2F1dGgvOnByb3ZpZGVyL2NhbGxiYWNrJywgYXN5bmMgKHJlcSxyZXMpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHByb3ZpZGVyID0gcHJvdmlkZXJCeU5hbWUocmVxLnBhcmFtcy5wcm92aWRlcik7XHJcbiAgICAgIGlmICghcHJvdmlkZXIpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCgndW5rbm93bl9wcm92aWRlcicpO1xyXG4gICAgICBjb25zdCB7IGNvZGUsIHN0YXRlIH0gPSByZXEucXVlcnkgfHwge307XHJcbiAgICAgIGNvbnN0IGVudHJ5ID0gcGtjZVN0b3JlLmdldChzdGF0ZSk7IHBrY2VTdG9yZS5kZWxldGUoc3RhdGUpO1xyXG4gICAgICBpZiAoIWVudHJ5IHx8IGVudHJ5LmV4cCA8IERhdGUubm93KCkpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCgnaW52YWxpZF9zdGF0ZScpO1xyXG4gICAgICBpZiAoZW50cnkucHJvdmlkZXIgIT09IHJlcS5wYXJhbXMucHJvdmlkZXIpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCgnc3RhdGVfcHJvdmlkZXJfbWlzbWF0Y2gnKTtcclxuICAgICAgY29uc3QgcmVkaXJlY3RVcmkgPSBgJHtyZXEucHJvdG9jb2x9Oi8vJHtyZXEuZ2V0KCdob3N0Jyl9L3VuaWNvbi9hcGkvb2F1dGgvJHtyZXEucGFyYW1zLnByb3ZpZGVyfS9jYWxsYmFja2A7XHJcbiAgICAgIC8vIEV4Y2hhbmdlIGNvZGVcclxuICAgICAgY29uc3QgYXhpb3MgPSByZXF1aXJlKCdheGlvcycpO1xyXG4gICAgICBsZXQgdG9rZW5SZXNwO1xyXG4gICAgICBpZiAocHJvdmlkZXIgPT09IEdJVEhVQikge1xyXG4gICAgICAgIHRva2VuUmVzcCA9IGF3YWl0IGF4aW9zLnBvc3QocHJvdmlkZXIudG9rZW4sIG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xyXG4gICAgICAgICAgY2xpZW50X2lkOiBwcm92aWRlci5jbGllbnRfaWQsXHJcbiAgICAgICAgICBjbGllbnRfc2VjcmV0OiBwcm92aWRlci5jbGllbnRfc2VjcmV0LFxyXG4gICAgICAgICAgY29kZTogY29kZSxcclxuICAgICAgICAgIHJlZGlyZWN0X3VyaTogcmVkaXJlY3RVcmksXHJcbiAgICAgICAgICBncmFudF90eXBlOiAnYXV0aG9yaXphdGlvbl9jb2RlJ1xyXG4gICAgICAgIH0pLCB7IGhlYWRlcnM6IHsgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicgfSB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0b2tlblJlc3AgPSBhd2FpdCBheGlvcy5wb3N0KHByb3ZpZGVyLnRva2VuLCBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcclxuICAgICAgICAgIGNsaWVudF9pZDogcHJvdmlkZXIuY2xpZW50X2lkLFxyXG4gICAgICAgICAgY2xpZW50X3NlY3JldDogcHJvdmlkZXIuY2xpZW50X3NlY3JldCxcclxuICAgICAgICAgIGNvZGU6IGNvZGUsXHJcbiAgICAgICAgICByZWRpcmVjdF91cmk6IHJlZGlyZWN0VXJpLFxyXG4gICAgICAgICAgZ3JhbnRfdHlwZTogJ2F1dGhvcml6YXRpb25fY29kZScsXHJcbiAgICAgICAgICBjb2RlX3ZlcmlmaWVyOiBlbnRyeS52ZXJpZmllclxyXG4gICAgICAgIH0pLCB7IGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnIH0gfSk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSB0b2tlblJlc3AuZGF0YS5hY2Nlc3NfdG9rZW47XHJcbiAgICAgIGlmICghYWNjZXNzVG9rZW4pIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCgndG9rZW5fZXhjaGFuZ2VfZmFpbGVkJyk7XHJcbiAgICAgIC8vIEZldGNoIHVzZXIgaW5mb1xyXG4gICAgICBsZXQgZW1haWwgPSBudWxsOyBsZXQgYXZhdGFyID0gbnVsbDsgbGV0IHByb3ZpZGVyTmFtZSA9IChwcm92aWRlcj09PUdPT0dMRT8nZ29vZ2xlJzonZ2l0aHViJyk7XHJcbiAgICAgIGlmIChwcm92aWRlciA9PT0gR09PR0xFKSB7XHJcbiAgICAgICAgY29uc3QgdSA9IGF3YWl0IGF4aW9zLmdldChwcm92aWRlci51c2VyaW5mbywgeyBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gIH0gfSk7XHJcbiAgICAgICAgZW1haWwgPSB1LmRhdGE/LmVtYWlsOyBhdmF0YXIgPSB1LmRhdGE/LnBpY3R1cmUgfHwgbnVsbDtcclxuICAgICAgfSBlbHNlIGlmIChwcm92aWRlciA9PT0gR0lUSFVCKSB7XHJcbiAgICAgICAgY29uc3QgdSA9IGF3YWl0IGF4aW9zLmdldChwcm92aWRlci51c2VyaW5mbywgeyBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gLCAnVXNlci1BZ2VudCc6ICd1bmljb24nIH0gfSk7XHJcbiAgICAgICAgZW1haWwgPSB1LmRhdGE/LmVtYWlsOyBhdmF0YXIgPSB1LmRhdGE/LmF2YXRhcl91cmwgfHwgbnVsbDtcclxuICAgICAgICBpZiAoIWVtYWlsKSB7XHJcbiAgICAgICAgICBjb25zdCBlID0gYXdhaXQgYXhpb3MuZ2V0KHByb3ZpZGVyLmVtYWlscywgeyBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gLCAnVXNlci1BZ2VudCc6ICd1bmljb24nIH0gfSk7XHJcbiAgICAgICAgICBlbWFpbCA9IChlLmRhdGEgfHwgW10pLmZpbmQoeCA9PiB4LnByaW1hcnkpPy5lbWFpbCB8fCAoZS5kYXRhWzBdPy5lbWFpbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmICghZW1haWwpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCgnZW1haWxfbm90X2ZvdW5kJyk7XHJcbiAgICAgIC8vIFByb3Zpc2lvbiB1c2VyIGFuZCBlbWl0IGxvY2FsIGNvZGUgZm9yIGNsaWVudFxyXG4gICAgICBpZiAoREIpIHtcclxuICAgICAgICBjb25zdCBkYmkgPSAoYXdhaXQgYnVpbGRTdGF0ZSgpKS5kYjtcclxuICAgICAgICBsZXQgdSA9IGF3YWl0IGRiaS5nZXRVc2VyQnlFbWFpbChlbWFpbCk7XHJcbiAgICAgICAgaWYgKCF1KSB7XHJcbiAgICAgICAgICBjb25zdCB7IHY0OiB1dWlkdjQgfSA9IHJlcXVpcmUoJ3V1aWQnKTtcclxuICAgICAgICAgIGF3YWl0IGRiaS5jcmVhdGVVc2VyKHsgaWQ6IHV1aWR2NCgpLCBlbWFpbCwgcGFzc3dvcmRfaGFzaDogJ29hdXRoJywgc2FsdDogJ29hdXRoJywgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSk7XHJcbiAgICAgICAgICB1ID0gYXdhaXQgZGJpLmdldFVzZXJCeUVtYWlsKGVtYWlsKTtcclxuICAgICAgICAgIGF3YWl0IGRiaS5hc3NpZ25Sb2xlVG9Vc2VyKHUuaWQsICdkZXZlbG9wZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGF2YXRhcikgYXdhaXQgZGJpLnNldFVzZXJQcmVmKHUuaWQgfHwgKGF3YWl0IGRiaS5nZXRVc2VyQnlFbWFpbChlbWFpbCkpLmlkLCAnYXZhdGFyJywgYXZhdGFyKTtcclxuICAgICAgICBhd2FpdCBkYmkuc2V0VXNlclByZWYodS5pZCB8fCAoYXdhaXQgZGJpLmdldFVzZXJCeUVtYWlsKGVtYWlsKSkuaWQsICdwcm92aWRlcicsIHByb3ZpZGVyTmFtZSk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgbG9jYWxDb2RlID0gYCR7RGF0ZS5ub3coKX0tJHtjcnlwdG8ucmFuZG9tQnl0ZXMoNikudG9TdHJpbmcoJ2hleCcpfWA7XHJcbiAgICAgIG9hdXRoQ29kZXMuc2V0KGxvY2FsQ29kZSwgeyB1c2VyRW1haWw6IGVtYWlsLCBleHA6IERhdGUubm93KCkgKyA1ICogNjAgKiAxMDAwIH0pO1xyXG4gICAgICBjb25zdCBjbGllbnRSZWRpcmVjdCA9IGAke3JlcS5wcm90b2NvbH06Ly8ke3JlcS5nZXQoJ2hvc3QnKX0vdW5pY29uL2F1dGgvY2FsbGJhY2tgO1xyXG4gICAgICBjb25zdCBzZXAgPSBjbGllbnRSZWRpcmVjdC5pbmNsdWRlcygnPycpID8gJyYnIDogJz8nO1xyXG4gICAgICByZXR1cm4gcmVzLnJlZGlyZWN0KGAke2NsaWVudFJlZGlyZWN0fSR7c2VwfWNvZGU9JHtlbmNvZGVVUklDb21wb25lbnQobG9jYWxDb2RlKX0mcHJvdmlkZXI9JHtyZXEucGFyYW1zLnByb3ZpZGVyfWApO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoJ29hdXRoX2Vycm9yJyk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vIE9BdXRoMiBkZW1vIGVuZHBvaW50cyAobG9jYWwgb25seSkgd2l0aCBtaW5pbWFsIGNvbnNlbnQgKyBQS0NFLWxpa2Ugc3RhdGVcclxuICBjb25zdCBvYXV0aENvZGVzID0gbmV3IE1hcCgpOyAvLyBjb2RlIC0+IHsgdXNlckVtYWlsLCBleHAgfVxyXG4gIGFwcC5nZXQoJy91bmljb24vYXBpL29hdXRoL2F1dGhvcml6ZScsIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBjbGllbnRfaWQsIHJlZGlyZWN0X3VyaSwgc3RhdGUgfSA9IHJlcS5xdWVyeSB8fCB7fTtcclxuICAgIGNvbnN0IG9rQ2xpZW50ID0gY2xpZW50X2lkID09PSAnZGVtbyc7XHJcbiAgICBjb25zdCBva1JlZGlyZWN0ID0gdHlwZW9mIHJlZGlyZWN0X3VyaSA9PT0gJ3N0cmluZycgJiYgL1xcL3VuaWNvblxcL2F1dGhcXC9jYWxsYmFjayQvLnRlc3QocmVkaXJlY3RfdXJpKTtcclxuICAgIGlmICghb2tDbGllbnQgfHwgIW9rUmVkaXJlY3QpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCgnaW52YWxpZF9jbGllbnQgb3IgaW52YWxpZF9yZWRpcmVjdCcpO1xyXG4gICAgLy8gTWluaW1hbCBjb25zZW50IEhUTUxcclxuICAgIGNvbnN0IGh0bWwgPSBgPCFkb2N0eXBlIGh0bWw+PGh0bWw+PGhlYWQ+PG1ldGEgY2hhcnNldD1cInV0Zi04XCI+PHRpdGxlPkF1dGhvcml6ZSDigJMgRGVtbzwvdGl0bGU+XHJcbiAgICAgIDxzdHlsZT5ib2R5e2ZvbnQtZmFtaWx5OnN5c3RlbS11aSxTZWdvZSBVSSxSb2JvdG8sSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7bWFyZ2luOjA7cGFkZGluZzowO2JhY2tncm91bmQ6I2Y4ZmFmYztjb2xvcjojMGYxNzJhfVxyXG4gICAgICAud3JhcHttYXgtd2lkdGg6NTQwcHg7bWFyZ2luOjEwdmggYXV0bztiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyOjFweCBzb2xpZCAjZTJlOGYwO2JvcmRlci1yYWRpdXM6OHB4O2JveC1zaGFkb3c6MCA2cHggMjBweCByZ2JhKDAsMCwwLC4wNil9XHJcbiAgICAgIC5oZHtwYWRkaW5nOjIwcHggMjRweDtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZTJlOGYwO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjhweH1cclxuICAgICAgLmJke3BhZGRpbmc6MjRweH1cclxuICAgICAgLmJ0bntkaXNwbGF5OmlubGluZS1ibG9jaztwYWRkaW5nOjEwcHggMTZweDtib3JkZXItcmFkaXVzOjZweDt0ZXh0LWRlY29yYXRpb246bm9uZX1cclxuICAgICAgLnByaXtiYWNrZ3JvdW5kOiMwMDRiOGQ7Y29sb3I6I2ZmZn1cclxuICAgICAgLnNlY3tiYWNrZ3JvdW5kOiNlMmU4ZjA7Y29sb3I6IzBmMTcyYTttYXJnaW4tbGVmdDo4cHh9XHJcbiAgICAgIC5tdXRlZHtjb2xvcjojNDc1NTY5O2ZvbnQtc2l6ZToxNHB4fVxyXG4gICAgICA8L3N0eWxlPjwvaGVhZD48Ym9keT5cclxuICAgICAgPGRpdiBjbGFzcz1cIndyYXBcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiaGRcIj48c3Ryb25nPlVuaWNvbiBEZW1vIE9BdXRoPC9zdHJvbmc+PC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImJkXCI+XHJcbiAgICAgICAgICA8cCBjbGFzcz1cIm11dGVkXCI+VGhlIGFwcGxpY2F0aW9uIDxzdHJvbmc+VW5pY29uPC9zdHJvbmc+IGlzIHJlcXVlc3RpbmcgYWNjZXNzIHRvIHlvdXIgZGVtbyBhY2NvdW50IDxzdHJvbmc+ZGVtb0B1bmljb24ubG9jYWw8L3N0cm9uZz4uPC9wPlxyXG4gICAgICAgICAgPHVsIGNsYXNzPVwibXV0ZWRcIj48bGk+UmVhZCBwcm9maWxlIChlbWFpbCk8L2xpPjxsaT5CYXNpYyBhY2Nlc3M8L2xpPjwvdWw+XHJcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luLXRvcDoxNnB4XCI+XHJcbiAgICAgICAgICAgIDxhIGNsYXNzPVwiYnRuIHByaVwiIGhyZWY9XCIvdW5pY29uL2FwaS9vYXV0aC9hdXRob3JpemUvZGVjaXNpb24/Y2xpZW50X2lkPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGNsaWVudF9pZCl9JnJlZGlyZWN0X3VyaT0ke2VuY29kZVVSSUNvbXBvbmVudChyZWRpcmVjdF91cmkpfSZzdGF0ZT0ke2VuY29kZVVSSUNvbXBvbmVudChzdGF0ZXx8JycpfSZjb25zZW50PWFsbG93XCI+QWxsb3c8L2E+XHJcbiAgICAgICAgICAgIDxhIGNsYXNzPVwiYnRuIHNlY1wiIGhyZWY9XCIvdW5pY29uL2FwaS9vYXV0aC9hdXRob3JpemUvZGVjaXNpb24/Y2xpZW50X2lkPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGNsaWVudF9pZCl9JnJlZGlyZWN0X3VyaT0ke2VuY29kZVVSSUNvbXBvbmVudChyZWRpcmVjdF91cmkpfSZzdGF0ZT0ke2VuY29kZVVSSUNvbXBvbmVudChzdGF0ZXx8JycpfSZjb25zZW50PWRlbnlcIj5DYW5jZWw8L2E+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDwvYm9keT48L2h0bWw+YDtcclxuICAgIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsJ3RleHQvaHRtbCcpO1xyXG4gICAgcmV0dXJuIHJlcy5zZW5kKGh0bWwpO1xyXG4gIH0pO1xyXG4gIGFwcC5nZXQoJy91bmljb24vYXBpL29hdXRoL2F1dGhvcml6ZS9kZWNpc2lvbicsIChyZXEscmVzKT0+e1xyXG4gICAgY29uc3QgeyBjbGllbnRfaWQsIHJlZGlyZWN0X3VyaSwgc3RhdGUsIGNvbnNlbnQgfSA9IHJlcS5xdWVyeXx8e307XHJcbiAgICBjb25zdCBva0NsaWVudCA9IGNsaWVudF9pZCA9PT0gJ2RlbW8nO1xyXG4gICAgY29uc3Qgb2tSZWRpcmVjdCA9IHR5cGVvZiByZWRpcmVjdF91cmkgPT09ICdzdHJpbmcnICYmIC9cXC91bmljb25cXC9hdXRoXFwvY2FsbGJhY2skLy50ZXN0KHJlZGlyZWN0X3VyaSk7XHJcbiAgICBpZiAoIW9rQ2xpZW50IHx8ICFva1JlZGlyZWN0KSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoJ2ludmFsaWRfY2xpZW50IG9yIGludmFsaWRfcmVkaXJlY3QnKTtcclxuICAgIGNvbnN0IHNlcCA9IHJlZGlyZWN0X3VyaS5pbmNsdWRlcygnPycpID8gJyYnIDogJz8nO1xyXG4gICAgaWYgKGNvbnNlbnQgIT09ICdhbGxvdycpIHJldHVybiByZXMucmVkaXJlY3QoYCR7cmVkaXJlY3RfdXJpfSR7c2VwfWVycm9yPWFjY2Vzc19kZW5pZWQke3N0YXRlP2Amc3RhdGU9JHtlbmNvZGVVUklDb21wb25lbnQoc3RhdGUpfWA6Jyd9YCk7XHJcbiAgICBjb25zdCBjb2RlID0gYCR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKX1gO1xyXG4gICAgb2F1dGhDb2Rlcy5zZXQoY29kZSwgeyB1c2VyRW1haWw6ICdkZW1vQHVuaWNvbi5sb2NhbCcsIGV4cDogRGF0ZS5ub3coKSArIDUgKiA2MCAqIDEwMDAgfSk7XHJcbiAgICByZXR1cm4gcmVzLnJlZGlyZWN0KGAke3JlZGlyZWN0X3VyaX0ke3NlcH1jb2RlPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGNvZGUpfSR7c3RhdGUgPyBgJnN0YXRlPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHN0YXRlKX1gIDogJyd9YCk7XHJcbiAgfSk7XHJcbiAgYXBwLnBvc3QoJy91bmljb24vYXBpL29hdXRoL3Rva2VuJywgZXhwcmVzcy5qc29uKCksIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBjb2RlLCBjbGllbnRfaWQgfSA9IHJlcS5ib2R5IHx8IHt9O1xyXG4gICAgICBpZiAoY2xpZW50X2lkICE9PSAnZGVtbycgfHwgIW9hdXRoQ29kZXMuaGFzKGNvZGUpKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ2ludmFsaWRfZ3JhbnQnIH0pO1xyXG4gICAgICBjb25zdCBlbnRyeSA9IG9hdXRoQ29kZXMuZ2V0KGNvZGUpOyBvYXV0aENvZGVzLmRlbGV0ZShjb2RlKTtcclxuICAgICAgaWYgKCFlbnRyeSB8fCBlbnRyeS5leHAgPCBEYXRlLm5vdygpKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ2V4cGlyZWRfY29kZScgfSk7XHJcbiAgICAgIC8vIGVuc3VyZSB1c2VyIGV4aXN0c1xyXG4gICAgICBpZiAoREIpIHtcclxuICAgICAgICBjb25zdCBkYiA9IChhd2FpdCBidWlsZFN0YXRlKCkpLmRiOyAvLyByZXVzZSBpbml0IHRvIGhhdmUgZGJcclxuICAgICAgICBsZXQgdSA9IGF3YWl0IGRiLmdldFVzZXJCeUVtYWlsKGVudHJ5LnVzZXJFbWFpbCk7XHJcbiAgICAgICAgaWYgKCF1KSB7XHJcbiAgICAgICAgICBjb25zdCB7IHY0OiB1dWlkdjQgfSA9IHJlcXVpcmUoJ3V1aWQnKTtcclxuICAgICAgICAgIGF3YWl0IGRiLmNyZWF0ZVVzZXIoeyBpZDogdXVpZHY0KCksIGVtYWlsOiBlbnRyeS51c2VyRW1haWwsIHBhc3N3b3JkX2hhc2g6ICdvYXV0aCcsIHNhbHQ6ICdvYXV0aCcsIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH0pO1xyXG4gICAgICAgICAgdSA9IGF3YWl0IGRiLmdldFVzZXJCeUVtYWlsKGVudHJ5LnVzZXJFbWFpbCk7XHJcbiAgICAgICAgICBhd2FpdCBkYi5hc3NpZ25Sb2xlVG9Vc2VyKHUuaWQsICdkZXZlbG9wZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgeyBpc3N1ZUpXVCB9ID0gcmVxdWlyZSgnLi9hdXRoL21pZGRsZXdhcmUnKTtcclxuICAgICAgY29uc3QgdG9rZW4gPSBpc3N1ZUpXVCh7IGlkOiBlbnRyeS51c2VyRW1haWwsIGVtYWlsOiBlbnRyeS51c2VyRW1haWwsIHJvbGVzOiBbJ2RldmVsb3BlciddIH0pO1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oeyBhY2Nlc3NfdG9rZW46IHRva2VuLCB0b2tlbl90eXBlOiAnQmVhcmVyJywgZXhwaXJlc19pbjogOCAqIDYwICogNjAgfSk7XHJcbiAgICB9IGNhdGNoIChlKSB7IHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnc2VydmVyX2Vycm9yJyB9KTsgfVxyXG4gIH0pO1xyXG5cclxuICBhcHAudXNlKCcvdW5pY29uL2FwaScsIGFwaVJvdXRlcik7XHJcblxyXG4gIGFwcC51c2UoJy91bmljb24nLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAncHVibGljJykpKTtcclxuXHJcbiAgYXBwLmdldCgnL3VuaWNvbi8qJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBmaWxlID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJ3B1YmxpYycsICdpbmRleC5odG1sJyk7XHJcbiAgICAgIGxldCBodG1sID0gZnMucmVhZEZpbGVTeW5jKGZpbGUsICd1dGY4Jyk7XHJcbiAgICAgIC8vIGluamVjdCBhIHRpbnkgaW5saW5lIHNjcmlwdCB3aXRoIGEgbm9uY2UgKGZvciBDU1AgdmVyaWZpY2F0aW9uIGluIHByb2QpXHJcbiAgICAgIGNvbnN0IG5vbmNlID0gY3J5cHRvLnJhbmRvbUJ5dGVzKDE2KS50b1N0cmluZygnYmFzZTY0Jyk7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSAocmVzLmdldEhlYWRlcignQ29udGVudC1TZWN1cml0eS1Qb2xpY3knKXx8JycpLnRvU3RyaW5nKCk7XHJcbiAgICAgIGNvbnN0IHVwZGF0ZWQgPSBjdXJyZW50LnJlcGxhY2UoXCJzY3JpcHQtc3JjICdzZWxmJ1wiLCBgc2NyaXB0LXNyYyAnc2VsZicgJ25vbmNlLSR7bm9uY2V9JyAnc3RyaWN0LWR5bmFtaWMnYClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShcInN0eWxlLXNyYyAnc2VsZicgJ3Vuc2FmZS1pbmxpbmUnXCIsIFwic3R5bGUtc3JjICdzZWxmJ1wiKTtcclxuICAgICAgcmVzLnNldEhlYWRlcignQ29udGVudC1TZWN1cml0eS1Qb2xpY3knLCB1cGRhdGVkKTtcclxuICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgnPC9oZWFkPicsIGA8c2NyaXB0IG5vbmNlPVwiJHtub25jZX1cIj53aW5kb3cuX19jc3A9MTwvc2NyaXB0PjwvaGVhZD5gKTtcclxuICAgICAgcmVzLnNldEhlYWRlcignQ29udGVudC1UeXBlJywndGV4dC9odG1sJyk7XHJcbiAgICAgIHJlcy5zZW5kKGh0bWwpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICByZXMuc2VuZEZpbGUocGF0aC5qb2luKF9fZGlybmFtZSwgJ3B1YmxpYycsICdpbmRleC5odG1sJykpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBhcHAuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICByZXMuanNvbih7XHJcbiAgICAgIG1lc3NhZ2U6ICdVbml2ZXJzYWwgUHJvdG9jb2wgVGVzdCBDbGllbnQgQmFja2VuZCcsXHJcbiAgICAgIHZlcnNpb246ICcxLjAuMCcsXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIGFwcDtcclxufTtcclxuXHJcbmNvbnN0IGNyZWF0ZVdlYlNvY2tldFNlcnZlciA9IChjb25uZWN0ZWRDbGllbnRzLCBjdXN0b21Qb3J0ID0gV1NfUE9SVCkgPT4ge1xyXG4gIGNvbnN0IHdzU2VydmVyID0gbmV3IFdlYlNvY2tldC5TZXJ2ZXIoe1xyXG4gICAgcG9ydDogY3VzdG9tUG9ydCxcclxuICAgIGhvc3Q6ICcwLjAuMC4wJ1xyXG4gIH0pO1xyXG5cclxuICB3c1NlcnZlci5vbignY29ubmVjdGlvbicsIHdzID0+IHtcclxuICAgIGNvbm5lY3RlZENsaWVudHMuYWRkKHdzKTtcclxuXHJcbiAgICB3cy5vbignY2xvc2UnLCAoKSA9PiB7XHJcbiAgICAgIGNvbm5lY3RlZENsaWVudHMuZGVsZXRlKHdzKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHdzLm9uKCdlcnJvcicsIGVycm9yID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcignV2ViU29ja2V0IGVycm9yOicsIGVycm9yKTtcclxuICAgICAgY29ubmVjdGVkQ2xpZW50cy5kZWxldGUod3MpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgIHR5cGU6ICdjb25uZWN0aW9uX3N0YXR1cycsXHJcbiAgICAgIGRhdGE6IHsgc3RhdHVzOiAnY29ubmVjdGVkJywgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfVxyXG4gICAgfSkpO1xyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gd3NTZXJ2ZXI7XHJcbn07XHJcblxyXG5sZXQgX19SVU5OSU5HID0geyBzZXJ2ZXI6IG51bGwsIHdzU2VydmVyOiBudWxsIH07XHJcblxyXG5jb25zdCBzdGFydFNlcnZlcnMgPSBhc3luYyAoc3RhdGUpID0+IHtcclxuICAvLyBFbnN1cmUgb25seSBvbmUgaW5zdGFuY2UgaXMgcnVubmluZyAoaGVscHMgSmVzdCBzdWl0ZXMgcmV1c2luZyB0aGUgc2FtZSBwb3J0cylcclxuICBpZiAoX19SVU5OSU5HLnNlcnZlcikge1xyXG4gICAgdHJ5IHsgX19SVU5OSU5HLndzU2VydmVyICYmIF9fUlVOTklORy53c1NlcnZlci5jbG9zZSgpOyB9IGNhdGNoIHt9XHJcbiAgICB0cnkgeyBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4gX19SVU5OSU5HLnNlcnZlci5jbG9zZSgoKSA9PiByZXMobnVsbCkpKTsgfSBjYXRjaCB7fVxyXG4gICAgX19SVU5OSU5HID0geyBzZXJ2ZXI6IG51bGwsIHdzU2VydmVyOiBudWxsIH07XHJcbiAgfVxyXG4gIGxldCByZXNvbHZlZFN0YXRlID0gc3RhdGU7XHJcbiAgaWYgKCFyZXNvbHZlZFN0YXRlKSB7XHJcbiAgICByZXNvbHZlZFN0YXRlID0gYXdhaXQgYnVpbGRTdGF0ZSgpO1xyXG4gIH0gZWxzZSBpZiAodHlwZW9mIHJlc29sdmVkU3RhdGUudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgcmVzb2x2ZWRTdGF0ZSA9IGF3YWl0IHJlc29sdmVkU3RhdGU7XHJcbiAgfVxyXG4gIGNvbnN0IGFwcCA9IGNyZWF0ZUFwcChyZXNvbHZlZFN0YXRlKTtcclxuICBjb25zdCBodHRwUG9ydCA9IE51bWJlcihwcm9jZXNzLmVudi5QT1JUKSB8fCBQT1JUO1xyXG4gIGNvbnN0IHdzUG9ydCA9IE51bWJlcihwcm9jZXNzLmVudi5XU19QT1JUKSB8fCBXU19QT1JUO1xyXG4gIGNvbnN0IHdzU2VydmVyID0gY3JlYXRlV2ViU29ja2V0U2VydmVyKHJlc29sdmVkU3RhdGUuY29ubmVjdGVkQ2xpZW50cywgd3NQb3J0KTtcclxuICBjb25zdCBzZXJ2ZXIgPSBhcHAubGlzdGVuKGh0dHBQb3J0LCAnMC4wLjAuMCcsICgpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGDwn5qAIEhUVFAgU2VydmVyIHJ1bm5pbmcgb24gcG9ydCAke2h0dHBQb3J0fWApO1xyXG4gICAgY29uc29sZS5sb2coYPCfk6EgV2ViU29ja2V0IFNlcnZlciBydW5uaW5nIG9uIHBvcnQgJHt3c1BvcnR9YCk7XHJcbiAgICBjb25zb2xlLmxvZyhg8J+MkCBBUEkgYXZhaWxhYmxlIGF0IGh0dHA6Ly9sb2NhbGhvc3Q6JHtodHRwUG9ydH0vdW5pY29uL2FwaWApO1xyXG4gIH0pO1xyXG5cclxuICBjb25zdCBzaHV0ZG93biA9ICgpID0+IHtcclxuICAgIHdzU2VydmVyLmNsb3NlKCk7XHJcbiAgICBzZXJ2ZXIuY2xvc2UoKCkgPT4gcHJvY2Vzcy5leGl0KDApKTtcclxuICB9O1xyXG5cclxuICBwcm9jZXNzLm9uKCdTSUdURVJNJywgc2h1dGRvd24pO1xyXG4gIHByb2Nlc3Mub24oJ1NJR0lOVCcsIHNodXRkb3duKTtcclxuXHJcbiAgX19SVU5OSU5HID0geyBzZXJ2ZXIsIHdzU2VydmVyIH07XHJcbiAgcmV0dXJuIHsgYXBwLCBzZXJ2ZXIsIHdzU2VydmVyLCBzdGF0ZSB9O1xyXG59O1xyXG5cclxuaWYgKHJlcXVpcmUubWFpbiA9PT0gbW9kdWxlKSB7XHJcbiAgc3RhcnRTZXJ2ZXJzKCk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIGNyZWF0ZUFwcCxcclxuICBjcmVhdGVXZWJTb2NrZXRTZXJ2ZXIsXHJcbiAgc3RhcnRTZXJ2ZXJzLFxyXG4gIGJ1aWxkU3RhdGUsXHJcbiAgcGFyc2VBbGxvd2VkT3JpZ2luc1xyXG59O1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNQyxJQUFJLEdBQUdELE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDNUIsTUFBTUUsU0FBUyxHQUFHRixPQUFPLENBQUMsSUFBSSxDQUFDO0FBQy9CLE1BQU07RUFBRUcsRUFBRSxFQUFFQztBQUFPLENBQUMsR0FBR0osT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUN0QyxNQUFNSyxJQUFJLEdBQUdMLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDNUIsTUFBTU0sRUFBRSxHQUFHTixPQUFPLENBQUMsSUFBSSxDQUFDO0FBQ3hCLE1BQU1PLE1BQU0sR0FBR1AsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUNoQyxNQUFNUSxNQUFNLEdBQUdSLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDaEMsTUFBTVMsbUJBQW1CLEdBQUdULE9B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